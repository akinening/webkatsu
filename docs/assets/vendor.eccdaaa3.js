function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=S(i)?s(i):r(i);if(o)for(const t in o)e[t]=o[t]}return e}return S(t)||C(t)?t:void 0}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(C(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":_(t)||C(t)&&(t.toString===D||!T(t.toString))?JSON.stringify(t,c,2):String(t),c=(t,e)=>e&&e.__v_isRef?c(t,e.value):E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!C(e)||_(e)||k(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===x(t),I=t=>"[object Set]"===x(t),T=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,C=t=>null!==t&&"object"==typeof t,N=t=>C(t)&&T(t.then)&&T(t.catch),D=Object.prototype.toString,x=t=>D.call(t),k=t=>"[object Object]"===x(t),R=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},P=/-(\w)/g,F=L((t=>t.replace(P,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,V=L((t=>t.replace(M,"-$1").toLowerCase())),U=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=L((t=>t?`on${U(t)}`:"")),q=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let G;const H=[];class W{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&G&&(this.parent=G,this.index=(G.scopes||(G.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(H.push(this),G=this)}off(){this.active&&(H.pop(),G=H[H.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const Q=t=>{const e=new Set(t);return e.w=0,e.n=0,e},$=t=>(t.w&Z)>0,Y=t=>(t.n&Z)>0,X=new WeakMap;let J=0,Z=1;const tt=[];let et;const nt=Symbol(""),rt=Symbol("");class it{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||G)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!tt.includes(this))try{return tt.push(et=this),at.push(st),st=!0,Z=1<<++J,J<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Z})(this):ot(this),this.fn()}finally{J<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];$(i)&&!Y(i)?i.delete(t):e[n++]=i,i.w&=~Z,i.n&=~Z}e.length=n}})(this),Z=1<<--J,ct(),tt.pop();const t=tt.length;et=t>0?tt[t-1]:void 0}}stop(){this.active&&(ot(this),this.onStop&&this.onStop(),this.active=!1)}}function ot(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let st=!0;const at=[];function ut(){at.push(st),st=!1}function ct(){const t=at.pop();st=void 0===t||t}function lt(t,e,n){if(!ht())return;let r=X.get(t);r||X.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Q()),ft(i)}function ht(){return st&&void 0!==et}function ft(t,e){let n=!1;J<=30?Y(t)||(t.n|=Z,n=!$(t)):n=!t.has(et),n&&(t.add(et),et.deps.push(t))}function pt(t,e,n,r,i,o){const s=X.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":_(t)?R(n)&&a.push(s.get("length")):(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"delete":_(t)||(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"set":E(t)&&a.push(s.get(nt))}if(1===a.length)a[0]&&dt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);dt(Q(t))}}function dt(t,e){for(const n of _(t)?t:[...t])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const vt=t("__proto__,__v_isRef,__isVue"),yt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),gt=Et(),mt=Et(!1,!0),bt=Et(!0),wt=_t();function _t(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ae(this);for(let e=0,i=this.length;e<i;e++)lt(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(ae)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ut();const n=ae(this)[e].apply(this,t);return ct(),n}})),t}function Et(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Zt:Jt:e?Xt:Yt).get(n))return n;const o=_(n);if(!t&&o&&w(wt,r))return Reflect.get(wt,r,i);const s=Reflect.get(n,r,i);if(A(r)?yt.has(r):vt(r))return s;if(t||lt(n,0,r),e)return s;if(fe(s)){return!o||!R(r)?s.value:s}return C(s)?t?ne(s):ee(s):s}}function It(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=ae(r),o=ae(o),!_(e)&&fe(o)&&!fe(r)))return o.value=r,!0;const s=_(e)&&R(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===ae(i)&&(s?q(r,o)&&pt(e,"set",n,r):pt(e,"add",n,r)),a}}const Tt={get:gt,set:It(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&pt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&yt.has(e)||lt(t,0,e),n},ownKeys:function(t){return lt(t,0,_(t)?"length":nt),Reflect.ownKeys(t)}},St={get:bt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},At=g({},Tt,{get:mt,set:It(!0)}),Ct=t=>C(t)?ee(t):t,Nt=t=>C(t)?ne(t):t,Dt=t=>t,xt=t=>Reflect.getPrototypeOf(t);function kt(t,e,n=!1,r=!1){const i=ae(t=t.__v_raw),o=ae(e);e!==o&&!n&&lt(i,0,e),!n&&lt(i,0,o);const{has:s}=xt(i),a=r?Dt:n?Nt:Ct;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Rt(t,e=!1){const n=this.__v_raw,r=ae(n),i=ae(t);return t!==i&&!e&&lt(r,0,t),!e&&lt(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Ot(t,e=!1){return t=t.__v_raw,!e&&lt(ae(t),0,nt),Reflect.get(t,"size",t)}function Lt(t){t=ae(t);const e=ae(this);return xt(e).has.call(e,t)||(e.add(t),pt(e,"add",t,t)),this}function Pt(t,e){e=ae(e);const n=ae(this),{has:r,get:i}=xt(n);let o=r.call(n,t);o||(t=ae(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&pt(n,"set",t,e):pt(n,"add",t,e),this}function Ft(t){const e=ae(this),{has:n,get:r}=xt(e);let i=n.call(e,t);i||(t=ae(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&pt(e,"delete",t,void 0),o}function Mt(){const t=ae(this),e=0!==t.size,n=t.clear();return e&&pt(t,"clear",void 0,void 0),n}function Vt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=ae(o),a=e?Dt:t?Nt:Ct;return!t&&lt(s,0,nt),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Ut(t,e,n){return function(...r){const i=this.__v_raw,o=ae(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?Dt:e?Nt:Ct;return!e&&lt(o,0,u?rt:nt),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function jt(t){return function(...e){return"delete"!==t&&this}}function qt(){const t={get(t){return kt(this,t)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!1)},e={get(t){return kt(this,t,!1,!0)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!0)},n={get(t){return kt(this,t,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!1)},r={get(t){return kt(this,t,!0,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Ut(i,!1,!1),n[i]=Ut(i,!0,!1),e[i]=Ut(i,!1,!0),r[i]=Ut(i,!0,!0)})),[t,n,e,r]}const[Bt,Kt,zt,Gt]=qt();function Ht(t,e){const n=e?t?Gt:zt:t?Kt:Bt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Wt={get:Ht(!1,!1)},Qt={get:Ht(!1,!0)},$t={get:Ht(!0,!1)},Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;function te(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>x(t).slice(8,-1))(t))}function ee(t){return t&&t.__v_isReadonly?t:re(t,!1,Tt,Wt,Yt)}function ne(t){return re(t,!0,St,$t,Jt)}function re(t,e,n,r,i){if(!C(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=te(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function ie(t){return oe(t)?ie(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function se(t){return ie(t)||oe(t)}function ae(t){const e=t&&t.__v_raw;return e?ae(e):t}function ue(t){return K(t,"__v_skip",!0),t}function ce(t){ht()&&((t=ae(t)).dep||(t.dep=Q()),ft(t.dep))}function le(t,e){(t=ae(t)).dep&&dt(t.dep)}const he=t=>C(t)?ee(t):t;function fe(t){return Boolean(t&&!0===t.__v_isRef)}class pe{constructor(t,e=!1){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ae(t),this._value=e?t:he(t)}get value(){return ce(this),this._value}set value(t){t=this._shallow?t:ae(t),q(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:he(t),le(this))}}function de(t,e=!1){return fe(t)?t:new pe(t,e)}function ve(t){return fe(t)?t.value:t}const ye={get:(t,e,n)=>ve(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return fe(i)&&!fe(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function ge(t){return ie(t)?t:new Proxy(t,ye)}class me{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new it(t,(()=>{this._dirty||(this._dirty=!0,le(this))})),this.__v_isReadonly=n}get value(){const t=ae(this);return ce(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function be(t,e){let n,r;T(t)?(n=t,r=f):(n=t.get,r=t.set);return new me(n,r,T(t)||!t.set)}Promise.resolve();function we(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(z))}let a,u=r[a=j(e)]||r[a=j(F(e))];!u&&o&&(u=r[a=j(V(e))]),u&&Or(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,Or(c,t,6,i)}}function _e(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!T(t)){const r=t=>{const n=_e(t,e,!0);n&&(a=!0,g(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):g(s,o),r.set(t,s),s):(r.set(t,null),null)}function Ee(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,V(e))||w(t,e))}let Ie=null,Te=null;function Se(t){const e=Ie;return Ie=t,Te=t&&t.type.__scopeId||null,e}function Ae(t){Te=t}function Ce(){Te=null}function Ne(t,e=Ie,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&tr(-1);const i=Se(e),o=t(...n);return Se(i),r._d&&tr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function De(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let g;const m=Se(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=pr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=pr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:xe(u)}let m=g;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&7&n&&(s&&e.some(y)&&(t=ke(t,s)),m=lr(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){Yn.length=0,Lr(b,t,1),g=cr(Qn)}return Se(m),g}const xe=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},ke=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Re(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ee(n,o))return!0}return!1}function Oe(t,e){if(Er){let n=Er.provides;const r=Er.parent&&Er.parent.provides;r===n&&(n=Er.provides=Object.create(r)),n[t]=e}else;}function Le(t,e,n=!1){const r=Er||Ie;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e.call(r.proxy):e}}const Pe=[Function,Array],Fe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pe,onEnter:Pe,onAfterEnter:Pe,onEnterCancelled:Pe,onBeforeLeave:Pe,onLeave:Pe,onAfterLeave:Pe,onLeaveCancelled:Pe,onBeforeAppear:Pe,onAppear:Pe,onAfterAppear:Pe,onAppearCancelled:Pe},setup(t,{slots:e}){const n=Ir(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ze((()=>{t.isMounted=!0})),nn((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&Be(e.default(),!0);if(!o||!o.length)return;const s=ae(t),{mode:a}=s,u=o[0];if(r.isLeaving)return Ue(u);const c=je(u);if(!c)return Ue(u);const l=Ve(c,s,r,n);qe(c,l);const h=n.subTree,f=h&&je(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==Qn&&(!ir(c,f)||p)){const t=Ve(f,s,r,n);if(qe(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},Ue(u);"in-out"===a&&c.type!==Qn&&(t.delayLeave=(t,e,n)=>{Me(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function Me(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ve(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=Me(n,t),_=(t,e)=>{t&&Or(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=v||a}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&ir(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||u,r=g||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>Ve(t,e,n,r)};return E}function Ue(t){if(Ge(t))return(t=lr(t)).children=null,t}function je(t){return Ge(t)?t.children?t.children[0]:void 0:t}function qe(t,e){6&t.shapeFlag&&t.component?qe(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Be(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Hn?(128&o.patchFlag&&r++,n=n.concat(Be(o.children,e))):(e||o.type!==Qn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Ke(t){return T(t)?{setup:t,name:t.name}:t}const ze=t=>!!t.type.__asyncLoader,Ge=t=>t.type.__isKeepAlive;function He(t,e){Qe(t,"a",e)}function We(t,e){Qe(t,"da",e)}function Qe(t,e,n=Er){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(Ye(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Ge(t.parent.vnode)&&$e(r,e,n,t),t=t.parent}}function $e(t,e,n,r){const i=Ye(e,t,r,!0);rn((()=>{m(r[e],i)}),n)}function Ye(t,e,n=Er,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ut(),Tr(n);const i=Or(e,n,t,r);return Sr(),ct(),i});return r?i.unshift(o):i.push(o),o}}const Xe=t=>(e,n=Er)=>(!Cr||"sp"===t)&&Ye(t,e,n),Je=Xe("bm"),Ze=Xe("m"),tn=Xe("bu"),en=Xe("u"),nn=Xe("bum"),rn=Xe("um"),on=Xe("sp"),sn=Xe("rtg"),an=Xe("rtc");function un(t,e=Er){Ye("ec",t,e)}let cn=!0;function ln(t){const e=pn(t),n=t.proxy,r=t.ctx;cn=!1,e.beforeCreate&&hn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:v,activated:y,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:E,render:I,renderTracked:S,renderTriggered:A,errorCaptured:N,serverPrefetch:D,expose:x,inheritAttrs:k,components:R,directives:O,filters:L}=e;if(c&&function(t,e,n=f,r=!1){_(t)&&(t=gn(t));for(const i in t){const n=t[i];let o;o=C(n)?"default"in n?Le(n.from||i,n.default,!0):Le(n.from||i):Le(n),fe(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const f in s){const t=s[f];T(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);C(e)&&(t.data=ee(e))}if(cn=!0,o)for(const _ in o){const t=o[_],e=be({get:T(t)?t.bind(n,n):T(t.get)?t.get.bind(n,n):f,set:!T(t)&&T(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)fn(a[f],r,n,f);if(u){const t=T(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Oe(e,t[e])}))}function P(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&hn(l,t,"c"),P(Je,h),P(Ze,p),P(tn,d),P(en,v),P(He,y),P(We,g),P(un,N),P(an,S),P(sn,A),P(nn,b),P(rn,E),P(on,D),_(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===f&&(t.render=I),null!=k&&(t.inheritAttrs=k),R&&(t.components=R),O&&(t.directives=O)}function hn(t,e,n){Or(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function fn(t,e,n,r){const i=r.includes(".")?si(n,r):()=>n[r];if(S(t)){const n=e[t];T(n)&&ri(i,n)}else if(T(t))ri(i,t.bind(n));else if(C(t))if(_(t))t.forEach((t=>fn(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&ri(i,r,t)}}function pn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>dn(u,t,s,!0))),dn(u,e,s)):u=e,o.set(e,u),u}function dn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&dn(t,o,n,!0),i&&i.forEach((e=>dn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=vn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const vn={data:yn,props:bn,emits:bn,methods:bn,computed:bn,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,destroyed:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:bn,directives:bn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=g(Object.create(null),t);for(const r in e)n[r]=mn(t[r],e[r]);return n},provide:yn,inject:function(t,e){return bn(gn(t),gn(e))}};function yn(t,e){return e?t?function(){return g(T(t)?t.call(this,this):t,T(e)?e.call(this,this):e)}:e:t}function gn(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function bn(t,e){return t?g(g(Object.create(null),t),e):e}function wn(t,e,n,r=!1){const i={},o={};K(o,or,1),t.propsDefaults=Object.create(null),_n(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:re(i,!1,At,Qt,Xt):t.type.props?t.props=i:t.props=o,t.attrs=o}function _n(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(O(u))continue;const c=e[u];let l;i&&w(i,l=F(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Ee(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=ae(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=En(i,e,a,r[a],t,!w(r,a))}}return a}function En(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&T(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Tr(i),r=o[n]=t.call(null,e),Sr())}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==V(n)||(r=!0))}return r}function In(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!T(t)){const r=t=>{u=!0;const[n,r]=In(t,e,!0);g(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=F(o[h]);Tn(t)&&(s[t]=l)}else if(o)for(const l in o){const t=F(l);if(Tn(t)){const e=o[l],n=s[t]=_(e)||T(e)?{type:e}:e;if(n){const e=Cn(Boolean,n.type),r=Cn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function Tn(t){return"$"!==t[0]}function Sn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function An(t,e){return Sn(t)===Sn(e)}function Cn(t,e){return _(e)?e.findIndex((e=>An(e,t))):T(e)&&An(e,t)?0:-1}const Nn=t=>"_"===t[0]||"$stable"===t,Dn=t=>_(t)?t.map(pr):[pr(t)],xn=(t,e,n)=>{const r=Ne((t=>Dn(e(t))),n);return r._c=!1,r},kn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Nn(i))continue;const n=t[i];if(T(n))e[i]=xn(0,n,r);else if(null!=n){const t=Dn(n);e[i]=()=>t}}},Rn=(t,e)=>{const n=Dn(e);t.slots.default=()=>n};function On(t,e){if(null===Ie)return t;const n=Ie.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=l]=e[i];T(t)&&(t={mounted:t,updated:t}),t.deep&&ai(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Ln(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(ut(),Or(u,n,8,[t.el,a,t,e]),ct())}}function Pn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fn=0;function Mn(t,e){return function(n,r=null){null==r||C(r)||(r=null);const i=Pn(),o=new Set;let s=!1;const a=i.app={_uid:Fn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:ci,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(a,...e)):T(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=cr(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Vn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):Xr(t,Kr,Br,zr)};function Un(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:s,createComment:a,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:v=f,cloneNode:y,insertStaticContent:m}=t,b=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!ir(t,e)&&(r=et(t),Y(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case Wn:_(t,e,n,r);break;case Qn:E(t,e,n,r);break;case $n:null==t&&I(e,n,r,s);break;case Hn:P(t,e,n,r,i,o,s,a,u);break;default:1&h?A(t,e,n,r,i,o,s,a,u):6&h?M(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,rt)}null!=l&&i&&jn(l,t&&t.ref,o,e||t,!e)},_=(t,e,r,i)=>{if(null==t)n(e.el=s(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},E=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},I=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},T=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=d(t),n(t,r,i),t=o;n(e,r,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=d(t),r(t),t=n;r(e)},A=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,u):k(t,e,i,o,s,a,u)},C=(t,e,r,s,a,u,l,h)=>{let f,p;const{type:d,props:v,shapeFlag:g,transition:m,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==y&&-1===b)f=t.el=y(t.el);else{if(f=t.el=o(t.type,u,v&&v.is,v),8&g?c(f,t.children):16&g&&x(t.children,f,null,s,a,u&&"foreignObject"!==d,l,h),w&&Ln(t,null,s,"created"),v){for(const e in v)"value"===e||O(e)||i(f,e,null,v[e],u,t.children,s,a,tt);"value"in v&&i(f,"value",null,v.value),(p=v.onVnodeBeforeMount)&&qn(p,s,t)}D(f,t,t.scopeId,l,s)}w&&Ln(t,null,s,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;_&&m.beforeEnter(f),n(f,e,r),((p=v&&v.onVnodeMounted)||_||w)&&Vn((()=>{p&&qn(p,s,t),_&&m.enter(f),w&&Ln(t,null,s,"mounted")}),a)},D=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;D(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},x=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?dr(t[c]):pr(t[c]);b(null,u,e,n,r,i,o,s,a)}},k=(t,e,n,r,o,s,a)=>{const u=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:p}=e;h|=16&t.patchFlag;const d=t.props||l,v=e.props||l;let y;(y=v.onVnodeBeforeUpdate)&&qn(y,n,e,t),p&&Ln(e,t,n,"beforeUpdate");const g=o&&"foreignObject"!==e.type;if(f?R(t.dynamicChildren,f,u,n,r,g,s):a||G(t,e,u,null,n,r,g,s,!1),h>0){if(16&h)L(u,e,d,v,n,r,o);else if(2&h&&d.class!==v.class&&i(u,"class",null,v.class,o),4&h&&i(u,"style",d.style,v.style,o),8&h){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],c=d[a],l=v[a];l===c&&"value"!==a||i(u,a,c,l,o,t.children,n,r,tt)}}1&h&&t.children!==e.children&&c(u,e.children)}else a||null!=f||L(u,e,d,v,n,r,o);((y=v.onVnodeUpdated)||p)&&Vn((()=>{y&&qn(y,n,e,t),p&&Ln(e,t,n,"updated")}),r)},R=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===Hn||!ir(u,c)||70&u.shapeFlag)?p(u.el):n;b(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,o,s,a)=>{if(n!==r){for(const u in r){if(O(u))continue;const c=r[u],l=n[u];c!==l&&"value"!==u&&i(t,u,l,c,a,e.children,o,s,tt)}if(n!==l)for(const u in n)O(u)||u in r||i(t,u,n[u],null,a,e.children,o,s,tt);"value"in r&&i(t,"value",n.value,r.value)}},P=(t,e,r,i,o,a,u,c,l)=>{const h=e.el=t?t.el:s(""),f=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),x(e.children,r,f,o,a,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(R(t.dynamicChildren,d,r,o,a,u,c),(null!=e.key||o&&e===o.subTree)&&Bn(t,e,!0)):G(t,e,r,f,o,a,u,c,l)},M=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):j(t,e,u)},U=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||wr,o={uid:_r++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new W(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:In(r,i),emitsOptions:_e(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=we.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if(Ge(t)&&(a.ctx.renderer=rt),function(t,e=!1){Cr=e;const{props:n,children:r}=t.vnode,i=Ar(t);wn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ae(e),K(e,"_",n)):kn(e,t.slots={})}else t.slots={},e&&Rn(t,e);K(t.slots,or,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ue(new Proxy(t.ctx,br));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(lt(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;Tr(t),ut();const i=Rr(r,t,0,[t.props,n]);if(ct(),Sr(),N(i)){if(i.then(Sr,Sr),e)return i.then((e=>{Nr(t,e)})).catch((e=>{Lr(e,t,0)}));t.asyncDep=i}else Nr(t,i)}else Dr(t)}(t,e):void 0;Cr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,q),!t.el){const t=a.subTree=cr(Qn);E(null,t,e,n)}}else q(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Re(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?Re(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ee(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,e,n);r.next=e,function(t){const e=Mr.indexOf(t);e>Vr&&Mr.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},q=(t,e,n,r,i,o,s)=>{const a=new it((()=>{if(t.isMounted){let e,{next:n,bu:r,u:u,parent:c,vnode:l}=t,h=n;n?(n.el=l.el,z(t,n,s)):n=l,a.allowRecurse=!1,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&qn(e,c,n,l),a.allowRecurse=!0;const f=De(t),d=t.subTree;t.subTree=f,b(d,f,p(d.el),et(d),t,i,o),n.el=f.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Vn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Vn((()=>qn(e,c,n,l)),i)}else{let s;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t,p=ze(e);if(a.allowRecurse=!1,l&&B(l),!p&&(s=c&&c.onVnodeBeforeMount)&&qn(s,f,e),a.allowRecurse=!0,u&&st){const n=()=>{t.subTree=De(t),st(u,t.subTree,t,i,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=De(t);b(null,s,n,r,t,i,o),e.el=s.el}if(h&&Vn(h,i),!p&&(s=c&&c.onVnodeMounted)){const t=e;Vn((()=>qn(s,f,t)),i)}256&e.shapeFlag&&t.a&&Vn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>$r(t.update)),t.scope),u=t.update=a.run.bind(a);u.id=t.uid,a.allowRecurse=u.allowRecurse=!0,u()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=ae(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;_n(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=V(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=En(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=F(s);i[e]=En(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&pt(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(g(i,e),n||1!==t||delete i._):(o=!e.$stable,kn(e,i)),s=e}else e&&(Rn(t,e),s={default:1});if(o)for(const a in i)Nn(a)||a in s||delete i[a]})(t,e.children,n),ut(),Jr(void 0,t.update),ct()},G=(t,e,n,r,i,o,s,a,u=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,f=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void Q(l,f,n,r,i,o,s,a,u);if(256&p)return void H(l,f,n,r,i,o,s,a,u)}8&d?(16&h&&tt(l,i,o),f!==l&&c(n,f)):16&h?16&d?Q(l,f,n,r,i,o,s,a,u):tt(l,i,o,!0):(8&h&&c(n,""),16&d&&x(f,n,r,i,o,s,a,u))},H=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?dr(e[p]):pr(e[p]);b(t[p],r,n,null,i,o,s,a,u)}c>l?tt(t,i,o,!0,!1,f):x(e,n,r,i,o,s,a,u,f)},Q=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?dr(e[c]):pr(e[c]);if(!ir(r,l))break;b(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?dr(e[p]):pr(e[p]);if(!ir(r,c))break;b(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)b(null,e[c]=u?dr(e[c]):pr(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)Y(t[c],i,o,!0),c++;else{const d=c,v=c,y=new Map;for(c=v;c<=p;c++){const t=e[c]=u?dr(e[c]):pr(e[c]);null!=t.key&&y.set(t.key,c)}let g,m=0;const w=p-v+1;let _=!1,E=0;const I=new Array(w);for(c=0;c<w;c++)I[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=w){Y(r,i,o,!0);continue}let l;if(null!=r.key)l=y.get(r.key);else for(g=v;g<=p;g++)if(0===I[g-v]&&ir(r,e[g])){l=g;break}void 0===l?Y(r,i,o,!0):(I[l-v]=c+1,l>=E?E=l:_=!0,b(r,e[l],n,null,i,o,s,a,u),m++)}const T=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(I):h;for(g=T.length-1,c=w-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===I[c]?b(null,h,n,f,i,o,s,a,u):_&&(g<0||c!==T[g]?$(h,n,f,2):g--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,rt);if(a===Hn){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===$n)return void T(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Vn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},Y=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&jn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f,d=!ze(t);let v;if(d&&(v=s&&s.onVnodeBeforeUnmount)&&qn(v,e,t),6&l)Z(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Ln(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,rt,r):c&&(o!==Hn||h>0&&64&h)?tt(c,e,n,!1,!0):(o===Hn&&384&h||!i&&16&l)&&tt(u,e,n),r&&X(t)}(d&&(v=s&&s.onVnodeUnmounted)||p)&&Vn((()=>{v&&qn(v,e,t),p&&Ln(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Hn)return void J(n,i);if(e===$n)return void S(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=d(t),r(t),t=n;r(e)},Z=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:s,um:a}=t;r&&B(r),i.stop(),o&&(o.active=!1,Y(s,t,e,n)),a&&Vn(a,e),Vn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)Y(t[s],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),Zr(),e._vnode=t},rt={p:b,um:Y,m:$,r:X,mt:U,mc:x,pc:G,pbc:R,n:et,o:t};let ot,st;e&&([ot,st]=e(rt));return{render:nt,hydrate:ot,createApp:Mn(nt,ot)}}(t)}function jn(t,e,n,r,i=!1){if(_(t))return void t.forEach(((t,o)=>jn(t,e&&(_(e)?e[o]:e),n,r,i)));if(ze(r)&&!i)return;const o=4&r.shapeFlag?xr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):fe(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,Vn(t,n)):t()}else if(fe(u)){const t=()=>{u.value=s};s?(t.id=-1,Vn(t,n)):t()}else T(u)&&Rr(u,a,12,[s,h])}function qn(t,e,n,r=null){Or(t,e,7,[n,r])}function Bn(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=dr(i[o]),e.el=t.el),n||Bn(t,e))}}function Kn(t,e){return function(t,e,n=!0,r=!1){const i=Ie||Er;if(i){const n=i.type;if("components"===t){const t=kr(n);if(t&&(t===e||t===F(e)||t===U(F(e))))return n}const o=Gn(i[t]||n[t],e)||Gn(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const zn=Symbol();function Gn(t,e){return t&&(t[e]||t[F(e)]||t[U(F(e))])}const Hn=Symbol(void 0),Wn=Symbol(void 0),Qn=Symbol(void 0),$n=Symbol(void 0),Yn=[];let Xn=null;function Jn(t=!1){Yn.push(Xn=t?null:[])}let Zn=1;function tr(t){Zn+=t}function er(t){return t.dynamicChildren=Zn>0?Xn||h:null,Yn.pop(),Xn=Yn[Yn.length-1]||null,Zn>0&&Xn&&Xn.push(t),t}function nr(t,e,n,r,i,o){return er(ur(t,e,n,r,i,o,!0))}function rr(t){return!!t&&!0===t.__v_isVNode}function ir(t,e){return t.type===e.type&&t.key===e.key}const or="__vInternal",sr=({key:t})=>null!=t?t:null,ar=({ref:t})=>null!=t?S(t)||fe(t)||T(t)?{i:Ie,r:t}:t:null;function ur(t,e=null,n=null,r=0,i=null,o=(t===Hn?0:1),s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sr(e),ref:e&&ar(e),scopeId:Te,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(vr(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=S(n)?8:16),Zn>0&&!s&&Xn&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&Xn.push(u),u}const cr=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==zn||(t=Qn);if(rr(t)){const r=lr(t,e,!0);return n&&vr(r,n),r}u=t,T(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){e=function(t){return t?se(t)||or in t?g({},t):t:null}(e);let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),C(n)&&(se(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:C(t)?4:T(t)?2:0;return ur(t,e,n,i,o,c,s,!0)};function lr(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&sr(c),ref:e&&e.ref?n&&o?_(o)?o.concat(ar(e)):[o,ar(e)]:ar(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Hn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&lr(t.ssContent),ssFallback:t.ssFallback&&lr(t.ssFallback),el:t.el,anchor:t.anchor}}function hr(t=" ",e=0){return cr(Wn,null,t,e)}function fr(t,e){const n=cr($n,null,t);return n.staticCount=e,n}function pr(t){return null==t||"boolean"==typeof t?cr(Qn):_(t)?cr(Hn,null,t.slice()):"object"==typeof t?dr(t):cr(Wn,null,String(t))}function dr(t){return null===t.el||t.memo?t:lr(t)}function vr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),vr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||or in e?3===r&&Ie&&(1===Ie.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Ie}}else T(e)?(e={default:e,_ctx:Ie},n=32):(e=String(e),64&r?(n=16,e=[hr(e)]):n=8);t.children=e,t.shapeFlag|=n}function yr(t,e,n,r){let i;const o=n&&n[r];if(_(t)||S(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(C(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=e(t[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}const gr=t=>t?Ar(t)?xr(t)||t.proxy:gr(t.parent):null,mr=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>gr(t.parent),$root:t=>gr(t.root),$emit:t=>t.emit,$options:t=>pn(t),$forceUpdate:t=>()=>$r(t.update),$nextTick:t=>Qr.bind(t.proxy),$watch:t=>oi.bind(t)}),br={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];cn&&(s[e]=4)}}const h=mr[e];let f,p;return h?("$attrs"===e&&lt(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(mr,s)||w(i.config.globalProperties,s)}},wr=Pn();let _r=0;let Er=null;const Ir=()=>Er||Ie,Tr=t=>{Er=t,t.scope.on()},Sr=()=>{Er&&Er.scope.off(),Er=null};function Ar(t){return 4&t.vnode.shapeFlag}let Cr=!1;function Nr(t,e,n){T(e)?t.render=e:C(e)&&(t.setupState=ge(e)),Dr(t)}function Dr(t,e,n){const r=t.type;t.render||(t.render=r.render||f),Tr(t),ut(),ln(t),ct(),Sr()}function xr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ge(ue(t.exposed)),{get:(e,n)=>n in e?e[n]:n in mr?mr[n](t):void 0}))}function kr(t){return T(t)&&t.displayName||t.name}function Rr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Lr(o,e,n)}return i}function Or(t,e,n,r){if(T(t)){const i=Rr(t,e,n,r);return i&&N(i)&&i.catch((t=>{Lr(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(Or(t[o],e,n,r));return i}function Lr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void Rr(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let Pr=!1,Fr=!1;const Mr=[];let Vr=0;const Ur=[];let jr=null,qr=0;const Br=[];let Kr=null,zr=0;const Gr=Promise.resolve();let Hr=null,Wr=null;function Qr(t){const e=Hr||Gr;return t?e.then(this?t.bind(this):t):e}function $r(t){Mr.length&&Mr.includes(t,Pr&&t.allowRecurse?Vr+1:Vr)||t===Wr||(null==t.id?Mr.push(t):Mr.splice(function(t){let e=Vr+1,n=Mr.length;for(;e<n;){const r=e+n>>>1;ti(Mr[r])<t?e=r+1:n=r}return e}(t.id),0,t),Yr())}function Yr(){Pr||Fr||(Fr=!0,Hr=Gr.then(ei))}function Xr(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Yr()}function Jr(t,e=null){if(Ur.length){for(Wr=e,jr=[...new Set(Ur)],Ur.length=0,qr=0;qr<jr.length;qr++)jr[qr]();jr=null,qr=0,Wr=null,Jr(t,e)}}function Zr(t){if(Br.length){const t=[...new Set(Br)];if(Br.length=0,Kr)return void Kr.push(...t);for(Kr=t,Kr.sort(((t,e)=>ti(t)-ti(e))),zr=0;zr<Kr.length;zr++)Kr[zr]();Kr=null,zr=0}}const ti=t=>null==t.id?1/0:t.id;function ei(t){Fr=!1,Pr=!0,Jr(t),Mr.sort(((t,e)=>ti(t)-ti(e)));try{for(Vr=0;Vr<Mr.length;Vr++){const t=Mr[Vr];t&&!1!==t.active&&Rr(t,null,14)}}finally{Vr=0,Mr.length=0,Zr(),Pr=!1,Hr=null,(Mr.length||Ur.length||Br.length)&&ei(t)}}const ni={};function ri(t,e,n){return ii(t,e,n)}function ii(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l){const a=Er;let u,c,h=!1,p=!1;if(fe(t)?(u=()=>t.value,h=!!t._shallow):ie(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some(ie),u=()=>t.map((t=>fe(t)?t.value:ie(t)?ai(t):T(t)?Rr(t,a,2):void 0))):u=T(t)?e?()=>Rr(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),Or(t,a,3,[d])}:f,e&&r){const t=u;u=()=>ai(t())}let d=t=>{c=b.onStop=()=>{Rr(t,a,4)}},v=p?[]:ni;const y=()=>{if(b.active)if(e){const t=b.run();(r||h||(p?t.some(((t,e)=>q(t,v[e]))):q(t,v)))&&(c&&c(),Or(e,a,3,[t,v===ni?void 0:v,d]),v=t)}else b.run()};let g;y.allowRecurse=!!e,g="sync"===i?y:"post"===i?()=>Vn(y,a&&a.suspense):()=>{!a||a.isMounted?function(t){Xr(t,jr,Ur,qr)}(y):y()};const b=new it(u,g);return e?n?y():v=b.run():"post"===i?Vn(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&m(a.scope.effects,b)}}function oi(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?si(r,t):()=>r[t]:t.bind(r,r);let o;T(e)?o=e:(o=e.handler,n=e);const s=Er;Tr(this);const a=ii(i,o.bind(r),n);return s?Tr(s):Sr(),a}function si(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function ai(t,e=new Set){if(!C(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),fe(t))ai(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)ai(t[n],e);else if(I(t)||E(t))t.forEach((t=>{ai(t,e)}));else if(k(t))for(const n in t)ai(t[n],e);return t}function ui(t,e,n){const r=arguments.length;return 2===r?C(e)&&!_(e)?rr(e)?cr(t,null,[e]):cr(t,e):cr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&rr(n)&&(n=[n]),cr(t,e,n))}const ci="3.2.3",li="undefined"!=typeof document?document:null,hi=new Map,fi={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?li.createElementNS("http://www.w3.org/2000/svg",t):li.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>li.createTextNode(t),createComment:t=>li.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>li.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=hi.get(t);if(!o){const e=li.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}hi.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const pi=/\s*!important$/;function di(t,e,n){if(_(n))n.forEach((n=>di(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=yi[e];if(n)return n;let r=F(e);if("filter"!==r&&r in t)return yi[e]=r;r=U(r);for(let i=0;i<vi.length;i++){const n=vi[i]+r;if(n in t)return yi[e]=n}return e}(t,e);pi.test(n)?t.setProperty(V(r),n.replace(pi,""),"important"):t[r]=n}}const vi=["Webkit","Moz","ms"],yi={};const gi="http://www.w3.org/1999/xlink";let mi=Date.now,bi=!1;if("undefined"!=typeof window){mi()>document.createEvent("Event").timeStamp&&(mi=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);bi=!!(t&&Number(t[1])<=53)}let wi=0;const _i=Promise.resolve(),Ei=()=>{wi=0};function Ii(t,e,n,r){t.addEventListener(e,n,r)}function Ti(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(Si.test(t)){let n;for(e={};n=t.match(Si);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){Ii(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||mi();(bi||r>=n.attached-1)&&Or(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>wi||(_i.then(Ei),wi=mi()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const Si=/(?:Once|Passive|Capture)$/;const Ai=/^on[a-z]/;const Ci="transition",Ni=(t,{slots:e})=>ui(Fe,function(t){const e={};for(const g in t)g in Di||(e[g]=t[g]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(C(t))return[Ri(t.enter),Ri(t.leave)];{const e=Ri(t);return[e,e]}}(i),v=d&&d[0],y=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:E,onBeforeAppear:I=m,onAppear:T=b,onAppearCancelled:S=w}=e,A=(t,e,n)=>{Li(t,e?l:a),Li(t,e?c:s),n&&n()},N=(t,e)=>{Li(t,p),Li(t,f),e&&e()},D=t=>(e,n)=>{const i=t?T:b,s=()=>A(e,t,n);xi(i,[e,s]),Pi((()=>{Li(e,t?u:o),Oi(e,t?l:a),ki(i)||Mi(e,r,v,s)}))};return g(e,{onBeforeEnter(t){xi(m,[t]),Oi(t,o),Oi(t,s)},onBeforeAppear(t){xi(I,[t]),Oi(t,u),Oi(t,c)},onEnter:D(!1),onAppear:D(!0),onLeave(t,e){const n=()=>N(t,e);Oi(t,h),document.body.offsetHeight,Oi(t,f),Pi((()=>{Li(t,h),Oi(t,p),ki(_)||Mi(t,r,y,n)})),xi(_,[t,n])},onEnterCancelled(t){A(t,!1),xi(w,[t])},onAppearCancelled(t){A(t,!0),xi(S,[t])},onLeaveCancelled(t){N(t),xi(E,[t])}})}(t),e);Ni.displayName="Transition";const Di={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ni.props=g({},Fe.props,Di);const xi=(t,e=[])=>{_(t)?t.forEach((t=>t(...e))):t&&t(...e)},ki=t=>!!t&&(_(t)?t.some((t=>t.length>1)):t.length>1);function Ri(t){return z(t)}function Oi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function Li(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Pi(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Fi=0;function Mi(t,e,n,r){const i=t._endId=++Fi,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=Vi(i,o),a=r("animationDelay"),u=r("animationDuration"),c=Vi(a,u);let l=null,h=0,f=0;e===Ci?s>0&&(l=Ci,h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?Ci:"animation":null,f=l?l===Ci?o.length:u.length:0);const p=l===Ci&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:h,propCount:f,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Vi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>Ui(e)+Ui(t[n]))))}function Ui(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const ji=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function qi(t){t.target.composing=!0}function Bi(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const Ki={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=ji(i);const o=r||i.props&&"number"===i.props.type;Ii(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=z(r)),t._assign(r)})),n&&Ii(t,"change",(()=>{t.value=t.value.trim()})),e||(Ii(t,"compositionstart",qi),Ii(t,"compositionend",Bi),Ii(t,"change",Bi))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=ji(o),t.composing)return;if(document.activeElement===t){if(n)return;if(r&&t.value.trim()===e)return;if((i||"number"===t.type)&&z(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},zi=["ctrl","shift","alt","meta"],Gi={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>zi.some((n=>t[`${n}Key`]&&!e.includes(n)))},Hi=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Gi[e[t]];if(r&&r(n,e))return}return t(n,...r)},Wi={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Qi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qi(t,!0),r.enter(t)):r.leave(t,(()=>{Qi(t,!1)})):Qi(t,e))},beforeUnmount(t,{value:e}){Qi(t,e)}};function Qi(t,e){t.style.display=e?t._vod:"none"}const $i=g({patchProp:(t,r,i,o,s=!1,a,u,c,l)=>{"class"===r?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,s):"style"===r?function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)di(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&di(r,t,"")}else t.removeAttribute("style")}(t,i,o):v(r)?y(r)||Ti(t,r,0,o,u):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&Ai.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(Ai.test(e)&&S(n))return!1;return e in t}(t,r,o,s))?function(t,e,r,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName){t._value=r;const n=null==r?"":r;return t.value!==n&&(t.value=n),void(null==r&&t.removeAttribute(e))}if(""===r||null==r){const i=typeof t[e];if("boolean"===i)return void(t[e]=n(r));if(null==r&&"string"===i)return t[e]="",void t.removeAttribute(e);if("number"===i){try{t[e]=0}catch(u){}return void t.removeAttribute(e)}}try{t[e]=r}catch(uw){}}(t,r,o,a,u,c,l):("true-value"===r?t._trueValue=o:"false-value"===r&&(t._falseValue=o),function(t,r,i,o,s){if(o&&r.startsWith("xlink:"))null==i?t.removeAttributeNS(gi,r.slice(6,r.length)):t.setAttributeNS(gi,r,i);else{const o=e(r);null==i||o&&!n(i)?t.removeAttribute(r):t.setAttribute(r,o?"":i)}}(t,r,o,s))}},fi);let Yi;const Xi=(...t)=>{const e=(Yi||(Yi=Un($i))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Ji=function(t,e){return(Ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Zi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ji(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var to=function(){return(to=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function eo(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(uw){o(uw)}}function a(t){try{u(r.throw(t))}catch(uw){o(uw)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function no(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(uw){o=[6,uw],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ro(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function io(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function oo(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var so={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ao(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ao(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uo=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function co(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lo(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(uw){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ho=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,fo.prototype.create),o}return Zi(e,t),e}(Error),fo=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?po(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new ho(i,a,r);return u},t}();function po(t,e){return t.replace(vo,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var vo=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function go(t,e){var n=new mo(t,e);return n.subscribe.bind(n)}var mo=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=bo),void 0===r.error&&(r.error=bo),void 0===r.complete&&(r.complete=bo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(uw){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(uw){"undefined"!=typeof console&&console.error&&console.error(uw)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function bo(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){return t&&t._delegate?t._delegate:t}var _o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Eo=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new uo;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(uw){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(uw){if(r)return null;throw uw}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(uw){}try{for(var r=ro(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=io(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(uw){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return eo(this,void 0,void 0,(function(){var t;return no(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(oo(oo([],io(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),io(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=ro(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=io(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=ro(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Io,To=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Eo(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function So(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ao,Co,No=[];(Co=Ao||(Ao={}))[Co.DEBUG=0]="DEBUG",Co[Co.VERBOSE=1]="VERBOSE",Co[Co.INFO=2]="INFO",Co[Co.WARN=3]="WARN",Co[Co.ERROR=4]="ERROR",Co[Co.SILENT=5]="SILENT";var Do,xo={debug:Ao.DEBUG,verbose:Ao.VERBOSE,info:Ao.INFO,warn:Ao.WARN,error:Ao.ERROR,silent:Ao.SILENT},ko=Ao.INFO,Ro=((Io={})[Ao.DEBUG]="log",Io[Ao.VERBOSE]="log",Io[Ao.INFO]="info",Io[Ao.WARN]="warn",Io[Ao.ERROR]="error",Io),Oo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ro[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,So(["["+i+"]  "+t.name+":"],n))}},Lo=function(){function t(t){this.name=t,this._logLevel=ko,this._logHandler=Oo,this._userLogHandler=null,No.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ao))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?xo[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,So([this,Ao.DEBUG],t)),this._logHandler.apply(this,So([this,Ao.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,So([this,Ao.VERBOSE],t)),this._logHandler.apply(this,So([this,Ao.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,So([this,Ao.INFO],t)),this._logHandler.apply(this,So([this,Ao.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,So([this,Ao.WARN],t)),this._logHandler.apply(this,So([this,Ao.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,So([this,Ao.ERROR],t)),this._logHandler.apply(this,So([this,Ao.ERROR],t))},t}();function Po(t){No.forEach((function(e){e.setLogLevel(t)}))}var Fo,Mo=((Do={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Do["bad-app-name"]="Illegal App name: '{$appName}",Do["duplicate-app"]="Firebase App named '{$appName}' already exists",Do["app-deleted"]="Firebase App named '{$appName}' already deleted",Do["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Do["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Do),Vo=new fo("app","Firebase",Mo),Uo=((Fo={})["@firebase/app"]="fire-core",Fo["@firebase/analytics"]="fire-analytics",Fo["@firebase/app-check"]="fire-app-check",Fo["@firebase/auth"]="fire-auth",Fo["@firebase/database"]="fire-rtdb",Fo["@firebase/functions"]="fire-fn",Fo["@firebase/installations"]="fire-iid",Fo["@firebase/messaging"]="fire-fcm",Fo["@firebase/performance"]="fire-perf",Fo["@firebase/remote-config"]="fire-rc",Fo["@firebase/storage"]="fire-gcs",Fo["@firebase/firestore"]="fire-fst",Fo["fire-js"]="fire-js",Fo["firebase-wrapper"]="fire-js-all",Fo),jo=new Lo("@firebase/app"),qo=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ao(void 0,t),this.container=new To(e.name),this._addComponent(new _o("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(uw){jo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,uw)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Vo.create("app-deleted",{appName:this.name_})},t}();qo.prototype.name&&qo.prototype.options||qo.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Vo.create("bad-app-name",{appName:String(s)});if(yo(e,s))throw Vo.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Uo[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void jo.warn(u.join(" "))}o(new _o(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Po,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Vo.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=xo[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Ao[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=No;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!yo(e,t=t||"[DEFAULT]"))throw Vo.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return jo.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Vo.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&ao(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ko=function t(){var e=Bo(qo);return e.INTERNAL=to(to({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ao(e,t)},createSubscribe:go,ErrorFactory:fo,deepExtend:ao}),e}(),zo=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){jo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Go=self.firebase.SDK_VERSION;Go&&Go.indexOf("LITE")>=0&&jo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ho=Ko.initializeApp;Ko.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lo()&&jo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ho.apply(void 0,t)};var Wo,Qo,$o=Ko;(Wo=$o).INTERNAL.registerComponent(new _o("platform-logger",(function(t){return new zo(t)}),"PRIVATE")),Wo.registerVersion("@firebase/app","0.6.29",Qo),Wo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
$o.registerVersion("firebase","8.9.1","app"),$o.SDK_VERSION="8.9.1";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Yo=function(t,e){return(Yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Jo,Zo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ts=ts||{},es=Zo||self;function ns(){}function rs(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function is(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var os="closure_uid_"+(1e9*Math.random()>>>0),ss=0;function as(t,e,n){return t.call.apply(t.bind,arguments)}function us(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function cs(t,e,n){return(cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?as:us).apply(null,arguments)}function ls(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function hs(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function fs(){this.s=this.s,this.o=this.o}var ps={};fs.prototype.s=!1,fs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,os)&&t[os]||(t[os]=++ss)}(this);delete ps[t]}},fs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ds=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vs=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ys(t){return Array.prototype.concat.apply([],arguments)}function gs(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ms(t){return/^[\s\xa0]*$/.test(t)}var bs,ws=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function _s(t,e){return-1!=t.indexOf(e)}function Es(t,e){return t<e?-1:t>e?1:0}t:{var Is=es.navigator;if(Is){var Ts=Is.userAgent;if(Ts){bs=Ts;break t}}bs=""}function Ss(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function As(t){var e={};for(var n in t)e[n]=t[n];return e}var Cs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ns(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Cs.length;o++)n=Cs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ds(t){return Ds[" "](t),t}Ds[" "]=ns;var xs,ks,Rs=_s(bs,"Opera"),Os=_s(bs,"Trident")||_s(bs,"MSIE"),Ls=_s(bs,"Edge"),Ps=Ls||Os,Fs=_s(bs,"Gecko")&&!(_s(bs.toLowerCase(),"webkit")&&!_s(bs,"Edge"))&&!(_s(bs,"Trident")||_s(bs,"MSIE"))&&!_s(bs,"Edge"),Ms=_s(bs.toLowerCase(),"webkit")&&!_s(bs,"Edge");function Vs(){var t=es.document;return t?t.documentMode:void 0}t:{var Us="",js=(ks=bs,Fs?/rv:([^\);]+)(\)|;)/.exec(ks):Ls?/Edge\/([\d\.]+)/.exec(ks):Os?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ks):Ms?/WebKit\/(\S+)/.exec(ks):Rs?/(?:Version)[ \/]?(\S+)/.exec(ks):void 0);if(js&&(Us=js?js[1]:""),Os){var qs=Vs();if(null!=qs&&qs>parseFloat(Us)){xs=String(qs);break t}}xs=Us}var Bs,Ks={};function zs(){return function(t){var e=Ks;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=ws(String(xs)).split("."),n=ws("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Es(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Es(0==o[2].length,0==s[2].length)||Es(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(es.document&&Os){var Gs=Vs();Bs=Gs||(parseInt(xs,10)||void 0)}else Bs=void 0;var Hs=Bs,Ws=function(){if(!es.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{es.addEventListener("test",ns,e),es.removeEventListener("test",ns,e)}catch(n){}return t}();function Qs(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function $s(t,e){if(Qs.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Fs){t:{try{Ds(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ys[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$s.Z.h.call(this)}}Qs.prototype.h=function(){this.defaultPrevented=!0},hs($s,Qs);var Ys={2:"touch",3:"pen",4:"mouse"};$s.prototype.h=function(){$s.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xs="closure_listenable_"+(1e6*Math.random()|0),Js=0;function Zs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Js,this.ca=this.fa=!1}function ta(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ea(t){this.src=t,this.g={},this.h=0}function na(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ds(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ta(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ra(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ea.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=ra(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Zs(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ia="closure_lm_"+(1e6*Math.random()|0),oa={};function sa(t,e,n,r,i){if(r&&r.once)return ua(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)sa(t,e[o],n,r,i);return null}return n=va(n),t&&t[Xs]?t.N(e,n,is(r)?!!r.capture:!!r,i):aa(t,e,n,!1,r,i)}function aa(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=is(i)?!!i.capture:!!i,a=pa(t);if(a||(t[ia]=a=new ea(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=fa;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ws||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ha(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ua(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ua(t,e[o],n,r,i);return null}return n=va(n),t&&t[Xs]?t.O(e,n,is(r)?!!r.capture:!!r,i):aa(t,e,n,!0,r,i)}function ca(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ca(t,e[o],n,r,i);else r=is(r)?!!r.capture:!!r,n=va(n),t&&t[Xs]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ra(o=t.g[e],n,r,i))&&(ta(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=pa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ra(e,n,r,i)),(n=-1<t?e[t]:null)&&la(n))}function la(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Xs])na(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ha(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pa(e))?(na(n,t),0==n.h&&(n.src=null,e[ia]=null)):ta(t)}}}function ha(t){return t in oa?oa[t]:oa[t]="on"+t}function fa(t,e){if(t.ca)t=!0;else{e=new $s(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&la(t),t=n.call(r,e)}return t}function pa(t){return(t=t[ia])instanceof ea?t:null}var da="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(t){return"function"==typeof t?t:(t[da]||(t[da]=function(e){return t.handleEvent(e)}),t[da])}function ya(){fs.call(this),this.i=new ea(this),this.P=this,this.I=null}function ga(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Qs(e,t);else if(e instanceof Qs)e.target=e.target||t;else{var i=e;Ns(e=new Qs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ma(s,r,!0,e)&&i}if(i=ma(s=e.g=t,r,!0,e)&&i,i=ma(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ma(s=e.g=n[o],r,!1,e)&&i}function ma(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&na(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}hs(ya,fs),ya.prototype[Xs]=!0,ya.prototype.removeEventListener=function(t,e,n,r){ca(this,t,e,n,r)},ya.prototype.M=function(){if(ya.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ta(n[r]);delete e.g[t],e.h--}}this.I=null},ya.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ya.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ba=es.JSON.stringify;function wa(){var t=Na,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var _a,Ea=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ia.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ia=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Ta}),(function(t){return t.reset()})),Ta=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Sa(t){es.setTimeout((function(){throw t}),0)}function Aa(t,e){_a||function(){var t=es.Promise.resolve(void 0);_a=function(){t.then(Da)}}(),Ca||(_a(),Ca=!0),Na.add(t,e)}var Ca=!1,Na=new Ea;function Da(){for(var t;t=wa();){try{t.h.call(t.g)}catch(n){Sa(n)}var e=Ia;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ca=!1}function xa(t,e){ya.call(this),this.h=t||1,this.g=e||es,this.j=cs(this.kb,this),this.l=Date.now()}function ka(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ra(t,e,n){if("function"==typeof t)n&&(t=cs(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cs(t.handleEvent,t)}return 2147483647<Number(e)?-1:es.setTimeout(t,e||0)}function Oa(t){t.g=Ra((function(){t.g=null,t.i&&(t.i=!1,Oa(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}hs(xa,ya),(Jo=xa.prototype).da=!1,Jo.S=null,Jo.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ga(this,"tick"),this.da&&(ka(this),this.start()))}},Jo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jo.M=function(){xa.Z.M.call(this),ka(this),delete this.g};var La=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Oa(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(es.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(fs);function Pa(t){fs.call(this),this.h=t,this.g={}}hs(Pa,fs);var Fa=[];function Ma(t,e,n,r){Array.isArray(n)||(n&&(Fa[0]=n.toString()),n=Fa);for(var i=0;i<n.length;i++){var o=sa(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Va(t){Ss(t.g,(function(t,e){this.g.hasOwnProperty(e)&&la(t)}),t),t.g={}}function Ua(){this.g=!0}function ja(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ba(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Pa.prototype.M=function(){Pa.Z.M.call(this),Va(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ua.prototype.Aa=function(){this.g=!1},Ua.prototype.info=function(){};var qa={},Ba=null;function Ka(){return Ba=Ba||new ya}function za(t){Qs.call(this,qa.Ma,t)}function Ga(t){var e=Ka();ga(e,new za(e,t))}function Ha(t,e){Qs.call(this,qa.STAT_EVENT,t),this.stat=e}function Wa(t){var e=Ka();ga(e,new Ha(e,t))}function Qa(t,e){Qs.call(this,qa.Na,t),this.size=e}function $a(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return es.setTimeout((function(){t()}),e)}qa.Ma="serverreachability",hs(za,Qs),qa.STAT_EVENT="statevent",hs(Ha,Qs),qa.Na="timingevent",hs(Qa,Qs);var Ya={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ja(){}function Za(t){return t.h||(t.h=t.i())}function tu(){}Ja.prototype.h=null;var eu,nu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ru(){Qs.call(this,"d")}function iu(){Qs.call(this,"c")}function ou(){}function su(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Pa(this),this.P=uu,t=Ps?125:void 0,this.W=new xa(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}hs(ru,Qs),hs(iu,Qs),hs(ou,Ja),ou.prototype.g=function(){return new XMLHttpRequest},ou.prototype.i=function(){return{}},eu=new ou;var uu=45e3,cu={},lu={};function hu(t,e,n){t.K=1,t.v=Lu(Nu(e)),t.s=n,t.U=!0,fu(t,null)}function fu(t,e){t.F=Date.now(),yu(t),t.A=Nu(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Wu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new au,t.g=Qc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new La(cs(t.Ia,t,t.g),t.O)),Ma(t.V,t.g,"readystatechange",t.gb),e=t.H?As(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ga(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function pu(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function du(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=vu(t,n))==lu){4==e&&(t.o=4,Wa(14),i=!1),ja(t.j,t.m,null,"[Incomplete Response]");break}if(r==cu){t.o=4,Wa(15),ja(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ja(t.j,t.m,r,null),_u(t,r)}pu(t)&&r!=lu&&r!=cu&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Wa(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jc(e),e.L=!0,Wa(11))):(ja(t.j,t.m,n,"[Invalid Chunked Response]"),wu(t),bu(t))}function vu(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?lu:(n=Number(e.substring(n,r)),isNaN(n)?cu:(r+=1)+n>e.length?lu:(e=e.substr(r,n),t.C=r+n,e))}function yu(t){t.Y=Date.now()+t.P,gu(t,t.P)}function gu(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=$a(cs(t.eb,t),e)}function mu(t){t.B&&(es.clearTimeout(t.B),t.B=null)}function bu(t){0==t.l.G||t.I||Kc(t.l,t)}function wu(t){mu(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ka(t.W),Va(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function _u(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||tc(n.i,t)))if(n.I=t.N,!t.J&&tc(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Bc(n),kc(n)}Uc(n),Wa(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$a(cs(n.ab,n),6e3));if(1>=Zu(n.i)&&n.ka){try{n.ka()}catch(y){}n.ka=void 0}}else Gc(n,11)}else if((t.J||n.g==t)&&Bc(n),!ms(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(_s(l,"spdy")||_s(l,"quic")||_s(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(ec(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ou(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Wc(r,r.H?r.la:null,r.W),p.J){nc(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(mu(d),yu(d)),r.g=p}else Vc(r);0<n.l.length&&Lc(n)}else"stop"!=o[0]&&"close"!=o[0]||Gc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Gc(n,7):xc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ga(4)}catch(y){}}function Eu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(rs(t)||"string"==typeof t)vs(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(rs(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(rs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Iu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Iu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Su(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Su(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Su(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Jo=su.prototype).setTimeout=function(t){this.P=t},Jo.gb=function(t){t=t.target;var e=this.L;e&&3==Sc(t)?e.l():this.Ia(t)},Jo.Ia=function(t){try{if(t==this.g)t:{var e=Sc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Ps||this.g&&(this.h.h||this.g.ga()||Ac(this.g)))){this.I||4!=e||7==n||Ga(8==n||0>=r?3:2),mu(this);var i=this.g.ba();this.N=i;e:if(pu(this)){var o=Ac(this.g);t="";var s=o.length,a=4==Sc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wu(this),bu(this);var u="";break e}this.h.i=new es.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ms(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Wa(12),wu(this),bu(this);break t}ja(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_u(this,i)}this.U?(du(this,e,u),Ps&&this.i&&3==e&&(Ma(this.V,this.W,"tick",this.fb),this.W.start())):(ja(this.j,this.m,u,null),_u(this,u)),4==e&&wu(this),this.i&&!this.I&&(4==e?Kc(this.l,this):(this.i=!1,yu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Wa(12)):(this.o=0,Wa(13)),wu(this),bu(this)}}}catch(f){}},Jo.fb=function(){if(this.g){var t=Sc(this.g),e=this.g.ga();this.C<e.length&&(mu(this),du(this,t,e),this.i&&4!=t&&yu(this))}},Jo.cancel=function(){this.I=!0,wu(this)},Jo.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ga(3),Wa(17)),wu(this),this.o=2,bu(this)):gu(this,this.Y-t)},(Jo=Iu.prototype).R=function(){Tu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Jo.T=function(){return Tu(this),this.g.concat()},Jo.get=function(t,e){return Su(this.h,t)?this.h[t]:e},Jo.set=function(t,e){Su(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Jo.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cu(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Cu){this.g=void 0!==e?e:t.g,Du(this,t.j),this.s=t.s,xu(this,t.i),ku(this,t.m),this.l=t.l,e=t.h;var n=new Ku;n.i=e.i,e.g&&(n.g=new Iu(e.g),n.h=e.h),Ru(this,n),this.o=t.o}else t&&(n=String(t).match(Au))?(this.g=!!e,Du(this,n[1]||"",!0),this.s=Pu(n[2]||""),xu(this,n[3]||"",!0),ku(this,n[4]),this.l=Pu(n[5]||"",!0),Ru(this,n[6]||"",!0),this.o=Pu(n[7]||"")):(this.g=!!e,this.h=new Ku(null,this.g))}function Nu(t){return new Cu(t)}function Du(t,e,n){t.j=n?Pu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xu(t,e,n){t.i=n?Pu(e,!0):e}function ku(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ru(t,e,n){e instanceof Ku?(t.h=e,function(t,e){e&&!t.j&&(zu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Gu(this,e),Wu(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Fu(e,qu)),t.h=new Ku(e,t.g))}function Ou(t,e,n){t.h.set(e,n)}function Lu(t){return Ou(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fu(e,Vu,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fu(e,Vu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fu(n,"/"==n.charAt(0)?ju:Uu,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fu(n,Bu)),t.join("")};var Vu=/[#\/\?@]/g,Uu=/[#\?:]/g,ju=/[#\?]/g,qu=/[#\?@]/g,Bu=/#/g;function Ku(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zu(t){t.g||(t.g=new Iu,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Gu(t,e){zu(t),e=Qu(t,e),Su(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Su((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Tu(t)))}function Hu(t,e){return zu(t),e=Qu(t,e),Su(t.g.h,e)}function Wu(t,e,n){Gu(t,e),0<n.length&&(t.i=null,t.g.set(Qu(t,e),gs(n)),t.h+=n.length)}function Qu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Jo=Ku.prototype).add=function(t,e){zu(this),this.i=null,t=Qu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Jo.forEach=function(t,e){zu(this),this.g.forEach((function(n,r){vs(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Jo.T=function(){zu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Jo.R=function(t){zu(this);var e=[];if("string"==typeof t)Hu(this,t)&&(e=ys(e,this.g.get(Qu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ys(e,t[n])}return e},Jo.set=function(t,e){return zu(this),this.i=null,Hu(this,t=Qu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Jo.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Jo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var $u=function(t,e){this.h=t,this.g=e};function Yu(t){this.l=t||Xu,es.PerformanceNavigationTiming?t=0<(t=es.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(es.g&&es.g.Ea&&es.g.Ea()&&es.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xu=10;function Ju(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Zu(t){return t.h?1:t.g?t.g.size:0}function tc(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ec(t,e){t.g?t.g.add(e):t.h=e}function nc(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function rc(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Xo(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return gs(t.i)}function ic(){}function oc(){this.g=new ic}function sc(t,e,n){var r=n||"";try{Eu(t,(function(t,n){var i=t;is(t)&&(i=ba(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(uw){throw e.push(r+"type="+encodeURIComponent("_badmap")),uw}}function ac(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function uc(t){this.l=t.$b||null,this.j=t.ib||!1}function cc(t,e){ya.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yu.prototype.cancel=function(){var t,e;if(this.i=rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Xo(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},ic.prototype.stringify=function(t){return es.JSON.stringify(t,void 0)},ic.prototype.parse=function(t){return es.JSON.parse(t,void 0)},hs(uc,Ja),uc.prototype.g=function(){return new cc(this.l,this.j)},uc.prototype.i=function(t){return function(){return t}}({}),hs(cc,ya);var lc=0;function hc(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function fc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pc(t)}function pc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Jo=cc.prototype).open=function(t,e){if(this.readyState!=lc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pc(this)},Jo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||es).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Jo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fc(this)),this.readyState=lc},Jo.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pc(this)),this.g&&(this.readyState=3,pc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==es.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hc(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Jo.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fc(this):pc(this),3==this.readyState&&hc(this)}},Jo.Ua=function(t){this.g&&(this.response=this.responseText=t,fc(this))},Jo.Ta=function(t){this.g&&(this.response=t,fc(this))},Jo.ha=function(){this.g&&fc(this)},Jo.setRequestHeader=function(t,e){this.v.append(t,e)},Jo.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Jo.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var dc=es.JSON.parse;function vc(t){ya.call(this),this.headers=new Iu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yc,this.K=this.L=!1}hs(vc,ya);var yc="",gc=/^https?$/i,mc=["POST","PUT"];function bc(t){return"content-type"==t.toLowerCase()}function wc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_c(t),Ic(t)}function _c(t){t.D||(t.D=!0,ga(t,"complete"),ga(t,"error"))}function Ec(t){if(t.h&&void 0!==ts&&(!t.C[1]||4!=Sc(t)||2!=t.ba()))if(t.v&&4==Sc(t))Ra(t.Fa,0,t);else if(ga(t,"readystatechange"),4==Sc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Au)[1]||null;if(!o&&es.self&&es.self.location){var s=es.self.location.protocol;o=s.substr(0,s.length-1)}i=!gc.test(o?o.toLowerCase():"")}e=i}if(e)ga(t,"complete"),ga(t,"success");else{t.m=6;try{var a=2<Sc(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",_c(t)}}finally{Ic(t)}}}function Ic(t,e){if(t.g){Tc(t);var n=t.g,r=t.C[0]?ns:null;t.g=null,t.C=null,e||ga(t,"ready");try{n.onreadystatechange=r}catch(uw){}}}function Tc(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(es.clearTimeout(t.A),t.A=null)}function Sc(t){return t.g?t.g.readyState:0}function Ac(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case yc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ss(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ou(t,e,n))}function Nc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Dc(t){this.za=0,this.l=[],this.h=new Ua,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nc("baseRetryDelayMs",5e3,t),this.$a=Nc("retryDelaySeedMs",1e4,t),this.Ya=Nc("forwardChannelMaxRetries",2,t),this.ra=Nc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Yu(t&&t.concurrentRequestLimit),this.Ca=new oc,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function xc(t){if(Rc(t),3==t.G){var e=t.V++,n=Nu(t.F);Ou(n,"SID",t.J),Ou(n,"RID",e),Ou(n,"TYPE","terminate"),Fc(t,n),(e=new su(t,t.h,e,void 0)).K=2,e.v=Lu(Nu(n)),n=!1,es.navigator&&es.navigator.sendBeacon&&(n=es.navigator.sendBeacon(e.v.toString(),"")),!n&&es.Image&&((new Image).src=e.v,n=!0),n||(e.g=Qc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yu(e)}Hc(t)}function kc(t){t.g&&(jc(t),t.g.cancel(),t.g=null)}function Rc(t){kc(t),t.u&&(es.clearTimeout(t.u),t.u=null),Bc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&es.clearTimeout(t.m),t.m=null)}function Oc(t,e){t.l.push(new $u(t.Za++,e)),3==t.G&&Lc(t)}function Lc(t){Ju(t.i)||t.m||(t.m=!0,Aa(t.Ha,t),t.C=0)}function Pc(t,e){var n;n=e?e.m:t.V++;var r=Nu(t.F);Ou(r,"SID",t.J),Ou(r,"RID",n),Ou(r,"AID",t.U),Fc(t,r),t.o&&t.s&&Cc(r,t.o,t.s),n=new su(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Mc(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ec(t.i,n),hu(n,r,e)}function Fc(t,e){t.j&&Eu({},(function(t,n){Ou(e,n,t)}))}function Mc(t,e,n){n=Math.min(t.l.length,n);var r=t.j?cs(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{sc(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Vc(t){t.g||t.u||(t.Y=1,Aa(t.Ga,t),t.A=0)}function Uc(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=$a(cs(t.Ga,t),zc(t,t.A)),t.A++,!0)}function jc(t){null!=t.B&&(es.clearTimeout(t.B),t.B=null)}function qc(t){t.g=new su(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Nu(t.oa);Ou(e,"RID","rpc"),Ou(e,"SID",t.J),Ou(e,"CI",t.N?"0":"1"),Ou(e,"AID",t.U),Fc(t,e),Ou(e,"TYPE","xmlhttp"),t.o&&t.s&&Cc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Lu(Nu(e)),n.s=null,n.U=!0,fu(n,t)}function Bc(t){null!=t.v&&(es.clearTimeout(t.v),t.v=null)}function Kc(t,e){var n=null;if(t.g==e){Bc(t),jc(t),t.g=null;var r=2}else{if(!tc(t.i,e))return;n=e.D,nc(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;ga(r=Ka(),new Qa(r,n,e,i)),Lc(t)}else Vc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Zu(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=$a(cs(t.Ha,t,e),zc(t,t.C)),t.C++,0)))}(t,e)||2==r&&Uc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gc(t,5);break;case 4:Gc(t,10);break;case 3:Gc(t,6);break;default:Gc(t,2)}}function zc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Gc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=cs(t.jb,t);n||(n=new Cu("//www.google.com/images/cleardot.gif"),es.location&&"http"==es.location.protocol||Du(n,"https"),Lu(n)),function(t,e){var n=new Ua;if(es.Image){var r=new Image;r.onload=ls(ac,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ls(ac,n,r,"TestLoadImage: error",!1,e),r.onabort=ls(ac,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ls(ac,n,r,"TestLoadImage: timeout",!1,e),es.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Wa(2);t.G=0,t.j&&t.j.va(e),Hc(t),Rc(t)}function Hc(t){t.G=0,t.I=-1,t.j&&(0==rc(t.i).length&&0==t.l.length||(t.i.i.length=0,gs(t.l),t.l.length=0),t.j.ua())}function Wc(t,e,n){var r=function(t){return t instanceof Cu?Nu(t):new Cu(t,void 0)}(n);if(""!=r.i)e&&xu(r,e+"."+r.i),ku(r,r.m);else{var i=es.location;r=function(t,e,n,r){var i=new Cu(null,void 0);return t&&Du(i,t),e&&xu(i,e),n&&ku(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ss(t.aa,(function(t,e){Ou(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ou(r,e,n),Ou(r,"VER",t.ma),Fc(t,r),r}function Qc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new vc(new uc({ib:!0})):new vc(t.qa)).L=t.H,e}function $c(){}function Yc(){if(Os&&!(10<=Number(Hs)))throw Error("Environmental error: no available transport.")}function Xc(t,e){ya.call(this),this.g=new Dc(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ms(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ms(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new tl(this)}function Jc(t){ru.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Zc(){iu.call(this),this.status=1}function tl(t){this.g=t}(Jo=vc.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():eu.g(),this.C=this.u?Za(this.u):Za(eu),this.g.onreadystatechange=cs(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void wc(this,o)}t=n||"";var i=new Iu(this.headers);r&&Eu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=es.FormData&&t instanceof es.FormData,!(0<=ds(mc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tc(this),0<this.B&&((this.K=function(t){return Os&&zs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cs(this.pa,this)):this.A=Ra(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){wc(this,o)}},Jo.pa=function(){void 0!==ts&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ga(this,"timeout"),this.abort(8))},Jo.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ga(this,"complete"),ga(this,"abort"),Ic(this))},Jo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ic(this,!0)),vc.Z.M.call(this)},Jo.Fa=function(){this.s||(this.F||this.v||this.l?Ec(this):this.cb())},Jo.cb=function(){Ec(this)},Jo.ba=function(){try{return 2<Sc(this)?this.g.status:-1}catch(ks){return-1}},Jo.ga=function(){try{return this.g?this.g.responseText:""}catch(ks){return""}},Jo.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dc(e)}},Jo.Da=function(){return this.m},Jo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Jo=Dc.prototype).ma=8,Jo.G=1,Jo.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Jo.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new su(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Ns(n=As(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Mc(this,e,r),Ou(i=Nu(this.F),"RID",t),Ou(i,"CVER",22),this.D&&Ou(i,"X-HTTP-Session-Id",this.D),Fc(this,i),this.o&&n&&Cc(i,this.o,n),ec(this.i,e),this.Ra&&Ou(i,"TYPE","init"),this.ja?(Ou(i,"$req",r),Ou(i,"SID","null"),e.$=!0,hu(e,i,null)):hu(e,i,r),this.G=2}}else 3==this.G&&(t?Pc(this,t):0==this.l.length||Ju(this.i)||Pc(this))},Jo.Ga=function(){if(this.u=null,qc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=$a(cs(this.bb,this),t)}},Jo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wa(10),kc(this),qc(this))},Jo.ab=function(){null!=this.v&&(this.v=null,kc(this),Uc(this),Wa(19))},Jo.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Wa(2)):(this.h.info("Failed to ping google.com"),Wa(1))},(Jo=$c.prototype).xa=function(){},Jo.wa=function(){},Jo.va=function(){},Jo.ua=function(){},Jo.Oa=function(){},Yc.prototype.g=function(t,e){return new Xc(t,e)},hs(Xc,ya),Xc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Aa(cs(t.hb,t,e))),Wa(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Wc(t,null,t.W),Lc(t)},Xc.prototype.close=function(){xc(this.g)},Xc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Oc(this.g,e)}else this.v?((e={}).__data__=ba(t),Oc(this.g,e)):Oc(this.g,t)},Xc.prototype.M=function(){this.g.j=null,delete this.j,xc(this.g),delete this.g,Xc.Z.M.call(this)},hs(Jc,ru),hs(Zc,iu),hs(tl,$c),tl.prototype.xa=function(){ga(this.g,"a")},tl.prototype.wa=function(t){ga(this.g,new Jc(t))},tl.prototype.va=function(t){ga(this.g,new Zc(t))},tl.prototype.ua=function(){ga(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,Xc.prototype.send=Xc.prototype.u,Xc.prototype.open=Xc.prototype.m,Xc.prototype.close=Xc.prototype.close,Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,Xa.COMPLETE="complete",tu.EventType=nu,nu.OPEN="a",nu.CLOSE="b",nu.ERROR="c",nu.MESSAGE="d",ya.prototype.listen=ya.prototype.N,vc.prototype.listenOnce=vc.prototype.O,vc.prototype.getLastError=vc.prototype.La,vc.prototype.getLastErrorCode=vc.prototype.Da,vc.prototype.getStatus=vc.prototype.ba,vc.prototype.getResponseJson=vc.prototype.Qa,vc.prototype.getResponseText=vc.prototype.ga,vc.prototype.send=vc.prototype.ea;var el=Ya,nl=Xa,rl=qa,il=10,ol=11,sl=uc,al=tu,ul=vc,cl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();cl.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Zi(e,t),e}(Error),fl=new Lo("@firebase/firestore");function pl(){return fl.logLevel}function dl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fl.logLevel<=Ao.DEBUG){var r=e.map(gl);fl.debug.apply(fl,oo(["Firestore (8.8.1): "+t],r))}}function vl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fl.logLevel<=Ao.ERROR){var r=e.map(gl);fl.error.apply(fl,oo(["Firestore (8.8.1): "+t],r))}}function yl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fl.logLevel<=Ao.WARN){var r=e.map(gl);fl.warn.apply(fl,oo(["Firestore (8.8.1): "+t],r))}}function gl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw vl(e),new Error(e)}function bl(t,e){t||ml()}function wl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=_l(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Il(t,e){return t<e?-1:t>e?1:0}function Tl(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Sl(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Al=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Il(this.nanoseconds,t.nanoseconds):Il(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Cl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Al(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ml(),void 0===n?n=t.length-e:n>t.length-e&&ml(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(kl),Ol=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ol.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new hl(ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new hl(ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new hl(ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new hl(ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(kl),Pl=function(){function t(t){this.fields=t,t.sort(Ll.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Tl(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Fl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Il(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Fl.EMPTY_BYTE_STRING=new Fl("");var Ml=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(bl(!!t),"string"==typeof t){var e=0,n=Ml.exec(t);if(bl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ul(t.seconds),nanos:Ul(t.nanos)}}function Ul(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jl(t){return"string"==typeof t?Fl.fromBase64String(t):Fl.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bl(t){var e=t.mapValue.fields.__previous_value__;return ql(e)?Bl(e):e}function Kl(t){var e=Vl(t.mapValue.fields.__local_write_time__.timestampValue);return new Al(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){return null==t}function Gl(t){return 0===t&&1/t==-1/0}function Hl(t){return"number"==typeof t&&Number.isInteger(t)&&!Gl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Rl.fromString(e))},t.fromName=function(e){return new t(Rl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Rl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Rl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Rl(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ql(t)?4:10:ml()}function $l(t,e){var n,r=Ql(t);if(r!==Ql(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vl(t.timestampValue),r=Vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,jl(t.bytesValue).isEqual(jl(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ul(t.geoPointValue.latitude)===Ul(e.geoPointValue.latitude)&&Ul(t.geoPointValue.longitude)===Ul(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ul(t.integerValue)===Ul(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ul(t.doubleValue),r=Ul(e.doubleValue);return n===r?Gl(n)===Gl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Tl(t.arrayValue.values||[],e.arrayValue.values||[],$l);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Nl(n)!==Nl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$l(n[i],r[i])))return!1;return!0}(t,e);default:return ml()}}function Yl(t,e){return void 0!==(t.values||[]).find((function(t){return $l(t,e)}))}function Xl(t,e){var n,r,i,o,s=Ql(t),a=Ql(e);if(s!==a)return Il(s,a);switch(s){case 0:return 0;case 1:return Il(t.booleanValue,e.booleanValue);case 2:return r=e,i=Ul((n=t).integerValue||n.doubleValue),o=Ul(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Jl(t.timestampValue,e.timestampValue);case 4:return Jl(Kl(t),Kl(e));case 5:return Il(t.stringValue,e.stringValue);case 6:return function(t,e){var n=jl(t),r=jl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Il(n[i],r[i]);if(0!==o)return o}return Il(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Il(Ul(t.latitude),Ul(e.latitude));return 0!==n?n:Il(Ul(t.longitude),Ul(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xl(n[i],r[i]);if(o)return o}return Il(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Il(r[s],o[s]);if(0!==a)return a;var u=Xl(n[r[s]],i[o[s]]);if(0!==u)return u}return Il(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ml()}}function Jl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Il(t,e);var n=Vl(t),r=Vl(e),i=Il(n.seconds,r.seconds);return 0!==i?i:Il(n.nanos,r.nanos)}function Zl(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Vl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?jl(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Wl.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=th(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+th(t.fields[o])}return e+"}"}(t.mapValue):ml();var e,n,r,i}function eh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function nh(t){return!!t&&"integerValue"in t}function rh(t){return!!t&&"arrayValue"in t}function ih(t){return!!t&&"nullValue"in t}function oh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sh(t){return!!t&&"mapValue"in t}function ah(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Dl(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ah(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ah(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!sh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ah(e)},t.prototype.setAll=function(t){var e=this,n=Ll.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ah(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());sh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return $l(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];sh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Dl(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ah(this.value))},t}();function ch(t){var e=[];return Dl(t.fields,(function(t,n){var r=new Ll([t]);if(sh(n)){var i=ch(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Pl(e)}var lh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Cl.min(),uh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,uh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,uh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=uh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=uh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),hh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new hh(t,e,n,r,i,o,s)}function ph(t){var e=wl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Zl(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ah(e.startAt)),e.endAt&&(n+="|ub:",n+=Ah(e.endAt)),e.h=n}return e.h}function dh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Nh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!$l(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xh(t.startAt,e.startAt)&&xh(t.endAt,e.endAt)}function vh(t){return Wl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var yh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Zi(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new gh(t,n,r):"array-contains"===n?new _h(t,r):"in"===n?new Eh(t,r):"not-in"===n?new Ih(t,r):"array-contains-any"===n?new Th(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new mh(t,n):new bh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Xl(e,this.value)):null!==e&&Ql(this.value)===Ql(e)&&this.m(Xl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ml()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),gh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Wl.fromName(r.referenceValue),i}return Zi(e,t),e.prototype.matches=function(t){var e=Wl.comparator(t.key,this.key);return this.m(e)},e}(yh),mh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=wh("in",n),r}return Zi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(yh),bh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=wh("not-in",n),r}return Zi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(yh);function wh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Wl.fromName(t.referenceValue)}))}var _h=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Zi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return rh(e)&&Yl(e.arrayValue,this.value)},e}(yh),Eh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Zi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Yl(this.value.arrayValue,e)},e}(yh),Ih=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Zi(e,t),e.prototype.matches=function(t){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Yl(this.value.arrayValue,e)},e}(yh),Th=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Zi(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Yl(e.value.arrayValue,t)}))},e}(yh),Sh=function(t,e){this.position=t,this.before=e};function Ah(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Zl(t)})).join(",")}var Ch=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Nh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Dh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Wl.comparator(Wl.fromName(s.referenceValue),n.key):Xl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function xh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!$l(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Rh(t,e,n,r,i,o,s,a){return new kh(t,e,n,r,i,o,s,a)}function Oh(t){return new kh(t)}function Lh(t){return!zl(t.limit)&&"F"===t.limitType}function Ph(t){return!zl(t.limit)&&"L"===t.limitType}function Fh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Mh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Vh(t){return null!==t.collectionGroup}function Uh(t){var e=wl(t);if(null===e.p){e.p=[];var n=Mh(e),r=Fh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ch(n)),e.p.push(new Ch(Ll.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ch(Ll.keyField(),u))}}}return e.p}function jh(t){var e=wl(t);if(!e.T)if("F"===e.limitType)e.T=fh(e.path,e.collectionGroup,Uh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Uh(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ch(o.field,s))}var a=e.endAt?new Sh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Sh(e.startAt.position,!e.startAt.before):null;e.T=fh(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function qh(t,e,n){return new kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bh(t,e){return dh(jh(t),jh(e))&&t.limitType===e.limitType}function Kh(t){return ph(jh(t))+"|lt:"+t.limitType}function zh(t){return"Query(target="+(e=jh(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Zl(e.value);var e})).join(", ")+"]"),zl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ah(e.startAt)),e.endAt&&(n+=", endAt: "+Ah(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Gh(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Wl.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Dh(t.startAt,Uh(t),e)||t.endAt&&Dh(t.endAt,Uh(t),e))}(t,e);var n,r,i}function Hh(t){return function(e,n){for(var r=!1,i=0,o=Uh(t);i<o.length;i++){var s=o[i],a=Wh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Wh(t,e,n){var r,i,o,s,a=t.field.isKeyField()?Wl.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?Xl(o,s):ml());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return ml()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(e)?"-0":e}}function $h(t){return{integerValue:""+t}}function Yh(t,e){return Hl(e)?$h(e):Qh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xh=function(){this._=void 0};function Jh(t,e,n){return t instanceof ef?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof nf?rf(t,e):t instanceof of?sf(t,e):function(t,e){var n=tf(t,e),r=uf(n)+uf(t.A);return nh(n)&&nh(t.A)?$h(r):Qh(t.R,r)}(t,e);var r,i,o}function Zh(t,e,n){return t instanceof nf?rf(t,e):t instanceof of?sf(t,e):n}function tf(t,e){return t instanceof af?nh(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e}(Xh),nf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Zi(e,t),e}(Xh);function rf(t,e){for(var n=cf(e),r=function(t){n.some((function(e){return $l(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var of=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Zi(e,t),e}(Xh);function sf(t,e){for(var n=cf(e),r=function(t){n=n.filter((function(e){return!$l(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var af=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Zi(e,t),e}(Xh);function uf(t){return Ul(t.integerValue||t.doubleValue)}function cf(t){return rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lf=function(t,e){this.field=t,this.transform=e},hf=function(t,e){this.version=t,this.transformResults=e},ff=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function pf(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var df=function(){};function vf(t,e,n){var r,i,o,s,a;t instanceof wf?(i=e,o=n,s=(r=t).value.clone(),a=If(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof _f?function(t,e,n){if(pf(t.precondition,e)){var r=If(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ef(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function yf(t,e,n){var r;t instanceof wf?function(t,e,n){if(pf(t.precondition,e)){var r=t.value.clone(),i=Tf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(bf(e),r).setHasLocalMutations()}}(t,e,n):t instanceof _f?function(t,e,n){if(pf(t.precondition,e)){var r=Tf(t.fieldTransforms,n,e),i=e.data;i.setAll(Ef(t)),i.setAll(r),e.convertToFoundDocument(bf(e),i).setHasLocalMutations()}}(t,e,n):(r=e,pf(t.precondition,r)&&r.convertToNoDocument(Cl.min()))}function gf(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=tf(o.transform,s||null);null!=a&&(null==n&&(n=uh.empty()),n.set(o.field,a))}return n||null}function mf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Tl(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof nf&&o instanceof nf||i instanceof of&&o instanceof of?Tl(i.elements,o.elements,$l):i instanceof af&&o instanceof af?$l(i.A,o.A):i instanceof ef&&o instanceof ef);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function bf(t){return t.isFoundDocument()?t.version:Cl.min()}var wf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Zi(e,t),e}(df),_f=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Zi(e,t),e}(df);function Ef(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function If(t,e,n){var r=new Map;bl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Zh(s,a,n[i]))}return r}function Tf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Jh(a,u,e))}return r}var Sf,Af,Cf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Zi(e,t),e}(df),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Zi(e,t),e}(df),Df=function(t){this.count=t};function xf(t){switch(t){case ll.OK:return ml();case ll.CANCELLED:case ll.UNKNOWN:case ll.DEADLINE_EXCEEDED:case ll.RESOURCE_EXHAUSTED:case ll.INTERNAL:case ll.UNAVAILABLE:case ll.UNAUTHENTICATED:return!1;case ll.INVALID_ARGUMENT:case ll.NOT_FOUND:case ll.ALREADY_EXISTS:case ll.PERMISSION_DENIED:case ll.FAILED_PRECONDITION:case ll.ABORTED:case ll.OUT_OF_RANGE:case ll.UNIMPLEMENTED:case ll.DATA_LOSS:return!0;default:return ml()}}function kf(t){if(void 0===t)return vl("GRPC error has no .code"),ll.UNKNOWN;switch(t){case Sf.OK:return ll.OK;case Sf.CANCELLED:return ll.CANCELLED;case Sf.UNKNOWN:return ll.UNKNOWN;case Sf.DEADLINE_EXCEEDED:return ll.DEADLINE_EXCEEDED;case Sf.RESOURCE_EXHAUSTED:return ll.RESOURCE_EXHAUSTED;case Sf.INTERNAL:return ll.INTERNAL;case Sf.UNAVAILABLE:return ll.UNAVAILABLE;case Sf.UNAUTHENTICATED:return ll.UNAUTHENTICATED;case Sf.INVALID_ARGUMENT:return ll.INVALID_ARGUMENT;case Sf.NOT_FOUND:return ll.NOT_FOUND;case Sf.ALREADY_EXISTS:return ll.ALREADY_EXISTS;case Sf.PERMISSION_DENIED:return ll.PERMISSION_DENIED;case Sf.FAILED_PRECONDITION:return ll.FAILED_PRECONDITION;case Sf.ABORTED:return ll.ABORTED;case Sf.OUT_OF_RANGE:return ll.OUT_OF_RANGE;case Sf.UNIMPLEMENTED:return ll.UNIMPLEMENTED;case Sf.DATA_LOSS:return ll.DATA_LOSS;default:return ml()}}(Af=Sf||(Sf={}))[Af.OK=0]="OK",Af[Af.CANCELLED=1]="CANCELLED",Af[Af.UNKNOWN=2]="UNKNOWN",Af[Af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Af[Af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Af[Af.NOT_FOUND=5]="NOT_FOUND",Af[Af.ALREADY_EXISTS=6]="ALREADY_EXISTS",Af[Af.PERMISSION_DENIED=7]="PERMISSION_DENIED",Af[Af.UNAUTHENTICATED=16]="UNAUTHENTICATED",Af[Af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Af[Af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Af[Af.ABORTED=10]="ABORTED",Af[Af.OUT_OF_RANGE=11]="OUT_OF_RANGE",Af[Af.UNIMPLEMENTED=12]="UNIMPLEMENTED",Af[Af.INTERNAL=13]="INTERNAL",Af[Af.UNAVAILABLE=14]="UNAVAILABLE",Af[Af.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rf=function(){function t(t,e){this.comparator=t,this.root=e||Lf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Of(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Of(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Of(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Of(this.root,t,this.comparator,!0)},t}(),Of=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Lf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ml();if(this.right.isRed())throw ml();var t=this.left.check();if(t!==this.right.check())throw ml();return t+(this.isRed()?0:1)},t}();Lf.EMPTY=null,Lf.RED=!0,Lf.BLACK=!1,Lf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ml()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ml()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ml()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ml()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ml()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pf=function(){function t(t){this.comparator=t,this.data=new Rf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ff(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ff(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ff=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Mf=new Rf(Wl.comparator);function Vf(){return Mf}var Uf=new Rf(Wl.comparator);function jf(){return Uf}var qf=new Rf(Wl.comparator);var Bf=new Pf(Wl.comparator);function Kf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zf=new Pf(Il);function Gf(){return zf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Wf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Cl.min(),r,Gf(),Vf(),Kf())},t}(),Wf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Fl.EMPTY_BYTE_STRING,n,Kf(),Kf(),Kf())},t}(),Qf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},$f=function(t,e){this.targetId=t,this.V=e},Yf=function(t,e,n,r){void 0===n&&(n=Fl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Xf=function(){function t(){this.S=0,this.D=tp(),this.C=Fl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Kf(),e=Kf(),n=Kf();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ml()}})),new Wf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=tp()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Jf=function(){function t(t){this.W=t,this.G=new Map,this.H=Vf(),this.J=Zf(),this.Y=new Pf(Il)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ml()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(vh(i))if(0===n){var o=new Wl(i.path);this.tt(e,o,lh.newNoDocument(o,Cl.min()))}else bl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&vh(o.target)){var s=new Wl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,lh.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Kf();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Hf(t,n,this.Y,this.H,r);return this.H=Vf(),this.J=Zf(),this.Y=new Pf(Il),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Xf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pf(Il),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||dl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Xf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Zf(){return new Rf(Wl.comparator)}function tp(){return new Rf(Wl.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ep={asc:"ASCENDING",desc:"DESCENDING"},np={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rp=function(t,e){this.databaseId=t,this.I=e};function ip(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function op(t,e){return t.I?e.toBase64():e.toUint8Array()}function sp(t,e){return ip(t,e.toTimestamp())}function ap(t){return bl(!!t),Cl.fromTimestamp((e=Vl(t),new Al(e.seconds,e.nanos)));var e}function up(t,e){return(n=t,new Rl(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function cp(t){var e=Rl.fromString(t);return bl(Rp(e)),e}function lp(t,e){return up(t.databaseId,e.path)}function hp(t,e){var n=cp(e);if(n.get(1)!==t.databaseId.projectId)throw new hl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new hl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Wl(vp(n))}function fp(t,e){return up(t.databaseId,e)}function pp(t){var e=cp(t);return 4===e.length?Rl.emptyPath():vp(e)}function dp(t){return new Rl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vp(t){return bl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yp(t,e,n){return{name:lp(t,e),fields:n.value.mapValue.fields}}function gp(t,e){var n,r,i;if(e instanceof wf)n={update:yp(t,e.key,e.value)};else if(e instanceof Cf)n={delete:lp(t,e.key)};else if(e instanceof _f)n={update:yp(t,e.key,e.data),updateMask:kp(e.fieldMask)};else{if(!(e instanceof Nf))return ml();n={verify:lp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ef)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof of)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof af)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ml()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:sp(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ml())),n}function mp(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?ff.updateTime(ap(n.updateTime)):void 0!==n.exists?ff.exists(n.exists):ff.none():ff.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)bl("REQUEST_TIME"===e.setToServerValue),n=new ef;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new nf(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new of(i)}else"increment"in e?n=new af(t,e.increment):ml();var o=Ll.fromServerFormat(e.fieldPath);return new lf(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=hp(t,e.update.name),s=new uh({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Pl(e.map((function(t){return Ll.fromServerFormat(t)})))}(e.updateMask);return new _f(o,s,a,r,i)}return new wf(o,s,r,i)}if(e.delete){var u=hp(t,e.delete);return new Cf(u,r)}if(e.verify){var c=hp(t,e.verify);return new Nf(c,r)}return ml()}function bp(t,e){return{documents:[fp(t,e.path)]}}function wp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(oh(t.value))return{unaryFilter:{field:Cp(t.field),op:"IS_NAN"}};if(ih(t.value))return{unaryFilter:{field:Cp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(oh(t.value))return{unaryFilter:{field:Cp(t.field),op:"IS_NOT_NAN"}};if(ih(t.value))return{unaryFilter:{field:Cp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cp(t.field),op:Ap(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Cp((e=t).field),direction:Sp(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||zl(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Ip(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ip(e.endAt)),n}function _p(t){var e=pp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ep(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Ch(Np((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=zl(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=Tp(n.startAt));var f=null;return n.endAt&&(f=Tp(n.endAt)),Rh(e,i,a,s,l,"F",h,f)}function Ep(t){return t?void 0!==t.unaryFilter?[xp(t)]:void 0!==t.fieldFilter?[Dp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ep(t)})).reduce((function(t,e){return t.concat(e)})):ml():[]}function Ip(t){return{before:t.before,values:t.position}}function Tp(t){var e=!!t.before,n=t.values||[];return new Sh(n,e)}function Sp(t){return ep[t]}function Ap(t){return np[t]}function Cp(t){return{fieldPath:t.canonicalString()}}function Np(t){return Ll.fromServerFormat(t.fieldPath)}function Dp(t){return yh.create(Np(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ml()}}(t.fieldFilter.op),t.fieldFilter.value)}function xp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Np(t.unaryFilter.field);return yh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Np(t.unaryFilter.field);return yh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Np(t.unaryFilter.field);return yh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Np(t.unaryFilter.field);return yh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ml()}}function kp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Rp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pp(e)),e=Lp(t.get(n),e);return Pp(e)}function Lp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Pp(t){return t+""}function Fp(t){var e=t.length;if(bl(e>=2),2===e)return bl(""===t.charAt(0)&&""===t.charAt(1)),Rl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ml(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ml()}o=s+2}return new Rl(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mp=function(t,e){this.seconds=t,this.nanoseconds=e},Vp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vp.store="owner",Vp.key="owner";var Up=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Up.store="mutationQueues",Up.keyPath="userId";var jp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};jp.store="mutations",jp.keyPath="batchId",jp.userMutationsIndex="userMutationsIndex",jp.userMutationsKeyPath=["userId","batchId"];var qp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Op(e)]},t.key=function(t,e,n){return[t,Op(e),n]},t}();qp.store="documentMutations",qp.PLACEHOLDER=new qp;var Bp=function(t,e){this.path=t,this.readTime=e},Kp=function(t,e){this.path=t,this.version=e},zp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zp.store="remoteDocuments",zp.readTimeIndex="readTimeIndex",zp.readTimeIndexPath="readTime",zp.collectionReadTimeIndex="collectionReadTimeIndex",zp.collectionReadTimeIndexPath=["parentPath","readTime"];var Gp=function(t){this.byteSize=t};Gp.store="remoteDocumentGlobal",Gp.key="remoteDocumentGlobalKey";var Hp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Hp.store="targets",Hp.keyPath="targetId",Hp.queryTargetsIndexName="queryTargetsIndex",Hp.queryTargetsKeyPath=["canonicalId","targetId"];var Wp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Wp.store="targetDocuments",Wp.keyPath=["targetId","path"],Wp.documentTargetsIndex="documentTargetsIndex",Wp.documentTargetsKeyPath=["path","targetId"];var Qp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Qp.key="targetGlobalKey",Qp.store="targetGlobal";var $p=function(t,e){this.collectionId=t,this.parent=e};$p.store="collectionParents",$p.keyPath=["collectionId","parent"];var Yp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Yp.store="clientMetadata",Yp.keyPath="clientId";var Xp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xp.store="bundles",Xp.keyPath="bundleId";var Jp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jp.store="namedQueries",Jp.keyPath="name";var Zp=oo(oo([],oo(oo([],oo(oo([],oo(oo([],[Up.store,jp.store,qp.store,zp.store,Hp.store,Vp.store,Qp.store,Wp.store]),[Yp.store])),[Gp.store])),[$p.store])),[Xp.store,Jp.store]),td="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ed=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nd=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},rd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ml(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),id=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ad(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=fd(e.target.error);n.ft.reject(new ad(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new ad(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(dl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cd(e)},t}(),od=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(co())&&vl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return dl("SimpleDb","Removing database:",t),ld(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=co(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return eo(this,void 0,void 0,(function(){var e,n=this;return no(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(dl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ad(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hl(ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ad(t,n))},i.onupgradeneeded=function(t){dl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){dl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return eo(this,void 0,void 0,(function(){var i,o,s,a,u;return no(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return no(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=id.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),rd.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,dl("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),sd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ld(this.Pt.delete())},t}(),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Zi(e,t),e}(hl);function ud(t){return"IndexedDbTransactionError"===t.name}var cd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(dl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(dl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ld(n)},t.prototype.add=function(t){return dl("SimpleDb","ADD",this.store.name,t,t),ld(this.store.add(t))},t.prototype.get=function(t){var e=this;return ld(this.store.get(t)).next((function(n){return void 0===n&&(n=null),dl("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return dl("SimpleDb","DELETE",this.store.name,t),ld(this.store.delete(t))},t.prototype.count=function(){return dl("SimpleDb","COUNT",this.store.name),ld(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){dl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rd((function(n,r){e.onerror=function(t){var e=fd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new rd((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sd(i),s=e(i.primaryKey,i.value,o);if(s instanceof rd){var a=s.catch((function(t){return o.done(),rd.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rd.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ld(t){return new rd((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fd(t.target.error);n(e)}}))}var hd=!1;function fd(t){var e=od._t(co());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new hl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hd||(hd=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Zi(e,t),e}(ed);function dd(t,e){var n=wl(t);return od.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&vf(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&yf(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&yf(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Cl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Kf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Tl(this.mutations,t.mutations,(function(t,e){return mf(t,e)}))&&Tl(this.baseMutations,t.baseMutations,(function(t,e){return mf(t,e)}))},t}(),yd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){bl(e.mutations.length===r.length);for(var i=qf,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),gd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Cl.min()),void 0===o&&(o=Cl.min()),void 0===s&&(s=Fl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),md=function(t){this.Lt=t};function bd(t,e){if(e.document)return function(t,e,n){var r=hp(t,e.name),i=ap(e.updateTime),o=new uh({mapValue:{fields:e.fields}}),s=lh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Wl.fromSegments(e.noDocument.path),r=Td(e.noDocument.readTime),i=lh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Wl.fromSegments(e.unknownDocument.path);return r=Td(e.unknownDocument.version),lh.newUnknownDocument(o,r)}return ml()}function wd(t,e,n){var r,i,o=_d(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:lp(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:ip(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new zp(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=Id(e.version);return u=e.hasCommittedMutations,new zp(null,new Bp(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=Id(e.version);return new zp(new Kp(h,f),null,null,!0,o,s)}return ml()}function _d(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ed(t){var e=new Al(t[0],t[1]);return Cl.fromTimestamp(e)}function Id(t){var e=t.toTimestamp();return new Mp(e.seconds,e.nanoseconds)}function Td(t){var e=new Al(t.seconds,t.nanoseconds);return Cl.fromTimestamp(e)}function Sd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return mp(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return mp(t.Lt,e)})),a=Al.fromMillis(e.localWriteTimeMs);return new vd(e.batchId,a,n,s)}function Ad(t){var e,n,r=Td(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Td(t.lastLimboFreeSnapshotVersion):Cl.min();return void 0!==t.query.documents?(bl(1===(n=t.query).documents.length),e=jh(Oh(pp(n.documents[0])))):e=jh(_p(t.query)),new gd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fl.fromBase64String(t.resumeToken))}function Cd(t,e){var n,r=Id(e.snapshotVersion),i=Id(e.lastLimboFreeSnapshotVersion);n=vh(e.target)?bp(t.Lt,e.target):wp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Hp(e.targetId,ph(e.target),r,o,e.sequenceNumber,i,n)}function Nd(t){var e=_p({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?qh(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return xd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Td(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return xd(t).put({bundleId:(n=e).id,createTime:Id(ap(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return kd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Nd(e.bundledQuery),readTime:Td(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return kd(t).put({name:(n=e).name,readTime:Id(ap(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function xd(t){return dd(t,Xp.store)}function kd(t){return dd(t,Jp.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rd=function(){function t(){this.Bt=new Od}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rd.resolve()},t.prototype.getCollectionParents=function(t,e){return rd.resolve(this.Bt.getEntries(e))},t}(),Od=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pf(Rl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pf(Rl.comparator)).toArray()},t}(),Ld=function(){function t(){this.qt=new Od}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Op(i)};return Pd(t).put(o)}return rd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Sl(e),""],!1,!0);return Pd(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Fp(o.parent))}return n}))},t}();function Pd(t){return dd(t,$p.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Md=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e,n){var r=t.store(jp.store),i=t.store(qp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){bl(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=qp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return rd.waitFor(o).next((function(){return c}))}function Ud(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ml();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Md.DEFAULT_COLLECTION_PERCENTILE=10,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Md.DEFAULT=new Md(41943040,Md.DEFAULT_COLLECTION_PERCENTILE,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Md.DISABLED=new Md(-1,0,0);var jd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return bl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bd(t).$t({index:jp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Kd(t),s=Bd(t);return s.add({}).next((function(a){bl("number"==typeof a);for(var u=new vd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return gp(t.Lt,e)})),i=n.mutations.map((function(e){return gp(t.Lt,e)}));return new jp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pf((function(t,e){return Il(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=qp.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,qp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),rd.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Bd(t).get(e).next((function(t){return t?(bl(t.userId===n.userId),Sd(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?rd.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Bd(t).$t({index:jp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(bl(e.batchId>=r),o=Sd(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Bd(t).$t({index:jp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bd(t).Nt(jp.userMutationsIndex,n).next((function(t){return t.map((function(t){return Sd(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=qp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Kd(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Fp(u);if(a===n.userId&&e.path.isEqual(l))return Bd(t).get(c).next((function(t){if(!t)throw ml();bl(t.userId===n.userId),o.push(Sd(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pf(Il),i=[];return e.forEach((function(e){var o=qp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Kd(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Fp(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),rd.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=qp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Pf(Il);return Kd(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Fp(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Bd(t).get(e).next((function(t){if(null===t)throw ml();bl(t.userId===n.userId),r.push(Sd(n.R,t))})))})),rd.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Vd(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),rd.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return rd.resolve();var r=IDBKeyRange.lowerBound(qp.prefixForUser(e.userId)),i=[];return Kd(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Fp(t[1]);i.push(o)}else r.done()})).next((function(){bl(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return qd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return zd(t).get(this.userId).next((function(t){return t||new Up(e.userId,-1,"")}))},t}();function qd(t,e,n){var r=qp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kd(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Bd(t){return dd(t,jp.store)}function Kd(t){return dd(t,qp.store)}function zd(t){return dd(t,Up.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Hd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Gd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Cl.fromTimestamp(new Al(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Wd(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return bl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Wd(t).$t((function(s,a){var u=Ad(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return rd.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Wd(t).$t((function(t,n){var r=Ad(n);e(r)}))},t.prototype.Xt=function(t){return Qd(t).get(Qp.key).next((function(t){return bl(null!==t),t}))},t.prototype.Zt=function(t,e){return Qd(t).put(Qp.key,e)},t.prototype.te=function(t,e){return Wd(t).put(Cd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ph(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wd(t).$t({range:r,index:Hp.queryTargetsIndexName},(function(t,n,r){var o=Ad(n);dh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=$d(t);return e.forEach((function(e){var s=Op(e.path);i.push(o.put(new Wp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),rd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=$d(t);return rd.forEach(e,(function(e){var o=Op(e.path);return rd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=$d(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=$d(t),i=Kf();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Fp(t[1]),o=new Wl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Op(e.path),r=IDBKeyRange.bound([n],[Sl(n)],!1,!0),i=0;return $d(t).$t({index:Wp.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Wd(t).get(e).next((function(t){return t?Ad(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){return dd(t,Hp.store)}function Qd(t){return dd(t,Qp.store)}function $d(t){return dd(t,Wp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){if(t.code!==ll.FAILED_PRECONDITION||t.message!==td)throw t;return dl("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Il(n,i);return 0===s?Il(r,o):s}var Jd=function(){function t(t){this.ne=t,this.buffer=new Pf(Xd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;dl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return eo(e,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ud(e=n.sent())?(dl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),tv=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rd.resolve(cl.o);var r=new Jd(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(dl("LruGarbageCollector","Garbage collection skipped; disabled"),rd.resolve(Fd)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(dl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Fd):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(dl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),pl()<=Ao.DEBUG&&dl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),rd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ev=function(){function t(t,e){this.db=t,this.garbageCollector=new tv(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return nv(t,n)},t.prototype.removeReference=function(t,e,n){return nv(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return nv(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,zd(n=t).Ot((function(t){return qd(n,t,r).next((function(t){return t&&(i=!0),rd.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),$d(t).delete([0,Op(s.path)])}))}));i.push(u)}})).next((function(){return rd.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return nv(t,e)},t.prototype.we=function(t,e){var n,r=$d(t),i=cl.o;return r.$t({index:Wp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==cl.o&&e(new Wl(Fp(n)),i),i=a,n=s):i=cl.o})).next((function(){i!==cl.o&&e(new Wl(Fp(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function nv(t,e){return $d(t).put((n=e,r=t.currentSequenceNumber,new Wp(0,Op(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Dl(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return xl(this.inner)},t}(),iv=function(){function t(){this.changes=new rv((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Cl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:lh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rd.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ov=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return uv(t).put(cv(e),n)},t.prototype.removeEntry=function(t,e){var n=uv(t),r=cv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return uv(t).get(cv(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return uv(t).get(cv(e)).next((function(t){return{document:n.ye(e,t),size:Ud(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Vf();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Vf(),i=new Rf(Wl.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ud(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return uv(t).$t({range:r},(function(t,e,r){for(var s=Wl.fromSegments(t);o&&Wl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Vf(),o=e.path.length+1,s={};if(n.isEqual(Cl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=_d(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=zp.collectionReadTimeIndex}return uv(t).$t(s,(function(t,n,s){if(t.length===o){var a=bd(r.R,n);e.path.isPrefixOf(a.key.path)?Gh(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new sv(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return av(t).get(Gp.key).next((function(t){return bl(!!t),t}))},t.prototype.me=function(t,e){return av(t).put(Gp.key,e)},t.prototype.ye=function(t,e){if(e){var n=bd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Cl.min()))return n}return lh.newInvalidDocument(t)},t}(),sv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new rv((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Zi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pf((function(t,e){return Il(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=wd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ud(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=wd(e.Ie.R,lh.newNoDocument(o,Cl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),rd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(iv);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){return dd(t,Gp.store)}function uv(t){return dd(t,zp.store)}function cv(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lv=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;bl(n<r&&n>=0&&r<=11);var o=new id("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Vp.store),function(t){t.createObjectStore(Up.store,{keyPath:Up.keyPath}),t.createObjectStore(jp.store,{keyPath:jp.keyPath,autoIncrement:!0}).createIndex(jp.userMutationsIndex,jp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(qp.store)}(t),hv(t),function(t){t.createObjectStore(zp.store)}(t));var s=rd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Wp.store),t.deleteObjectStore(Hp.store),t.deleteObjectStore(Qp.store)}(t),hv(t)),s=s.next((function(){return function(t){var e=t.store(Qp.store),n=new Qp(0,0,Cl.min().toTimestamp(),0);return e.put(Qp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(jp.store).Nt().next((function(n){t.deleteObjectStore(jp.store),t.createObjectStore(jp.store,{keyPath:jp.keyPath,autoIncrement:!0}).createIndex(jp.userMutationsIndex,jp.userMutationsKeyPath,{unique:!0});var r=e.store(jp.store),i=n.map((function(t){return r.put(t)}));return rd.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Yp.store,{keyPath:Yp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Gp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(zp.store);e.createIndex(zp.readTimeIndex,zp.readTimeIndexPath,{unique:!1}),e.createIndex(zp.collectionReadTimeIndex,zp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Xp.store,{keyPath:Xp.keyPath})}(t),function(t){t.createObjectStore(Jp.store,{keyPath:Jp.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(zp.store).$t((function(t,n){e+=Ud(n)})).next((function(){var n=new Gp(e);return t.store(Gp.store).put(Gp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Up.store),r=t.store(jp.store);return n.Nt().next((function(n){return rd.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(jp.userMutationsIndex,i).next((function(r){return rd.forEach(r,(function(r){bl(r.userId===n.userId);var i=Sd(e.R,r);return Vd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Wp.store),n=t.store(zp.store);return t.store(Qp.store).get(Qp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Rl(n),s=[0,Op(o)];r.push(e.get(s).next((function(n){return n?rd.resolve():(r=o,e.put(new Wp(0,Op(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return rd.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore($p.store,{keyPath:$p.keyPath});var n=e.store($p.store),r=new Od,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Op(i)})}};return e.store(zp.store).$t({kt:!0},(function(t,e){var n=new Rl(t);return i(n.popLast())})).next((function(){return e.store(qp.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Fp(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Hp.store);return n.$t((function(t,r){var i=Ad(r),o=Cd(e.R,i);return n.put(o)}))},t}();function hv(t){t.createObjectStore(Wp.store,{keyPath:Wp.keyPath}).createIndex(Wp.documentTargetsIndex,Wp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hp.store,{keyPath:Hp.keyPath}).createIndex(Hp.queryTargetsIndexName,Hp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Qp.store)}var fv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pv=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new hl(ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new ev(this,i),this.Le=n+"main",this.R=new md(u),this.Be=new od(this.Le,11,new lv(this.R)),this.qe=new Hd(this.referenceDelegate,this.R),this.Ut=new Ld,this.Ue=(h=this.R,f=this.Ut,new ov(h,f)),this.Ke=new Dd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&vl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new hl(ll.FAILED_PRECONDITION,fv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new cl(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return eo(e,void 0,void 0,(function(){return no(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return eo(e,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return eo(e,void 0,void 0,(function(){return no(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return vv(e).put(new Yp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ud(e))return dl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return dl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return dv(t).get(Vp.key).next((function(t){return rd.resolve(e.tn(t))}))},t.prototype.en=function(t){return vv(t).delete(this.clientId)},t.prototype.nn=function(){return eo(this,void 0,void 0,(function(){var t,e,n,r,i=this;return no(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=dd(t,Yp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return rd.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rd.resolve(!0):dv(t).get(Vp.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new hl(ll.FAILED_PRECONDITION,fv);return!1}}return!(!e.networkEnabled||!e.inForeground)||vv(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&dl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return eo(this,void 0,void 0,(function(){var t=this;return no(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Vp.store,Yp.store],(function(e){var n=new pd(e,cl.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return vv(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return jd.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;dl("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zp,(function(o){return i=new pd(o,r.Ne?r.Ne.next():cl.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw vl("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new hl(ll.FAILED_PRECONDITION,td);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return dv(t).get(Vp.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hl(ll.FAILED_PRECONDITION,fv)}))},t.prototype.Ze=function(t){var e=new Vp(this.clientId,this.allowTabSynchronization,Date.now());return dv(t).put(Vp.key,e)},t.yt=function(){return od.yt()},t.prototype.Xe=function(t){var e=this,n=dv(t);return n.get(Vp.key).next((function(t){return e.tn(t)?(dl("IndexedDbPersistence","Releasing primary lease."),n.delete(Vp.key)):rd.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!lo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return dl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return vl("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){vl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function dv(t){return dd(t,Vp.store)}function vv(t){return dd(t,Yp.store)}function yv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var gv=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Wl.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Vh(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Wl(e)).next((function(t){var e=jf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=jf();return this.Ut.getCollectionParents(t,i).next((function(s){return rd.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new kh(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=lh.newInvalidDocument(c),r=r.insert(c,l)),yf(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Gh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Kf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof _f&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),mv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Kf(),i=Kf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),bv=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Cl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(Lh(e)||Ph(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(pl()<=Ao.DEBUG&&dl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zh(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Pf(Hh(t));return e.forEach((function(e,r){Gh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return pl()<=Ao.DEBUG&&dl("QueryEngine","Using full collection scan to execute query:",zh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Cl.min())},t}(),wv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Rf(Il),this.kn=new rv((function(t){return ph(t)}),dh),this.$n=Cl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new gv(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e,n,r){return new wv(t,e,n,r)}function Ev(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o;return no(this,(function(s){switch(s.label){case 0:return n=wl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new gv(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Kf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Iv(t,e){var n=wl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=rd.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);bl(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function Tv(t){var e=wl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Sv(t,e){var n=wl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,bl((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=Vf();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Kf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Vf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Cl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):dl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Cl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return rd.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Av(t,e){var n=wl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Cv(t,e){var n=wl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,rd.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new gd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Nv(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s;return no(this,(function(a){switch(a.label){case 0:r=wl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ud(s=a.sent()))throw s;return dl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Dv(t,e,n){var r=wl(t),i=Cl.min(),o=Kf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=jh(e),c=wl(s),l=c.kn.get(u),void 0!==l?rd.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Cl.min(),n?o:Kf())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function xv(t,e){var n=wl(t),r=wl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function kv(t){var e=wl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=wl(n),s=Vf(),a=_d(i),u=uv(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:zp.readTimeIndex,range:c},(function(t,e){var n=bd(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:Ed(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Rv(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){return[2,(e=wl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=uv(t),n=Cl.min(),e.$t({index:zp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ed(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ov=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return rd.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ap(n.createTime)}),rd.resolve()},t.prototype.getNamedQuery=function(t,e){return rd.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:Nd(n.bundledQuery),readTime:ap(n.readTime)}),rd.resolve();var n},t}(),Lv=function(){function t(){this.Wn=new Pf(Pv.Gn),this.zn=new Pf(Pv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Pv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Pv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Wl(new Rl([])),r=new Pv(n,t),i=new Pv(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Wl(new Rl([])),n=new Pv(e,t),r=new Pv(e,t+1),i=Kf();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Pv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Pv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Wl.comparator(t.key,e.key)||Il(t.ns,e.ns)},t.Hn=function(t,e){return Il(t.ns,e.ns)||Wl.comparator(t.key,e.key)},t}(),Fv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pf(Pv.Gn)}return t.prototype.checkEmpty=function(t){return rd.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new vd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Pv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return rd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return rd.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return rd.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return rd.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return rd.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Pv(e,0),i=new Pv(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),rd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pf(Il);return e.forEach((function(t){var e=new Pv(t,0),i=new Pv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),rd.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Wl.isDocumentKey(i)||(i=i.child(""));var o=new Pv(new Wl(i),0),s=new Pf(Il);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),rd.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;bl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return rd.forEach(e.mutations,(function(i){var o=new Pv(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Pv(e,0),r=this.rs.firstAfterOrEqual(n);return rd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,rd.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Mv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Rf(Wl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return rd.resolve(n?n.document.clone():lh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Vf();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():lh.newInvalidDocument(t))})),rd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Vf(),i=new Wl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||Gh(e,c)&&(r=r.insert(c.key,c.clone()))}return rd.resolve(r)},t.prototype.fs=function(t,e){return rd.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Vv(this)},t.prototype.getSize=function(t){return rd.resolve(this.size)},t}(),Vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Zi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),rd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(iv),Uv=function(){function t(t){this.persistence=t,this.ds=new rv((function(t){return ph(t)}),dh),this.lastRemoteSnapshotVersion=Cl.min(),this.highestTargetId=0,this.ws=0,this._s=new Lv,this.targetCount=0,this.ys=Gd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),rd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return rd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return rd.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),rd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),rd.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Gd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,rd.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),rd.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,rd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),rd.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return rd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return rd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),rd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),rd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),rd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return rd.resolve(n)},t.prototype.containsKey=function(t,e){return rd.resolve(this._s.containsKey(e))},t}(),jv=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new cl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Uv(this),this.Ut=new Rd,this.Ue=(n=this.Ut,new Mv(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new md(e),this.Ke=new Ov(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Fv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;dl("MemoryPersistence","Starting transaction:",t);var i=new qv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return rd.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Zi(e,t),e}(ed),Bv=function(){function t(t){this.persistence=t,this.As=new Lv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ml()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),rd.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),rd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),rd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rd.forEach(this.vs,(function(r){var i=Wl.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return rd.or([function(){return rd.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Kv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){return"firestore_clients_"+t+"_"+e}function Gv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Hv(t,e){return"firestore_targets_"+t+"_"+e}Kv.UNAUTHENTICATED=new Kv(null),Kv.GOOGLE_CREDENTIALS=new Kv("google-credentials-uid"),Kv.FIRST_PARTY=new Kv("first-party-uid");var Wv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new hl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(vl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hl(i.error.code,i.error.message)),o?new t(e,i.state,r):(vl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),$v=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Gf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Hl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Yv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xv=function(){function t(){this.activeTargetIds=Gf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Rf(Il),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=zv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Xv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return eo(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return no(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(zv(this.persistenceKey,r)))&&(o=$v.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Hv(this.persistenceKey,t));if(n){var r=Qv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Hv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return dl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){dl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){dl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(dl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void vl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return eo(e,void 0,void 0,(function(){var t,e,r,i,o,s;return no(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=cl.o;if(null!=t)try{var n=JSON.parse(t);bl("number"==typeof n),e=n}catch(r){vl("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==cl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Wv(this.currentUser,t,e,n),i=Gv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Gv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Hv(this.persistenceKey,t),i=new Qv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return $v.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wv.Vs(new Kv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Qv.Vs(r,e)},t.prototype.js=function(t){return Yv.Vs(t)},t.prototype.ii=function(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(dl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Gf();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Zv=function(){function t(){this.li=new Xv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Xv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ty=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ey=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){dl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){dl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ny={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ry=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),iy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Zi(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new ul;s.listenOnce(nl.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case el.NO_ERROR:var e=s.getResponseJson();dl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case el.TIMEOUT:dl("Connection",'RPC "'+t+'" timed out'),o(new hl(ll.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:var n=s.getStatus();if(dl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(ll).indexOf(c)>=0?c:ll.UNKNOWN);o(new hl(a,r.message))}else o(new hl(ll.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new hl(ll.UNAVAILABLE,"Connection failed."));break;default:ml()}}finally{dl("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Yc,s=Ka(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new sl({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(co())||"object"==typeof navigator&&"ReactNative"===navigator.product||co().indexOf("Electron/")>=0||((r=co()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||co().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");dl("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new ry({Ei:function(t){h?dl("Connection","Not sending because WebChannel is closed:",t):(l||(dl("Connection","Opening WebChannel transport."),c.open(),l=!0),dl("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,al.EventType.OPEN,(function(){h||dl("Connection","WebChannel transport opened.")})),p(c,al.EventType.CLOSE,(function(){h||(h=!0,dl("Connection","WebChannel transport closed"),f.Vi())})),p(c,al.EventType.ERROR,(function(t){h||(h=!0,yl("Connection","WebChannel transport errored:",t),f.Vi(new hl(ll.UNAVAILABLE,"The operation could not be completed")))})),p(c,al.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];bl(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){dl("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Sf[t];if(void 0!==e)return kf(e)}(o),a=i.message;void 0===s&&(s=ll.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new hl(s,a)),c.close()}else dl("Connection","WebChannel received:",n),f.Si(n)}})),p(s,rl.STAT_EVENT,(function(t){t.stat===il?dl("Connection","Detected buffering proxy"):t.stat===ol&&dl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);dl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return dl("RestConnection","Received: ",t),t}),(function(e){throw yl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=ny[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){return"undefined"!=typeof window?window:null}function sy(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){return new rp(t,!0)}var uy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&dl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),cy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new uy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return eo(this,void 0,void 0,(function(){return no(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return eo(this,void 0,void 0,(function(){return no(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return eo(this,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ll.RESOURCE_EXHAUSTED?(vl(e.toString()),vl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ll.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new hl(ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return eo(t,void 0,void 0,(function(){return no(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return dl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(dl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ly=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Zi(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:ml(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(bl(void 0===e||"string"==typeof e),Fl.fromBase64String(e||"")):(bl(void 0===e||e instanceof Uint8Array),Fl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?ll.UNKNOWN:kf(t.code);return new hl(e,t.message||"")}(u);n=new Yf(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=hp(t,i.document.name),s=ap(i.document.updateTime);var u=new uh({mapValue:{fields:i.document.fields}}),c=(a=lh.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Qf(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=hp(t,i.document),s=i.readTime?ap(i.readTime):Cl.min(),u=lh.newNoDocument(o,s),a=i.removedTargetIds||[],n=new Qf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=hp(t,i.document),s=i.removedTargetIds||[],n=new Qf([],s,o,null);else{if(!("filter"in e))return ml();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new Df(i),s=h.targetId,n=new $f(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Cl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Cl.min():e.readTime?ap(e.readTime):Cl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=dp(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=vh(i)?{documents:bp(e,i)}:{query:wp(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=op(e,n.resumeToken):n.snapshotVersion.compareTo(Cl.min())>0&&(r.readTime=ip(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ml()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=dp(this.R),e.removeTarget=t,this.cr(e)},e}(cy),hy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Zi(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(bl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(bl(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?ap(e.updateTime):ap(n)).isEqual(Cl.min())&&(r=ap(n)),new hf(r,e.transformResults||[]);var e,n,r}))):[]),n=ap(t.commitTime);return this.listener.Tr(n,e)}var r,i;return bl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=dp(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return gp(e.R,t)}))};this.cr(n)},e}(cy),fy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Zi(e,t),e.prototype.br=function(){if(this.Rr)throw new hl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new hl(ll.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new hl(ll.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),py=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(vl(e),this.Vr=!1):dl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),dy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return eo(o,void 0,void 0,(function(){return no(this,(function(t){switch(t.label){case 0:return Iy(this)?(dl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return(e=wl(t)).Or.add(4),[4,yy(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,vy(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new py(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){return eo(this,void 0,void 0,(function(){var e,n;return no(this,(function(r){switch(r.label){case 0:if(!Iy(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function yy(t){return eo(this,void 0,void 0,(function(){var e,n;return no(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function gy(t,e){var n=wl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ey(n)?_y(n):Vy(n).er()&&by(n,e))}function my(t,e){var n=wl(t),r=Vy(n);n.$r.delete(e),r.er()&&wy(n,e),0===n.$r.size&&(r.er()?r.ir():Iy(n)&&n.Br.set("Unknown"))}function by(t,e){t.qr.U(e.targetId),Vy(t).mr(e)}function wy(t,e){t.qr.U(e),Vy(t).yr(e)}function _y(t){t.qr=new Jf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Vy(t).start(),t.Br.Sr()}function Ey(t){return Iy(t)&&!Vy(t).tr()&&t.$r.size>0}function Iy(t){return 0===wl(t).Or.size}function Ty(t){t.qr=void 0}function Sy(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){return t.$r.forEach((function(e,n){by(t,e)})),[2]}))}))}function Ay(t,e){return eo(this,void 0,void 0,(function(){return no(this,(function(n){return Ty(t),Ey(t)?(t.Br.Nr(e),_y(t)):t.Br.set("Unknown"),[2]}))}))}function Cy(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o;return no(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Yf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o;return no(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),dl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ny(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Qf?t.qr.X(e):e instanceof $f?t.qr.rt(e):t.qr.et(e),n.isEqual(Cl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Tv(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(Fl.EMPTY_BYTE_STRING,e.snapshotVersion)),wy(a,t);var n=new gd(e.target,t,1,e.sequenceNumber);by(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return dl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ny(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function Ny(t,e,n){return eo(this,void 0,void 0,(function(){var r=this;return no(this,(function(i){switch(i.label){case 0:if(!ud(e))throw e;return t.Or.add(1),[4,yy(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Tv(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return eo(r,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return dl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,vy(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Dy(t,e){return e().catch((function(n){return Ny(t,n,e)}))}function xy(t){return eo(this,void 0,void 0,(function(){var e,n,r,i,o;return no(this,(function(s){switch(s.label){case 0:e=wl(t),n=Uy(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(Iy(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Av(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Uy(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ny(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ky(e)&&Ry(e),[2]}var a}))}))}function ky(t){return Iy(t)&&!Uy(t).tr()&&t.kr.length>0}function Ry(t){Uy(t).start()}function Oy(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){return Uy(t).Ar(),[2]}))}))}function Ly(t){return eo(this,void 0,void 0,(function(){var e,n,r,i;return no(this,(function(o){for(e=Uy(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Py(t,e,n){return eo(this,void 0,void 0,(function(){var r,i;return no(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=yd.from(r,e,n),[4,Dy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,xy(t)];case 2:return o.sent(),[2]}}))}))}function Fy(t,e){return eo(this,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return e&&Uy(t).pr?[4,function(t,e){return eo(this,void 0,void 0,(function(){var n,r;return no(this,(function(i){switch(i.label){case 0:return xf(r=e.code)&&r!==ll.ABORTED?(n=t.kr.shift(),Uy(t).sr(),[4,Dy(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,xy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ky(t)&&Ry(t),[2]}}))}))}function My(t,e){return eo(this,void 0,void 0,(function(){var n;return no(this,(function(r){switch(r.label){case 0:return n=wl(t),e?(n.Or.delete(2),[4,vy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,yy(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Vy(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:Sy.bind(null,t),Ri:Ay.bind(null,t),_r:Cy.bind(null,t)},(i=wl(e)).br(),new ly(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return eo(o,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),Ey(t)?_y(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),Ty(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Uy(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:Oy.bind(null,t),Ri:Fy.bind(null,t),Ir:Ly.bind(null,t),Tr:Py.bind(null,t)},(i=wl(e)).br(),new hy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return eo(o,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,xy(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(dl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var jy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hl(ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function qy(t,e){if(vl("AsyncQueue",e+": "+t),ud(t))return new hl(ll.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var By=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Wl.comparator(e.key,n.key)}:function(t,e){return Wl.comparator(t.key,e.key)},this.keyedMap=jf(),this.sortedSet=new Rf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ky=function(){function t(){this.Qr=new Rf(Wl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ml():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),zy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,By.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Gy=function(){this.Wr=void 0,this.listeners=[]},Hy=function(){this.queries=new rv((function(t){return Kh(t)}),Bh),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return no(this,(function(c){switch(c.label){case 0:if(n=wl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Gy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=qy(a,"Initialization of query '"+zh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Xy(n),[2]}}))}))}function Qy(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s;return no(this,(function(a){return n=wl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function $y(t,e){for(var n=wl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Xy(n)}function Yy(t,e,n){var r=wl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Xy(t){t.Gr.forEach((function(t){t.next()}))}var Jy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new zy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=zy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Zy=function(t){this.key=t},tg=function(t){this.key=t},eg=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Kf(),this.mutatedKeys=Kf(),this.lo=Hh(t),this.fo=new By(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ky,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Lh(this.query)&&i.size===this.query.limit?i.last():null,c=Ph(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Gh(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Lh(this.query)||Ph(this.query))for(;s.size>this.query.limit;){var l=Lh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ml()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new zy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ky,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Kf(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new tg(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Zy(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Kf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return zy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ng=function(t,e,n){this.query=t,this.targetId=e,this.view=n},rg=function(t){this.key=t,this.bo=!1},ig=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new rv((function(t){return Kh(t)}),Bh),this.Vo=new Map,this.So=new Set,this.Do=new Rf(Wl.comparator),this.Co=new Map,this.No=new Lv,this.xo={},this.Fo=new Map,this.ko=Gd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a;return no(this,(function(u){switch(u.label){case 0:return n=Lg(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Cv(n.localStore,jh(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,sg(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&gy(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function sg(t,e,n,r){return eo(this,void 0,void 0,(function(){var i,o,s,a,u,c;return no(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return eo(this,void 0,void 0,(function(){var i,o,s;return no(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Dv(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(bg(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Dv(t.localStore,e,!0)];case 1:return i=l.sent(),o=new eg(e,i.Bn),s=o._o(i.documents),a=Wf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),bg(t,n,u.To),c=new ng(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function ag(t,e){return eo(this,void 0,void 0,(function(){var n,r,i;return no(this,(function(o){switch(o.label){case 0:return n=wl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Bh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Nv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),my(n.remoteStore,r.targetId),gg(n,r.targetId)})).catch(Yd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return gg(n,r.targetId),[4,Nv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ug(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s;return no(this,(function(a){switch(a.label){case 0:r=Pg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=wl(u),f=Al.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Kf()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=gf(o,l.get(o.key));null!=s&&n.push(new _f(o.key,s,ch(s.value.mapValue),ff.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Rf(Il)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Eg(r,i.changes)];case 3:return a.sent(),[4,xy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=qy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function cg(t,e){return eo(this,void 0,void 0,(function(){var n,r;return no(this,(function(i){switch(i.label){case 0:n=wl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Sv(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(bl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?bl(r.bo):t.removedDocuments.size>0&&(bl(r.bo),r.bo=!1))})),[4,Eg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Yd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function lg(t,e,n){var r=wl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Xy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hg(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s,a,u;return no(this,(function(c){switch(c.label){case 0:return(r=wl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Rf(Wl.comparator)).insert(o,lh.newNoDocument(o,Cl.min())),a=Kf().add(o),u=new Hf(Cl.min(),new Map,new Pf(Il),s,a),[4,cg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),_g(r),[3,4];case 2:return[4,Nv(r.localStore,e,!1).then((function(){return gg(r,e,n)})).catch(Yd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function fg(t,e){return eo(this,void 0,void 0,(function(){var n,r,i;return no(this,(function(o){switch(o.label){case 0:n=wl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Iv(n.localStore,e)];case 2:return i=o.sent(),yg(n,r,null),vg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Eg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function pg(t,e,n){return eo(this,void 0,void 0,(function(){var r,i;return no(this,(function(o){switch(o.label){case 0:r=wl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=wl(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return bl(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),yg(r,e,n),vg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Eg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function dg(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s;return no(this,(function(a){switch(a.label){case 0:Iy((n=wl(t)).remoteStore)||dl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=wl(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=qy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function vg(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function yg(t,e,n){var r=wl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function gg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||mg(t,e)}))}function mg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(my(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),_g(t))}function bg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Zy?(t.No.addReference(o.key,e),wg(t,o)):o instanceof tg?(dl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||mg(t,o.key)):ml()}}function wg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(dl("SyncEngine","New document in limbo: "+n),t.So.add(r),_g(t))}function _g(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Wl(Rl.fromString(e)),r=t.ko.next();t.Co.set(r,new rg(n)),t.Do=t.Do.insert(n,r),gy(t.remoteStore,new gd(jh(Oh(n.path)),r,2,cl.o))}}function Eg(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s;return no(this,(function(a){switch(a.label){case 0:return r=wl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=mv.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return no(this,(function(h){switch(h.label){case 0:n=wl(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return rd.forEach(e,(function(e){return rd.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return rd.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ud(r=h.sent()))throw r;return dl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Ig(t,e){return eo(this,void 0,void 0,(function(){var n,r;return no(this,(function(i){switch(i.label){case 0:return(n=wl(t)).currentUser.isEqual(e)?[3,3]:(dl("SyncEngine","User change. New user:",e.toKey()),[4,Ev(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new hl(ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Eg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function Tg(t,e){var n=wl(t),r=n.Co.get(e);if(r&&r.bo)return Kf().add(r.key);var i=Kf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Sg(t,e){return eo(this,void 0,void 0,(function(){var n,r,i;return no(this,(function(o){switch(o.label){case 0:return[4,Dv((n=wl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&bg(n,e.targetId,i.To),i)]}}))}))}function Ag(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){return[2,kv((e=wl(t)).localStore).then((function(t){return Eg(e,t)}))]}))}))}function Cg(t,e,n,r){return eo(this,void 0,void 0,(function(){var i,o;return no(this,(function(s){switch(s.label){case 0:return[4,(a=(i=wl(t)).localStore,u=e,c=wl(a),l=wl(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):rd.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,xy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(yg(i,e,r||null),vg(i,e),function(t,e){wl(wl(t)._n).Gt(e)}(i.localStore,e)):ml(),s.label=4;case 4:return[4,Eg(i,o)];case 5:return s.sent(),[3,7];case 6:dl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function Ng(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return no(this,(function(l){switch(l.label){case 0:return Lg(n=wl(t)),Pg(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Dg(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,My(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],gy(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return gg(n,e),Nv(n.localStore,e,!0)})),my(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Dg(n,u)];case 5:return l.sent(),(h=wl(n)).Co.forEach((function(t,e){my(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Rf(Wl.comparator),n.$o=!1,[4,My(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function Dg(t,e,n){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return no(this,(function(y){switch(y.label){case 0:n=wl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Cv(n.localStore,jh(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,Sg(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,xv(n.localStore,a)];case 8:return v=y.sent(),[4,Cv(n.localStore,v)];case 9:return u=y.sent(),[4,sg(n,xg(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function xg(t){return Rh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kg(t){var e=wl(t);return wl(wl(e.localStore).persistence).fn()}function Rg(t,e,n,r){return eo(this,void 0,void 0,(function(){var i,o,s;return no(this,(function(a){switch(a.label){case 0:return(i=wl(t)).$o?(dl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,kv(i.localStore)];case 3:return o=a.sent(),s=Hf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Eg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Nv(i.localStore,e,!0)];case 6:return a.sent(),gg(i,e,r),[3,8];case 7:ml(),a.label=8;case 8:return[2]}}))}))}function Og(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return no(this,(function(p){switch(p.label){case 0:if(!(r=Lg(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(dl("SyncEngine","Adding an already active target "+s),[3,5]):[4,xv(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Cv(r.localStore,a)];case 3:return u=p.sent(),[4,sg(r,xg(a),u.targetId,!1)];case 4:p.sent(),gy(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return no(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Nv(r.localStore,t,!1).then((function(){my(r.remoteStore,t),gg(r,t)})).catch(Yd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Lg(t){var e=wl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hg.bind(null,e),e.vo._r=$y.bind(null,e.eventManager),e.vo.Mo=Yy.bind(null,e.eventManager),e}function Pg(t){var e=wl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pg.bind(null,e),e}var Fg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return this.R=ay(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return _v(this.persistence,new bv,t.initialUser,this.R)},t.prototype.qo=function(t){return new jv(Bv.bs,this.R)},t.prototype.Bo=function(t){return new Zv},t.prototype.terminate=function(){return eo(this,void 0,void 0,(function(){return no(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Mg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Zi(e,t),e.prototype.initialize=function(e){return eo(this,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Rv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Pg(this.Qo.syncEngine)];case 4:return n.sent(),[4,xy(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return _v(this.persistence,new bv,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Zd(e,t.asyncQueue)},e.prototype.qo=function(t){var e=yv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Md.withCacheSize(this.cacheSizeBytes):Md.DEFAULT;return new pv(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,oy(),sy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Zv},e}(Fg),Vg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Zi(e,t),e.prototype.initialize=function(e){return eo(this,void 0,void 0,(function(){var n,r=this;return no(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Jv?(this.sharedClientState.syncEngine={ui:Cg.bind(null,n),ai:Rg.bind(null,n),hi:Og.bind(null,n),fn:kg.bind(null,n),ci:Ag.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return eo(r,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return[4,Ng(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=oy();if(!Jv.yt(e))throw new hl(ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Jv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Mg),Ug=function(){function t(){}return t.prototype.initialize=function(t,e){return eo(this,void 0,void 0,(function(){var n=this;return no(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return lg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ig.bind(null,this.syncEngine),[4,My(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Hy},t.prototype.createDatastore=function(t){var e,n,r=ay(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new iy(e));return n=t.credentials,new fy(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return lg(s.syncEngine,t,0)},o=ey.yt()?new ey:new ty,new dy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new ig(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return e=wl(t),dl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,yy(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),jg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),qg=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return eo(this,void 0,void 0,(function(){var e,n=this;return no(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new hl(ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return eo(this,void 0,void 0,(function(){var n,r,i,o,s,a;return no(this,(function(u){switch(u.label){case 0:return n=wl(t),r=dp(n.R)+"/documents",i={documents:e.map((function(t){return lp(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){bl(!!e.found),e.found.name,e.found.updateTime;var n=hp(t,e.found.name),r=ap(e.found.updateTime),i=new uh({mapValue:{fields:e.found.fields}});return lh.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){bl(!!e.missing),bl(!!e.readTime);var n=hp(t,e.missing),r=ap(e.readTime);return lh.newNoDocument(n,r)}(e,r):ml());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());bl(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Cf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return eo(this,void 0,void 0,(function(){var t,e=this;return no(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Wl.fromPath(n);e.mutations.push(new Nf(r,e.precondition(r)))})),[4,function(t,e){return eo(this,void 0,void 0,(function(){var n,r,i;return no(this,(function(o){switch(o.label){case 0:return n=wl(t),r=dp(n.R)+"/documents",i={writes:e.map((function(t){return gp(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ml();e=Cl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hl(ll.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ff.updateTime(e):ff.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Cl.min()))throw new hl(ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ff.updateTime(e)}return ff.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Bg=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new uy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return eo(t,void 0,void 0,(function(){var t,e,n=this;return no(this,(function(r){return t=new qg(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!zl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xf(e)}return!1},t}(),Kg=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Kv.UNAUTHENTICATED,this.clientId=El.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return eo(r,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return dl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return eo(this,void 0,void 0,(function(){return no(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new hl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return eo(t,void 0,void 0,(function(){var t,n;return no(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=qy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zg(t,e){return eo(this,void 0,void 0,(function(){var n,r,i=this;return no(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),dl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return eo(i,void 0,void 0,(function(){return no(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Ev(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Gg(t,e){return eo(this,void 0,void 0,(function(){var n,r;return no(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Hg(t)];case 1:return n=i.sent(),dl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return eo(this,void 0,void 0,(function(){var n,r;return no(this,(function(i){switch(i.label){case 0:return(n=wl(t)).asyncQueue.verifyOperationInProgress(),dl("RemoteStore","RemoteStore received new credentials"),r=Iy(n),n.Or.add(3),[4,yy(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,vy(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Hg(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(dl("FirestoreClient","Using default OfflineComponentProvider"),[4,zg(t,new Fg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Wg(t){return eo(this,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(dl("FirestoreClient","Using default OnlineComponentProvider"),[4,Gg(t,new Ug)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Qg(t){return Hg(t).then((function(t){return t.persistence}))}function $g(t){return Hg(t).then((function(t){return t.localStore}))}function Yg(t){return Wg(t).then((function(t){return t.remoteStore}))}function Xg(t){return Wg(t).then((function(t){return t.syncEngine}))}function Jg(t){return eo(this,void 0,void 0,(function(){var e,n;return no(this,(function(r){switch(r.label){case 0:return[4,Wg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=og.bind(null,e.syncEngine),n.onUnlisten=ag.bind(null,e.syncEngine),n)]}}))}))}function Zg(t,e,n){var r=this;void 0===n&&(n={});var i=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(r,void 0,void 0,(function(){var r;return no(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jg({next:function(o){e.enqueueAndForget((function(){return Qy(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new hl(ll.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new hl(ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Jy(Oh(n.path),o,{includeMetadataChanges:!0,so:!0});return Wy(t,s)},[4,Jg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function tm(t,e,n){var r=this;void 0===n&&(n={});var i=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(r,void 0,void 0,(function(){var r;return no(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jg({next:function(n){e.enqueueAndForget((function(){return Qy(t,s)})),n.fromCache&&"server"===r.source?i.reject(new hl(ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Jy(n,o,{includeMetadataChanges:!0,so:!0});return Wy(t,s)},[4,Jg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var em=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},nm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),rm=new Map,im=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},om=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Kv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),sm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),am=function(){function t(t){var e=this;this.currentUser=Kv.UNAUTHENTICATED,this.oc=new nd,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){dl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(dl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(dl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(bl("string"==typeof n.accessToken),new im(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return eo(n,void 0,void 0,(function(){return no(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return bl(null===t||"string"==typeof t),new Kv(t)},t}(),um=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Kv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),cm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new um(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Kv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){if(!n)throw new hl(ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function hm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hl(ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fm(t,e,n,r){if(!0===e&&!0===r)throw new hl(ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function pm(t){if(!Wl.isDocumentKey(t))throw new hl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function dm(t){if(Wl.isDocumentKey(t))throw new hl(ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function vm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ml()}function ym(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new hl(ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vm(t);throw new hl(ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function gm(t,e){if(e<=0)throw new hl(ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hl(ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hl(ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),bm=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1,t instanceof nm?(this._databaseId=t,this._credentials=new om):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hl(ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nm(t.options.projectId)}(t),this._credentials=new am(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new hl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new hl(ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new om;switch(t.type){case"gapi":var e=t.client;return bl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new cm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new hl(ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=rm.get(this))&&(dl("ComponentProvider","Removing Datastore"),rm.delete(this),t.terminate()),Promise.resolve();var t},t}(),wm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Em(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),_m=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Em=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Oh(r))||this)._path=r,i.type="collection",i}return Zi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new wm(this.firestore,null,new Wl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(_m);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=wo(t),lm("collection","path",e),t instanceof bm)return dm(n=Rl.fromString.apply(Rl,oo([e],r))),new Em(t,null,n);if(!(t instanceof wm||t instanceof Em))throw new hl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dm(n=Rl.fromString.apply(Rl,oo([t.path],r)).child(Rl.fromString(e))),new Em(t.firestore,null,n)}function Tm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=wo(t),1===arguments.length&&(e=El.u()),lm("doc","path",e),t instanceof bm)return pm(n=Rl.fromString.apply(Rl,oo([e],r))),new wm(t,null,new Wl(n));if(!(t instanceof wm||t instanceof Em))throw new hl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pm(n=t._path.child(Rl.fromString.apply(Rl,oo([e],r)))),new wm(t.firestore,t instanceof Em?t.converter:null,new Wl(n))}function Sm(t,e){return t=wo(t),e=wo(e),(t instanceof wm||t instanceof Em)&&(e instanceof wm||e instanceof Em)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Am(t,e){return t=wo(t),e=wo(e),t instanceof _m&&e instanceof _m&&t.firestore===e.firestore&&Bh(t._query,e._query)&&t.converter===e.converter}var Cm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new uy(this,"async_queue_retry"),this.Ic=function(){var e=sy();e&&dl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=sy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=sy();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new nd;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return eo(this,void 0,void 0,(function(){var t,e=this;return no(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ud(t=n.sent()))throw t;return dl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,vl("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=jy.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&ml()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return eo(this,void 0,void 0,(function(){var t;return no(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Nm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Dm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Cm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Zi(e,t),e.prototype._terminate=function(){return this._firestoreClient||km(this),this._firestoreClient.terminate()},e}(bm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){return t._firestoreClient||km(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function km(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new em(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new Kg(t._credentials,t._queue,a)}function Rm(t,e,n){var r=this,i=new nd;return t.asyncQueue.enqueue((function(){return eo(r,void 0,void 0,(function(){var r;return no(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,zg(t,n)];case 1:return o.sent(),[4,Gg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===ll.FAILED_PRECONDITION||s.code===ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function Om(t){if(t._initialized||t._terminated)throw new hl(ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new hl(ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ll(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Pm=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Fl.fromBase64String(e))}catch(n){throw new hl(ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(Fl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Fm=function(t){this._methodName=t},Mm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new hl(ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hl(ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Il(this._lat,t._lat)||Il(this._long,t._long)},t}(),Vm=/^__.*__$/,Um=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new _f(t,this.data,this.fieldMask,e,this.fieldTransforms):new wf(t,this.data,e,this.fieldTransforms)},t}(),jm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new _f(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ml()}}var Bm=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return ub(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(qm(this.Nc)&&Vm.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Km=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ay(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Bm({Nc:t,methodName:e,qc:n,path:Ll.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function zm(t){var e=t._freezeSettings(),n=ay(t._databaseId);return new Km(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);ib("Data must be an object, but it was:",s,r);var a,u,c=nb(r,s);if(o.merge)a=new Pl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=ob(e,f[h],n);if(!s.contains(p))throw new hl(ll.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");cb(l,p)||l.push(p)}a=new Pl(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Um(new uh(c),a,u)}var Hm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Fm);function Wm(t,e,n){return new Bm({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype._toFieldTransform=function(t){return new lf(t.path,new ef)},e.prototype.isEqual=function(t){return t instanceof e},e}(Fm),$m=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Zi(e,t),e.prototype._toFieldTransform=function(t){var e=Wm(this,t,!0),n=this.Kc.map((function(t){return eb(t,e)})),r=new nf(n);return new lf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fm),Ym=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Zi(e,t),e.prototype._toFieldTransform=function(t){var e=Wm(this,t,!0),n=this.Kc.map((function(t){return eb(t,e)})),r=new of(n);return new lf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fm),Xm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Zi(e,t),e.prototype._toFieldTransform=function(t){var e=new af(t.R,Yh(t.R,this.Qc));return new lf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Fm);function Jm(t,e,n,r){var i=t.Uc(1,e,n);ib("Data must be an object, but it was:",i,r);var o=[],s=uh.empty();Dl(r,(function(t,r){var a=ab(e,t,n);r=wo(r);var u=i.Oc(a);if(r instanceof Hm)o.push(a);else{var c=eb(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Pl(o);return new jm(s,a,i.fieldTransforms)}function Zm(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[ob(e,r,n)],u=[i];if(o.length%2!=0)throw new hl(ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ob(e,o[c])),u.push(o[c+1]);for(var l=[],h=uh.empty(),f=a.length-1;f>=0;--f)if(!cb(l,a[f])){var p=a[f],d=u[f];d=wo(d);var v=s.Oc(p);if(d instanceof Hm)l.push(p);else{var y=eb(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new Pl(l);return new jm(h,g,s.fieldTransforms)}function tb(t,e,n,r){return void 0===r&&(r=!1),eb(n,t.Uc(r?4:3,e))}function eb(t,e){if(rb(t=wo(t)))return ib("Unsupported field value:",e,t),nb(t,e);if(t instanceof Fm)return function(t,e){if(!qm(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=eb(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=wo(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Al.fromDate(t);return{timestampValue:ip(e.R,n)}}if(t instanceof Al)return n=new Al(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ip(e.R,n)};if(t instanceof Mm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pm)return{bytesValue:op(e.R,t._byteString)};if(t instanceof wm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:up(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+vm(t))}(t,e)}function nb(t,e){var n={};return xl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dl(t,(function(t,r){var i=eb(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function rb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Al||t instanceof Mm||t instanceof Pm||t instanceof wm||t instanceof Fm)}function ib(t,e,n){if(!rb(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=vm(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function ob(t,e,n){if((e=wo(e))instanceof Lm)return e._internalPath;if("string"==typeof e)return ab(t,e);throw ub("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var sb=new RegExp("[~\\*/\\[\\]]");function ab(t,e,n){if(e.search(sb)>=0)throw ub("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Lm.bind.apply(Lm,oo([void 0],e.split(".")))))._internalPath}catch(uw){throw ub("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ub(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new hl(ll.INVALID_ARGUMENT,(a+=". ")+t+u)}function cb(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new wm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new hb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(fb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lb);function fb(t,e){return"string"==typeof e?ab(t,e):e instanceof Lm?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),db=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Zi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new vb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(fb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(lb),vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(db),yb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new pb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new vb(n._firestore,n._userDataWriter,r.key,r,new pb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hl(ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new vb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new pb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new vb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new pb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:gb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function gb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ml()}}function mb(t,e){return t instanceof db&&e instanceof db?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yb&&e instanceof yb&&t._firestore===e._firestore&&Am(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){if(Ph(t)&&0===t.explicitOrderBy.length)throw new hl(ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wb=function(){};function _b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Zi(e,t),e.prototype._apply=function(t){var e,n,r,i=zm(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Db(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Nb(r,t,h))}a={arrayValue:{values:u}}}else a=Nb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Db(s,o),a=tb(n,"where",s,"in"===o||"not-in"===o);var f=yh.create(i,o,a);return function(t,e){if(e.g()){var n=Mh(t);if(null!==n&&!n.isEqual(e.field))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Fh(t);null!==r&&xb(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new hl(ll.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hl(ll.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new _m(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new kh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(wb),Ib=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Zi(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ch(e,n);return function(t,e){if(null===Fh(t)){var n=Mh(t);null!==n&&xb(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new _m(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new kh(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(wb),Tb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Zi(e,t),e.prototype._apply=function(t){return new _m(t.firestore,t.converter,qh(t._query,this.Hc,this.Jc))},e}(wb),Sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Zi(e,t),e.prototype._apply=function(t){var e,n,r=Cb(t,this.type,this.Yc,this.Xc);return new _m(t.firestore,t.converter,(e=t._query,n=r,new kh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(wb),Ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Zi(e,t),e.prototype._apply=function(t){var e,n,r=Cb(t,this.type,this.Yc,this.Xc);return new _m(t.firestore,t.converter,(e=t._query,n=r,new kh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(wb);function Cb(t,e,n,r){if(n[0]=wo(n[0]),n[0]instanceof lb)return function(t,e,n,r,i){if(!r)throw new hl(ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Uh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(eh(e,r.key));else{var c=r.data.field(u.field);if(ql(c))throw new hl(ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Sh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=zm(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new hl(ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vh(t)&&-1!==c.indexOf("/"))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Rl.fromString(c));if(!Wl.isDocumentKey(l))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Wl(l);a.push(eh(e,h))}else{var f=tb(n,r,c);a.push(f)}}return new Sh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Nb(t,e,n){if("string"==typeof(n=wo(n))){if(""===n)throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(e)&&-1!==n.indexOf("/"))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Rl.fromString(n));if(!Wl.isDocumentKey(r))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return eh(t,new Wl(r))}if(n instanceof wm)return eh(t,n._key);throw new hl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vm(n)+".")}function Db(t,e){if(!Array.isArray(t)||0===t.length)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new hl(ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function xb(t,e,n){if(!n.isEqual(e))throw new hl(ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ql(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ul(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ml()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Dl(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Mm(Ul(t.latitude),Ul(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Bl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Kl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Vl(t);return new Al(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Rl.fromString(t);bl(Rp(n));var r=new nm(n.get(1),n.get(3)),i=new Wl(n.popFirst(5));return r.isEqual(e)||vl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ob=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Zi(e,t),e.prototype.convertBytes=function(t){return new Pm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new wm(this.firestore,null,e)},e}(kb),Lb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zm(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Pb(t,this._firestore),i=Rb(r.converter,e,n),o=Gm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ff.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Pb(t,this._firestore);return o="string"==typeof(e=wo(e))||e instanceof Lm?Zm(this._dataReader,"WriteBatch.update",s._key,e,n,r):Jm(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ff.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Pb(t,this._firestore);return this._mutations=this._mutations.concat(new Cf(e._key,ff.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new hl(ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if((t=wo(t)).firestore!==e)throw new hl(ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Zi(e,t),e.prototype.convertBytes=function(t){return new Pm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new wm(this.firestore,null,e)},e}(kb);function Mb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ym(t,wm);var o=ym(t.firestore,Dm),s=zm(o);return Ub(o,[("string"==typeof(e=wo(e))||e instanceof Lm?Zm(s,"updateDoc",t._key,e,n,r):Jm(s,"updateDoc",t._key,e)).toMutation(t._key,ff.exists(!0))])}function Vb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=wo(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Nm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Nm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof wm)c=ym(t.firestore,Dm),l=Oh(t._key.path),u={next:function(e){i[a]&&i[a](jb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=ym(t,_m);c=ym(p.firestore,Dm),l=p._query;var d=new Fb(c);u={next:function(t){i[a]&&i[a](new yb(c,d,p,t))},error:i[a+1],complete:i[a+2]},bb(t._query)}return function(t,e,n,r){var i=this,o=new jg(r),s=new Jy(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return eo(i,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return e=Wy,[4,Jg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return eo(i,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return e=Qy,[4,Jg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(xm(c),l,h,u)}function Ub(t,e){return function(t,e){var n=this,r=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var n;return no(this,(function(i){switch(i.label){case 0:return n=ug,[4,Xg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(xm(t),e)}function jb(t,e,n){var r=n.docs.get(e._key),i=new Fb(t);return new db(t,i,e._key,r,new pb(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Zi(e,t),e.prototype.get=function(e){var n=this,r=Pb(e,this._firestore),i=new Fb(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new db(n._firestore,i,r._key,t._document,new pb(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=zm(t)}return t.prototype.get=function(t){var e=this,n=Pb(t,this._firestore),r=new Ob(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return ml();var i=t[0];if(i.isFoundDocument())return new lb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new lb(e._firestore,r,n._key,null,n.converter);throw ml()}))},t.prototype.set=function(t,e,n){var r=Pb(t,this._firestore),i=Rb(r.converter,e,n),o=Gm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Pb(t,this._firestore);return o="string"==typeof(e=wo(e))||e instanceof Lm?Zm(this._dataReader,"Transaction.update",s._key,e,n,r):Jm(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Pb(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){if("undefined"==typeof Uint8Array)throw new hl(ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Kb(){if("undefined"==typeof atob)throw new hl(ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Kb(),new t(Pm.fromBase64String(e))},t.fromUint8Array=function(e){return Bb(),new t(Pm.fromUint8Array(e))},t.prototype.toBase64=function(){return Kb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Bb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Gb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Om(t=ym(t,Dm));var n=xm(t),r=t._freezeSettings(),i=new Ug;return Rm(n,i,new Mg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Om(t=ym(t,Dm));var e=xm(t),n=t._freezeSettings(),r=new Ug;return Rm(e,r,new Vg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new hl(ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nd;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return eo(e,void 0,void 0,(function(){var e;return no(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return od.yt()?(e=t+"main",[4,od.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(yv(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Hb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof nm||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||yl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=ym(t,bm))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&yl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=to({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[so.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),so.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new hl(ll.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new sm(new im(o,new Kv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return eo(e,void 0,void 0,(function(){var e,n;return no(this,(function(r){switch(r.label){case 0:return[4,Qg(t)];case 1:return e=r.sent(),[4,Yg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=wl(i),o.Or.delete(0),vy(o))]}var i,o}))}))}))}(xm(ym(this._delegate,Dm)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return eo(e,void 0,void 0,(function(){var e,n;return no(this,(function(r){switch(r.label){case 0:return[4,Qg(t)];case 1:return e=r.sent(),[4,Yg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return eo(this,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return(e=wl(t)).Or.add(0),[4,yy(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(xm(ym(this._delegate,Dm)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&fm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(e,void 0,void 0,(function(){var e;return no(this,(function(r){switch(r.label){case 0:return e=dg,[4,Xg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(xm(ym(this._delegate,Dm)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new jg(e);return t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return e=function(t,e){wl(t).Gr.add(e),e.next()},[4,Jg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var e;return no(this,(function(n){switch(n.label){case 0:return e=function(t,e){wl(t).Gr.delete(e)},[4,Jg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(xm(e=ym(e,Dm)),Nm(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new hl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sw(this,Im(this._delegate,t))}catch(e){throw Jb(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Xb(this,Tm(this._delegate,t))}catch(e){throw Jb(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new rw(this,function(t,e){if(t=ym(t,bm),lm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _m(t,null,(n=e,new kh(Rl.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw Jb(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var n;return no(this,(function(i){switch(i.label){case 0:return[4,(o=t,Wg(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Bg(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(xm(e=this._delegate),(function(r){return function(e){return t(new Qb(n,e))}(new qb(e,r))}))},t.prototype.batch=function(){var t=this;return xm(this._delegate),new $b(new Lb(this._delegate,(function(e){return Ub(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new hl(ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new hl(ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Wb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Zi(e,t),e.prototype.convertBytes=function(t){return new zb(new Pm(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Xb.eu(e,this.firestore,null)},e}(kb);var Qb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.prototype.get=function(t){var e=this,n=aw(t);return this._delegate.get(n).then((function(t){return new ew(e._firestore,new db(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=aw(t);return n?(hm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=aw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,oo([s,e,n],i)),this},t.prototype.delete=function(t){var e=aw(t);return this._delegate.delete(e),this},t}(),$b=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=aw(t);return n?(hm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=aw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,oo([s,e,n],i)),this},t.prototype.delete=function(t){var e=aw(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Yb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new vb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new nw(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Wb(e),n),i.set(n,o)),o},t}();Yb.su=new WeakMap;var Xb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new hl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new wm(n._delegate,r,new Wl(e)))},t.eu=function(e,n,r){return new t(n,new wm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new sw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sw(this.firestore,Im(this._delegate,t))}catch(e){throw Jb(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=wo(t))instanceof wm&&Sm(this._delegate,t)},t.prototype.set=function(t,e){e=hm("DocumentReference.set",e);try{return function(t,e,n){t=ym(t,wm);var r=ym(t.firestore,Dm),i=Rb(t.converter,e,n);return Ub(r,[Gm(zm(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ff.none())])}(this._delegate,t,e)}catch(n){throw Jb(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Mb(this._delegate,t):Mb.apply(void 0,oo([this._delegate,t,e],n))}catch(i){throw Jb(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ub(ym((t=this._delegate).firestore,Dm),[new Cf(t._key,ff.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zb(e),i=tw(e,(function(e){return new ew(t.firestore,new db(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Vb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ym(t,wm);var e=ym(t.firestore,Dm),n=xm(e),r=new Fb(e);return function(t,e){var n=this,r=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var n;return no(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return eo(this,void 0,void 0,(function(){var r,i;return no(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=wl(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new hl(ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=qy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,$g(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new db(e,r,t._key,n,new pb(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ym(t,wm);var e=ym(t.firestore,Dm);return Zg(xm(e),t._key,{source:"server"}).then((function(n){return jb(e,t,n)}))}(this._delegate):function(t){t=ym(t,wm);var e=ym(t.firestore,Dm);return Zg(xm(e),t._key).then((function(n){return jb(e,t,n)}))}(this._delegate)).then((function(t){return new ew(e.firestore,new db(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Yb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Jb(t,e,n){return t.message=t.message.replace(e,n),t}function Zb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Nm(r))return r}return{}}function tw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Nm(t[0])?t[0]:Nm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ew=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Xb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return mb(this._delegate,t._delegate)},t}(),nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ew),rw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Wb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,_b(this._delegate,(o=r,s=i=n,a=fb("where",e),new Eb(a,s,o))))}catch(i){throw Jb(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,_b(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=fb("orderBy",t);return new Ib(r,n)}(e,n)))}catch(r){throw Jb(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,_b(this._delegate,(gm("limit",n=e),new Tb("limit",n,"F"))))}catch(r){throw Jb(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,_b(this._delegate,(gm("limitToLast",n=e),new Tb("limitToLast",n,"L"))))}catch(r){throw Jb(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_b(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sb("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw Jb(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_b(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sb("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw Jb(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_b(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ab("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw Jb(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_b(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ab("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw Jb(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Am(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ym(t,_m);var e=ym(t.firestore,Dm),n=xm(e),r=new Fb(e);return function(t,e){var n=this,r=new nd;return t.asyncQueue.enqueueAndForget((function(){return eo(n,void 0,void 0,(function(){var n;return no(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return eo(this,void 0,void 0,(function(){var r,i,o,s,a;return no(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Dv(t,e,!0)];case 1:return a=u.sent(),r=new eg(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=qy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,$g(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new yb(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ym(t,_m);var e=ym(t.firestore,Dm),n=xm(e),r=new Fb(e);return tm(n,t._query,{source:"server"}).then((function(n){return new yb(e,r,t,n)}))}(this._delegate):function(t){t=ym(t,_m);var e=ym(t.firestore,Dm),n=xm(e),r=new Fb(e);return bb(t._query),tm(n,t._query).then((function(n){return new yb(e,r,t,n)}))}(this._delegate)).then((function(t){return new ow(e.firestore,new yb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zb(e),i=tw(e,(function(e){return new ow(t.firestore,new yb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Vb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Yb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),iw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new nw(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),ow=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new rw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new nw(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new iw(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new nw(n._firestore,r))}))},t.prototype.isEqual=function(t){return mb(this._delegate,t._delegate)},t}(),sw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Zi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Xb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Xb(this.firestore,void 0===t?Tm(this._delegate):Tm(this._delegate,t))}catch(e){throw Jb(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=ym(e.firestore,Dm),i=Tm(e),o=Rb(e.converter,n),Ub(r,[Gm(zm(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,ff.exists(!1))]).then((function(){return i}))).then((function(t){return new Xb(s.firestore,t)}))},e.prototype.isEqual=function(t){return Sm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Yb.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(rw);function aw(t){return ym(t,wm)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uw,cw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Lm.bind.apply(Lm,oo([void 0],t)))}return t.documentId=function(){return new t(Ll.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=wo(t))instanceof Lm&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),lw=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Qm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Hm("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $m("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ym("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new Xm("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),hw={Firestore:Hb,GeoPoint:Mm,Timestamp:Al,Blob:zb,Transaction:Qb,WriteBatch:$b,DocumentReference:Xb,DocumentSnapshot:ew,Query:rw,QueryDocumentSnapshot:nw,QuerySnapshot:ow,CollectionReference:sw,FieldPath:cw,FieldValue:lw,setLogLevel:function(t){var e;e=t,fl.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(uw=$o).INTERNAL.registerComponent(new _o("firestore",(function(t){return function(t,e){return new Hb(t,new Dm(t,e),new Gb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},hw))),uw.registerVersion("@firebase/firestore","2.3.10");
/*!
  * vue-router v4.0.11
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const fw="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,pw=t=>fw?Symbol(t):"_vr_"+t,dw=pw("rvlm"),vw=pw("rvd"),yw=pw("r"),gw=pw("rl"),mw=pw("rvl"),bw="undefined"!=typeof window;const ww=Object.assign;function _w(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const Ew=()=>{},Iw=/\/$/;function Tw(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function Sw(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Aw(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Cw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Nw(t[n],e[n]))return!1;return!0}function Nw(t,e){return Array.isArray(t)?Dw(t,e):Array.isArray(e)?Dw(e,t):t===e}function Dw(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var xw,kw,Rw,Ow;function Lw(t){if(!t)if(bw){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(Iw,"")}(kw=xw||(xw={})).pop="pop",kw.push="push",(Ow=Rw||(Rw={})).back="back",Ow.forward="forward",Ow.unknown="";const Pw=/^[^#]+#/;function Fw(t,e){return t.replace(Pw,"#")+e}const Mw=()=>({left:window.pageXOffset,top:window.pageYOffset});function Vw(t){let e;if("el"in t){const n=t.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function Uw(t,e){return(history.state?history.state.position-e:-1)+t}const jw=new Map;function qw(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),Sw(n,"")}return Sw(n,t)+r+i}function Bw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Mw():null}}function Kw(t){const{history:e,location:n}=window,r={value:qw(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=ww({},i.value,e.state,{forward:t,scroll:Mw()});o(s.current,s,!0),o(t,ww({},Bw(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,ww({},e.state,Bw(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function zw(t){const e=Kw(t=Lw(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=qw(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:l,type:xw.pop,direction:l?l>0?Rw.forward:Rw.back:Rw.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(ww({},t.state,{scroll:Mw()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=ww({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:Fw.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Gw(t){return"string"==typeof t||"symbol"==typeof t}const Hw={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ww=pw("nf");var Qw,$w;function Yw(t,e){return ww(new Error,{type:t,[Ww]:!0},e)}function Xw(t,e){return t instanceof Error&&Ww in t&&(null==e||!!(t.type&e))}($w=Qw||(Qw={}))[$w.aborted=4]="aborted",$w[$w.cancelled=8]="cancelled",$w[$w.duplicated=16]="duplicated";const Jw={sensitive:!1,strict:!1,start:!0,end:!0},Zw=/[.+*?^${}()[\]/\\]/g;function t_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function e_(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=t_(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const n_={type:0,value:""},r_=/[a-zA-Z0-9_]/;function i_(t,e,n){const r=function(t,e){const n=ww({},Jw,e),r=[];let i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(Zw,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const h=l||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=c&&u.length<2?`(?:/${f})`:"/"+f),c&&(f+="?"),i+=f,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[n_]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:r_.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}(t.path),n),i=ww(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function o_(t,e){const n=[],r=new Map;function i(t,n,r){const a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:s_(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=c_(e,t),l=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(ww({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let h,f;for(const e of l){const{path:l}=e;if(n&&"/"!==l[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=i_(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!a_(h)&&o(t.name)),"children"in u){const t=u.children;for(let e=0;e<t.length;e++)i(t[e],h,r&&r.children[e])}r=r||h,s(h)}return f?()=>{o(f)}:Ew}function o(t){if(Gw(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&e_(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!a_(t)&&r.set(t.record.name,t)}return e=c_({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw Yw(1,{location:t});s=i.record.name,a=ww(function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw Yw(1,{location:t,currentLocation:e});s=i.record.name,a=ww({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:u_(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function s_(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function a_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function u_(t){return t.reduce(((t,e)=>ww(t,e.meta)),{})}function c_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const l_=/#/g,h_=/&/g,f_=/\//g,p_=/=/g,d_=/\?/g,v_=/\+/g,y_=/%5B/g,g_=/%5D/g,m_=/%5E/g,b_=/%60/g,w_=/%7B/g,__=/%7C/g,E_=/%7D/g,I_=/%20/g;function T_(t){return encodeURI(""+t).replace(__,"|").replace(y_,"[").replace(g_,"]")}function S_(t){return T_(t).replace(v_,"%2B").replace(I_,"+").replace(l_,"%23").replace(h_,"%26").replace(b_,"`").replace(w_,"{").replace(E_,"}").replace(m_,"^")}function A_(t){return null==t?"":function(t){return T_(t).replace(l_,"%23").replace(d_,"%3F")}(t).replace(f_,"%2F")}function C_(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function N_(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(v_," "),i=t.indexOf("="),o=C_(i<0?t:t.slice(0,i)),s=i<0?null:C_(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function D_(t){let e="";for(let n in t){const r=t[n];if(n=S_(n).replace(p_,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&S_(t))):[r&&S_(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function x_(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function k_(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function R_(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(Yw(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(Yw(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>a(t)))}))}function O_(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(R_(o,n,r,s,t))}else{let o=a();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||fw&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=(o.__vccOpts||o)[e];return u&&R_(u,n,r,s,t)()}))))}}var o;return i}function L_(t){const e=Le(yw),n=Le(gw),r=be((()=>e.resolve(ve(t.to)))),i=be((()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],o=n.matched;if(!i||!o.length)return-1;const s=o.findIndex(Aw.bind(null,i));if(s>-1)return s;const a=F_(t[e-2]);return e>1&&F_(i)===a&&o[o.length-1].path!==a?o.findIndex(Aw.bind(null,t[e-2])):s})),o=be((()=>i.value>-1&&function(t,e){for(const n in e){const r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=be((()=>i.value>-1&&i.value===n.matched.length-1&&Cw(n.params,r.value.params)));return{route:r,href:be((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[ve(t.replace)?"replace":"push"](ve(t.to)).catch(Ew):Promise.resolve()}}}const P_=Ke({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:L_,setup(t,{slots:e}){const n=ee(L_(t)),{options:r}=Le(yw),i=be((()=>({[M_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[M_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:ui("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function F_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const M_=(t,e,n)=>null!=t?t:null!=e?e:n;function V_(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const U_=Ke({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Le(mw),i=be((()=>t.route||r.value)),o=Le(vw,0),s=be((()=>i.value.matched[o]));Oe(vw,o+1),Oe(dw,s),Oe(mw,i);const a=de(u);var u;return ri((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&Aw(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return V_(n.default,{Component:u,route:r});const l=o.props[t.name],h=l?!0===l?r.params:"function"==typeof l?l(r):l:null,f=ui(u,ww({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return V_(n.default,{Component:f,route:r})||f}}});function j_(t){const e=o_(t.routes,t),n=t.parseQuery||N_,r=t.stringifyQuery||D_,i=t.history,o=k_(),s=k_(),a=k_(),u=de(Hw,!0);let c=Hw;bw&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=_w.bind(null,(t=>""+t)),h=_w.bind(null,A_),f=_w.bind(null,C_);function p(t,o){if(o=ww({},o||u.value),"string"==typeof t){const r=Tw(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return ww(r,s,{params:f(s.params),hash:C_(r.hash),redirectedFrom:void 0,href:a})}let s;if("path"in t)s=ww({},t,{path:Tw(n,t.path,o.path).path});else{const e=ww({},t.params);for(const t in e)null==e[t]&&delete e[t];s=ww({},t,{params:h(t.params)}),o.params=h(o.params)}const a=e.resolve(s,o),c=t.hash||"";a.params=l(f(a.params));const p=function(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,ww({},t,{hash:(d=c,T_(d).replace(w_,"{").replace(E_,"}").replace(m_,"^")),path:a.path}));var d;const v=i.createHref(p);return ww({fullPath:p,hash:c,query:r===D_?x_(t.query):t.query||{}},a,{redirectedFrom:void 0,href:v})}function d(t){return"string"==typeof t?Tw(n,t,u.value.path):ww({},t)}function v(t,e){if(c!==t)return Yw(8,{from:e,to:t})}function y(t){return m(t)}function g(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=d(r):{path:r},r.params={}),ww({query:t.query,hash:t.hash,params:t.params},r)}}function m(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,l=g(n);if(l)return m(ww(d(l),{state:o,force:s,replace:a}),e||n);const h=n;let f;return h.redirectedFrom=e,!s&&function(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Aw(e.matched[r],n.matched[i])&&Cw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=Yw(16,{to:h,from:i}),x(i,i,!0,!1)),(f?Promise.resolve(f):w(h,i)).catch((t=>Xw(t)?t:N(t,h,i))).then((t=>{if(t){if(Xw(t,2))return m(ww(d(t.to),{state:o,force:s,replace:a}),e||h)}else t=E(h,i,!0,a,o);return _(h,i,t),t}))}function b(t,e){const n=v(t,e);return n?Promise.reject(n):Promise.resolve()}function w(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>Aw(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>Aw(t,a)))||i.push(a))}return[n,r,i]}(t,e);n=O_(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(R_(r,t,e))}));const u=b.bind(null,t,e);return n.push(u),q_(n).then((()=>{n=[];for(const r of o.list())n.push(R_(r,t,e));return n.push(u),q_(n)})).then((()=>{n=O_(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(R_(r,t,e))}));return n.push(u),q_(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(R_(i,t,e));else n.push(R_(r.beforeEnter,t,e));return n.push(u),q_(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=O_(a,"beforeRouteEnter",t,e),n.push(u),q_(n)))).then((()=>{n=[];for(const r of s.list())n.push(R_(r,t,e));return n.push(u),q_(n)})).catch((t=>Xw(t,8)?t:Promise.reject(t)))}function _(t,e,n){for(const r of a.list())r(t,e,n)}function E(t,e,n,r,o){const s=v(t,e);if(s)return s;const a=e===Hw,c=bw?history.state:{};n&&(r||a?i.replace(t.fullPath,ww({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,x(t,e,n,a),D()}let I;function T(){I=i.listen(((t,e,n)=>{const r=p(t),o=g(r);if(o)return void m(ww(o,{replace:!0}),r).catch(Ew);c=r;const s=u.value;var a,l;bw&&(a=Uw(s.fullPath,n.delta),l=Mw(),jw.set(a,l)),w(r,s).catch((t=>Xw(t,12)?t:Xw(t,2)?(m(t.to,r).then((t=>{Xw(t,20)&&!n.delta&&n.type===xw.pop&&i.go(-1,!1)})).catch(Ew),Promise.reject()):(n.delta&&i.go(-n.delta,!1),N(t,r,s)))).then((t=>{(t=t||E(r,s,!1))&&(n.delta?i.go(-n.delta,!1):n.type===xw.pop&&Xw(t,20)&&i.go(-1,!1)),_(r,s,t)})).catch(Ew)}))}let S,A=k_(),C=k_();function N(t,e,n){D(t);const r=C.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function D(t){S||(S=!0,T(),A.list().forEach((([e,n])=>t?n(t):e())),A.reset())}function x(e,n,r,i){const{scrollBehavior:o}=t;if(!bw||!o)return Promise.resolve();const s=!r&&function(t){const e=jw.get(t);return jw.delete(t),e}(Uw(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Qr().then((()=>o(e,n,s))).then((t=>t&&Vw(t))).catch((t=>N(t,e,n)))}const k=t=>i.go(t);let R;const O=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return Gw(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:y,replace:function(t){return y(ww(d(t),{replace:!0}))},go:k,back:()=>k(-1),forward:()=>k(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:C.add,isReady:function(){return S&&u.value!==Hw?Promise.resolve():new Promise(((t,e)=>{A.add([t,e])}))},install(t){t.component("RouterLink",P_),t.component("RouterView",U_),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(u)}),bw&&!R&&u.value===Hw&&(R=!0,y(i.location).catch((t=>{})));const e={};for(const r in Hw)e[r]=be((()=>u.value[r]));t.provide(yw,this),t.provide(gw,ee(e)),t.provide(mw,u);const n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(c=Hw,I&&I(),u.value=Hw,R=!1,S=!1),n()}}}}function q_(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function B_(){return Le(gw)}var K_;function z_(t,e){void 0===e&&(e={});var n=e.registrationOptions;void 0===n&&(n={}),delete e.registrationOptions;var r=function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];e&&e[t]&&e[t].apply(e,n)};"serviceWorker"in navigator&&K_.then((function(){Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?(!function(t,e,n){fetch(t).then((function(r){404===r.status?(e("error",new Error("Service worker not found at "+t)),W_()):-1===r.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),W_()):H_(t,e,n)})).catch((function(t){return G_(e,t)}))}(t,r,n),navigator.serviceWorker.ready.then((function(t){r("ready",t)})).catch((function(t){return G_(r,t)}))):(H_(t,r,n),navigator.serviceWorker.ready.then((function(t){r("ready",t)})).catch((function(t){return G_(r,t)})))}))}function G_(t,e){navigator.onLine||t("offline"),t("error",e)}function H_(t,e,n){navigator.serviceWorker.register(t,n).then((function(t){e("registered",t),t.waiting?e("updated",t):t.onupdatefound=function(){e("updatefound",t);var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?e("updated",t):e("cached",t))}}})).catch((function(t){return G_(e,t)}))}function W_(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){return G_(emit,t)}))}"undefined"!=typeof window&&(K_="undefined"!=typeof Promise?new Promise((function(t){return window.addEventListener("load",t)})):{then:function(t){return window.addEventListener("load",t)}});export{Hn as F,Ni as T,Ce as a,cr as b,nr as c,ur as d,fr as e,ee as f,Je as g,On as h,yr as i,hr as j,Hi as k,Ki as l,B_ as m,j_ as n,Jn as o,Ae as p,zw as q,Kn as r,z_ as s,u as t,ve as u,Wi as v,Ne as w,$o as x,Xi as y};
