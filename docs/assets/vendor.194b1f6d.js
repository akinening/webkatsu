function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){if(w(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],s=T(i)?o(i):n(i);if(s)for(const t in s)e[t]=s[t]}return e}return T(t)||A(t)?t:void 0}const r=/;(?![^(]*\))/g,i=/:(.+)/;function o(t){const e={};return t.split(r).forEach((t=>{if(t){const n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function s(t){let e="";if(T(t))e=t;else if(w(t))for(let n=0;n<t.length;n++){const r=s(t[n]);r&&(e+=r+" ")}else if(A(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a=t=>null==t?"":w(t)||A(t)&&t.toString===N?JSON.stringify(t,u,2):String(t),u=(t,e)=>e&&e.__v_isRef?u(t,e.value):_(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:E(e)?{[`Set(${e.size})`]:[...e.values()]}:!A(e)||w(e)||x(e)?e:String(e),c={},l=[],h=()=>{},f=()=>!1,p=/^on[^a-z]/,d=t=>p.test(t),v=t=>t.startsWith("onUpdate:"),y=Object.assign,g=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},m=Object.prototype.hasOwnProperty,b=(t,e)=>m.call(t,e),w=Array.isArray,_=t=>"[object Map]"===D(t),E=t=>"[object Set]"===D(t),I=t=>"function"==typeof t,T=t=>"string"==typeof t,S=t=>"symbol"==typeof t,A=t=>null!==t&&"object"==typeof t,C=t=>A(t)&&I(t.then)&&I(t.catch),N=Object.prototype.toString,D=t=>N.call(t),x=t=>"[object Object]"===D(t),k=t=>T(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,R=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),O=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L=/-(\w)/g,P=O((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),F=/\B([A-Z])/g,M=O((t=>t.replace(F,"-$1").toLowerCase())),V=O((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=O((t=>t?`on${V(t)}`:"")),j=(t,e)=>!Object.is(t,e),q=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},B=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},K=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let z;const G=[];class H{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&z&&(this.parent=z,this.index=(z.scopes||(z.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(G.push(this),z=this)}off(){this.active&&(G.pop(),z=G[G.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const Q=t=>{const e=new Set(t);return e.w=0,e.n=0,e},W=t=>(t.w&J)>0,$=t=>(t.n&J)>0,Y=new WeakMap;let X=0,J=1;const Z=[];let tt;const et=Symbol(""),nt=Symbol("");class rt{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||z)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!Z.includes(this))try{return Z.push(tt=this),st.push(ot),ot=!0,J=1<<++X,X<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=J})(this):it(this),this.fn()}finally{X<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];W(i)&&!$(i)?i.delete(t):e[n++]=i,i.w&=~J,i.n&=~J}e.length=n}})(this),J=1<<--X,ut(),Z.pop();const t=Z.length;tt=t>0?Z[t-1]:void 0}}stop(){this.active&&(it(this),this.onStop&&this.onStop(),this.active=!1)}}function it(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ot=!0;const st=[];function at(){st.push(ot),ot=!1}function ut(){const t=st.pop();ot=void 0===t||t}function ct(t,e,n){if(!lt())return;let r=Y.get(t);r||Y.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Q()),ht(i)}function lt(){return ot&&void 0!==tt}function ht(t,e){let n=!1;X<=30?$(t)||(t.n|=J,n=!W(t)):n=!t.has(tt),n&&(t.add(tt),tt.deps.push(t))}function ft(t,e,n,r,i,o){const s=Y.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&w(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":w(t)?k(n)&&a.push(s.get("length")):(a.push(s.get(et)),_(t)&&a.push(s.get(nt)));break;case"delete":w(t)||(a.push(s.get(et)),_(t)&&a.push(s.get(nt)));break;case"set":_(t)&&a.push(s.get(et))}if(1===a.length)a[0]&&pt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);pt(Q(t))}}function pt(t,e){for(const n of w(t)?t:[...t])(n!==tt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const dt=t("__proto__,__v_isRef,__isVue"),vt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(S)),yt=_t(),gt=_t(!1,!0),mt=_t(!0),bt=wt();function wt(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=se(this);for(let e=0,i=this.length;e<i;e++)ct(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(se)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){at();const n=se(this)[e].apply(this,t);return ut(),n}})),t}function _t(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Jt:Xt:e?Yt:$t).get(n))return n;const o=w(n);if(!t&&o&&b(bt,r))return Reflect.get(bt,r,i);const s=Reflect.get(n,r,i);if(S(r)?vt.has(r):dt(r))return s;if(t||ct(n,0,r),e)return s;if(ue(s)){return!o||!k(r)?s.value:s}return A(s)?t?ee(s):te(s):s}}function Et(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=se(r),o=se(o),!w(e)&&ue(o)&&!ue(r)))return o.value=r,!0;const s=w(e)&&k(n)?Number(n)<e.length:b(e,n),a=Reflect.set(e,n,r,i);return e===se(i)&&(s?j(r,o)&&ft(e,"set",n,r):ft(e,"add",n,r)),a}}const It={get:yt,set:Et(),deleteProperty:function(t,e){const n=b(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ft(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return S(e)&&vt.has(e)||ct(t,0,e),n},ownKeys:function(t){return ct(t,0,w(t)?"length":et),Reflect.ownKeys(t)}},Tt={get:mt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},St=y({},It,{get:gt,set:Et(!0)}),At=t=>A(t)?te(t):t,Ct=t=>A(t)?ee(t):t,Nt=t=>t,Dt=t=>Reflect.getPrototypeOf(t);function xt(t,e,n=!1,r=!1){const i=se(t=t.__v_raw),o=se(e);e!==o&&!n&&ct(i,0,e),!n&&ct(i,0,o);const{has:s}=Dt(i),a=r?Nt:n?Ct:At;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function kt(t,e=!1){const n=this.__v_raw,r=se(n),i=se(t);return t!==i&&!e&&ct(r,0,t),!e&&ct(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Rt(t,e=!1){return t=t.__v_raw,!e&&ct(se(t),0,et),Reflect.get(t,"size",t)}function Ot(t){t=se(t);const e=se(this);return Dt(e).has.call(e,t)||(e.add(t),ft(e,"add",t,t)),this}function Lt(t,e){e=se(e);const n=se(this),{has:r,get:i}=Dt(n);let o=r.call(n,t);o||(t=se(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?j(e,s)&&ft(n,"set",t,e):ft(n,"add",t,e),this}function Pt(t){const e=se(this),{has:n,get:r}=Dt(e);let i=n.call(e,t);i||(t=se(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ft(e,"delete",t,void 0),o}function Ft(){const t=se(this),e=0!==t.size,n=t.clear();return e&&ft(t,"clear",void 0,void 0),n}function Mt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=se(o),a=e?Nt:t?Ct:At;return!t&&ct(s,0,et),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Vt(t,e,n){return function(...r){const i=this.__v_raw,o=se(i),s=_(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?Nt:e?Ct:At;return!e&&ct(o,0,u?nt:et),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Ut(t){return function(...e){return"delete"!==t&&this}}function jt(){const t={get(t){return xt(this,t)},get size(){return Rt(this)},has:kt,add:Ot,set:Lt,delete:Pt,clear:Ft,forEach:Mt(!1,!1)},e={get(t){return xt(this,t,!1,!0)},get size(){return Rt(this)},has:kt,add:Ot,set:Lt,delete:Pt,clear:Ft,forEach:Mt(!1,!0)},n={get(t){return xt(this,t,!0)},get size(){return Rt(this,!0)},has(t){return kt.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:Mt(!0,!1)},r={get(t){return xt(this,t,!0,!0)},get size(){return Rt(this,!0)},has(t){return kt.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:Mt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Vt(i,!1,!1),n[i]=Vt(i,!0,!1),e[i]=Vt(i,!1,!0),r[i]=Vt(i,!0,!0)})),[t,n,e,r]}const[qt,Bt,Kt,zt]=jt();function Gt(t,e){const n=e?t?zt:Kt:t?Bt:qt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(b(n,r)&&r in e?n:e,r,i)}const Ht={get:Gt(!1,!1)},Qt={get:Gt(!1,!0)},Wt={get:Gt(!0,!1)},$t=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap;function Zt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>D(t).slice(8,-1))(t))}function te(t){return t&&t.__v_isReadonly?t:ne(t,!1,It,Ht,$t)}function ee(t){return ne(t,!0,Tt,Wt,Xt)}function ne(t,e,n,r,i){if(!A(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Zt(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function re(t){return ie(t)?re(t.__v_raw):!(!t||!t.__v_isReactive)}function ie(t){return!(!t||!t.__v_isReadonly)}function oe(t){return re(t)||ie(t)}function se(t){const e=t&&t.__v_raw;return e?se(e):t}function ae(t){return B(t,"__v_skip",!0),t}function ue(t){return Boolean(t&&!0===t.__v_isRef)}function ce(t){return ue(t)?t.value:t}const le={get:(t,e,n)=>ce(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ue(i)&&!ue(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function he(t){return re(t)?t:new Proxy(t,le)}class fe{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new rt(t,(()=>{var t;this._dirty||(this._dirty=!0,(t=se(t=this)).dep&&pt(t.dep))})),this.__v_isReadonly=n}get value(){const t=se(this);var e;return e=t,lt()&&((e=se(e)).dep||(e.dep=Q()),ht(e.dep)),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function pe(t,e){let n,r;I(t)?(n=t,r=h):(n=t.get,r=t.set);return new fe(n,r,I(t)||!t.set)}Promise.resolve();function de(t,e,...n){const r=t.vnode.props||c;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||c;o?i=n.map((t=>t.trim())):e&&(i=n.map(K))}let a,u=r[a=U(e)]||r[a=U(P(e))];!u&&o&&(u=r[a=U(M(e))]),u&&br(u,t,6,i);const l=r[a+"Once"];if(l){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,br(l,t,6,i)}}function ve(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!I(t)){const r=t=>{const n=ve(t,e,!0);n&&(a=!0,y(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(w(o)?o.forEach((t=>s[t]=null)):y(s,o),r.set(t,s),s):(r.set(t,null),null)}function ye(t,e){return!(!t||!d(e))&&(e=e.slice(2).replace(/Once$/,""),b(t,e[0].toLowerCase()+e.slice(1))||b(t,M(e))||b(t,e))}let ge=null,me=null;function be(t){const e=ge;return ge=t,me=t&&t.type.__scopeId||null,e}function we(t,e=ge,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Bn(-1);const i=be(e),o=t(...n);return be(i),r._d&&Bn(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function _e(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:y}=t;let g;const m=be(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=tr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=tr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Ee(u)}let m=g;if(t&&!1!==y){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(s&&e.some(v)&&(t=Ie(t,s)),m=Jn(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){Vn.length=0,wr(b,t,1),g=Xn(Fn)}return be(m),g}const Ee=t=>{let e;for(const n in t)("class"===n||"style"===n||d(n))&&((e||(e={}))[n]=t[n]);return e},Ie=(t,e)=>{const n={};for(const r in t)v(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Te(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!ye(n,o))return!0}return!1}function Se(t,e,n=!1){const r=cr||ge;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&I(e)?e.call(r.proxy):e}}const Ae=[Function,Array],Ce={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ae,onEnter:Ae,onAfterEnter:Ae,onEnterCancelled:Ae,onBeforeLeave:Ae,onLeave:Ae,onAfterLeave:Ae,onLeaveCancelled:Ae,onBeforeAppear:Ae,onAppear:Ae,onAfterAppear:Ae,onAppearCancelled:Ae},setup(t,{slots:e}){const n=lr(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ke((()=>{t.isMounted=!0})),He((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&Oe(e.default(),!0);if(!o||!o.length)return;const s=se(t),{mode:a}=s,u=o[0];if(r.isLeaving)return xe(u);const c=ke(u);if(!c)return xe(u);const l=De(c,s,r,n);Re(c,l);const h=n.subTree,f=h&&ke(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==Fn&&(!Hn(c,f)||p)){const t=De(f,s,r,n);if(Re(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},xe(u);"in-out"===a&&c.type!==Fn&&(t.delayLeave=(t,e,n)=>{Ne(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function Ne(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function De(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=Ne(n,t),_=(t,e)=>{t&&br(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=v||a}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&Hn(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||u,r=g||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>De(t,e,n,r)};return E}function xe(t){if(Pe(t))return(t=Jn(t)).children=null,t}function ke(t){return Pe(t)?t.children?t.children[0]:void 0:t}function Re(t,e){6&t.shapeFlag&&t.component?Re(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Oe(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Ln?(128&o.patchFlag&&r++,n=n.concat(Oe(o.children,e))):(e||o.type!==Fn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const Le=t=>!!t.type.__asyncLoader,Pe=t=>t.type.__isKeepAlive;function Fe(t,e){Ve(t,"a",e)}function Me(t,e){Ve(t,"da",e)}function Ve(t,e,n=cr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(je(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Pe(t.parent.vnode)&&Ue(r,e,n,t),t=t.parent}}function Ue(t,e,n,r){const i=je(e,t,r,!0);Qe((()=>{g(r[e],i)}),n)}function je(t,e,n=cr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;at(),hr(n);const i=br(e,n,t,r);return fr(),ut(),i});return r?i.unshift(o):i.push(o),o}}const qe=t=>(e,n=cr)=>(!dr||"sp"===t)&&je(t,e,n),Be=qe("bm"),Ke=qe("m"),ze=qe("bu"),Ge=qe("u"),He=qe("bum"),Qe=qe("um"),We=qe("sp"),$e=qe("rtg"),Ye=qe("rtc");function Xe(t,e=cr){je("ec",t,e)}let Je=!0;function Ze(t){const e=nn(t),n=t.proxy,r=t.ctx;Je=!1,e.beforeCreate&&tn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:f,mounted:p,beforeUpdate:d,updated:v,activated:y,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:_,unmounted:E,render:T,renderTracked:S,renderTriggered:C,errorCaptured:N,serverPrefetch:D,expose:x,inheritAttrs:k,components:R,directives:O,filters:L}=e;if(c&&function(t,e,n=h,r=!1){w(t)&&(t=an(t));for(const i in t){const n=t[i];let o;o=A(n)?"default"in n?Se(n.from||i,n.default,!0):Se(n.from||i):Se(n),ue(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const h in s){const t=s[h];I(t)&&(r[h]=t.bind(n))}if(i){const e=i.call(n,n);A(e)&&(t.data=te(e))}if(Je=!0,o)for(const w in o){const t=o[w],e=pe({get:I(t)?t.bind(n,n):I(t.get)?t.get.bind(n,n):h,set:!I(t)&&I(t.set)?t.set.bind(n):h});Object.defineProperty(r,w,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const h in a)en(a[h],r,n,h);if(u){const t=I(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(cr){let n=cr.provides;const r=cr.parent&&cr.parent.provides;r===n&&(n=cr.provides=Object.create(r)),n[t]=e}}(e,t[e])}))}function P(t,e){w(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&tn(l,t,"c"),P(Be,f),P(Ke,p),P(ze,d),P(Ge,v),P(Fe,y),P(Me,g),P(Xe,N),P(Ye,S),P($e,C),P(He,b),P(Qe,E),P(We,D),w(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===h&&(t.render=T),null!=k&&(t.inheritAttrs=k),R&&(t.components=R),O&&(t.directives=O)}function tn(t,e,n){br(w(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function en(t,e,n,r){const i=r.includes(".")?Hr(n,r):()=>n[r];if(T(t)){const n=e[t];I(n)&&Kr(i,n)}else if(I(t))Kr(i,t.bind(n));else if(A(t))if(w(t))t.forEach((t=>en(t,e,n,r)));else{const r=I(t.handler)?t.handler.bind(n):e[t.handler];I(r)&&Kr(i,r,t)}}function nn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>rn(u,t,s,!0))),rn(u,e,s)):u=e,o.set(e,u),u}function rn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&rn(t,o,n,!0),i&&i.forEach((e=>rn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=on[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const on={data:sn,props:cn,emits:cn,methods:cn,computed:cn,beforeCreate:un,created:un,beforeMount:un,mounted:un,beforeUpdate:un,updated:un,beforeDestroy:un,destroyed:un,activated:un,deactivated:un,errorCaptured:un,serverPrefetch:un,components:cn,directives:cn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=y(Object.create(null),t);for(const r in e)n[r]=un(t[r],e[r]);return n},provide:sn,inject:function(t,e){return cn(an(t),an(e))}};function sn(t,e){return e?t?function(){return y(I(t)?t.call(this,this):t,I(e)?e.call(this,this):e)}:e:t}function an(t){if(w(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function un(t,e){return t?[...new Set([].concat(t,e))]:e}function cn(t,e){return t?y(y(Object.create(null),t),e):e}function ln(t,e,n,r=!1){const i={},o={};B(o,Qn,1),t.propsDefaults=Object.create(null),hn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:ne(i,!1,St,Qt,Yt):t.type.props?t.props=i:t.props=o,t.attrs=o}function hn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(R(u))continue;const c=e[u];let l;i&&b(i,l=P(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:ye(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=se(n),r=s||c;for(let s=0;s<o.length;s++){const a=o[s];n[a]=fn(i,e,a,r[a],t,!b(r,a))}}return a}function fn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=b(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&I(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(hr(i),r=o[n]=t.call(null,e),fr())}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==M(n)||(r=!0))}return r}function pn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!I(t)){const r=t=>{u=!0;const[n,r]=pn(t,e,!0);y(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,l),l;if(w(o))for(let l=0;l<o.length;l++){const t=P(o[l]);dn(t)&&(s[t]=c)}else if(o)for(const c in o){const t=P(c);if(dn(t)){const e=o[c],n=s[t]=w(e)||I(e)?{type:e}:e;if(n){const e=gn(Boolean,n.type),r=gn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||b(n,"default"))&&a.push(t)}}}const h=[s,a];return r.set(t,h),h}function dn(t){return"$"!==t[0]}function vn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function yn(t,e){return vn(t)===vn(e)}function gn(t,e){return w(e)?e.findIndex((e=>yn(e,t))):I(e)&&yn(e,t)?0:-1}const mn=t=>"_"===t[0]||"$stable"===t,bn=t=>w(t)?t.map(tr):[tr(t)],wn=(t,e,n)=>{const r=we((t=>bn(e(t))),n);return r._c=!1,r},_n=(t,e,n)=>{const r=t._ctx;for(const i in t){if(mn(i))continue;const n=t[i];if(I(n))e[i]=wn(0,n,r);else if(null!=n){const t=bn(n);e[i]=()=>t}}},En=(t,e)=>{const n=bn(e);t.slots.default=()=>n};function In(t,e){if(null===ge)return t;const n=ge.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=c]=e[i];I(t)&&(t={mounted:t,updated:t}),t.deep&&Qr(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Tn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(at(),br(u,n,8,[t.el,a,t,e]),ut())}}function Sn(){return{app:null,config:{isNativeTag:f,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let An=0;function Cn(t,e){return function(n,r=null){null==r||A(r)||(r=null);const i=Sn(),o=new Set;let s=!1;const a=i.app={_uid:An++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Wr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&I(t.install)?(o.add(t),t.install(a,...e)):I(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=Xn(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Nn=function(t,e){e&&e.pendingBranch?w(t)?e.effects.push(...t):e.effects.push(t):Mr(t,Dr,Nr,xr)};function Dn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:s,createComment:a,setText:u,setElementText:f,parentNode:p,nextSibling:d,setScopeId:v=h,cloneNode:g,insertStaticContent:m}=t,w=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!Hn(t,e)&&(r=et(t),Y(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case Pn:_(t,e,n,r);break;case Fn:E(t,e,n,r);break;case Mn:null==t&&I(e,n,r,s);break;case Ln:F(t,e,n,r,i,o,s,a,u);break;default:1&h?A(t,e,n,r,i,o,s,a,u):6&h?V(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,it)}null!=l&&i&&xn(l,t&&t.ref,o,e||t,!e)},_=(t,e,r,i)=>{if(null==t)n(e.el=s(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},E=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},I=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},T=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=d(t),n(t,r,i),t=o;n(e,r,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=d(t),r(t),t=n;r(e)},A=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?N(e,n,r,i,o,s,a,u):k(t,e,i,o,s,a,u)},N=(t,e,r,s,a,u,c,l)=>{let h,p;const{type:d,props:v,shapeFlag:y,transition:m,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==g&&-1===b)h=t.el=g(t.el);else{if(h=t.el=o(t.type,u,v&&v.is,v),8&y?f(h,t.children):16&y&&x(t.children,h,null,s,a,u&&"foreignObject"!==d,c,l),w&&Tn(t,null,s,"created"),v){for(const e in v)"value"===e||R(e)||i(h,e,null,v[e],u,t.children,s,a,tt);"value"in v&&i(h,"value",null,v.value),(p=v.onVnodeBeforeMount)&&kn(p,s,t)}D(h,t,t.scopeId,c,s)}w&&Tn(t,null,s,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;_&&m.beforeEnter(h),n(h,e,r),((p=v&&v.onVnodeMounted)||_||w)&&Nn((()=>{p&&kn(p,s,t),_&&m.enter(h),w&&Tn(t,null,s,"mounted")}),a)},D=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;D(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},x=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?er(t[c]):tr(t[c]);w(null,u,e,n,r,i,o,s,a)}},k=(t,e,n,r,o,s,a)=>{const u=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:p}=e;l|=16&t.patchFlag;const d=t.props||c,v=e.props||c;let y;if((y=v.onVnodeBeforeUpdate)&&kn(y,n,e,t),p&&Tn(e,t,n,"beforeUpdate"),l>0){if(16&l)L(u,e,d,v,n,r,o);else if(2&l&&d.class!==v.class&&i(u,"class",null,v.class,o),4&l&&i(u,"style",d.style,v.style,o),8&l){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],c=d[a],l=v[a];l===c&&"value"!==a||i(u,a,c,l,o,t.children,n,r,tt)}}1&l&&t.children!==e.children&&f(u,e.children)}else a||null!=h||L(u,e,d,v,n,r,o);const g=o&&"foreignObject"!==e.type;h?O(t.dynamicChildren,h,u,n,r,g,s):a||G(t,e,u,null,n,r,g,s,!1),((y=v.onVnodeUpdated)||p)&&Nn((()=>{y&&kn(y,n,e,t),p&&Tn(e,t,n,"updated")}),r)},O=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===Ln||!Hn(u,c)||6&u.shapeFlag||64&u.shapeFlag)?p(u.el):n;w(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,o,s,a)=>{if(n!==r){for(const u in r){if(R(u))continue;const c=r[u],l=n[u];c!==l&&"value"!==u&&i(t,u,l,c,a,e.children,o,s,tt)}if(n!==c)for(const u in n)R(u)||u in r||i(t,u,n[u],null,a,e.children,o,s,tt);"value"in r&&i(t,"value",n.value,r.value)}},F=(t,e,r,i,o,a,u,c,l)=>{const h=e.el=t?t.el:s(""),f=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),x(e.children,r,f,o,a,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(O(t.dynamicChildren,d,r,o,a,u,c),(null!=e.key||o&&e===o.subTree)&&Rn(t,e,!0)):G(t,e,r,f,o,a,u,c,l)},V=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):j(t,e,u)},U=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||ar,o={uid:ur++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new H(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pn(r,i),emitsOptions:ve(r,i),emit:null,emitted:null,propsDefaults:c,inheritAttrs:r.inheritAttrs,ctx:c,data:c,props:c,attrs:c,slots:c,refs:c,setupState:c,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=de.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if(Pe(t)&&(a.ctx.renderer=it),function(t,e=!1){dr=e;const{props:n,children:r}=t.vnode,i=pr(t);ln(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=se(e),B(e,"_",n)):_n(e,t.slots={})}else t.slots={},e&&En(t,e);B(t.slots,Qn,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ae(new Proxy(t.ctx,sr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(ct(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;hr(t),at();const i=mr(r,t,0,[t.props,n]);if(ut(),fr(),C(i)){if(i.then(fr,fr),e)return i.then((e=>{vr(t,e)})).catch((e=>{wr(e,t,0)}));t.asyncDep=i}else vr(t,i)}else yr(t)}(t,e):void 0;dr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,K),!t.el){const t=a.subTree=Xn(Fn);E(null,t,e,n)}}else K(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Te(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?Te(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!ye(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,e,n);r.next=e,function(t){const e=Ir.indexOf(t);e>Tr&&Ir.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},K=(t,e,n,r,i,o,s)=>{const a=new rt((()=>{if(t.isMounted){let e,{next:n,bu:r,u:u,parent:c,vnode:l}=t,h=n;n?(n.el=l.el,z(t,n,s)):n=l,a.allowRecurse=!1,r&&q(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&kn(e,c,n,l),a.allowRecurse=!0;const f=_e(t),d=t.subTree;t.subTree=f,w(d,f,p(d.el),et(d),t,i,o),n.el=f.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Nn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Nn((()=>kn(e,c,n,l)),i)}else{let s;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t;if(a.allowRecurse=!1,l&&q(l),(s=c&&c.onVnodeBeforeMount)&&kn(s,f,e),a.allowRecurse=!0,u&&st){const n=()=>{t.subTree=_e(t),st(u,t.subTree,t,i,null)};Le(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=_e(t);w(null,s,n,r,t,i,o),e.el=s.el}if(h&&Nn(h,i),s=c&&c.onVnodeMounted){const t=e;Nn((()=>kn(s,f,t)),i)}256&e.shapeFlag&&t.a&&Nn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>Pr(t.update)),t.scope),u=t.update=a.run.bind(a);u.id=t.uid,a.allowRecurse=u.allowRecurse=!0,u()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=se(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;hn(t,e,i,o)&&(c=!0);for(const o in a)e&&(b(e,o)||(r=M(o))!==o&&b(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=fn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&b(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(b(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=P(s);i[e]=fn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&ft(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=c;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(y(i,e),n||1!==t||delete i._):(o=!e.$stable,_n(e,i)),s=e}else e&&(En(t,e),s={default:1});if(o)for(const a in i)mn(a)||a in s||delete i[a]})(t,e.children,n),at(),Vr(void 0,t.update),ut()},G=(t,e,n,r,i,o,s,a,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void W(c,h,n,r,i,o,s,a,u);if(256&p)return void Q(c,h,n,r,i,o,s,a,u)}8&d?(16&l&&tt(c,i,o),h!==c&&f(n,h)):16&l?16&d?W(c,h,n,r,i,o,s,a,u):tt(c,i,o,!0):(8&l&&f(n,""),16&d&&x(h,n,r,i,o,s,a,u))},Q=(t,e,n,r,i,o,s,a,u)=>{e=e||l;const c=(t=t||l).length,h=e.length,f=Math.min(c,h);let p;for(p=0;p<f;p++){const r=e[p]=u?er(e[p]):tr(e[p]);w(t[p],r,n,null,i,o,s,a,u)}c>h?tt(t,i,o,!0,!1,f):x(e,n,r,i,o,s,a,u,f)},W=(t,e,n,r,i,o,s,a,u)=>{let c=0;const h=e.length;let f=t.length-1,p=h-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?er(e[c]):tr(e[c]);if(!Hn(r,l))break;w(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?er(e[p]):tr(e[p]);if(!Hn(r,c))break;w(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,l=t<h?e[t].el:r;for(;c<=p;)w(null,e[c]=u?er(e[c]):tr(e[c]),n,l,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)Y(t[c],i,o,!0),c++;else{const d=c,v=c,y=new Map;for(c=v;c<=p;c++){const t=e[c]=u?er(e[c]):tr(e[c]);null!=t.key&&y.set(t.key,c)}let g,m=0;const b=p-v+1;let _=!1,E=0;const I=new Array(b);for(c=0;c<b;c++)I[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=b){Y(r,i,o,!0);continue}let l;if(null!=r.key)l=y.get(r.key);else for(g=v;g<=p;g++)if(0===I[g-v]&&Hn(r,e[g])){l=g;break}void 0===l?Y(r,i,o,!0):(I[l-v]=c+1,l>=E?E=l:_=!0,w(r,e[l],n,null,i,o,s,a,u),m++)}const T=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(I):l;for(g=T.length-1,c=b-1;c>=0;c--){const t=v+c,l=e[t],f=t+1<h?e[t+1].el:r;0===I[c]?w(null,l,n,f,i,o,s,a,u):_&&(g<0||c!==T[g]?$(l,n,f,2):g--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,it);if(a===Ln){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===Mn)return void T(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Nn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},Y=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&xn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&kn(d,e,t),6&l)Z(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Tn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,it,r):c&&(o!==Ln||h>0&&64&h)?tt(c,e,n,!1,!0):(o===Ln&&(128&h||256&h)||!i&&16&l)&&tt(u,e,n),r&&X(t)}((d=s&&s.onVnodeUnmounted)||p)&&Nn((()=>{d&&kn(d,e,t),p&&Tn(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Ln)return void J(n,i);if(e===Mn)return void S(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=d(t),r(t),t=n;r(e)},Z=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:s,um:a}=t;r&&q(r),i.stop(),o&&(o.active=!1,Y(s,t,e,n)),a&&Nn(a,e),Nn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)Y(t[s],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):w(e._vnode||null,t,e,null,null,null,n),Ur(),e._vnode=t},it={p:w,um:Y,m:$,r:X,mt:U,mc:x,pc:G,pbc:O,n:et,o:t};let ot,st;e&&([ot,st]=e(it));return{render:nt,hydrate:ot,createApp:Cn(nt,ot)}}(t)}function xn(t,e,n,r,i=!1){if(w(t))return void t.forEach(((t,o)=>xn(t,e&&(w(e)?e[o]:e),n,r,i)));if(Le(r)&&!i)return;const o=4&r.shapeFlag?gr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,l=e&&e.r,h=a.refs===c?a.refs={}:a.refs,f=a.setupState;if(null!=l&&l!==u&&(T(l)?(h[l]=null,b(f,l)&&(f[l]=null)):ue(l)&&(l.value=null)),T(u)){const t=()=>{h[u]=s,b(f,u)&&(f[u]=s)};s?(t.id=-1,Nn(t,n)):t()}else if(ue(u)){const t=()=>{u.value=s};s?(t.id=-1,Nn(t,n)):t()}else I(u)&&mr(u,a,12,[s,h])}function kn(t,e,n,r=null){br(t,e,7,[n,r])}function Rn(t,e,n=!1){const r=t.children,i=e.children;if(w(r)&&w(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=er(i[o]),e.el=t.el),n||Rn(t,e))}}const On=Symbol(),Ln=Symbol(void 0),Pn=Symbol(void 0),Fn=Symbol(void 0),Mn=Symbol(void 0),Vn=[];let Un=null;function jn(t=!1){Vn.push(Un=t?null:[])}let qn=1;function Bn(t){qn+=t}function Kn(t){return t.dynamicChildren=qn>0?Un||l:null,Vn.pop(),Un=Vn[Vn.length-1]||null,qn>0&&Un&&Un.push(t),t}function zn(t,e,n,r,i,o){return Kn(Yn(t,e,n,r,i,o,!0))}function Gn(t){return!!t&&!0===t.__v_isVNode}function Hn(t,e){return t.type===e.type&&t.key===e.key}const Qn="__vInternal",Wn=({key:t})=>null!=t?t:null,$n=({ref:t})=>null!=t?T(t)||ue(t)||I(t)?{i:ge,r:t}:t:null;function Yn(t,e=null,n=null,r=0,i=null,o=(t===Ln?0:1),s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Wn(e),ref:e&&$n(e),scopeId:me,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(nr(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=T(n)?8:16),qn>0&&!s&&Un&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&Un.push(u),u}const Xn=function(t,e=null,r=null,i=0,o=null,a=!1){t&&t!==On||(t=Fn);if(Gn(t)){const n=Jn(t,e,!0);return r&&nr(n,r),n}u=t,I(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){e=function(t){return t?oe(t)||Qn in t?y({},t):t:null}(e);let{class:t,style:r}=e;t&&!T(t)&&(e.class=s(t)),A(r)&&(oe(r)&&!w(r)&&(r=y({},r)),e.style=n(r))}const c=T(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:A(t)?4:I(t)?2:0;return Yn(t,e,r,i,o,c,a,!0)};function Jn(t,e,r=!1){const{props:i,ref:o,patchFlag:a,children:u}=t,c=e?function(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=s([e.class,i.class]));else if("style"===t)e.style=n([e.style,i.style]);else if(d(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Wn(c),ref:e&&e.ref?r&&o?w(o)?o.concat($n(e)):[o,$n(e)]:$n(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ln?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jn(t.ssContent),ssFallback:t.ssFallback&&Jn(t.ssFallback),el:t.el,anchor:t.anchor}}function Zn(t=" ",e=0){return Xn(Pn,null,t,e)}function tr(t){return null==t||"boolean"==typeof t?Xn(Fn):w(t)?Xn(Ln,null,t.slice()):"object"==typeof t?er(t):Xn(Pn,null,String(t))}function er(t){return null===t.el||t.memo?t:Jn(t)}function nr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(w(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),nr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Qn in e?3===r&&ge&&(1===ge.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=ge}}else I(e)?(e={default:e,_ctx:ge},n=32):(e=String(e),64&r?(n=16,e=[Zn(e)]):n=8);t.children=e,t.shapeFlag|=n}function rr(t,e,n,r){let i;const o=n&&n[r];if(w(t)||T(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(A(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=e(t[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}const ir=t=>t?pr(t)?gr(t)||t.proxy:ir(t.parent):null,or=y(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ir(t.parent),$root:t=>ir(t.root),$emit:t=>t.emit,$options:t=>nn(t),$forceUpdate:t=>()=>Pr(t.update),$nextTick:t=>Lr.bind(t.proxy),$watch:t=>Gr.bind(t)}),sr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let l;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==c&&b(r,e))return s[e]=0,r[e];if(i!==c&&b(i,e))return s[e]=1,i[e];if((l=t.propsOptions[0])&&b(l,e))return s[e]=2,o[e];if(n!==c&&b(n,e))return s[e]=3,n[e];Je&&(s[e]=4)}}const h=or[e];let f,p;return h?("$attrs"===e&&ct(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==c&&b(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,b(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==c&&b(i,e))i[e]=n;else if(r!==c&&b(r,e))r[e]=n;else if(b(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==c&&b(t,s)||e!==c&&b(e,s)||(a=o[0])&&b(a,s)||b(r,s)||b(or,s)||b(i.config.globalProperties,s)}},ar=Sn();let ur=0;let cr=null;const lr=()=>cr||ge,hr=t=>{cr=t,t.scope.on()},fr=()=>{cr&&cr.scope.off(),cr=null};function pr(t){return 4&t.vnode.shapeFlag}let dr=!1;function vr(t,e,n){I(e)?t.render=e:A(e)&&(t.setupState=he(e)),yr(t)}function yr(t,e,n){const r=t.type;t.render||(t.render=r.render||h),hr(t),at(),Ze(t),ut(),fr()}function gr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(he(ae(t.exposed)),{get:(e,n)=>n in e?e[n]:n in or?or[n](t):void 0}))}function mr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){wr(o,e,n)}return i}function br(t,e,n,r){if(I(t)){const i=mr(t,e,n,r);return i&&C(i)&&i.catch((t=>{wr(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(br(t[o],e,n,r));return i}function wr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void mr(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let _r=!1,Er=!1;const Ir=[];let Tr=0;const Sr=[];let Ar=null,Cr=0;const Nr=[];let Dr=null,xr=0;const kr=Promise.resolve();let Rr=null,Or=null;function Lr(t){const e=Rr||kr;return t?e.then(this?t.bind(this):t):e}function Pr(t){Ir.length&&Ir.includes(t,_r&&t.allowRecurse?Tr+1:Tr)||t===Or||(null==t.id?Ir.push(t):Ir.splice(function(t){let e=Tr+1,n=Ir.length;for(;e<n;){const r=e+n>>>1;jr(Ir[r])<t?e=r+1:n=r}return e}(t.id),0,t),Fr())}function Fr(){_r||Er||(Er=!0,Rr=kr.then(qr))}function Mr(t,e,n,r){w(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Fr()}function Vr(t,e=null){if(Sr.length){for(Or=e,Ar=[...new Set(Sr)],Sr.length=0,Cr=0;Cr<Ar.length;Cr++)Ar[Cr]();Ar=null,Cr=0,Or=null,Vr(t,e)}}function Ur(t){if(Nr.length){const t=[...new Set(Nr)];if(Nr.length=0,Dr)return void Dr.push(...t);for(Dr=t,Dr.sort(((t,e)=>jr(t)-jr(e))),xr=0;xr<Dr.length;xr++)Dr[xr]();Dr=null,xr=0}}const jr=t=>null==t.id?1/0:t.id;function qr(t){Er=!1,_r=!0,Vr(t),Ir.sort(((t,e)=>jr(t)-jr(e)));try{for(Tr=0;Tr<Ir.length;Tr++){const t=Ir[Tr];t&&!1!==t.active&&mr(t,null,14)}}finally{Tr=0,Ir.length=0,Ur(),_r=!1,Rr=null,(Ir.length||Sr.length||Nr.length)&&qr(t)}}const Br={};function Kr(t,e,n){return zr(t,e,n)}function zr(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=c){const a=cr;let u,l,f=!1,p=!1;if(ue(t)?(u=()=>t.value,f=!!t._shallow):re(t)?(u=()=>t,r=!0):w(t)?(p=!0,f=t.some(re),u=()=>t.map((t=>ue(t)?t.value:re(t)?Qr(t):I(t)?mr(t,a,2):void 0))):u=I(t)?e?()=>mr(t,a,2):()=>{if(!a||!a.isUnmounted)return l&&l(),br(t,a,3,[d])}:h,e&&r){const t=u;u=()=>Qr(t())}let d=t=>{l=b.onStop=()=>{mr(t,a,4)}},v=p?[]:Br;const y=()=>{if(b.active)if(e){const t=b.run();(r||f||(p?t.some(((t,e)=>j(t,v[e]))):j(t,v)))&&(l&&l(),br(e,a,3,[t,v===Br?void 0:v,d]),v=t)}else b.run()};let m;y.allowRecurse=!!e,m="sync"===i?y:"post"===i?()=>Nn(y,a&&a.suspense):()=>{!a||a.isMounted?function(t){Mr(t,Ar,Sr,Cr)}(y):y()};const b=new rt(u,m);return e?n?y():v=b.run():"post"===i?Nn(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&g(a.scope.effects,b)}}function Gr(t,e,n){const r=this.proxy,i=T(t)?t.includes(".")?Hr(r,t):()=>r[t]:t.bind(r,r);let o;I(e)?o=e:(o=e.handler,n=e);const s=cr;hr(this);const a=zr(i,o.bind(r),n);return s?hr(s):fr(),a}function Hr(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Qr(t,e=new Set){if(!A(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),ue(t))Qr(t.value,e);else if(w(t))for(let n=0;n<t.length;n++)Qr(t[n],e);else if(E(t)||_(t))t.forEach((t=>{Qr(t,e)}));else if(x(t))for(const n in t)Qr(t[n],e);return t}const Wr="3.2.2",$r="undefined"!=typeof document?document:null,Yr=new Map,Xr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?$r.createElementNS("http://www.w3.org/2000/svg",t):$r.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>$r.createTextNode(t),createComment:t=>$r.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$r.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=Yr.get(t);if(!o){const e=$r.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}Yr.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Jr=/\s*!important$/;function Zr(t,e,n){if(w(n))n.forEach((n=>Zr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=ei[e];if(n)return n;let r=P(e);if("filter"!==r&&r in t)return ei[e]=r;r=V(r);for(let i=0;i<ti.length;i++){const n=ti[i]+r;if(n in t)return ei[e]=n}return e}(t,e);Jr.test(n)?t.setProperty(M(r),n.replace(Jr,""),"important"):t[r]=n}}const ti=["Webkit","Moz","ms"],ei={};const ni="http://www.w3.org/1999/xlink";let ri=Date.now,ii=!1;if("undefined"!=typeof window){ri()>document.createEvent("Event").timeStamp&&(ri=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);ii=!!(t&&Number(t[1])<=53)}let oi=0;const si=Promise.resolve(),ai=()=>{oi=0};function ui(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(ci.test(t)){let n;for(e={};n=t.match(ci);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[M(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||ri();(ii||r>=n.attached-1)&&br(function(t,e){if(w(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>oi||(si.then(ai),oi=ri()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const ci=/(?:Once|Passive|Capture)$/;const li=/^on[a-z]/;const hi="transition",fi=(t,{slots:e})=>function(t,e,n){const r=arguments.length;return 2===r?A(e)&&!w(e)?Gn(e)?Xn(t,null,[e]):Xn(t,e):Xn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Gn(n)&&(n=[n]),Xn(t,e,n))}(Ce,function(t){const e={};for(const y in t)y in pi||(e[y]=t[y]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(A(t))return[yi(t.enter),yi(t.leave)];{const e=yi(t);return[e,e]}}(i),v=d&&d[0],g=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:E,onBeforeAppear:I=m,onAppear:T=b,onAppearCancelled:S=w}=e,C=(t,e,n)=>{mi(t,e?l:a),mi(t,e?c:s),n&&n()},N=(t,e)=>{mi(t,p),mi(t,f),e&&e()},D=t=>(e,n)=>{const i=t?T:b,s=()=>C(e,t,n);di(i,[e,s]),bi((()=>{mi(e,t?u:o),gi(e,t?l:a),vi(i)||_i(e,r,v,s)}))};return y(e,{onBeforeEnter(t){di(m,[t]),gi(t,o),gi(t,s)},onBeforeAppear(t){di(I,[t]),gi(t,u),gi(t,c)},onEnter:D(!1),onAppear:D(!0),onLeave(t,e){const n=()=>N(t,e);gi(t,h),document.body.offsetHeight,gi(t,f),bi((()=>{mi(t,h),gi(t,p),vi(_)||_i(t,r,g,n)})),di(_,[t,n])},onEnterCancelled(t){C(t,!1),di(w,[t])},onAppearCancelled(t){C(t,!0),di(S,[t])},onLeaveCancelled(t){N(t),di(E,[t])}})}(t),e);fi.displayName="Transition";const pi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};fi.props=y({},Ce.props,pi);const di=(t,e=[])=>{w(t)?t.forEach((t=>t(...e))):t&&t(...e)},vi=t=>!!t&&(w(t)?t.some((t=>t.length>1)):t.length>1);function yi(t){return K(t)}function gi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function mi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function bi(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let wi=0;function _i(t,e,n,r){const i=t._endId=++wi,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=Ei(i,o),a=r("animationDelay"),u=r("animationDuration"),c=Ei(a,u);let l=null,h=0,f=0;e===hi?s>0&&(l=hi,h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?hi:"animation":null,f=l?l===hi?o.length:u.length:0);const p=l===hi&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:h,propCount:f,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Ei(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>Ii(e)+Ii(t[n]))))}function Ii(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const Ti=["ctrl","shift","alt","meta"],Si={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Ti.some((n=>t[`${n}Key`]&&!e.includes(n)))},Ai=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Si[e[t]];if(r&&r(n,e))return}return t(n,...r)},Ci={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Ni(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ni(t,!0),r.enter(t)):r.leave(t,(()=>{Ni(t,!1)})):Ni(t,e))},beforeUnmount(t,{value:e}){Ni(t,e)}};function Ni(t,e){t.style.display=e?t._vod:"none"}const Di=y({patchProp:(t,n,r,i,o=!1,s,a,u,c)=>{"class"===n?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,i,o):"style"===n?function(t,e,n){const r=t.style;if(n)if(T(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)Zr(r,t,n[t]);if(e&&!T(e))for(const t in e)null==n[t]&&Zr(r,t,"")}else t.removeAttribute("style")}(t,r,i):d(n)?v(n)||ui(t,n,0,i,a):("."===n[0]?(n=n.slice(1),1):"^"===n[0]?(n=n.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&li.test(e)&&I(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(li.test(e)&&T(n))return!1;return e in t}(t,n,i,o))?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r){try{t[e]=0}catch(a){}return void t.removeAttribute(e)}}try{t[e]=n}catch(Bb){}}(t,n,i,s,a,u,c):("true-value"===n?t._trueValue=i:"false-value"===n&&(t._falseValue=i),function(t,n,r,i,o){if(i&&n.startsWith("xlink:"))null==r?t.removeAttributeNS(ni,n.slice(6,n.length)):t.setAttributeNS(ni,n,r);else{const i=e(n);null==r||i&&!1===r?t.removeAttribute(n):t.setAttribute(n,i?"":r)}}(t,n,i,o))}},Xr);let xi;const ki=(...t)=>{const e=(xi||(xi=Dn(Di))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(T(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;I(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Ri=function(t,e){return(Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Oi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Li=function(){return(Li=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Pi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(Bb){o(Bb)}}function a(t){try{u(r.throw(t))}catch(Bb){o(Bb)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Fi(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(Bb){o=[6,Bb],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Mi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Ui(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function qi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=qi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bi=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ki(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function zi(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Bb){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gi=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Hi.prototype.create),o}return Oi(e,t),e}(Error),Hi=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Qi(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Gi(i,a,r);return u},t}();function Qi(t,e){return t.replace(Wi,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Wi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yi(t,e){var n=new Xi(t,e);return n.subscribe.bind(n)}var Xi=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Ji),void 0===r.error&&(r.error=Ji),void 0===r.complete&&(r.complete=Ji);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(Bb){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(Bb){"undefined"!=typeof console&&console.error&&console.error(Bb)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Ji(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){return t&&t._delegate?t._delegate:t}var to=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),eo=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Bi;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(Bb){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Bb){if(r)return null;throw Bb}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(Bb){}try{for(var r=Mi(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Vi(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(Bb){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Pi(this,void 0,void 0,(function(){var t;return Fi(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ui(Ui([],Vi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Vi(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=Mi(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=Vi(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Mi(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no,ro=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new eo(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function io(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oo,so,ao=[];(so=oo||(oo={}))[so.DEBUG=0]="DEBUG",so[so.VERBOSE=1]="VERBOSE",so[so.INFO=2]="INFO",so[so.WARN=3]="WARN",so[so.ERROR=4]="ERROR",so[so.SILENT=5]="SILENT";var uo,co={debug:oo.DEBUG,verbose:oo.VERBOSE,info:oo.INFO,warn:oo.WARN,error:oo.ERROR,silent:oo.SILENT},lo=oo.INFO,ho=((no={})[oo.DEBUG]="log",no[oo.VERBOSE]="log",no[oo.INFO]="info",no[oo.WARN]="warn",no[oo.ERROR]="error",no),fo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ho[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,io(["["+i+"]  "+t.name+":"],n))}},po=function(){function t(t){this.name=t,this._logLevel=lo,this._logHandler=fo,this._userLogHandler=null,ao.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in oo))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?co[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,io([this,oo.DEBUG],t)),this._logHandler.apply(this,io([this,oo.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,io([this,oo.VERBOSE],t)),this._logHandler.apply(this,io([this,oo.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,io([this,oo.INFO],t)),this._logHandler.apply(this,io([this,oo.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,io([this,oo.WARN],t)),this._logHandler.apply(this,io([this,oo.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,io([this,oo.ERROR],t)),this._logHandler.apply(this,io([this,oo.ERROR],t))},t}();function vo(t){ao.forEach((function(e){e.setLogLevel(t)}))}var yo,go=((uo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",uo["bad-app-name"]="Illegal App name: '{$appName}",uo["duplicate-app"]="Firebase App named '{$appName}' already exists",uo["app-deleted"]="Firebase App named '{$appName}' already deleted",uo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",uo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",uo),mo=new Hi("app","Firebase",go),bo=((yo={})["@firebase/app"]="fire-core",yo["@firebase/analytics"]="fire-analytics",yo["@firebase/app-check"]="fire-app-check",yo["@firebase/auth"]="fire-auth",yo["@firebase/database"]="fire-rtdb",yo["@firebase/functions"]="fire-fn",yo["@firebase/installations"]="fire-iid",yo["@firebase/messaging"]="fire-fcm",yo["@firebase/performance"]="fire-perf",yo["@firebase/remote-config"]="fire-rc",yo["@firebase/storage"]="fire-gcs",yo["@firebase/firestore"]="fire-fst",yo["fire-js"]="fire-js",yo["firebase-wrapper"]="fire-js-all",yo),wo=new po("@firebase/app"),_o=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=qi(void 0,t),this.container=new ro(e.name),this._addComponent(new to("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(Bb){wo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,Bb)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw mo.create("app-deleted",{appName:this.name_})},t}();_o.prototype.name&&_o.prototype.options||_o.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Eo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw mo.create("bad-app-name",{appName:String(s)});if($i(e,s))throw mo.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=bo[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void wo.warn(u.join(" "))}o(new to(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:vo,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw mo.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=co[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:oo[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=ao;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!$i(e,t=t||"[DEFAULT]"))throw mo.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return wo.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw mo.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&qi(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Io=function t(){var e=Eo(_o);return e.INTERNAL=Li(Li({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){qi(e,t)},createSubscribe:Yi,ErrorFactory:Hi,deepExtend:qi}),e}(),To=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){wo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var So=self.firebase.SDK_VERSION;So&&So.indexOf("LITE")>=0&&wo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ao=Io.initializeApp;Io.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zi()&&wo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ao.apply(void 0,t)};var Co,No,Do=Io;(Co=Do).INTERNAL.registerComponent(new to("platform-logger",(function(t){return new To(t)}),"PRIVATE")),Co.registerVersion("@firebase/app","0.6.29",No),Co.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Do.registerVersion("firebase","8.9.1","app"),Do.SDK_VERSION="8.9.1";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var xo=function(t,e){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ko(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ro,Oo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lo=Lo||{},Po=Oo||self;function Fo(){}function Mo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Uo="closure_uid_"+(1e9*Math.random()>>>0),jo=0;function qo(t,e,n){return t.call.apply(t.bind,arguments)}function Bo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ko(t,e,n){return(Ko=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qo:Bo).apply(null,arguments)}function zo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Go(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ho(){this.s=this.s,this.o=this.o}var Qo={};Ho.prototype.s=!1,Ho.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Uo)&&t[Uo]||(t[Uo]=++jo)}(this);delete Qo[t]}},Ho.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},$o=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Yo(t){return Array.prototype.concat.apply([],arguments)}function Xo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jo(t){return/^[\s\xa0]*$/.test(t)}var Zo,ts=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function es(t,e){return-1!=t.indexOf(e)}function ns(t,e){return t<e?-1:t>e?1:0}t:{var rs=Po.navigator;if(rs){var is=rs.userAgent;if(is){Zo=is;break t}}Zo=""}function os(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ss(t){var e={};for(var n in t)e[n]=t[n];return e}var as="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function us(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<as.length;o++)n=as[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function cs(t){return cs[" "](t),t}cs[" "]=Fo;var ls,hs,fs=es(Zo,"Opera"),ps=es(Zo,"Trident")||es(Zo,"MSIE"),ds=es(Zo,"Edge"),vs=ds||ps,ys=es(Zo,"Gecko")&&!(es(Zo.toLowerCase(),"webkit")&&!es(Zo,"Edge"))&&!(es(Zo,"Trident")||es(Zo,"MSIE"))&&!es(Zo,"Edge"),gs=es(Zo.toLowerCase(),"webkit")&&!es(Zo,"Edge");function ms(){var t=Po.document;return t?t.documentMode:void 0}t:{var bs="",ws=(hs=Zo,ys?/rv:([^\);]+)(\)|;)/.exec(hs):ds?/Edge\/([\d\.]+)/.exec(hs):ps?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hs):gs?/WebKit\/(\S+)/.exec(hs):fs?/(?:Version)[ \/]?(\S+)/.exec(hs):void 0);if(ws&&(bs=ws?ws[1]:""),ps){var _s=ms();if(null!=_s&&_s>parseFloat(bs)){ls=String(_s);break t}}ls=bs}var Es,Is={};function Ts(){return function(t){var e=Is;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=ts(String(ls)).split("."),n=ts("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ns(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ns(0==o[2].length,0==s[2].length)||ns(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(Po.document&&ps){var Ss=ms();Es=Ss||(parseInt(ls,10)||void 0)}else Es=void 0;var As=Es,Cs=function(){if(!Po.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Po.addEventListener("test",Fo,e),Po.removeEventListener("test",Fo,e)}catch(n){}return t}();function Ns(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ds(t,e){if(Ns.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ys){t:{try{cs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xs[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ds.Z.h.call(this)}}Ns.prototype.h=function(){this.defaultPrevented=!0},Go(Ds,Ns);var xs={2:"touch",3:"pen",4:"mouse"};Ds.prototype.h=function(){Ds.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),Rs=0;function Os(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Rs,this.ca=this.fa=!1}function Ls(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ps(t){this.src=t,this.g={},this.h=0}function Fs(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Wo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ls(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ms(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ps.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ms(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Os(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Vs="closure_lm_"+(1e6*Math.random()|0),Us={};function js(t,e,n,r,i){if(r&&r.once)return Bs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)js(t,e[o],n,r,i);return null}return n=$s(n),t&&t[ks]?t.N(e,n,Vo(r)?!!r.capture:!!r,i):qs(t,e,n,!1,r,i)}function qs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Vo(i)?!!i.capture:!!i,a=Qs(t);if(a||(t[Vs]=a=new Ps(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Hs;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Cs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Gs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Bs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bs(t,e[o],n,r,i);return null}return n=$s(n),t&&t[ks]?t.O(e,n,Vo(r)?!!r.capture:!!r,i):qs(t,e,n,!0,r,i)}function Ks(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ks(t,e[o],n,r,i);else r=Vo(r)?!!r.capture:!!r,n=$s(n),t&&t[ks]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Ms(o=t.g[e],n,r,i))&&(Ls(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Qs(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ms(e,n,r,i)),(n=-1<t?e[t]:null)&&zs(n))}function zs(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ks])Fs(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Gs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Qs(e))?(Fs(n,t),0==n.h&&(n.src=null,e[Vs]=null)):Ls(t)}}}function Gs(t){return t in Us?Us[t]:Us[t]="on"+t}function Hs(t,e){if(t.ca)t=!0;else{e=new Ds(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&zs(t),t=n.call(r,e)}return t}function Qs(t){return(t=t[Vs])instanceof Ps?t:null}var Ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function $s(t){return"function"==typeof t?t:(t[Ws]||(t[Ws]=function(e){return t.handleEvent(e)}),t[Ws])}function Ys(){Ho.call(this),this.i=new Ps(this),this.P=this,this.I=null}function Xs(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ns(e,t);else if(e instanceof Ns)e.target=e.target||t;else{var i=e;us(e=new Ns(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Js(s,r,!0,e)&&i}if(i=Js(s=e.g=t,r,!0,e)&&i,i=Js(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Js(s=e.g=n[o],r,!1,e)&&i}function Js(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Fs(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Go(Ys,Ho),Ys.prototype[ks]=!0,Ys.prototype.removeEventListener=function(t,e,n,r){Ks(this,t,e,n,r)},Ys.prototype.M=function(){if(Ys.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ls(n[r]);delete e.g[t],e.h--}}this.I=null},Ys.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ys.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Zs=Po.JSON.stringify;function ta(){var t=ua,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ea,na=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=ra.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),ra=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new ia}),(function(t){return t.reset()})),ia=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function oa(t){Po.setTimeout((function(){throw t}),0)}function sa(t,e){ea||function(){var t=Po.Promise.resolve(void 0);ea=function(){t.then(ca)}}(),aa||(ea(),aa=!0),ua.add(t,e)}var aa=!1,ua=new na;function ca(){for(var t;t=ta();){try{t.h.call(t.g)}catch(n){oa(n)}var e=ra;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}aa=!1}function la(t,e){Ys.call(this),this.h=t||1,this.g=e||Po,this.j=Ko(this.kb,this),this.l=Date.now()}function ha(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function fa(t,e,n){if("function"==typeof t)n&&(t=Ko(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ko(t.handleEvent,t)}return 2147483647<Number(e)?-1:Po.setTimeout(t,e||0)}function pa(t){t.g=fa((function(){t.g=null,t.i&&(t.i=!1,pa(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Go(la,Ys),(Ro=la.prototype).da=!1,Ro.S=null,Ro.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xs(this,"tick"),this.da&&(ha(this),this.start()))}},Ro.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ro.M=function(){la.Z.M.call(this),ha(this),delete this.g};var da=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:pa(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Po.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Ho);function va(t){Ho.call(this),this.h=t,this.g={}}Go(va,Ho);var ya=[];function ga(t,e,n,r){Array.isArray(n)||(n&&(ya[0]=n.toString()),n=ya);for(var i=0;i<n.length;i++){var o=js(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ma(t){os(t.g,(function(t,e){this.g.hasOwnProperty(e)&&zs(t)}),t),t.g={}}function ba(){this.g=!0}function wa(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Zs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}va.prototype.M=function(){va.Z.M.call(this),ma(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ba.prototype.Aa=function(){this.g=!1},ba.prototype.info=function(){};var _a={},Ea=null;function Ia(){return Ea=Ea||new Ys}function Ta(t){Ns.call(this,_a.Ma,t)}function Sa(t){var e=Ia();Xs(e,new Ta(e,t))}function Aa(t,e){Ns.call(this,_a.STAT_EVENT,t),this.stat=e}function Ca(t){var e=Ia();Xs(e,new Aa(e,t))}function Na(t,e){Ns.call(this,_a.Na,t),this.size=e}function Da(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Po.setTimeout((function(){t()}),e)}_a.Ma="serverreachability",Go(Ta,Ns),_a.STAT_EVENT="statevent",Go(Aa,Ns),_a.Na="timingevent",Go(Na,Ns);var xa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ka={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ra(){}function Oa(t){return t.h||(t.h=t.i())}function La(){}Ra.prototype.h=null;var Pa,Fa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ma(){Ns.call(this,"d")}function Va(){Ns.call(this,"c")}function Ua(){}function ja(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new va(this),this.P=Ba,t=vs?125:void 0,this.W=new la(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qa}function qa(){this.i=null,this.g="",this.h=!1}Go(Ma,Ns),Go(Va,Ns),Go(Ua,Ra),Ua.prototype.g=function(){return new XMLHttpRequest},Ua.prototype.i=function(){return{}},Pa=new Ua;var Ba=45e3,Ka={},za={};function Ga(t,e,n){t.K=1,t.v=du(uu(e)),t.s=n,t.U=!0,Ha(t,null)}function Ha(t,e){t.F=Date.now(),Ya(t),t.A=uu(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Cu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new qa,t.g=Nc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new da(Ko(t.Ia,t,t.g),t.O)),ga(t.V,t.g,"readystatechange",t.gb),e=t.H?ss(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Sa(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Qa(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Wa(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=$a(t,n))==za){4==e&&(t.o=4,Ca(14),i=!1),wa(t.j,t.m,null,"[Incomplete Response]");break}if(r==Ka){t.o=4,Ca(15),wa(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}wa(t.j,t.m,r,null),eu(t,r)}Qa(t)&&r!=za&&r!=Ka&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ca(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),wc(e),e.L=!0,Ca(11))):(wa(t.j,t.m,n,"[Invalid Chunked Response]"),tu(t),Za(t))}function $a(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?za:(n=Number(e.substring(n,r)),isNaN(n)?Ka:(r+=1)+n>e.length?za:(e=e.substr(r,n),t.C=r+n,e))}function Ya(t){t.Y=Date.now()+t.P,Xa(t,t.P)}function Xa(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Da(Ko(t.eb,t),e)}function Ja(t){t.B&&(Po.clearTimeout(t.B),t.B=null)}function Za(t){0==t.l.G||t.I||Ic(t.l,t)}function tu(t){Ja(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ha(t.W),ma(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function eu(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Lu(n.i,t)))if(n.I=t.N,!t.J&&Lu(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ec(n),hc(n)}bc(n),Ca(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Da(Ko(n.ab,n),6e3));if(1>=Ou(n.i)&&n.ka){try{n.ka()}catch(y){}n.ka=void 0}}else Sc(n,11)}else if((t.J||n.g==t)&&Ec(n),!Jo(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(es(l,"spdy")||es(l,"quic")||es(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Pu(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,pu(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Cc(r,r.H?r.la:null,r.W),p.J){Fu(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Ja(d),Ya(d)),r.g=p}else mc(r);0<n.l.length&&dc(n)}else"stop"!=o[0]&&"close"!=o[0]||Sc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Sc(n,7):lc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Sa(4)}catch(y){}}function nu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Mo(t)||"string"==typeof t)$o(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Mo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Mo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ru(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ru)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function iu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ou(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ou(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ou(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ro=ja.prototype).setTimeout=function(t){this.P=t},Ro.gb=function(t){t=t.target;var e=this.L;e&&3==oc(t)?e.l():this.Ia(t)},Ro.Ia=function(t){try{if(t==this.g)t:{var e=oc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||vs||this.g&&(this.h.h||this.g.ga()||sc(this.g)))){this.I||4!=e||7==n||Sa(8==n||0>=r?3:2),Ja(this);var i=this.g.ba();this.N=i;e:if(Qa(this)){var o=sc(this.g);t="";var s=o.length,a=4==oc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tu(this),Za(this);var u="";break e}this.h.i=new Po.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jo(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ca(12),tu(this),Za(this);break t}wa(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,eu(this,i)}this.U?(Wa(this,e,u),vs&&this.i&&3==e&&(ga(this.V,this.W,"tick",this.fb),this.W.start())):(wa(this.j,this.m,u,null),eu(this,u)),4==e&&tu(this),this.i&&!this.I&&(4==e?Ic(this.l,this):(this.i=!1,Ya(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ca(12)):(this.o=0,Ca(13)),tu(this),Za(this)}}}catch(f){}},Ro.fb=function(){if(this.g){var t=oc(this.g),e=this.g.ga();this.C<e.length&&(Ja(this),Wa(this,t,e),this.i&&4!=t&&Ya(this))}},Ro.cancel=function(){this.I=!0,tu(this)},Ro.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Sa(3),Ca(17)),tu(this),this.o=2,Za(this)):Xa(this,this.Y-t)},(Ro=ru.prototype).R=function(){iu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ro.T=function(){return iu(this),this.g.concat()},Ro.get=function(t,e){return ou(this.h,t)?this.h[t]:e},Ro.set=function(t,e){ou(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ro.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var su=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function au(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof au){this.g=void 0!==e?e:t.g,cu(this,t.j),this.s=t.s,lu(this,t.i),hu(this,t.m),this.l=t.l,e=t.h;var n=new Iu;n.i=e.i,e.g&&(n.g=new ru(e.g),n.h=e.h),fu(this,n),this.o=t.o}else t&&(n=String(t).match(su))?(this.g=!!e,cu(this,n[1]||"",!0),this.s=vu(n[2]||""),lu(this,n[3]||"",!0),hu(this,n[4]),this.l=vu(n[5]||"",!0),fu(this,n[6]||"",!0),this.o=vu(n[7]||"")):(this.g=!!e,this.h=new Iu(null,this.g))}function uu(t){return new au(t)}function cu(t,e,n){t.j=n?vu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lu(t,e,n){t.i=n?vu(e,!0):e}function hu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fu(t,e,n){e instanceof Iu?(t.h=e,function(t,e){e&&!t.j&&(Tu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Su(this,e),Cu(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=yu(e,_u)),t.h=new Iu(e,t.g))}function pu(t,e,n){t.h.set(e,n)}function du(t){return pu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,gu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}au.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yu(e,mu,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(yu(e,mu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(yu(n,"/"==n.charAt(0)?wu:bu,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yu(n,Eu)),t.join("")};var mu=/[#\/\?@]/g,bu=/[#\?:]/g,wu=/[#\?]/g,_u=/[#\?@]/g,Eu=/#/g;function Iu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Tu(t){t.g||(t.g=new ru,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Su(t,e){Tu(t),e=Nu(t,e),ou(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ou((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&iu(t)))}function Au(t,e){return Tu(t),e=Nu(t,e),ou(t.g.h,e)}function Cu(t,e,n){Su(t,e),0<n.length&&(t.i=null,t.g.set(Nu(t,e),Xo(n)),t.h+=n.length)}function Nu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ro=Iu.prototype).add=function(t,e){Tu(this),this.i=null,t=Nu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ro.forEach=function(t,e){Tu(this),this.g.forEach((function(n,r){$o(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ro.T=function(){Tu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ro.R=function(t){Tu(this);var e=[];if("string"==typeof t)Au(this,t)&&(e=Yo(e,this.g.get(Nu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Yo(e,t[n])}return e},Ro.set=function(t,e){return Tu(this),this.i=null,Au(this,t=Nu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ro.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ro.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Du=function(t,e){this.h=t,this.g=e};function xu(t){this.l=t||ku,Po.PerformanceNavigationTiming?t=0<(t=Po.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Po.g&&Po.g.Ea&&Po.g.Ea()&&Po.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ku=10;function Ru(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ou(t){return t.h?1:t.g?t.g.size:0}function Lu(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Pu(t,e){t.g?t.g.add(e):t.h=e}function Fu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Mu(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=ko(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Xo(t.i)}function Vu(){}function Uu(){this.g=new Vu}function ju(t,e,n){var r=n||"";try{nu(t,(function(t,n){var i=t;Vo(t)&&(i=Zs(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Bb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Bb}}function qu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Bu(t){this.l=t.$b||null,this.j=t.ib||!1}function Ku(t,e){Ys.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=zu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xu.prototype.cancel=function(){var t,e;if(this.i=Mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=ko(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Vu.prototype.stringify=function(t){return Po.JSON.stringify(t,void 0)},Vu.prototype.parse=function(t){return Po.JSON.parse(t,void 0)},Go(Bu,Ra),Bu.prototype.g=function(){return new Ku(this.l,this.j)},Bu.prototype.i=function(t){return function(){return t}}({}),Go(Ku,Ys);var zu=0;function Gu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Hu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qu(t)}function Qu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ro=Ku.prototype).open=function(t,e){if(this.readyState!=zu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qu(this)},Ro.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Po).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ro.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hu(this)),this.readyState=zu},Ro.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qu(this)),this.g&&(this.readyState=3,Qu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Po.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ro.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Hu(this):Qu(this),3==this.readyState&&Gu(this)}},Ro.Ua=function(t){this.g&&(this.response=this.responseText=t,Hu(this))},Ro.Ta=function(t){this.g&&(this.response=t,Hu(this))},Ro.ha=function(){this.g&&Hu(this)},Ro.setRequestHeader=function(t,e){this.v.append(t,e)},Ro.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ro.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ku.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Wu=Po.JSON.parse;function $u(t){Ys.call(this),this.headers=new ru,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yu,this.K=this.L=!1}Go($u,Ys);var Yu="",Xu=/^https?$/i,Ju=["POST","PUT"];function Zu(t){return"content-type"==t.toLowerCase()}function tc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ec(t),rc(t)}function ec(t){t.D||(t.D=!0,Xs(t,"complete"),Xs(t,"error"))}function nc(t){if(t.h&&void 0!==Lo&&(!t.C[1]||4!=oc(t)||2!=t.ba()))if(t.v&&4==oc(t))fa(t.Fa,0,t);else if(Xs(t,"readystatechange"),4==oc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(su)[1]||null;if(!o&&Po.self&&Po.self.location){var s=Po.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xu.test(o?o.toLowerCase():"")}e=i}if(e)Xs(t,"complete"),Xs(t,"success");else{t.m=6;try{var a=2<oc(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",ec(t)}}finally{rc(t)}}}function rc(t,e){if(t.g){ic(t);var n=t.g,r=t.C[0]?Fo:null;t.g=null,t.C=null,e||Xs(t,"ready");try{n.onreadystatechange=r}catch(Bb){}}}function ic(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Po.clearTimeout(t.A),t.A=null)}function oc(t){return t.g?t.g.readyState:0}function sc(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Yu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ac(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return os(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):pu(t,e,n))}function uc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cc(t){this.za=0,this.l=[],this.h=new ba,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uc("baseRetryDelayMs",5e3,t),this.$a=uc("retryDelaySeedMs",1e4,t),this.Ya=uc("forwardChannelMaxRetries",2,t),this.ra=uc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new xu(t&&t.concurrentRequestLimit),this.Ca=new Uu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function lc(t){if(fc(t),3==t.G){var e=t.V++,n=uu(t.F);pu(n,"SID",t.J),pu(n,"RID",e),pu(n,"TYPE","terminate"),yc(t,n),(e=new ja(t,t.h,e,void 0)).K=2,e.v=du(uu(n)),n=!1,Po.navigator&&Po.navigator.sendBeacon&&(n=Po.navigator.sendBeacon(e.v.toString(),"")),!n&&Po.Image&&((new Image).src=e.v,n=!0),n||(e.g=Nc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ya(e)}Ac(t)}function hc(t){t.g&&(wc(t),t.g.cancel(),t.g=null)}function fc(t){hc(t),t.u&&(Po.clearTimeout(t.u),t.u=null),Ec(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Po.clearTimeout(t.m),t.m=null)}function pc(t,e){t.l.push(new Du(t.Za++,e)),3==t.G&&dc(t)}function dc(t){Ru(t.i)||t.m||(t.m=!0,sa(t.Ha,t),t.C=0)}function vc(t,e){var n;n=e?e.m:t.V++;var r=uu(t.F);pu(r,"SID",t.J),pu(r,"RID",n),pu(r,"AID",t.U),yc(t,r),t.o&&t.s&&ac(r,t.o,t.s),n=new ja(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=gc(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Pu(t.i,n),Ga(n,r,e)}function yc(t,e){t.j&&nu({},(function(t,n){pu(e,n,t)}))}function gc(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ko(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{ju(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function mc(t){t.g||t.u||(t.Y=1,sa(t.Ga,t),t.A=0)}function bc(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Da(Ko(t.Ga,t),Tc(t,t.A)),t.A++,!0)}function wc(t){null!=t.B&&(Po.clearTimeout(t.B),t.B=null)}function _c(t){t.g=new ja(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=uu(t.oa);pu(e,"RID","rpc"),pu(e,"SID",t.J),pu(e,"CI",t.N?"0":"1"),pu(e,"AID",t.U),yc(t,e),pu(e,"TYPE","xmlhttp"),t.o&&t.s&&ac(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=du(uu(e)),n.s=null,n.U=!0,Ha(n,t)}function Ec(t){null!=t.v&&(Po.clearTimeout(t.v),t.v=null)}function Ic(t,e){var n=null;if(t.g==e){Ec(t),wc(t),t.g=null;var r=2}else{if(!Lu(t.i,e))return;n=e.D,Fu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Xs(r=Ia(),new Na(r,n,e,i)),dc(t)}else mc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ou(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Da(Ko(t.Ha,t,e),Tc(t,t.C)),t.C++,0)))}(t,e)||2==r&&bc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Sc(t,5);break;case 4:Sc(t,10);break;case 3:Sc(t,6);break;default:Sc(t,2)}}function Tc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Sc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ko(t.jb,t);n||(n=new au("//www.google.com/images/cleardot.gif"),Po.location&&"http"==Po.location.protocol||cu(n,"https"),du(n)),function(t,e){var n=new ba;if(Po.Image){var r=new Image;r.onload=zo(qu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zo(qu,n,r,"TestLoadImage: error",!1,e),r.onabort=zo(qu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zo(qu,n,r,"TestLoadImage: timeout",!1,e),Po.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ca(2);t.G=0,t.j&&t.j.va(e),Ac(t),fc(t)}function Ac(t){t.G=0,t.I=-1,t.j&&(0==Mu(t.i).length&&0==t.l.length||(t.i.i.length=0,Xo(t.l),t.l.length=0),t.j.ua())}function Cc(t,e,n){var r=function(t){return t instanceof au?uu(t):new au(t,void 0)}(n);if(""!=r.i)e&&lu(r,e+"."+r.i),hu(r,r.m);else{var i=Po.location;r=function(t,e,n,r){var i=new au(null,void 0);return t&&cu(i,t),e&&lu(i,e),n&&hu(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&os(t.aa,(function(t,e){pu(r,e,t)})),e=t.D,n=t.sa,e&&n&&pu(r,e,n),pu(r,"VER",t.ma),yc(t,r),r}function Nc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new $u(new Bu({ib:!0})):new $u(t.qa)).L=t.H,e}function Dc(){}function xc(){if(ps&&!(10<=Number(As)))throw Error("Environmental error: no available transport.")}function kc(t,e){Ys.call(this),this.g=new cc(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Jo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jo(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Lc(this)}function Rc(t){Ma.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Oc(){Va.call(this),this.status=1}function Lc(t){this.g=t}(Ro=$u.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pa.g(),this.C=this.u?Oa(this.u):Oa(Pa),this.g.onreadystatechange=Ko(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void tc(this,o)}t=n||"";var i=new ru(this.headers);r&&nu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Zu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Po.FormData&&t instanceof Po.FormData,!(0<=Wo(Ju,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ic(this),0<this.B&&((this.K=function(t){return ps&&Ts()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ko(this.pa,this)):this.A=fa(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){tc(this,o)}},Ro.pa=function(){void 0!==Lo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xs(this,"timeout"),this.abort(8))},Ro.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xs(this,"complete"),Xs(this,"abort"),rc(this))},Ro.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rc(this,!0)),$u.Z.M.call(this)},Ro.Fa=function(){this.s||(this.F||this.v||this.l?nc(this):this.cb())},Ro.cb=function(){nc(this)},Ro.ba=function(){try{return 2<oc(this)?this.g.status:-1}catch(hs){return-1}},Ro.ga=function(){try{return this.g?this.g.responseText:""}catch(hs){return""}},Ro.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Wu(e)}},Ro.Da=function(){return this.m},Ro.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ro=cc.prototype).ma=8,Ro.G=1,Ro.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ro.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ja(this,this.h,t,void 0),n=this.s;if(this.P&&(n?us(n=ss(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=gc(this,e,r),pu(i=uu(this.F),"RID",t),pu(i,"CVER",22),this.D&&pu(i,"X-HTTP-Session-Id",this.D),yc(this,i),this.o&&n&&ac(i,this.o,n),Pu(this.i,e),this.Ra&&pu(i,"TYPE","init"),this.ja?(pu(i,"$req",r),pu(i,"SID","null"),e.$=!0,Ga(e,i,null)):Ga(e,i,r),this.G=2}}else 3==this.G&&(t?vc(this,t):0==this.l.length||Ru(this.i)||vc(this))},Ro.Ga=function(){if(this.u=null,_c(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Da(Ko(this.bb,this),t)}},Ro.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ca(10),hc(this),_c(this))},Ro.ab=function(){null!=this.v&&(this.v=null,hc(this),bc(this),Ca(19))},Ro.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ca(2)):(this.h.info("Failed to ping google.com"),Ca(1))},(Ro=Dc.prototype).xa=function(){},Ro.wa=function(){},Ro.va=function(){},Ro.ua=function(){},Ro.Oa=function(){},xc.prototype.g=function(t,e){return new kc(t,e)},Go(kc,Ys),kc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),sa(Ko(t.hb,t,e))),Ca(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Cc(t,null,t.W),dc(t)},kc.prototype.close=function(){lc(this.g)},kc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,pc(this.g,e)}else this.v?((e={}).__data__=Zs(t),pc(this.g,e)):pc(this.g,t)},kc.prototype.M=function(){this.g.j=null,delete this.j,lc(this.g),delete this.g,kc.Z.M.call(this)},Go(Rc,Ma),Go(Oc,Va),Go(Lc,Dc),Lc.prototype.xa=function(){Xs(this.g,"a")},Lc.prototype.wa=function(t){Xs(this.g,new Rc(t))},Lc.prototype.va=function(t){Xs(this.g,new Oc(t))},Lc.prototype.ua=function(){Xs(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,kc.prototype.send=kc.prototype.u,kc.prototype.open=kc.prototype.m,kc.prototype.close=kc.prototype.close,xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,ka.COMPLETE="complete",La.EventType=Fa,Fa.OPEN="a",Fa.CLOSE="b",Fa.ERROR="c",Fa.MESSAGE="d",Ys.prototype.listen=Ys.prototype.N,$u.prototype.listenOnce=$u.prototype.O,$u.prototype.getLastError=$u.prototype.La,$u.prototype.getLastErrorCode=$u.prototype.Da,$u.prototype.getStatus=$u.prototype.ba,$u.prototype.getResponseJson=$u.prototype.Qa,$u.prototype.getResponseText=$u.prototype.ga,$u.prototype.send=$u.prototype.ea;var Pc=xa,Fc=ka,Mc=_a,Vc=10,Uc=11,jc=Bu,qc=La,Bc=$u,Kc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Kc.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Oi(e,t),e}(Error),Hc=new po("@firebase/firestore");function Qc(){return Hc.logLevel}function Wc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=oo.DEBUG){var r=e.map(Xc);Hc.debug.apply(Hc,Ui(["Firestore (8.8.1): "+t],r))}}function $c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=oo.ERROR){var r=e.map(Xc);Hc.error.apply(Hc,Ui(["Firestore (8.8.1): "+t],r))}}function Yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=oo.WARN){var r=e.map(Xc);Hc.warn.apply(Hc,Ui(["Firestore (8.8.1): "+t],r))}}function Xc(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw $c(e),new Error(e)}function Zc(t,e){t||Jc()}function tl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=el(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function rl(t,e){return t<e?-1:t>e?1:0}function il(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ol(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gc(zc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gc(zc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gc(zc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gc(zc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?rl(this.nanoseconds,t.nanoseconds):rl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),al=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new sl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ll(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Jc(),void 0===n?n=t.length-e:n>t.length-e&&Jc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Gc(zc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(hl),pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return pl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Gc(zc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Gc(zc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gc(zc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Gc(zc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(hl),vl=function(){function t(t){this.fields=t,t.sort(dl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return il(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),yl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return rl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();yl.EMPTY_BYTE_STRING=new yl("");var gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(t){if(Zc(!!t),"string"==typeof t){var e=0,n=gl.exec(t);if(Zc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bl(t.seconds),nanos:bl(t.nanos)}}function bl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wl(t){return"string"==typeof t?yl.fromBase64String(t):yl.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function El(t){var e=t.mapValue.fields.__previous_value__;return _l(e)?El(e):e}function Il(t){var e=ml(t.mapValue.fields.__local_write_time__.timestampValue);return new sl(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return null==t}function Sl(t){return 0===t&&1/t==-1/0}function Al(t){return"number"==typeof t&&Number.isInteger(t)&&!Sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(fl.fromString(e))},t.fromName=function(e){return new t(fl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return fl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new fl(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_l(t)?4:10:Jc()}function Dl(t,e){var n,r=Nl(t);if(r!==Nl(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Il(t).isEqual(Il(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ml(t.timestampValue),r=ml(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,wl(t.bytesValue).isEqual(wl(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bl(t.geoPointValue.latitude)===bl(e.geoPointValue.latitude)&&bl(t.geoPointValue.longitude)===bl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bl(t.integerValue)===bl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bl(t.doubleValue),r=bl(e.doubleValue);return n===r?Sl(n)===Sl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return il(t.arrayValue.values||[],e.arrayValue.values||[],Dl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ul(n)!==ul(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dl(n[i],r[i])))return!1;return!0}(t,e);default:return Jc()}}function xl(t,e){return void 0!==(t.values||[]).find((function(t){return Dl(t,e)}))}function kl(t,e){var n,r,i,o,s=Nl(t),a=Nl(e);if(s!==a)return rl(s,a);switch(s){case 0:return 0;case 1:return rl(t.booleanValue,e.booleanValue);case 2:return r=e,i=bl((n=t).integerValue||n.doubleValue),o=bl(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Rl(t.timestampValue,e.timestampValue);case 4:return Rl(Il(t),Il(e));case 5:return rl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wl(t),r=wl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rl(n[i],r[i]);if(0!==o)return o}return rl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=rl(bl(t.latitude),bl(e.latitude));return 0!==n?n:rl(bl(t.longitude),bl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=kl(n[i],r[i]);if(o)return o}return rl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=rl(r[s],o[s]);if(0!==a)return a;var u=kl(n[r[s]],i[o[s]]);if(0!==u)return u}return rl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Jc()}}function Rl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rl(t,e);var n=ml(t),r=ml(e),i=rl(n.seconds,r.seconds);return 0!==i?i:rl(n.nanos,r.nanos)}function Ol(t){return Ll(t)}function Ll(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=ml(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?wl(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Cl.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ll(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ll(t.fields[o])}return e+"}"}(t.mapValue):Jc();var e,n,r,i}function Pl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Fl(t){return!!t&&"integerValue"in t}function Ml(t){return!!t&&"arrayValue"in t}function Vl(t){return!!t&&"nullValue"in t}function Ul(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function ql(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return cl(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ql(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ql(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!jl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ql(e)},t.prototype.setAll=function(t){var e=this,n=dl.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ql(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());jl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Dl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){cl(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ql(this.value))},t}();function Kl(t){var e=[];return cl(t.fields,(function(t,n){var r=new dl([t]);if(jl(n)){var i=Kl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new vl(e)}var zl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,al.min(),Bl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Bl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Bl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Gl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Gl(t,e,n,r,i,o,s)}function Ql(t){var e=tl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Ol(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Tl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=sh(e.startAt)),e.endAt&&(n+="|ub:",n+=sh(e.endAt)),e.h=n}return e.h}function Wl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Dl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lh(t.startAt,e.startAt)&&lh(t.endAt,e.endAt)}function $l(t){return Cl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Yl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Oi(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Xl(t,n,r):"array-contains"===n?new eh(t,r):"in"===n?new nh(t,r):"not-in"===n?new rh(t,r):"array-contains-any"===n?new ih(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Jl(t,n):new Zl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(kl(e,this.value)):null!==e&&Nl(this.value)===Nl(e)&&this.m(kl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Cl.fromName(r.referenceValue),i}return Oi(e,t),e.prototype.matches=function(t){var e=Cl.comparator(t.key,this.key);return this.m(e)},e}(Yl),Jl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=th("in",n),r}return Oi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Yl),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=th("not-in",n),r}return Oi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Yl);function th(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Cl.fromName(t.referenceValue)}))}var eh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Oi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ml(e)&&xl(e.arrayValue,this.value)},e}(Yl),nh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Oi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&xl(this.value.arrayValue,e)},e}(Yl),rh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Oi(e,t),e.prototype.matches=function(t){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!xl(this.value.arrayValue,e)},e}(Yl),ih=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Oi(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ml(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xl(e.value.arrayValue,t)}))},e}(Yl),oh=function(t,e){this.position=t,this.before=e};function sh(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ol(t)})).join(",")}var ah=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function uh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ch(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Cl.comparator(Cl.fromName(s.referenceValue),n.key):kl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function lh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Dl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function fh(t,e,n,r,i,o,s,a){return new hh(t,e,n,r,i,o,s,a)}function ph(t){return new hh(t)}function dh(t){return!Tl(t.limit)&&"F"===t.limitType}function vh(t){return!Tl(t.limit)&&"L"===t.limitType}function yh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function mh(t){return null!==t.collectionGroup}function bh(t){var e=tl(t);if(null===e.p){e.p=[];var n=gh(e),r=yh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ah(n)),e.p.push(new ah(dl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ah(dl.keyField(),u))}}}return e.p}function wh(t){var e=tl(t);if(!e.T)if("F"===e.limitType)e.T=Hl(e.path,e.collectionGroup,bh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=bh(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ah(o.field,s))}var a=e.endAt?new oh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new oh(e.startAt.position,!e.startAt.before):null;e.T=Hl(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function _h(t,e,n){return new hh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return Wl(wh(t),wh(e))&&t.limitType===e.limitType}function Ih(t){return Ql(wh(t))+"|lt:"+t.limitType}function Th(t){return"Query(target="+(e=wh(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ol(e.value);var e})).join(", ")+"]"),Tl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+sh(e.startAt)),e.endAt&&(n+=", endAt: "+sh(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Sh(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Cl.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ch(t.startAt,bh(t),e)||t.endAt&&ch(t.endAt,bh(t),e))}(t,e);var n,r,i}function Ah(t){return function(e,n){for(var r=!1,i=0,o=bh(t);i<o.length;i++){var s=o[i],a=Ch(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ch(t,e,n){var r,i,o,s,a=t.field.isKeyField()?Cl.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?kl(o,s):Jc());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Jc()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sl(e)?"-0":e}}function Dh(t){return{integerValue:""+t}}function xh(t,e){return Al(e)?Dh(e):Nh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kh=function(){this._=void 0};function Rh(t,e,n){return t instanceof Ph?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Fh?Mh(t,e):t instanceof Vh?Uh(t,e):function(t,e){var n=Lh(t,e),r=qh(n)+qh(t.A);return Fl(n)&&Fl(t.A)?Dh(r):Nh(t.R,r)}(t,e);var r,i,o}function Oh(t,e,n){return t instanceof Fh?Mh(t,e):t instanceof Vh?Uh(t,e):n}function Lh(t,e){return t instanceof jh?Fl(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e}(kh),Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Oi(e,t),e}(kh);function Mh(t,e){for(var n=Bh(e),r=function(t){n.some((function(e){return Dl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Oi(e,t),e}(kh);function Uh(t,e){for(var n=Bh(e),r=function(t){n=n.filter((function(e){return!Dl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Oi(e,t),e}(kh);function qh(t){return bl(t.integerValue||t.doubleValue)}function Bh(t){return Ml(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kh=function(t,e){this.field=t,this.transform=e},zh=function(t,e){this.version=t,this.transformResults=e},Gh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Hh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Qh=function(){};function Wh(t,e,n){var r,i,o,s,a;t instanceof Zh?(i=e,o=n,s=(r=t).value.clone(),a=nf(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof tf?function(t,e,n){if(Hh(t.precondition,e)){var r=nf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ef(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function $h(t,e,n){var r;t instanceof Zh?function(t,e,n){if(Hh(t.precondition,e)){var r=t.value.clone(),i=rf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Jh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof tf?function(t,e,n){if(Hh(t.precondition,e)){var r=rf(t.fieldTransforms,n,e),i=e.data;i.setAll(ef(t)),i.setAll(r),e.convertToFoundDocument(Jh(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Hh(t.precondition,r)&&r.convertToNoDocument(al.min()))}function Yh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Lh(o.transform,s||null);null!=a&&(null==n&&(n=Bl.empty()),n.set(o.field,a))}return n||null}function Xh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&il(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Fh&&o instanceof Fh||i instanceof Vh&&o instanceof Vh?il(i.elements,o.elements,Dl):i instanceof jh&&o instanceof jh?Dl(i.A,o.A):i instanceof Ph&&o instanceof Ph);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Jh(t){return t.isFoundDocument()?t.version:al.min()}var Zh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Oi(e,t),e}(Qh),tf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Oi(e,t),e}(Qh);function ef(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function nf(t,e,n){var r=new Map;Zc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Oh(s,a,n[i]))}return r}function rf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Rh(a,u,e))}return r}var of,sf,af=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Oi(e,t),e}(Qh),uf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Oi(e,t),e}(Qh),cf=function(t){this.count=t};function lf(t){switch(t){case zc.OK:return Jc();case zc.CANCELLED:case zc.UNKNOWN:case zc.DEADLINE_EXCEEDED:case zc.RESOURCE_EXHAUSTED:case zc.INTERNAL:case zc.UNAVAILABLE:case zc.UNAUTHENTICATED:return!1;case zc.INVALID_ARGUMENT:case zc.NOT_FOUND:case zc.ALREADY_EXISTS:case zc.PERMISSION_DENIED:case zc.FAILED_PRECONDITION:case zc.ABORTED:case zc.OUT_OF_RANGE:case zc.UNIMPLEMENTED:case zc.DATA_LOSS:return!0;default:return Jc()}}function hf(t){if(void 0===t)return $c("GRPC error has no .code"),zc.UNKNOWN;switch(t){case of.OK:return zc.OK;case of.CANCELLED:return zc.CANCELLED;case of.UNKNOWN:return zc.UNKNOWN;case of.DEADLINE_EXCEEDED:return zc.DEADLINE_EXCEEDED;case of.RESOURCE_EXHAUSTED:return zc.RESOURCE_EXHAUSTED;case of.INTERNAL:return zc.INTERNAL;case of.UNAVAILABLE:return zc.UNAVAILABLE;case of.UNAUTHENTICATED:return zc.UNAUTHENTICATED;case of.INVALID_ARGUMENT:return zc.INVALID_ARGUMENT;case of.NOT_FOUND:return zc.NOT_FOUND;case of.ALREADY_EXISTS:return zc.ALREADY_EXISTS;case of.PERMISSION_DENIED:return zc.PERMISSION_DENIED;case of.FAILED_PRECONDITION:return zc.FAILED_PRECONDITION;case of.ABORTED:return zc.ABORTED;case of.OUT_OF_RANGE:return zc.OUT_OF_RANGE;case of.UNIMPLEMENTED:return zc.UNIMPLEMENTED;case of.DATA_LOSS:return zc.DATA_LOSS;default:return Jc()}}(sf=of||(of={}))[sf.OK=0]="OK",sf[sf.CANCELLED=1]="CANCELLED",sf[sf.UNKNOWN=2]="UNKNOWN",sf[sf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sf[sf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sf[sf.NOT_FOUND=5]="NOT_FOUND",sf[sf.ALREADY_EXISTS=6]="ALREADY_EXISTS",sf[sf.PERMISSION_DENIED=7]="PERMISSION_DENIED",sf[sf.UNAUTHENTICATED=16]="UNAUTHENTICATED",sf[sf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sf[sf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sf[sf.ABORTED=10]="ABORTED",sf[sf.OUT_OF_RANGE=11]="OUT_OF_RANGE",sf[sf.UNIMPLEMENTED=12]="UNIMPLEMENTED",sf[sf.INTERNAL=13]="INTERNAL",sf[sf.UNAVAILABLE=14]="UNAVAILABLE",sf[sf.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ff=function(){function t(t,e){this.comparator=t,this.root=e||df.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,df.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,df.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pf(this.root,t,this.comparator,!0)},t}(),pf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),df=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Jc();if(this.right.isRed())throw Jc();var t=this.left.check();if(t!==this.right.check())throw Jc();return t+(this.isRed()?0:1)},t}();df.EMPTY=null,df.RED=!0,df.BLACK=!1,df.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new df(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vf=function(){function t(t){this.comparator=t,this.data=new ff(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new yf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new yf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),yf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),gf=new ff(Cl.comparator);function mf(){return gf}var bf=new ff(Cl.comparator);function wf(){return bf}var _f=new ff(Cl.comparator);var Ef=new vf(Cl.comparator);function If(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ef,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Tf=new vf(rl);function Sf(){return Tf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Af=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Cf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(al.min(),r,Sf(),mf(),If())},t}(),Cf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(yl.EMPTY_BYTE_STRING,n,If(),If(),If())},t}(),Nf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Df=function(t,e){this.targetId=t,this.V=e},xf=function(t,e,n,r){void 0===n&&(n=yl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},kf=function(){function t(){this.S=0,this.D=Lf(),this.C=yl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=If(),e=If(),n=If();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Jc()}})),new Cf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Lf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Rf=function(){function t(t){this.W=t,this.G=new Map,this.H=mf(),this.J=Of(),this.Y=new vf(rl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Jc()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if($l(i))if(0===n){var o=new Cl(i.path);this.tt(e,o,zl.newNoDocument(o,al.min()))}else Zc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&$l(o.target)){var s=new Cl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,zl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=If();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Af(t,n,this.Y,this.H,r);return this.H=mf(),this.J=Of(),this.Y=new vf(rl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new kf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new vf(rl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Wc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new kf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Of(){return new ff(Cl.comparator)}function Lf(){return new ff(Cl.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pf={asc:"ASCENDING",desc:"DESCENDING"},Ff={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mf=function(t,e){this.databaseId=t,this.I=e};function Vf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uf(t,e){return t.I?e.toBase64():e.toUint8Array()}function jf(t,e){return Vf(t,e.toTimestamp())}function qf(t){return Zc(!!t),al.fromTimestamp((e=ml(t),new sl(e.seconds,e.nanos)));var e}function Bf(t,e){return(n=t,new fl(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Kf(t){var e=fl.fromString(t);return Zc(fp(e)),e}function zf(t,e){return Bf(t.databaseId,e.path)}function Gf(t,e){var n=Kf(e);if(n.get(1)!==t.databaseId.projectId)throw new Gc(zc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Gc(zc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Cl($f(n))}function Hf(t,e){return Bf(t.databaseId,e)}function Qf(t){var e=Kf(t);return 4===e.length?fl.emptyPath():$f(e)}function Wf(t){return new fl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $f(t){return Zc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Yf(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function Xf(t,e){var n,r,i;if(e instanceof Zh)n={update:Yf(t,e.key,e.value)};else if(e instanceof af)n={delete:zf(t,e.key)};else if(e instanceof tf)n={update:Yf(t,e.key,e.data),updateMask:hp(e.fieldMask)};else{if(!(e instanceof uf))return Jc();n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ph)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Jc()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:jf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Jc())),n}function Jf(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Gh.updateTime(qf(n.updateTime)):void 0!==n.exists?Gh.exists(n.exists):Gh.none():Gh.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Zc("REQUEST_TIME"===e.setToServerValue),n=new Ph;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Vh(i)}else"increment"in e?n=new jh(t,e.increment):Jc();var o=dl.fromServerFormat(e.fieldPath);return new Kh(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Gf(t,e.update.name),s=new Bl({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new vl(e.map((function(t){return dl.fromServerFormat(t)})))}(e.updateMask);return new tf(o,s,a,r,i)}return new Zh(o,s,r,i)}if(e.delete){var u=Gf(t,e.delete);return new af(u,r)}if(e.verify){var c=Gf(t,e.verify);return new uf(c,r)}return Jc()}function Zf(t,e){return{documents:[Hf(t,e.path)]}}function tp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Hf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ul(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NAN"}};if(Vl(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ul(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NAN"}};if(Vl(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(t.field),op:sp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:ap((e=t).field),direction:op(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||Tl(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=rp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=rp(e.endAt)),n}function ep(t){var e=Qf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=np(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new ah(up((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=Tl(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=ip(n.startAt));var f=null;return n.endAt&&(f=ip(n.endAt)),fh(e,i,a,s,l,"F",h,f)}function np(t){return t?void 0!==t.unaryFilter?[lp(t)]:void 0!==t.fieldFilter?[cp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return np(t)})).reduce((function(t,e){return t.concat(e)})):Jc():[]}function rp(t){return{before:t.before,values:t.position}}function ip(t){var e=!!t.before,n=t.values||[];return new oh(n,e)}function op(t){return Pf[t]}function sp(t){return Ff[t]}function ap(t){return{fieldPath:t.canonicalString()}}function up(t){return dl.fromServerFormat(t.fieldPath)}function cp(t){return Yl.create(up(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Jc()}}(t.fieldFilter.op),t.fieldFilter.value)}function lp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=up(t.unaryFilter.field);return Yl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=up(t.unaryFilter.field);return Yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=up(t.unaryFilter.field);return Yl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=up(t.unaryFilter.field);return Yl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Jc()}}function hp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function fp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=vp(e)),e=dp(t.get(n),e);return vp(e)}function dp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function vp(t){return t+""}function yp(t){var e=t.length;if(Zc(e>=2),2===e)return Zc(""===t.charAt(0)&&""===t.charAt(1)),fl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Jc(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Jc()}o=s+2}return new fl(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gp=function(t,e){this.seconds=t,this.nanoseconds=e},mp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};mp.store="owner",mp.key="owner";var bp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bp.store="mutationQueues",bp.keyPath="userId";var wp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};wp.store="mutations",wp.keyPath="batchId",wp.userMutationsIndex="userMutationsIndex",wp.userMutationsKeyPath=["userId","batchId"];var _p=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,pp(e)]},t.key=function(t,e,n){return[t,pp(e),n]},t}();_p.store="documentMutations",_p.PLACEHOLDER=new _p;var Ep=function(t,e){this.path=t,this.readTime=e},Ip=function(t,e){this.path=t,this.version=e},Tp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Tp.store="remoteDocuments",Tp.readTimeIndex="readTimeIndex",Tp.readTimeIndexPath="readTime",Tp.collectionReadTimeIndex="collectionReadTimeIndex",Tp.collectionReadTimeIndexPath=["parentPath","readTime"];var Sp=function(t){this.byteSize=t};Sp.store="remoteDocumentGlobal",Sp.key="remoteDocumentGlobalKey";var Ap=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ap.store="targets",Ap.keyPath="targetId",Ap.queryTargetsIndexName="queryTargetsIndex",Ap.queryTargetsKeyPath=["canonicalId","targetId"];var Cp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Cp.store="targetDocuments",Cp.keyPath=["targetId","path"],Cp.documentTargetsIndex="documentTargetsIndex",Cp.documentTargetsKeyPath=["path","targetId"];var Np=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Np.key="targetGlobalKey",Np.store="targetGlobal";var Dp=function(t,e){this.collectionId=t,this.parent=e};Dp.store="collectionParents",Dp.keyPath=["collectionId","parent"];var xp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};xp.store="clientMetadata",xp.keyPath="clientId";var kp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};kp.store="bundles",kp.keyPath="bundleId";var Rp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Rp.store="namedQueries",Rp.keyPath="name";var Op=Ui(Ui([],Ui(Ui([],Ui(Ui([],Ui(Ui([],[bp.store,wp.store,_p.store,Tp.store,Ap.store,mp.store,Np.store,Cp.store]),[xp.store])),[Sp.store])),[Dp.store])),[kp.store,Rp.store]),Lp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Fp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Mp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Jc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Vp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Fp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new qp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Hp(e.target.error);n.ft.reject(new qp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new qp(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Wc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Kp(e)},t}(),Up=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Ki())&&$c("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Wc("SimpleDb","Removing database:",t),zp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Ki(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Pi(this,void 0,void 0,(function(){var e,n=this;return Fi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Wc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new qp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Gc(zc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new qp(t,n))},i.onupgradeneeded=function(t){Wc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Wc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Pi(this,void 0,void 0,(function(){var i,o,s,a,u;return Fi(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Fi(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Vp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Mp.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Wc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),jp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return zp(this.Pt.delete())},t}(),qp=function(t){function e(e,n){var r=this;return(r=t.call(this,zc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Oi(e,t),e}(Gc);function Bp(t){return"IndexedDbTransactionError"===t.name}var Kp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Wc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Wc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zp(n)},t.prototype.add=function(t){return Wc("SimpleDb","ADD",this.store.name,t,t),zp(this.store.add(t))},t.prototype.get=function(t){var e=this;return zp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Wc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Wc("SimpleDb","DELETE",this.store.name,t),zp(this.store.delete(t))},t.prototype.count=function(){return Wc("SimpleDb","COUNT",this.store.name),zp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Wc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Mp((function(n,r){e.onerror=function(t){var e=Hp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Mp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new jp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Mp){var a=s.catch((function(t){return o.done(),Mp.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Mp.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function zp(t){return new Mp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Hp(t.target.error);n(e)}}))}var Gp=!1;function Hp(t){var e=Up._t(Ki());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Gc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gp||(Gp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Oi(e,t),e}(Pp);function Wp(t,e){var n=tl(t);return Up.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $p=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Wh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&$h(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&$h(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(al.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),If())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&il(this.mutations,t.mutations,(function(t,e){return Xh(t,e)}))&&il(this.baseMutations,t.baseMutations,(function(t,e){return Xh(t,e)}))},t}(),Yp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Zc(e.mutations.length===r.length);for(var i=_f,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Xp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=al.min()),void 0===o&&(o=al.min()),void 0===s&&(s=yl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Jp=function(t){this.Lt=t};function Zp(t,e){if(e.document)return function(t,e,n){var r=Gf(t,e.name),i=qf(e.updateTime),o=new Bl({mapValue:{fields:e.fields}}),s=zl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Cl.fromSegments(e.noDocument.path),r=id(e.noDocument.readTime),i=zl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Cl.fromSegments(e.unknownDocument.path);return r=id(e.unknownDocument.version),zl.newUnknownDocument(o,r)}return Jc()}function td(t,e,n){var r,i,o=ed(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:zf(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:Vf(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new Tp(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=rd(e.version);return u=e.hasCommittedMutations,new Tp(null,new Ep(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=rd(e.version);return new Tp(new Ip(h,f),null,null,!0,o,s)}return Jc()}function ed(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nd(t){var e=new sl(t[0],t[1]);return al.fromTimestamp(e)}function rd(t){var e=t.toTimestamp();return new gp(e.seconds,e.nanoseconds)}function id(t){var e=new sl(t.seconds,t.nanoseconds);return al.fromTimestamp(e)}function od(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Jf(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Jf(t.Lt,e)})),a=sl.fromMillis(e.localWriteTimeMs);return new $p(e.batchId,a,n,s)}function sd(t){var e,n,r=id(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?id(t.lastLimboFreeSnapshotVersion):al.min();return void 0!==t.query.documents?(Zc(1===(n=t.query).documents.length),e=wh(ph(Qf(n.documents[0])))):e=wh(ep(t.query)),new Xp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yl.fromBase64String(t.resumeToken))}function ad(t,e){var n,r=rd(e.snapshotVersion),i=rd(e.lastLimboFreeSnapshotVersion);n=$l(e.target)?Zf(t.Lt,e.target):tp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ap(e.targetId,Ql(e.target),r,o,e.sequenceNumber,i,n)}function ud(t){var e=ep({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_h(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ld(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:id(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return ld(t).put({bundleId:(n=e).id,createTime:rd(qf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return hd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:ud(e.bundledQuery),readTime:id(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return hd(t).put({name:(n=e).name,readTime:rd(qf(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function ld(t){return Wp(t,kp.store)}function hd(t){return Wp(t,Rp.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function t(){this.Bt=new pd}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Mp.resolve()},t.prototype.getCollectionParents=function(t,e){return Mp.resolve(this.Bt.getEntries(e))},t}(),pd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new vf(fl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new vf(fl.comparator)).toArray()},t}(),dd=function(){function t(){this.qt=new pd}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:pp(i)};return vd(t).put(o)}return Mp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ol(e),""],!1,!0);return vd(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(yp(o.parent))}return n}))},t}();function vd(t){return Wp(t,Dp.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gd=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e,n){var r=t.store(wp.store),i=t.store(_p.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Zc(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=_p.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Mp.waitFor(o).next((function(){return c}))}function bd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gd.DEFAULT_COLLECTION_PERCENTILE=10,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gd.DEFAULT=new gd(41943040,gd.DEFAULT_COLLECTION_PERCENTILE,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gd.DISABLED=new gd(-1,0,0);var wd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Zc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ed(t).$t({index:wp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Id(t),s=Ed(t);return s.add({}).next((function(a){Zc("number"==typeof a);for(var u=new $p(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Xf(t.Lt,e)})),i=n.mutations.map((function(e){return Xf(t.Lt,e)}));return new wp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new vf((function(t,e){return rl(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=_p.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,_p.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Mp.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ed(t).get(e).next((function(t){return t?(Zc(t.userId===n.userId),od(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Mp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ed(t).$t({index:wp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Zc(e.batchId>=r),o=od(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ed(t).$t({index:wp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ed(t).Nt(wp.userMutationsIndex,n).next((function(t){return t.map((function(t){return od(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=_p.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Id(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=yp(u);if(a===n.userId&&e.path.isEqual(l))return Ed(t).get(c).next((function(t){if(!t)throw Jc();Zc(t.userId===n.userId),o.push(od(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(rl),i=[];return e.forEach((function(e){var o=_p.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Id(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=yp(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Mp.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=_p.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new vf(rl);return Id(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=yp(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ed(t).get(e).next((function(t){if(null===t)throw Jc();Zc(t.userId===n.userId),r.push(od(n.R,t))})))})),Mp.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return md(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Mp.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Mp.resolve();var r=IDBKeyRange.lowerBound(_p.prefixForUser(e.userId)),i=[];return Id(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=yp(t[1]);i.push(o)}else r.done()})).next((function(){Zc(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return _d(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Td(t).get(this.userId).next((function(t){return t||new bp(e.userId,-1,"")}))},t}();function _d(t,e,n){var r=_p.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Id(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Ed(t){return Wp(t,wp.store)}function Id(t){return Wp(t,_p.store)}function Td(t){return Wp(t,bp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ad=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Sd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return al.fromTimestamp(new sl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Cd(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Zc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Cd(t).$t((function(s,a){var u=sd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Mp.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Cd(t).$t((function(t,n){var r=sd(n);e(r)}))},t.prototype.Xt=function(t){return Nd(t).get(Np.key).next((function(t){return Zc(null!==t),t}))},t.prototype.Zt=function(t,e){return Nd(t).put(Np.key,e)},t.prototype.te=function(t,e){return Cd(t).put(ad(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ql(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cd(t).$t({range:r,index:Ap.queryTargetsIndexName},(function(t,n,r){var o=sd(n);Wl(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Dd(t);return e.forEach((function(e){var s=pp(e.path);i.push(o.put(new Cp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Mp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Dd(t);return Mp.forEach(e,(function(e){var o=pp(e.path);return Mp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Dd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dd(t),i=If();return r.$t({range:n,kt:!0},(function(t,e,n){var r=yp(t[1]),o=new Cl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=pp(e.path),r=IDBKeyRange.bound([n],[ol(n)],!1,!0),i=0;return Dd(t).$t({index:Cp.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Cd(t).get(e).next((function(t){return t?sd(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return Wp(t,Ap.store)}function Nd(t){return Wp(t,Np.store)}function Dd(t){return Wp(t,Cp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){if(t.code!==zc.FAILED_PRECONDITION||t.message!==Lp)throw t;return Wc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=rl(n,i);return 0===s?rl(r,o):s}var Rd=function(){function t(t){this.ne=t,this.buffer=new vf(kd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();kd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Od=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Wc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Pi(e,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Bp(e=n.sent())?(Wc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,xd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ld=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Mp.resolve(Kc.o);var r=new Rd(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wc("LruGarbageCollector","Garbage collection skipped; disabled"),Mp.resolve(yd)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Wc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),yd):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Wc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Qc()<=oo.DEBUG&&Wc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Mp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Pd=function(){function t(t,e){this.db=t,this.garbageCollector=new Ld(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Fd(t,n)},t.prototype.removeReference=function(t,e,n){return Fd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Fd(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,Td(n=t).Ot((function(t){return _d(n,t,r).next((function(t){return t&&(i=!0),Mp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Dd(t).delete([0,pp(s.path)])}))}));i.push(u)}})).next((function(){return Mp.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Fd(t,e)},t.prototype.we=function(t,e){var n,r=Dd(t),i=Kc.o;return r.$t({index:Cp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Kc.o&&e(new Cl(yp(n)),i),i=a,n=s):i=Kc.o})).next((function(){i!==Kc.o&&e(new Cl(yp(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Fd(t,e){return Dd(t).put((n=e,r=t.currentSequenceNumber,new Cp(0,pp(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Md=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){cl(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return ll(this.inner)},t}(),Vd=function(){function t(){this.changes=new Md((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:al.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:zl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Mp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ud=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Bd(t).put(Kd(e),n)},t.prototype.removeEntry=function(t,e){var n=Bd(t),r=Kd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Bd(t).get(Kd(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Bd(t).get(Kd(e)).next((function(t){return{document:n.ye(e,t),size:bd(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=mf();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=mf(),i=new ff(Cl.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,bd(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Mp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Bd(t).$t({range:r},(function(t,e,r){for(var s=Cl.fromSegments(t);o&&Cl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=mf(),o=e.path.length+1,s={};if(n.isEqual(al.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ed(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Tp.collectionReadTimeIndex}return Bd(t).$t(s,(function(t,n,s){if(t.length===o){var a=Zp(r.R,n);e.path.isPrefixOf(a.key.path)?Sh(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new jd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return qd(t).get(Sp.key).next((function(t){return Zc(!!t),t}))},t.prototype.me=function(t,e){return qd(t).put(Sp.key,e)},t.prototype.ye=function(t,e){if(e){var n=Zp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(al.min()))return n}return zl.newInvalidDocument(t)},t}(),jd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Md((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Oi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new vf((function(t,e){return rl(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=td(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=bd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=td(e.Ie.R,zl.newNoDocument(o,al.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Mp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Vd);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return Wp(t,Sp.store)}function Bd(t){return Wp(t,Tp.store)}function Kd(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zd=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Zc(n<r&&n>=0&&r<=11);var o=new Vp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(mp.store),function(t){t.createObjectStore(bp.store,{keyPath:bp.keyPath}),t.createObjectStore(wp.store,{keyPath:wp.keyPath,autoIncrement:!0}).createIndex(wp.userMutationsIndex,wp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(_p.store)}(t),Gd(t),function(t){t.createObjectStore(Tp.store)}(t));var s=Mp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Cp.store),t.deleteObjectStore(Ap.store),t.deleteObjectStore(Np.store)}(t),Gd(t)),s=s.next((function(){return function(t){var e=t.store(Np.store),n=new Np(0,0,al.min().toTimestamp(),0);return e.put(Np.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(wp.store).Nt().next((function(n){t.deleteObjectStore(wp.store),t.createObjectStore(wp.store,{keyPath:wp.keyPath,autoIncrement:!0}).createIndex(wp.userMutationsIndex,wp.userMutationsKeyPath,{unique:!0});var r=e.store(wp.store),i=n.map((function(t){return r.put(t)}));return Mp.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(xp.store,{keyPath:xp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Sp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tp.store);e.createIndex(Tp.readTimeIndex,Tp.readTimeIndexPath,{unique:!1}),e.createIndex(Tp.collectionReadTimeIndex,Tp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(kp.store,{keyPath:kp.keyPath})}(t),function(t){t.createObjectStore(Rp.store,{keyPath:Rp.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Tp.store).$t((function(t,n){e+=bd(n)})).next((function(){var n=new Sp(e);return t.store(Sp.store).put(Sp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(bp.store),r=t.store(wp.store);return n.Nt().next((function(n){return Mp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(wp.userMutationsIndex,i).next((function(r){return Mp.forEach(r,(function(r){Zc(r.userId===n.userId);var i=od(e.R,r);return md(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Cp.store),n=t.store(Tp.store);return t.store(Np.store).get(Np.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new fl(n),s=[0,pp(o)];r.push(e.get(s).next((function(n){return n?Mp.resolve():(r=o,e.put(new Cp(0,pp(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Mp.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Dp.store,{keyPath:Dp.keyPath});var n=e.store(Dp.store),r=new pd,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:pp(i)})}};return e.store(Tp.store).$t({kt:!0},(function(t,e){var n=new fl(t);return i(n.popLast())})).next((function(){return e.store(_p.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=yp(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Ap.store);return n.$t((function(t,r){var i=sd(r),o=ad(e.R,i);return n.put(o)}))},t}();function Gd(t){t.createObjectStore(Cp.store,{keyPath:Cp.keyPath}).createIndex(Cp.documentTargetsIndex,Cp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ap.store,{keyPath:Ap.keyPath}).createIndex(Ap.queryTargetsIndexName,Ap.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Np.store)}var Hd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Gc(zc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new Pd(this,i),this.Le=n+"main",this.R=new Jp(u),this.Be=new Up(this.Le,11,new zd(this.R)),this.qe=new Ad(this.referenceDelegate,this.R),this.Ut=new dd,this.Ue=(h=this.R,f=this.Ut,new Ud(h,f)),this.Ke=new cd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&$c("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Gc(zc.FAILED_PRECONDITION,Hd);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Kc(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Pi(e,void 0,void 0,(function(){return Fi(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Pi(e,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Pi(e,void 0,void 0,(function(){return Fi(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return $d(e).put(new xp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Bp(e))return Wc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Wc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Wd(t).get(mp.key).next((function(t){return Mp.resolve(e.tn(t))}))},t.prototype.en=function(t){return $d(t).delete(this.clientId)},t.prototype.nn=function(){return Pi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Fi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Wp(t,xp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Mp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Mp.resolve(!0):Wd(t).get(mp.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Gc(zc.FAILED_PRECONDITION,Hd);return!1}}return!(!e.networkEnabled||!e.inForeground)||$d(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Wc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Pi(this,void 0,void 0,(function(){var t=this;return Fi(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[mp.store,xp.store],(function(e){var n=new Qp(e,Kc.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return $d(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return wd.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Wc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Op,(function(o){return i=new Qp(o,r.Ne?r.Ne.next():Kc.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw $c("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Gc(zc.FAILED_PRECONDITION,Lp);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Wd(t).get(mp.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Gc(zc.FAILED_PRECONDITION,Hd)}))},t.prototype.Ze=function(t){var e=new mp(this.clientId,this.allowTabSynchronization,Date.now());return Wd(t).put(mp.key,e)},t.yt=function(){return Up.yt()},t.prototype.Xe=function(t){var e=this,n=Wd(t);return n.get(mp.key).next((function(t){return e.tn(t)?(Wc("IndexedDbPersistence","Releasing primary lease."),n.delete(mp.key)):Mp.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&($c("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!zi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Wc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return $c("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){$c("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Wd(t){return Wp(t,mp.store)}function $d(t){return Wp(t,xp.store)}function Yd(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Xd=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Cl.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):mh(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Cl(e)).next((function(t){var e=wf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=wf();return this.Ut.getCollectionParents(t,i).next((function(s){return Mp.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new hh(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=zl.newInvalidDocument(c),r=r.insert(c,l)),$h(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Sh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=If(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof tf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Jd=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=If(),i=If(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Zd=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(al.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(dh(e)||vh(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(Qc()<=oo.DEBUG&&Wc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Th(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new vf(Ah(t));return e.forEach((function(e,r){Sh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Qc()<=oo.DEBUG&&Wc("QueryEngine","Using full collection scan to execute query:",Th(e)),this.Sn.getDocumentsMatchingQuery(t,e,al.min())},t}(),tv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ff(rl),this.kn=new Md((function(t){return Ql(t)}),Wl),this.$n=al.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Xd(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e,n,r){return new tv(t,e,n,r)}function nv(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o;return Fi(this,(function(s){switch(s.label){case 0:return n=tl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Xd(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=If(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function rv(t,e){var n=tl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=Mp.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Zc(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function iv(t){var e=tl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function ov(t,e){var n=tl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,Zc((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=mf();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=If();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=mf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(al.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Wc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(al.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Mp.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function sv(t,e){var n=tl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function av(t,e){var n=tl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Mp.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Xp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function uv(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s;return Fi(this,(function(a){switch(a.label){case 0:r=tl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Bp(s=a.sent()))throw s;return Wc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function cv(t,e,n){var r=tl(t),i=al.min(),o=If();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=wh(e),c=tl(s),l=c.kn.get(u),void 0!==l?Mp.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:al.min(),n?o:If())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function lv(t,e){var n=tl(t),r=tl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function hv(t){var e=tl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=tl(n),s=mf(),a=ed(i),u=Bd(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:Tp.readTimeIndex,range:c},(function(t,e){var n=Zp(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:nd(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function fv(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){return[2,(e=tl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Bd(t),n=al.min(),e.$t({index:Tp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=nd(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Mp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:qf(n.createTime)}),Mp.resolve()},t.prototype.getNamedQuery=function(t,e){return Mp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:ud(n.bundledQuery),readTime:qf(n.readTime)}),Mp.resolve();var n},t}(),dv=function(){function t(){this.Wn=new vf(vv.Gn),this.zn=new vf(vv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new vv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new vv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Cl(new fl([])),r=new vv(n,t),i=new vv(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Cl(new fl([])),n=new vv(e,t),r=new vv(e,t+1),i=If();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new vv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),vv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Cl.comparator(t.key,e.key)||rl(t.ns,e.ns)},t.Hn=function(t,e){return rl(t.ns,e.ns)||Cl.comparator(t.key,e.key)},t}(),yv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new vf(vv.Gn)}return t.prototype.checkEmpty=function(t){return Mp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new $p(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new vv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Mp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Mp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Mp.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Mp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Mp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new vv(e,0),i=new vv(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Mp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(rl);return e.forEach((function(t){var e=new vv(t,0),i=new vv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Mp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Cl.isDocumentKey(i)||(i=i.child(""));var o=new vv(new Cl(i),0),s=new vf(rl);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Mp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Zc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Mp.forEach(e.mutations,(function(i){var o=new vv(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new vv(e,0),r=this.rs.firstAfterOrEqual(n);return Mp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Mp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),gv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ff(Cl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Mp.resolve(n?n.document.clone():zl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=mf();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():zl.newInvalidDocument(t))})),Mp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=mf(),i=new Cl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||Sh(e,c)&&(r=r.insert(c.key,c.clone()))}return Mp.resolve(r)},t.prototype.fs=function(t,e){return Mp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new mv(this)},t.prototype.getSize=function(t){return Mp.resolve(this.size)},t}(),mv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Oi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Mp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Vd),bv=function(){function t(t){this.persistence=t,this.ds=new Md((function(t){return Ql(t)}),Wl),this.lastRemoteSnapshotVersion=al.min(),this.highestTargetId=0,this.ws=0,this._s=new dv,this.targetCount=0,this.ys=Sd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Mp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Mp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Mp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Mp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Mp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Sd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Mp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Mp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Mp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Mp.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Mp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Mp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Mp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Mp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Mp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Mp.resolve(n)},t.prototype.containsKey=function(t,e){return Mp.resolve(this._s.containsKey(e))},t}(),wv=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new Kc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new bv(this),this.Ut=new fd,this.Ue=(n=this.Ut,new gv(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new Jp(e),this.Ke=new pv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new yv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Wc("MemoryPersistence","Starting transaction:",t);var i=new _v(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Mp.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),_v=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Oi(e,t),e}(Pp),Ev=function(){function t(t){this.persistence=t,this.As=new dv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Jc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Mp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Mp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Mp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mp.forEach(this.vs,(function(r){var i=Cl.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Mp.or([function(){return Mp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Iv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e){return"firestore_clients_"+t+"_"+e}function Sv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Av(t,e){return"firestore_targets_"+t+"_"+e}Iv.UNAUTHENTICATED=new Iv(null),Iv.GOOGLE_CREDENTIALS=new Iv("google-credentials-uid"),Iv.FIRST_PARTY=new Iv("first-party-uid");var Cv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Gc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):($c("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Nv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gc(i.error.code,i.error.message)),o?new t(e,i.state,r):($c("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Al(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):($c("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),xv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):($c("SharedClientState","Failed to parse online state: "+e),null)},t}(),kv=function(){function t(){this.activeTargetIds=Sf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Rv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ff(rl),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Tv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new kv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Pi(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Fi(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Tv(this.persistenceKey,r)))&&(o=Dv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Av(this.persistenceKey,t));if(n){var r=Nv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Av(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Wc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Wc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Wc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void $c("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Pi(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Fi(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Kc.o;if(null!=t)try{var n=JSON.parse(t);Zc("number"==typeof n),e=n}catch(r){$c("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Kc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Cv(this.currentUser,t,e,n),i=Sv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Sv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Av(this.persistenceKey,t),i=new Nv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Dv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cv.Vs(new Iv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Nv.Vs(r,e)},t.prototype.js=function(t){return xv.Vs(t)},t.prototype.ii=function(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Wc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Sf();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Ov=function(){function t(){this.li=new kv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new kv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Lv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Pv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Wc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Wc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Fv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Mv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Vv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Oi(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Bc;s.listenOnce(Fc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Pc.NO_ERROR:var e=s.getResponseJson();Wc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Pc.TIMEOUT:Wc("Connection",'RPC "'+t+'" timed out'),o(new Gc(zc.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:var n=s.getStatus();if(Wc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(zc).indexOf(c)>=0?c:zc.UNKNOWN);o(new Gc(a,r.message))}else o(new Gc(zc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Gc(zc.UNAVAILABLE,"Connection failed."));break;default:Jc()}}finally{Wc("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new xc,s=Ia(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new jc({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ki())||"object"==typeof navigator&&"ReactNative"===navigator.product||Ki().indexOf("Electron/")>=0||((r=Ki()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||Ki().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");Wc("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new Mv({Ei:function(t){h?Wc("Connection","Not sending because WebChannel is closed:",t):(l||(Wc("Connection","Opening WebChannel transport."),c.open(),l=!0),Wc("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,qc.EventType.OPEN,(function(){h||Wc("Connection","WebChannel transport opened.")})),p(c,qc.EventType.CLOSE,(function(){h||(h=!0,Wc("Connection","WebChannel transport closed"),f.Vi())})),p(c,qc.EventType.ERROR,(function(t){h||(h=!0,Yc("Connection","WebChannel transport errored:",t),f.Vi(new Gc(zc.UNAVAILABLE,"The operation could not be completed")))})),p(c,qc.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Zc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Wc("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=of[t];if(void 0!==e)return hf(e)}(o),a=i.message;void 0===s&&(s=zc.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new Gc(s,a)),c.close()}else Wc("Connection","WebChannel received:",n),f.Si(n)}})),p(s,Mc.STAT_EVENT,(function(t){t.stat===Vc?Wc("Connection","Detected buffering proxy"):t.stat===Uc&&Wc("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Wc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Wc("RestConnection","Received: ",t),t}),(function(e){throw Yc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Fv[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){return"undefined"!=typeof window?window:null}function jv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return new Mf(t,!0)}var Bv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Wc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Kv=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Bv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===zc.RESOURCE_EXHAUSTED?($c(e.toString()),$c("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===zc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Gc(zc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Pi(t,void 0,void 0,(function(){return Fi(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Wc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Wc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),zv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Oi(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Jc(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Zc(void 0===e||"string"==typeof e),yl.fromBase64String(e||"")):(Zc(void 0===e||e instanceof Uint8Array),yl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?zc.UNKNOWN:hf(t.code);return new Gc(e,t.message||"")}(u);n=new xf(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Gf(t,i.document.name),s=qf(i.document.updateTime);var u=new Bl({mapValue:{fields:i.document.fields}}),c=(a=zl.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Nf(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Gf(t,i.document),s=i.readTime?qf(i.readTime):al.min(),u=zl.newNoDocument(o,s),a=i.removedTargetIds||[],n=new Nf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Gf(t,i.document),s=i.removedTargetIds||[],n=new Nf([],s,o,null);else{if(!("filter"in e))return Jc();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new cf(i),s=h.targetId,n=new Df(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return al.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?al.min():e.readTime?qf(e.readTime):al.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=Wf(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=$l(i)?{documents:Zf(e,i)}:{query:tp(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Uf(e,n.resumeToken):n.snapshotVersion.compareTo(al.min())>0&&(r.readTime=Vf(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=Wf(this.R),e.removeTarget=t,this.cr(e)},e}(Kv),Gv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Oi(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Zc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(Zc(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?qf(e.updateTime):qf(n)).isEqual(al.min())&&(r=qf(n)),new zh(r,e.transformResults||[]);var e,n,r}))):[]),n=qf(t.commitTime);return this.listener.Tr(n,e)}var r,i;return Zc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Wf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Xf(e.R,t)}))};this.cr(n)},e}(Kv),Hv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Oi(e,t),e.prototype.br=function(){if(this.Rr)throw new Gc(zc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===zc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gc(zc.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===zc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gc(zc.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Qv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?($c(e),this.Vr=!1):Wc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Wv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Pi(o,void 0,void 0,(function(){return Fi(this,(function(t){switch(t.label){case 0:return ry(this)?(Wc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return(e=tl(t)).Or.add(4),[4,Yv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,$v(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Qv(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){return Pi(this,void 0,void 0,(function(){var e,n;return Fi(this,(function(r){switch(r.label){case 0:if(!ry(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Yv(t){return Pi(this,void 0,void 0,(function(){var e,n;return Fi(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Xv(t,e){var n=tl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),ny(n)?ey(n):my(n).er()&&Zv(n,e))}function Jv(t,e){var n=tl(t),r=my(n);n.$r.delete(e),r.er()&&ty(n,e),0===n.$r.size&&(r.er()?r.ir():ry(n)&&n.Br.set("Unknown"))}function Zv(t,e){t.qr.U(e.targetId),my(t).mr(e)}function ty(t,e){t.qr.U(e),my(t).yr(e)}function ey(t){t.qr=new Rf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),my(t).start(),t.Br.Sr()}function ny(t){return ry(t)&&!my(t).tr()&&t.$r.size>0}function ry(t){return 0===tl(t).Or.size}function iy(t){t.qr=void 0}function oy(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){return t.$r.forEach((function(e,n){Zv(t,e)})),[2]}))}))}function sy(t,e){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(n){return iy(t),ny(t)?(t.Br.Nr(e),ey(t)):t.Br.set("Unknown"),[2]}))}))}function ay(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o;return Fi(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof xf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o;return Fi(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Wc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,uy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Nf?t.qr.X(e):e instanceof Df?t.qr.rt(e):t.qr.et(e),n.isEqual(al.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,iv(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(yl.EMPTY_BYTE_STRING,e.snapshotVersion)),ty(a,t);var n=new Xp(e.target,t,1,e.sequenceNumber);Zv(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Wc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,uy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function uy(t,e,n){return Pi(this,void 0,void 0,(function(){var r=this;return Fi(this,(function(i){switch(i.label){case 0:if(!Bp(e))throw e;return t.Or.add(1),[4,Yv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return iv(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Pi(r,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return Wc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,$v(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function cy(t,e){return e().catch((function(n){return uy(t,n,e)}))}function ly(t){return Pi(this,void 0,void 0,(function(){var e,n,r,i,o;return Fi(this,(function(s){switch(s.label){case 0:e=tl(t),n=by(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(ry(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,sv(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=by(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,uy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return hy(e)&&fy(e),[2]}var a}))}))}function hy(t){return ry(t)&&!by(t).tr()&&t.kr.length>0}function fy(t){by(t).start()}function py(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){return by(t).Ar(),[2]}))}))}function dy(t){return Pi(this,void 0,void 0,(function(){var e,n,r,i;return Fi(this,(function(o){for(e=by(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function vy(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i;return Fi(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Yp.from(r,e,n),[4,cy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,ly(t)];case 2:return o.sent(),[2]}}))}))}function yy(t,e){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return e&&by(t).pr?[4,function(t,e){return Pi(this,void 0,void 0,(function(){var n,r;return Fi(this,(function(i){switch(i.label){case 0:return lf(r=e.code)&&r!==zc.ABORTED?(n=t.kr.shift(),by(t).sr(),[4,cy(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ly(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return hy(t)&&fy(t),[2]}}))}))}function gy(t,e){return Pi(this,void 0,void 0,(function(){var n;return Fi(this,(function(r){switch(r.label){case 0:return n=tl(t),e?(n.Or.delete(2),[4,$v(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Yv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function my(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:oy.bind(null,t),Ri:sy.bind(null,t),_r:ay.bind(null,t)},(i=tl(e)).br(),new zv(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Pi(o,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),ny(t)?ey(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),iy(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function by(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:py.bind(null,t),Ri:yy.bind(null,t),Ir:dy.bind(null,t),Tr:vy.bind(null,t)},(i=tl(e)).br(),new Gv(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Pi(o,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,ly(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(Wc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var wy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gc(zc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function _y(t,e){if($c("AsyncQueue",e+": "+t),Bp(t))return new Gc(zc.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ey=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Cl.comparator(e.key,n.key)}:function(t,e){return Cl.comparator(t.key,e.key)},this.keyedMap=wf(),this.sortedSet=new ff(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Iy=function(){function t(){this.Qr=new ff(Cl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Jc():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Ty=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ey.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Sy=function(){this.Wr=void 0,this.listeners=[]},Ay=function(){this.queries=new Md((function(t){return Ih(t)}),Eh),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Fi(this,(function(c){switch(c.label){case 0:if(n=tl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Sy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=_y(a,"Initialization of query '"+Th(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&ky(n),[2]}}))}))}function Ny(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s;return Fi(this,(function(a){return n=tl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Dy(t,e){for(var n=tl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&ky(n)}function xy(t,e,n){var r=tl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ky(t){t.Gr.forEach((function(t){t.next()}))}var Ry=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ty(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ty.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Oy=function(t){this.key=t},Ly=function(t){this.key=t},Py=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=If(),this.mutatedKeys=If(),this.lo=Ah(t),this.fo=new Ey(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Iy,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=dh(this.query)&&i.size===this.query.limit?i.last():null,c=vh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Sh(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),dh(this.query)||vh(this.query))for(;s.size>this.query.limit;){var l=dh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jc()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ty(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Iy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=If(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Ly(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Oy(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=If();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ty.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Fy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},My=function(t){this.key=t,this.bo=!1},Vy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Md((function(t){return Ih(t)}),Eh),this.Vo=new Map,this.So=new Set,this.Do=new ff(Cl.comparator),this.Co=new Map,this.No=new dv,this.xo={},this.Fo=new Map,this.ko=Sd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Fi(this,(function(u){switch(u.label){case 0:return n=dg(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,av(n.localStore,wh(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,jy(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Xv(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function jy(t,e,n,r){return Pi(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Fi(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Pi(this,void 0,void 0,(function(){var i,o,s;return Fi(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,cv(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Zy(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,cv(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Py(e,i.Bn),s=o._o(i.documents),a=Cf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Zy(t,n,u.To),c=new Fy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function qy(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i;return Fi(this,(function(o){switch(o.label){case 0:return n=tl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Eh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,uv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Jv(n.remoteStore,r.targetId),Xy(n,r.targetId)})).catch(xd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Xy(n,r.targetId),[4,uv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function By(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s;return Fi(this,(function(a){switch(a.label){case 0:r=vg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=tl(u),f=sl.now(),p=c.reduce((function(t,e){return t.add(e.key)}),If()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Yh(o,l.get(o.key));null!=s&&n.push(new tf(o.key,s,Kl(s.value.mapValue),Gh.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ff(rl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ng(r,i.changes)];case 3:return a.sent(),[4,ly(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=_y(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function Ky(t,e){return Pi(this,void 0,void 0,(function(){var n,r;return Fi(this,(function(i){switch(i.label){case 0:n=tl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ov(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Zc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Zc(r.bo):t.removedDocuments.size>0&&(Zc(r.bo),r.bo=!1))})),[4,ng(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,xd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function zy(t,e,n){var r=tl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=tl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ky(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gy(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Fi(this,(function(c){switch(c.label){case 0:return(r=tl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ff(Cl.comparator)).insert(o,zl.newNoDocument(o,al.min())),a=If().add(o),u=new Af(al.min(),new Map,new vf(rl),s,a),[4,Ky(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),eg(r),[3,4];case 2:return[4,uv(r.localStore,e,!1).then((function(){return Xy(r,e,n)})).catch(xd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Hy(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i;return Fi(this,(function(o){switch(o.label){case 0:n=tl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,rv(n.localStore,e)];case 2:return i=o.sent(),Yy(n,r,null),$y(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ng(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,xd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Qy(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i;return Fi(this,(function(o){switch(o.label){case 0:r=tl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=tl(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return Zc(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),Yy(r,e,n),$y(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ng(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,xd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function Wy(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s;return Fi(this,(function(a){switch(a.label){case 0:ry((n=tl(t)).remoteStore)||Wc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=tl(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=_y(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function $y(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Yy(t,e,n){var r=tl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Xy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Jy(t,e)}))}function Jy(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Jv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),eg(t))}function Zy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Oy?(t.No.addReference(o.key,e),tg(t,o)):o instanceof Ly?(Wc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Jy(t,o.key)):Jc()}}function tg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Wc("SyncEngine","New document in limbo: "+n),t.So.add(r),eg(t))}function eg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Cl(fl.fromString(e)),r=t.ko.next();t.Co.set(r,new My(n)),t.Do=t.Do.insert(n,r),Xv(t.remoteStore,new Xp(wh(ph(n.path)),r,2,Kc.o))}}function ng(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s;return Fi(this,(function(a){switch(a.label){case 0:return r=tl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Jd.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Fi(this,(function(h){switch(h.label){case 0:n=tl(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Mp.forEach(e,(function(e){return Mp.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Mp.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Bp(r=h.sent()))throw r;return Wc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function rg(t,e){return Pi(this,void 0,void 0,(function(){var n,r;return Fi(this,(function(i){switch(i.label){case 0:return(n=tl(t)).currentUser.isEqual(e)?[3,3]:(Wc("SyncEngine","User change. New user:",e.toKey()),[4,nv(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Gc(zc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ng(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function ig(t,e){var n=tl(t),r=n.Co.get(e);if(r&&r.bo)return If().add(r.key);var i=If(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function og(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i;return Fi(this,(function(o){switch(o.label){case 0:return[4,cv((n=tl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Zy(n,e.targetId,i.To),i)]}}))}))}function sg(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){return[2,hv((e=tl(t)).localStore).then((function(t){return ng(e,t)}))]}))}))}function ag(t,e,n,r){return Pi(this,void 0,void 0,(function(){var i,o;return Fi(this,(function(s){switch(s.label){case 0:return[4,(a=(i=tl(t)).localStore,u=e,c=tl(a),l=tl(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):Mp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ly(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Yy(i,e,r||null),$y(i,e),function(t,e){tl(tl(t)._n).Gt(e)}(i.localStore,e)):Jc(),s.label=4;case 4:return[4,ng(i,o)];case 5:return s.sent(),[3,7];case 6:Wc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function ug(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Fi(this,(function(l){switch(l.label){case 0:return dg(n=tl(t)),vg(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cg(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,gy(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],Xv(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Xy(n,e),uv(n.localStore,e,!0)})),Jv(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,cg(n,u)];case 5:return l.sent(),(h=tl(n)).Co.forEach((function(t,e){Jv(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new ff(Cl.comparator),n.$o=!1,[4,gy(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function cg(t,e,n){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Fi(this,(function(y){switch(y.label){case 0:n=tl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,av(n.localStore,wh(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,og(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,lv(n.localStore,a)];case 8:return v=y.sent(),[4,av(n.localStore,v)];case 9:return u=y.sent(),[4,jy(n,lg(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function lg(t){return fh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hg(t){var e=tl(t);return tl(tl(e.localStore).persistence).fn()}function fg(t,e,n,r){return Pi(this,void 0,void 0,(function(){var i,o,s;return Fi(this,(function(a){switch(a.label){case 0:return(i=tl(t)).$o?(Wc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,hv(i.localStore)];case 3:return o=a.sent(),s=Af.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ng(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,uv(i.localStore,e,!0)];case 6:return a.sent(),Xy(i,e,r),[3,8];case 7:Jc(),a.label=8;case 8:return[2]}}))}))}function pg(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Fi(this,(function(p){switch(p.label){case 0:if(!(r=dg(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Wc("SyncEngine","Adding an already active target "+s),[3,5]):[4,lv(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,av(r.localStore,a)];case 3:return u=p.sent(),[4,jy(r,lg(a),u.targetId,!1)];case 4:p.sent(),Xv(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Fi(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,uv(r.localStore,t,!1).then((function(){Jv(r.remoteStore,t),Xy(r,t)})).catch(xd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function dg(t){var e=tl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ky.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ig.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gy.bind(null,e),e.vo._r=Dy.bind(null,e.eventManager),e.vo.Mo=xy.bind(null,e.eventManager),e}function vg(t){var e=tl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qy.bind(null,e),e}var yg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return this.R=qv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return ev(this.persistence,new Zd,t.initialUser,this.R)},t.prototype.qo=function(t){return new wv(Ev.bs,this.R)},t.prototype.Bo=function(t){return new Ov},t.prototype.terminate=function(){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),gg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Oi(e,t),e.prototype.initialize=function(e){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,fv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,vg(this.Qo.syncEngine)];case 4:return n.sent(),[4,ly(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return ev(this.persistence,new Zd,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Od(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Yd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gd.withCacheSize(this.cacheSizeBytes):gd.DEFAULT;return new Qd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Uv(),jv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ov},e}(yg),mg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Oi(e,t),e.prototype.initialize=function(e){return Pi(this,void 0,void 0,(function(){var n,r=this;return Fi(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Rv?(this.sharedClientState.syncEngine={ui:ag.bind(null,n),ai:fg.bind(null,n),hi:pg.bind(null,n),fn:hg.bind(null,n),ci:sg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Pi(r,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return[4,ug(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Uv();if(!Rv.yt(e))throw new Gc(zc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Yd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Rv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(gg),bg=function(){function t(){}return t.prototype.initialize=function(t,e){return Pi(this,void 0,void 0,(function(){var n=this;return Fi(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return zy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rg.bind(null,this.syncEngine),[4,gy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Ay},t.prototype.createDatastore=function(t){var e,n,r=qv(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new Vv(e));return n=t.credentials,new Hv(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return zy(s.syncEngine,t,0)},o=Pv.yt()?new Pv:new Lv,new Wv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new Vy(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return e=tl(t),Wc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Yv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),wg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),_g=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Pi(this,void 0,void 0,(function(){var e,n=this;return Fi(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Gc(zc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Fi(this,(function(u){switch(u.label){case 0:return n=tl(t),r=Wf(n.R)+"/documents",i={documents:e.map((function(t){return zf(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){Zc(!!e.found),e.found.name,e.found.updateTime;var n=Gf(t,e.found.name),r=qf(e.found.updateTime),i=new Bl({mapValue:{fields:e.found.fields}});return zl.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){Zc(!!e.missing),Zc(!!e.readTime);var n=Gf(t,e.missing),r=qf(e.readTime);return zl.newNoDocument(n,r)}(e,r):Jc());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Zc(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new af(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Pi(this,void 0,void 0,(function(){var t,e=this;return Fi(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Cl.fromPath(n);e.mutations.push(new uf(r,e.precondition(r)))})),[4,function(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i;return Fi(this,(function(o){switch(o.label){case 0:return n=tl(t),r=Wf(n.R)+"/documents",i={writes:e.map((function(t){return Xf(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Jc();e=al.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gc(zc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Gh.updateTime(e):Gh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(al.min()))throw new Gc(zc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gh.updateTime(e)}return Gh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Eg=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Bv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Pi(t,void 0,void 0,(function(){var t,e,n=this;return Fi(this,(function(r){return t=new _g(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Tl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!lf(e)}return!1},t}(),Ig=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Iv.UNAUTHENTICATED,this.clientId=nl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Pi(r,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return Wc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Gc(zc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Fp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Pi(t,void 0,void 0,(function(){var t,n;return Fi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=_y(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Tg(t,e){return Pi(this,void 0,void 0,(function(){var n,r,i=this;return Fi(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Wc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Pi(i,void 0,void 0,(function(){return Fi(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,nv(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Sg(t,e){return Pi(this,void 0,void 0,(function(){var n,r;return Fi(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ag(t)];case 1:return n=i.sent(),Wc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Pi(this,void 0,void 0,(function(){var n,r;return Fi(this,(function(i){switch(i.label){case 0:return(n=tl(t)).asyncQueue.verifyOperationInProgress(),Wc("RemoteStore","RemoteStore received new credentials"),r=ry(n),n.Or.add(3),[4,Yv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,$v(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Ag(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Wc("FirestoreClient","Using default OfflineComponentProvider"),[4,Tg(t,new yg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Cg(t){return Pi(this,void 0,void 0,(function(){return Fi(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Wc("FirestoreClient","Using default OnlineComponentProvider"),[4,Sg(t,new bg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Ng(t){return Ag(t).then((function(t){return t.persistence}))}function Dg(t){return Ag(t).then((function(t){return t.localStore}))}function xg(t){return Cg(t).then((function(t){return t.remoteStore}))}function kg(t){return Cg(t).then((function(t){return t.syncEngine}))}function Rg(t){return Pi(this,void 0,void 0,(function(){var e,n;return Fi(this,(function(r){switch(r.label){case 0:return[4,Cg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Uy.bind(null,e.syncEngine),n.onUnlisten=qy.bind(null,e.syncEngine),n)]}}))}))}function Og(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(r,void 0,void 0,(function(){var r;return Fi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wg({next:function(o){e.enqueueAndForget((function(){return Ny(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Gc(zc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Gc(zc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ry(ph(n.path),o,{includeMetadataChanges:!0,so:!0});return Cy(t,s)},[4,Rg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Lg(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(r,void 0,void 0,(function(){var r;return Fi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wg({next:function(n){e.enqueueAndForget((function(){return Ny(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Gc(zc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ry(n,o,{includeMetadataChanges:!0,so:!0});return Cy(t,s)},[4,Rg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Pg=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Fg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Mg=new Map,Vg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ug=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Iv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jg=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qg=function(){function t(t){var e=this;this.currentUser=Iv.UNAUTHENTICATED,this.oc=new Fp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Wc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Wc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Wc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Zc("string"==typeof n.accessToken),new Vg(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Pi(n,void 0,void 0,(function(){return Fi(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Zc(null===t||"string"==typeof t),new Iv(t)},t}(),Bg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Iv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Kg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Bg(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Iv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e,n){if(!n)throw new Gc(zc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Gg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gc(zc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hg(t,e,n,r){if(!0===e&&!0===r)throw new Gc(zc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Qg(t){if(!Cl.isDocumentKey(t))throw new Gc(zc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Wg(t){if(Cl.isDocumentKey(t))throw new Gc(zc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $g(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Jc()}function Yg(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Gc(zc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$g(t);throw new Gc(zc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Xg(t,e){if(e<=0)throw new Gc(zc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Gc(zc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gc(zc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Zg=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jg({}),this._settingsFrozen=!1,t instanceof Fg?(this._databaseId=t,this._credentials=new Ug):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Gc(zc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fg(t.options.projectId)}(t),this._credentials=new qg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Gc(zc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Gc(zc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jg(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ug;switch(t.type){case"gapi":var e=t.client;return Zc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Kg(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Gc(zc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Mg.get(this))&&(Wc("ComponentProvider","Removing Datastore"),Mg.delete(this),t.terminate()),Promise.resolve();var t},t}(),tm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),em=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ph(r))||this)._path=r,i.type="collection",i}return Oi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new tm(this.firestore,null,new Cl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(em);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Zi(t),zg("collection","path",e),t instanceof Zg)return Wg(n=fl.fromString.apply(fl,Ui([e],r))),new nm(t,null,n);if(!(t instanceof tm||t instanceof nm))throw new Gc(zc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(n=fl.fromString.apply(fl,Ui([t.path],r)).child(fl.fromString(e))),new nm(t.firestore,null,n)}function im(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Zi(t),1===arguments.length&&(e=nl.u()),zg("doc","path",e),t instanceof Zg)return Qg(n=fl.fromString.apply(fl,Ui([e],r))),new tm(t,null,new Cl(n));if(!(t instanceof tm||t instanceof nm))throw new Gc(zc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qg(n=t._path.child(fl.fromString.apply(fl,Ui([e],r)))),new tm(t.firestore,t instanceof nm?t.converter:null,new Cl(n))}function om(t,e){return t=Zi(t),e=Zi(e),(t instanceof tm||t instanceof nm)&&(e instanceof tm||e instanceof nm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sm(t,e){return t=Zi(t),e=Zi(e),t instanceof em&&e instanceof em&&t.firestore===e.firestore&&Eh(t._query,e._query)&&t.converter===e.converter}var am=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Bv(this,"async_queue_retry"),this.Ic=function(){var e=jv();e&&Wc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=jv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=jv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Fp;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Pi(this,void 0,void 0,(function(){var t,e=this;return Fi(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Bp(t=n.sent()))throw t;return Wc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,$c("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=wy.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Jc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Pi(this,void 0,void 0,(function(){var t;return Fi(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function um(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var cm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new am,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Oi(e,t),e.prototype._terminate=function(){return this._firestoreClient||hm(this),this._firestoreClient.terminate()},e}(Zg);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){return t._firestoreClient||hm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hm(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new Pg(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new Ig(t._credentials,t._queue,a)}function fm(t,e,n){var r=this,i=new Fp;return t.asyncQueue.enqueue((function(){return Pi(r,void 0,void 0,(function(){var r;return Fi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Tg(t,n)];case 1:return o.sent(),[4,Sg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===zc.FAILED_PRECONDITION||s.code===zc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function pm(t){if(t._initialized||t._terminated)throw new Gc(zc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Gc(zc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),vm=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(yl.fromBase64String(e))}catch(n){throw new Gc(zc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(yl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ym=function(t){this._methodName=t},gm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gc(zc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gc(zc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return rl(this._lat,t._lat)||rl(this._long,t._long)},t}(),mm=/^__.*__$/,bm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new tf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zh(t,this.data,e,this.fieldTransforms)},t}(),wm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new tf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jc()}}var Em=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Bm(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(_m(this.Nc)&&mm.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Im=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||qv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Em({Nc:t,methodName:e,qc:n,path:dl.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Tm(t){var e=t._freezeSettings(),n=qv(t._databaseId);return new Im(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Vm("Data must be an object, but it was:",s,r);var a,u,c=Fm(r,s);if(o.merge)a=new vl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=Um(e,f[h],n);if(!s.contains(p))throw new Gc(zc.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Km(l,p)||l.push(p)}a=new vl(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new bm(new Bl(c),a,u)}var Am=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ym);function Cm(t,e,n){return new Em({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Nm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype._toFieldTransform=function(t){return new Kh(t.path,new Ph)},e.prototype.isEqual=function(t){return t instanceof e},e}(ym),Dm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Oi(e,t),e.prototype._toFieldTransform=function(t){var e=Cm(this,t,!0),n=this.Kc.map((function(t){return Pm(t,e)})),r=new Fh(n);return new Kh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ym),xm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Oi(e,t),e.prototype._toFieldTransform=function(t){var e=Cm(this,t,!0),n=this.Kc.map((function(t){return Pm(t,e)})),r=new Vh(n);return new Kh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ym),km=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Oi(e,t),e.prototype._toFieldTransform=function(t){var e=new jh(t.R,xh(t.R,this.Qc));return new Kh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ym);function Rm(t,e,n,r){var i=t.Uc(1,e,n);Vm("Data must be an object, but it was:",i,r);var o=[],s=Bl.empty();cl(r,(function(t,r){var a=qm(e,t,n);r=Zi(r);var u=i.Oc(a);if(r instanceof Am)o.push(a);else{var c=Pm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new vl(o);return new wm(s,a,i.fieldTransforms)}function Om(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Um(e,r,n)],u=[i];if(o.length%2!=0)throw new Gc(zc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Um(e,o[c])),u.push(o[c+1]);for(var l=[],h=Bl.empty(),f=a.length-1;f>=0;--f)if(!Km(l,a[f])){var p=a[f],d=u[f];d=Zi(d);var v=s.Oc(p);if(d instanceof Am)l.push(p);else{var y=Pm(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new vl(l);return new wm(h,g,s.fieldTransforms)}function Lm(t,e,n,r){return void 0===r&&(r=!1),Pm(n,t.Uc(r?4:3,e))}function Pm(t,e){if(Mm(t=Zi(t)))return Vm("Unsupported field value:",e,t),Fm(t,e);if(t instanceof ym)return function(t,e){if(!_m(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Pm(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Zi(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sl.fromDate(t);return{timestampValue:Vf(e.R,n)}}if(t instanceof sl)return n=new sl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Vf(e.R,n)};if(t instanceof gm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vm)return{bytesValue:Uf(e.R,t._byteString)};if(t instanceof tm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Bf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+$g(t))}(t,e)}function Fm(t,e){var n={};return ll(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(t,(function(t,r){var i=Pm(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Mm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sl||t instanceof gm||t instanceof vm||t instanceof tm||t instanceof ym)}function Vm(t,e,n){if(!Mm(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=$g(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function Um(t,e,n){if((e=Zi(e))instanceof dm)return e._internalPath;if("string"==typeof e)return qm(t,e);throw Bm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jm=new RegExp("[~\\*/\\[\\]]");function qm(t,e,n){if(e.search(jm)>=0)throw Bm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dm.bind.apply(dm,Ui([void 0],e.split(".")))))._internalPath}catch(Bb){throw Bm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Bm(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Gc(zc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Km(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zm=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Hm("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(zm);function Hm(t,e){return"string"==typeof e?qm(t,e):e instanceof dm?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Wm=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Oi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new $m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Hm("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(zm),$m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Wm),Ym=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Qm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new $m(n._firestore,n._userDataWriter,r.key,r,new Qm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gc(zc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new $m(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Qm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new $m(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Qm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Xm(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Xm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jc()}}function Jm(t,e){return t instanceof Wm&&e instanceof Wm?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ym&&e instanceof Ym&&t._firestore===e._firestore&&sm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){if(vh(t)&&0===t.explicitOrderBy.length)throw new Gc(zc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tb=function(){};function eb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Oi(e,t),e.prototype._apply=function(t){var e,n,r,i=Tm(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Gc(zc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){cb(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(ub(r,t,h))}a={arrayValue:{values:u}}}else a=ub(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||cb(s,o),a=Lm(n,"where",s,"in"===o||"not-in"===o);var f=Yl.create(i,o,a);return function(t,e){if(e.g()){var n=gh(t);if(null!==n&&!n.isEqual(e.field))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yh(t);null!==r&&lb(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Gc(zc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Gc(zc.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new em(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(tb),rb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Oi(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ah(e,n);return function(t,e){if(null===yh(t)){var n=gh(t);null!==n&&lb(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new em(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new hh(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(tb),ib=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Oi(e,t),e.prototype._apply=function(t){return new em(t.firestore,t.converter,_h(t._query,this.Hc,this.Jc))},e}(tb),ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Oi(e,t),e.prototype._apply=function(t){var e,n,r=ab(t,this.type,this.Yc,this.Xc);return new em(t.firestore,t.converter,(e=t._query,n=r,new hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(tb),sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Oi(e,t),e.prototype._apply=function(t){var e,n,r=ab(t,this.type,this.Yc,this.Xc);return new em(t.firestore,t.converter,(e=t._query,n=r,new hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(tb);function ab(t,e,n,r){if(n[0]=Zi(n[0]),n[0]instanceof zm)return function(t,e,n,r,i){if(!r)throw new Gc(zc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=bh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Pl(e,r.key));else{var c=r.data.field(u.field);if(_l(c))throw new Gc(zc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new oh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Tm(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Gc(zc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!mh(t)&&-1!==c.indexOf("/"))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(fl.fromString(c));if(!Cl.isDocumentKey(l))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Cl(l);a.push(Pl(e,h))}else{var f=Lm(n,r,c);a.push(f)}}return new oh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ub(t,e,n){if("string"==typeof(n=Zi(n))){if(""===n)throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!mh(e)&&-1!==n.indexOf("/"))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fl.fromString(n));if(!Cl.isDocumentKey(r))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pl(t,new Cl(r))}if(n instanceof tm)return Pl(t,n._key);throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$g(n)+".")}function cb(t,e){if(!Array.isArray(t)||0===t.length)throw new Gc(zc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Gc(zc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lb(t,e,n){if(!n.isEqual(e))throw new Gc(zc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Nl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Jc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return cl(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new gm(bl(t.latitude),bl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=El(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Il(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ml(t);return new sl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=fl.fromString(t);Zc(fp(n));var r=new Fg(n.get(1),n.get(3)),i=new Cl(n.popFirst(5));return r.isEqual(e)||$c("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var pb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Oi(e,t),e.prototype.convertBytes=function(t){return new vm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tm(this.firestore,null,e)},e}(hb),db=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Tm(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=vb(t,this._firestore),i=fb(r.converter,e,n),o=Sm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Gh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=vb(t,this._firestore);return o="string"==typeof(e=Zi(e))||e instanceof dm?Om(this._dataReader,"WriteBatch.update",s._key,e,n,r):Rm(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Gh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=vb(t,this._firestore);return this._mutations=this._mutations.concat(new af(e._key,Gh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Gc(zc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e){if((t=Zi(t)).firestore!==e)throw new Gc(zc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Oi(e,t),e.prototype.convertBytes=function(t){return new vm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tm(this.firestore,null,e)},e}(hb);function gb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Yg(t,tm);var o=Yg(t.firestore,cm),s=Tm(o);return bb(o,[("string"==typeof(e=Zi(e))||e instanceof dm?Om(s,"updateDoc",t._key,e,n,r):Rm(s,"updateDoc",t._key,e)).toMutation(t._key,Gh.exists(!0))])}function mb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Zi(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||um(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(um(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof tm)c=Yg(t.firestore,cm),l=ph(t._key.path),u={next:function(e){i[a]&&i[a](wb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Yg(t,em);c=Yg(p.firestore,cm),l=p._query;var d=new yb(c);u={next:function(t){i[a]&&i[a](new Ym(c,d,p,t))},error:i[a+1],complete:i[a+2]},Zm(t._query)}return function(t,e,n,r){var i=this,o=new wg(r),s=new Ry(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Pi(i,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return e=Cy,[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Pi(i,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return e=Ny,[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(lm(c),l,h,u)}function bb(t,e){return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var n;return Fi(this,(function(i){switch(i.label){case 0:return n=By,[4,kg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(lm(t),e)}function wb(t,e,n){var r=n.docs.get(e._key),i=new yb(t);return new Wm(t,i,e._key,r,new Qm(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _b=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Oi(e,t),e.prototype.get=function(e){var n=this,r=vb(e,this._firestore),i=new yb(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Wm(n._firestore,i,r._key,t._document,new Qm(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Tm(t)}return t.prototype.get=function(t){var e=this,n=vb(t,this._firestore),r=new pb(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Jc();var i=t[0];if(i.isFoundDocument())return new zm(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new zm(e._firestore,r,n._key,null,n.converter);throw Jc()}))},t.prototype.set=function(t,e,n){var r=vb(t,this._firestore),i=fb(r.converter,e,n),o=Sm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=vb(t,this._firestore);return o="string"==typeof(e=Zi(e))||e instanceof dm?Om(this._dataReader,"Transaction.update",s._key,e,n,r):Rm(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=vb(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if("undefined"==typeof Uint8Array)throw new Gc(zc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ib(){if("undefined"==typeof atob)throw new Gc(zc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ib(),new t(vm.fromBase64String(e))},t.fromUint8Array=function(e){return Eb(),new t(vm.fromUint8Array(e))},t.prototype.toBase64=function(){return Ib(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Eb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Sb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){pm(t=Yg(t,cm));var n=lm(t),r=t._freezeSettings(),i=new bg;return fm(n,i,new gg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){pm(t=Yg(t,cm));var e=lm(t),n=t._freezeSettings(),r=new bg;return fm(e,r,new mg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Gc(zc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Fp;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Pi(e,void 0,void 0,(function(){var e;return Fi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return Up.yt()?(e=t+"main",[4,Up.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Yd(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Ab=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Fg||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Yc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Yg(t,Zg))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Yc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Li({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ji.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),ji.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Gc(zc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new jg(new Vg(o,new Iv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Pi(e,void 0,void 0,(function(){var e,n;return Fi(this,(function(r){switch(r.label){case 0:return[4,Ng(t)];case 1:return e=r.sent(),[4,xg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=tl(i),o.Or.delete(0),$v(o))]}var i,o}))}))}))}(lm(Yg(this._delegate,cm)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Pi(e,void 0,void 0,(function(){var e,n;return Fi(this,(function(r){switch(r.label){case 0:return[4,Ng(t)];case 1:return e=r.sent(),[4,xg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Pi(this,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return(e=tl(t)).Or.add(0),[4,Yv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(lm(Yg(this._delegate,cm)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(e,void 0,void 0,(function(){var e;return Fi(this,(function(r){switch(r.label){case 0:return e=Wy,[4,kg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(lm(Yg(this._delegate,cm)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new wg(e);return t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return e=function(t,e){tl(t).Gr.add(e),e.next()},[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var e;return Fi(this,(function(n){switch(n.label){case 0:return e=function(t,e){tl(t).Gr.delete(e)},[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(lm(e=Yg(e,cm)),um(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Gc(zc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jb(this,rm(this._delegate,t))}catch(e){throw Rb(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new kb(this,im(this._delegate,t))}catch(e){throw Rb(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Mb(this,function(t,e){if(t=Yg(t,Zg),zg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gc(zc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new em(t,null,(n=e,new hh(fl.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw Rb(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var n;return Fi(this,(function(i){switch(i.label){case 0:return[4,(o=t,Cg(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Eg(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(lm(e=this._delegate),(function(r){return function(e){return t(new Nb(n,e))}(new _b(e,r))}))},t.prototype.batch=function(){var t=this;return lm(this._delegate),new Db(new db(this._delegate,(function(e){return bb(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Gc(zc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Gc(zc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Cb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Oi(e,t),e.prototype.convertBytes=function(t){return new Tb(new vm(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return kb.eu(e,this.firestore,null)},e}(hb);var Nb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Cb(t)}return t.prototype.get=function(t){var e=this,n=qb(t);return this._delegate.get(n).then((function(t){return new Pb(e._firestore,new Wm(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=qb(t);return n?(Gg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Ui([s,e,n],i)),this},t.prototype.delete=function(t){var e=qb(t);return this._delegate.delete(e),this},t}(),Db=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=qb(t);return n?(Gg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Ui([s,e,n],i)),this},t.prototype.delete=function(t){var e=qb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new $m(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Fb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Cb(e),n),i.set(n,o)),o},t}();xb.su=new WeakMap;var kb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cb(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Gc(zc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new tm(n._delegate,r,new Cl(e)))},t.eu=function(e,n,r){return new t(n,new tm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new jb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jb(this.firestore,rm(this._delegate,t))}catch(e){throw Rb(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Zi(t))instanceof tm&&om(this._delegate,t)},t.prototype.set=function(t,e){e=Gg("DocumentReference.set",e);try{return function(t,e,n){t=Yg(t,tm);var r=Yg(t.firestore,cm),i=fb(t.converter,e,n);return bb(r,[Sm(Tm(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Gh.none())])}(this._delegate,t,e)}catch(n){throw Rb(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?gb(this._delegate,t):gb.apply(void 0,Ui([this._delegate,t,e],n))}catch(i){throw Rb(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return bb(Yg((t=this._delegate).firestore,cm),[new af(t._key,Gh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ob(e),i=Lb(e,(function(e){return new Pb(t.firestore,new Wm(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return mb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,tm);var e=Yg(t.firestore,cm),n=lm(e),r=new yb(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var n;return Fi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i;return Fi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=tl(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Gc(zc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=_y(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,Dg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Wm(e,r,t._key,n,new Qm(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,tm);var e=Yg(t.firestore,cm);return Og(lm(e),t._key,{source:"server"}).then((function(n){return wb(e,t,n)}))}(this._delegate):function(t){t=Yg(t,tm);var e=Yg(t.firestore,cm);return Og(lm(e),t._key).then((function(n){return wb(e,t,n)}))}(this._delegate)).then((function(t){return new Pb(e.firestore,new Wm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(xb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Rb(t,e,n){return t.message=t.message.replace(e,n),t}function Ob(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!um(r))return r}return{}}function Lb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=um(t[0])?t[0]:um(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new kb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Jm(this._delegate,t._delegate)},t}(),Fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oi(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Pb),Mb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,eb(this._delegate,(o=r,s=i=n,a=Hm("where",e),new nb(a,s,o))))}catch(i){throw Rb(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,eb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Hm("orderBy",t);return new rb(r,n)}(e,n)))}catch(r){throw Rb(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,eb(this._delegate,(Xg("limit",n=e),new ib("limit",n,"F"))))}catch(r){throw Rb(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,eb(this._delegate,(Xg("limitToLast",n=e),new ib("limitToLast",n,"L"))))}catch(r){throw Rb(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ob("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw Rb(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ob("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw Rb(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sb("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw Rb(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sb("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw Rb(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,em);var e=Yg(t.firestore,cm),n=lm(e),r=new yb(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget((function(){return Pi(n,void 0,void 0,(function(){var n;return Fi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Pi(this,void 0,void 0,(function(){var r,i,o,s,a;return Fi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,cv(t,e,!0)];case 1:return a=u.sent(),r=new Py(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=_y(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Dg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Ym(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,em);var e=Yg(t.firestore,cm),n=lm(e),r=new yb(e);return Lg(n,t._query,{source:"server"}).then((function(n){return new Ym(e,r,t,n)}))}(this._delegate):function(t){t=Yg(t,em);var e=Yg(t.firestore,cm),n=lm(e),r=new yb(e);return Zm(t._query),Lg(n,t._query).then((function(n){return new Ym(e,r,t,n)}))}(this._delegate)).then((function(t){return new Ub(e.firestore,new Ym(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ob(e),i=Lb(e,(function(e){return new Ub(t.firestore,new Ym(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return mb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(xb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Vb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Fb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Ub=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Mb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Fb(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Vb(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Fb(n._firestore,r))}))},t.prototype.isEqual=function(t){return Jm(this._delegate,t._delegate)},t}(),jb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Oi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new kb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new kb(this.firestore,void 0===t?im(this._delegate):im(this._delegate,t))}catch(e){throw Rb(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=Yg(e.firestore,cm),i=im(e),o=fb(e.converter,n),bb(r,[Sm(Tm(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Gh.exists(!1))]).then((function(){return i}))).then((function(t){return new kb(s.firestore,t)}))},e.prototype.isEqual=function(t){return om(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(xb.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Mb);function qb(t){return Yg(t,tm)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bb,Kb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dm.bind.apply(dm,Ui([void 0],t)))}return t.documentId=function(){return new t(dl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Zi(t))instanceof dm&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),zb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Nm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Am("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dm("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xm("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new km("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Gb={Firestore:Ab,GeoPoint:gm,Timestamp:sl,Blob:Tb,Transaction:Nb,WriteBatch:Db,DocumentReference:kb,DocumentSnapshot:Pb,Query:Mb,QueryDocumentSnapshot:Fb,QuerySnapshot:Ub,CollectionReference:jb,FieldPath:Kb,FieldValue:zb,setLogLevel:function(t){var e;e=t,Hc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(Bb=Do).INTERNAL.registerComponent(new to("firestore",(function(t){return function(t,e){return new Ab(t,new cm(t,e),new Sb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Gb))),Bb.registerVersion("@firebase/firestore","2.3.10");export{Ln as F,fi as T,Yn as a,Xn as b,zn as c,we as d,rr as e,Zn as f,Ai as g,Do as h,ki as i,jn as o,te as r,a as t,ce as u,Ci as v,In as w};
