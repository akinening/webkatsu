function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=S(i)?s(i):r(i);if(o)for(const t in o)e[t]=o[t]}return e}return S(t)||C(t)?t:void 0}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(C(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":_(t)||C(t)&&(t.toString===D||!T(t.toString))?JSON.stringify(t,c,2):String(t),c=(t,e)=>e&&e.__v_isRef?c(t,e.value):E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!C(e)||_(e)||k(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===x(t),I=t=>"[object Set]"===x(t),T=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,C=t=>null!==t&&"object"==typeof t,N=t=>C(t)&&T(t.then)&&T(t.catch),D=Object.prototype.toString,x=t=>D.call(t),k=t=>"[object Object]"===x(t),R=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},P=/-(\w)/g,F=L((t=>t.replace(P,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,V=L((t=>t.replace(M,"-$1").toLowerCase())),U=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=L((t=>t?`on${U(t)}`:"")),q=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let G;const H=[];class Q{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&G&&(this.parent=G,this.index=(G.scopes||(G.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(H.push(this),G=this)}off(){this.active&&(H.pop(),G=H[H.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const W=t=>{const e=new Set(t);return e.w=0,e.n=0,e},$=t=>(t.w&Z)>0,Y=t=>(t.n&Z)>0,X=new WeakMap;let J=0,Z=1;const tt=[];let et;const nt=Symbol(""),rt=Symbol("");class it{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||G)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!tt.includes(this))try{return tt.push(et=this),at.push(st),st=!0,Z=1<<++J,J<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Z})(this):ot(this),this.fn()}finally{J<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];$(i)&&!Y(i)?i.delete(t):e[n++]=i,i.w&=~Z,i.n&=~Z}e.length=n}})(this),Z=1<<--J,ct(),tt.pop();const t=tt.length;et=t>0?tt[t-1]:void 0}}stop(){this.active&&(ot(this),this.onStop&&this.onStop(),this.active=!1)}}function ot(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let st=!0;const at=[];function ut(){at.push(st),st=!1}function ct(){const t=at.pop();st=void 0===t||t}function lt(t,e,n){if(!ht())return;let r=X.get(t);r||X.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=W()),ft(i)}function ht(){return st&&void 0!==et}function ft(t,e){let n=!1;J<=30?Y(t)||(t.n|=Z,n=!$(t)):n=!t.has(et),n&&(t.add(et),et.deps.push(t))}function pt(t,e,n,r,i,o){const s=X.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":_(t)?R(n)&&a.push(s.get("length")):(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"delete":_(t)||(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"set":E(t)&&a.push(s.get(nt))}if(1===a.length)a[0]&&dt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);dt(W(t))}}function dt(t,e){for(const n of _(t)?t:[...t])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const vt=t("__proto__,__v_isRef,__isVue"),yt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),gt=Et(),mt=Et(!1,!0),bt=Et(!0),wt=_t();function _t(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ae(this);for(let e=0,i=this.length;e<i;e++)lt(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(ae)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ut();const n=ae(this)[e].apply(this,t);return ct(),n}})),t}function Et(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Zt:Jt:e?Xt:Yt).get(n))return n;const o=_(n);if(!t&&o&&w(wt,r))return Reflect.get(wt,r,i);const s=Reflect.get(n,r,i);if(A(r)?yt.has(r):vt(r))return s;if(t||lt(n,0,r),e)return s;if(fe(s)){return!o||!R(r)?s.value:s}return C(s)?t?ne(s):ee(s):s}}function It(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=ae(r),o=ae(o),!_(e)&&fe(o)&&!fe(r)))return o.value=r,!0;const s=_(e)&&R(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===ae(i)&&(s?q(r,o)&&pt(e,"set",n,r):pt(e,"add",n,r)),a}}const Tt={get:gt,set:It(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&pt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&yt.has(e)||lt(t,0,e),n},ownKeys:function(t){return lt(t,0,_(t)?"length":nt),Reflect.ownKeys(t)}},St={get:bt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},At=g({},Tt,{get:mt,set:It(!0)}),Ct=t=>C(t)?ee(t):t,Nt=t=>C(t)?ne(t):t,Dt=t=>t,xt=t=>Reflect.getPrototypeOf(t);function kt(t,e,n=!1,r=!1){const i=ae(t=t.__v_raw),o=ae(e);e!==o&&!n&&lt(i,0,e),!n&&lt(i,0,o);const{has:s}=xt(i),a=r?Dt:n?Nt:Ct;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Rt(t,e=!1){const n=this.__v_raw,r=ae(n),i=ae(t);return t!==i&&!e&&lt(r,0,t),!e&&lt(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Ot(t,e=!1){return t=t.__v_raw,!e&&lt(ae(t),0,nt),Reflect.get(t,"size",t)}function Lt(t){t=ae(t);const e=ae(this);return xt(e).has.call(e,t)||(e.add(t),pt(e,"add",t,t)),this}function Pt(t,e){e=ae(e);const n=ae(this),{has:r,get:i}=xt(n);let o=r.call(n,t);o||(t=ae(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&pt(n,"set",t,e):pt(n,"add",t,e),this}function Ft(t){const e=ae(this),{has:n,get:r}=xt(e);let i=n.call(e,t);i||(t=ae(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&pt(e,"delete",t,void 0),o}function Mt(){const t=ae(this),e=0!==t.size,n=t.clear();return e&&pt(t,"clear",void 0,void 0),n}function Vt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=ae(o),a=e?Dt:t?Nt:Ct;return!t&&lt(s,0,nt),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Ut(t,e,n){return function(...r){const i=this.__v_raw,o=ae(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?Dt:e?Nt:Ct;return!e&&lt(o,0,u?rt:nt),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function jt(t){return function(...e){return"delete"!==t&&this}}function qt(){const t={get(t){return kt(this,t)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!1)},e={get(t){return kt(this,t,!1,!0)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!0)},n={get(t){return kt(this,t,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!1)},r={get(t){return kt(this,t,!0,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Ut(i,!1,!1),n[i]=Ut(i,!0,!1),e[i]=Ut(i,!1,!0),r[i]=Ut(i,!0,!0)})),[t,n,e,r]}const[Bt,Kt,zt,Gt]=qt();function Ht(t,e){const n=e?t?Gt:zt:t?Kt:Bt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Qt={get:Ht(!1,!1)},Wt={get:Ht(!1,!0)},$t={get:Ht(!0,!1)},Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;function te(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>x(t).slice(8,-1))(t))}function ee(t){return t&&t.__v_isReadonly?t:re(t,!1,Tt,Qt,Yt)}function ne(t){return re(t,!0,St,$t,Jt)}function re(t,e,n,r,i){if(!C(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=te(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function ie(t){return oe(t)?ie(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function se(t){return ie(t)||oe(t)}function ae(t){const e=t&&t.__v_raw;return e?ae(e):t}function ue(t){return K(t,"__v_skip",!0),t}function ce(t){ht()&&((t=ae(t)).dep||(t.dep=W()),ft(t.dep))}function le(t,e){(t=ae(t)).dep&&dt(t.dep)}const he=t=>C(t)?ee(t):t;function fe(t){return Boolean(t&&!0===t.__v_isRef)}class pe{constructor(t,e=!1){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ae(t),this._value=e?t:he(t)}get value(){return ce(this),this._value}set value(t){t=this._shallow?t:ae(t),q(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:he(t),le(this))}}function de(t,e=!1){return fe(t)?t:new pe(t,e)}function ve(t){return fe(t)?t.value:t}const ye={get:(t,e,n)=>ve(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return fe(i)&&!fe(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function ge(t){return ie(t)?t:new Proxy(t,ye)}class me{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new it(t,(()=>{this._dirty||(this._dirty=!0,le(this))})),this.__v_isReadonly=n}get value(){const t=ae(this);return ce(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function be(t,e){let n,r;T(t)?(n=t,r=f):(n=t.get,r=t.set);return new me(n,r,T(t)||!t.set)}Promise.resolve();function we(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(z))}let a,u=r[a=j(e)]||r[a=j(F(e))];!u&&o&&(u=r[a=j(V(e))]),u&&xr(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,xr(c,t,6,i)}}function _e(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!T(t)){const r=t=>{const n=_e(t,e,!0);n&&(a=!0,g(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):g(s,o),r.set(t,s),s):(r.set(t,null),null)}function Ee(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,V(e))||w(t,e))}let Ie=null,Te=null;function Se(t){const e=Ie;return Ie=t,Te=t&&t.type.__scopeId||null,e}function Ae(t,e=Ie,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Jn(-1);const i=Se(e),o=t(...n);return Se(i),r._d&&Jn(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Ce(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let g;const m=Se(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=lr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=lr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Ne(u)}let m=g;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&7&n&&(s&&e.some(y)&&(t=De(t,s)),m=ur(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){Wn.length=0,kr(b,t,1),g=ar(Hn)}return Se(m),g}const Ne=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},De=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function xe(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ee(n,o))return!0}return!1}function ke(t,e){if(br){let n=br.provides;const r=br.parent&&br.parent.provides;r===n&&(n=br.provides=Object.create(r)),n[t]=e}else;}function Re(t,e,n=!1){const r=br||Ie;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e.call(r.proxy):e}}const Oe=[Function,Array],Le={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Oe,onEnter:Oe,onAfterEnter:Oe,onEnterCancelled:Oe,onBeforeLeave:Oe,onLeave:Oe,onAfterLeave:Oe,onLeaveCancelled:Oe,onBeforeAppear:Oe,onAppear:Oe,onAfterAppear:Oe,onAppearCancelled:Oe},setup(t,{slots:e}){const n=wr(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xe((()=>{t.isMounted=!0})),tn((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&je(e.default(),!0);if(!o||!o.length)return;const s=ae(t),{mode:a}=s,u=o[0];if(r.isLeaving)return Me(u);const c=Ve(u);if(!c)return Me(u);const l=Fe(c,s,r,n);Ue(c,l);const h=n.subTree,f=h&&Ve(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==Hn&&(!nr(c,f)||p)){const t=Fe(f,s,r,n);if(Ue(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},Me(u);"in-out"===a&&c.type!==Hn&&(t.delayLeave=(t,e,n)=>{Pe(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function Pe(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Fe(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=Pe(n,t),_=(t,e)=>{t&&xr(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=v||a}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&nr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||u,r=g||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>Fe(t,e,n,r)};return E}function Me(t){if(Ke(t))return(t=ur(t)).children=null,t}function Ve(t){return Ke(t)?t.children?t.children[0]:void 0:t}function Ue(t,e){6&t.shapeFlag&&t.component?Ue(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function je(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===zn?(128&o.patchFlag&&r++,n=n.concat(je(o.children,e))):(e||o.type!==Hn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function qe(t){return T(t)?{setup:t,name:t.name}:t}const Be=t=>!!t.type.__asyncLoader,Ke=t=>t.type.__isKeepAlive;function ze(t,e){He(t,"a",e)}function Ge(t,e){He(t,"da",e)}function He(t,e,n=br){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(We(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Ke(t.parent.vnode)&&Qe(r,e,n,t),t=t.parent}}function Qe(t,e,n,r){const i=We(e,t,r,!0);en((()=>{m(r[e],i)}),n)}function We(t,e,n=br,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ut(),_r(n);const i=xr(e,n,t,r);return Er(),ct(),i});return r?i.unshift(o):i.push(o),o}}const $e=t=>(e,n=br)=>(!Tr||"sp"===t)&&We(t,e,n),Ye=$e("bm"),Xe=$e("m"),Je=$e("bu"),Ze=$e("u"),tn=$e("bum"),en=$e("um"),nn=$e("sp"),rn=$e("rtg"),on=$e("rtc");function sn(t,e=br){We("ec",t,e)}let an=!0;function un(t){const e=hn(t),n=t.proxy,r=t.ctx;an=!1,e.beforeCreate&&cn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:v,activated:y,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:E,render:I,renderTracked:S,renderTriggered:A,errorCaptured:N,serverPrefetch:D,expose:x,inheritAttrs:k,components:R,directives:O,filters:L}=e;if(c&&function(t,e,n=f,r=!1){_(t)&&(t=vn(t));for(const i in t){const n=t[i];let o;o=C(n)?"default"in n?Re(n.from||i,n.default,!0):Re(n.from||i):Re(n),fe(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const f in s){const t=s[f];T(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);C(e)&&(t.data=ee(e))}if(an=!0,o)for(const _ in o){const t=o[_],e=be({get:T(t)?t.bind(n,n):T(t.get)?t.get.bind(n,n):f,set:!T(t)&&T(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)ln(a[f],r,n,f);if(u){const t=T(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{ke(e,t[e])}))}function P(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&cn(l,t,"c"),P(Ye,h),P(Xe,p),P(Je,d),P(Ze,v),P(ze,y),P(Ge,g),P(sn,N),P(on,S),P(rn,A),P(tn,b),P(en,E),P(nn,D),_(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===f&&(t.render=I),null!=k&&(t.inheritAttrs=k),R&&(t.components=R),O&&(t.directives=O)}function cn(t,e,n){xr(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function ln(t,e,n,r){const i=r.includes(".")?ri(n,r):()=>n[r];if(S(t)){const n=e[t];T(n)&&ti(i,n)}else if(T(t))ti(i,t.bind(n));else if(C(t))if(_(t))t.forEach((t=>ln(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&ti(i,r,t)}}function hn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>fn(u,t,s,!0))),fn(u,e,s)):u=e,o.set(e,u),u}function fn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&fn(t,o,n,!0),i&&i.forEach((e=>fn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=pn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const pn={data:dn,props:gn,emits:gn,methods:gn,computed:gn,beforeCreate:yn,created:yn,beforeMount:yn,mounted:yn,beforeUpdate:yn,updated:yn,beforeDestroy:yn,destroyed:yn,activated:yn,deactivated:yn,errorCaptured:yn,serverPrefetch:yn,components:gn,directives:gn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=g(Object.create(null),t);for(const r in e)n[r]=yn(t[r],e[r]);return n},provide:dn,inject:function(t,e){return gn(vn(t),vn(e))}};function dn(t,e){return e?t?function(){return g(T(t)?t.call(this,this):t,T(e)?e.call(this,this):e)}:e:t}function vn(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function yn(t,e){return t?[...new Set([].concat(t,e))]:e}function gn(t,e){return t?g(g(Object.create(null),t),e):e}function mn(t,e,n,r=!1){const i={},o={};K(o,rr,1),t.propsDefaults=Object.create(null),bn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:re(i,!1,At,Wt,Xt):t.type.props?t.props=i:t.props=o,t.attrs=o}function bn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(O(u))continue;const c=e[u];let l;i&&w(i,l=F(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Ee(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=ae(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=wn(i,e,a,r[a],t,!w(r,a))}}return a}function wn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&T(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(_r(i),r=o[n]=t.call(null,e),Er())}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==V(n)||(r=!0))}return r}function _n(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!T(t)){const r=t=>{u=!0;const[n,r]=_n(t,e,!0);g(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=F(o[h]);En(t)&&(s[t]=l)}else if(o)for(const l in o){const t=F(l);if(En(t)){const e=o[l],n=s[t]=_(e)||T(e)?{type:e}:e;if(n){const e=Sn(Boolean,n.type),r=Sn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function En(t){return"$"!==t[0]}function In(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function Tn(t,e){return In(t)===In(e)}function Sn(t,e){return _(e)?e.findIndex((e=>Tn(e,t))):T(e)&&Tn(e,t)?0:-1}const An=t=>"_"===t[0]||"$stable"===t,Cn=t=>_(t)?t.map(lr):[lr(t)],Nn=(t,e,n)=>{const r=Ae((t=>Cn(e(t))),n);return r._c=!1,r},Dn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(An(i))continue;const n=t[i];if(T(n))e[i]=Nn(0,n,r);else if(null!=n){const t=Cn(n);e[i]=()=>t}}},xn=(t,e)=>{const n=Cn(e);t.slots.default=()=>n};function kn(t,e){if(null===Ie)return t;const n=Ie.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=l]=e[i];T(t)&&(t={mounted:t,updated:t}),t.deep&&ii(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Rn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(ut(),xr(u,n,8,[t.el,a,t,e]),ct())}}function On(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ln=0;function Pn(t,e){return function(n,r=null){null==r||C(r)||(r=null);const i=On(),o=new Set;let s=!1;const a=i.app={_uid:Ln++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:si,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(a,...e)):T(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=ar(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Fn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):Wr(t,jr,Ur,qr)};function Mn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:s,createComment:a,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:v=f,cloneNode:y,insertStaticContent:m}=t,b=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!nr(t,e)&&(r=et(t),Y(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case Gn:_(t,e,n,r);break;case Hn:E(t,e,n,r);break;case Qn:null==t&&I(e,n,r,s);break;case zn:P(t,e,n,r,i,o,s,a,u);break;default:1&h?A(t,e,n,r,i,o,s,a,u):6&h?M(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,rt)}null!=l&&i&&Vn(l,t&&t.ref,o,e||t,!e)},_=(t,e,r,i)=>{if(null==t)n(e.el=s(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},E=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},I=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},T=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=d(t),n(t,r,i),t=o;n(e,r,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=d(t),r(t),t=n;r(e)},A=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,u):k(t,e,i,o,s,a,u)},C=(t,e,r,s,a,u,l,h)=>{let f,p;const{type:d,props:v,shapeFlag:g,transition:m,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==y&&-1===b)f=t.el=y(t.el);else{if(f=t.el=o(t.type,u,v&&v.is,v),8&g?c(f,t.children):16&g&&x(t.children,f,null,s,a,u&&"foreignObject"!==d,l,h),w&&Rn(t,null,s,"created"),v){for(const e in v)"value"===e||O(e)||i(f,e,null,v[e],u,t.children,s,a,tt);"value"in v&&i(f,"value",null,v.value),(p=v.onVnodeBeforeMount)&&Un(p,s,t)}D(f,t,t.scopeId,l,s)}w&&Rn(t,null,s,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;_&&m.beforeEnter(f),n(f,e,r),((p=v&&v.onVnodeMounted)||_||w)&&Fn((()=>{p&&Un(p,s,t),_&&m.enter(f),w&&Rn(t,null,s,"mounted")}),a)},D=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;D(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},x=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?hr(t[c]):lr(t[c]);b(null,u,e,n,r,i,o,s,a)}},k=(t,e,n,r,o,s,a)=>{const u=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:p}=e;h|=16&t.patchFlag;const d=t.props||l,v=e.props||l;let y;(y=v.onVnodeBeforeUpdate)&&Un(y,n,e,t),p&&Rn(e,t,n,"beforeUpdate");const g=o&&"foreignObject"!==e.type;if(f?R(t.dynamicChildren,f,u,n,r,g,s):a||G(t,e,u,null,n,r,g,s,!1),h>0){if(16&h)L(u,e,d,v,n,r,o);else if(2&h&&d.class!==v.class&&i(u,"class",null,v.class,o),4&h&&i(u,"style",d.style,v.style,o),8&h){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],c=d[a],l=v[a];l===c&&"value"!==a||i(u,a,c,l,o,t.children,n,r,tt)}}1&h&&t.children!==e.children&&c(u,e.children)}else a||null!=f||L(u,e,d,v,n,r,o);((y=v.onVnodeUpdated)||p)&&Fn((()=>{y&&Un(y,n,e,t),p&&Rn(e,t,n,"updated")}),r)},R=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===zn||!nr(u,c)||70&u.shapeFlag)?p(u.el):n;b(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,o,s,a)=>{if(n!==r){for(const u in r){if(O(u))continue;const c=r[u],l=n[u];c!==l&&"value"!==u&&i(t,u,l,c,a,e.children,o,s,tt)}if(n!==l)for(const u in n)O(u)||u in r||i(t,u,n[u],null,a,e.children,o,s,tt);"value"in r&&i(t,"value",n.value,r.value)}},P=(t,e,r,i,o,a,u,c,l)=>{const h=e.el=t?t.el:s(""),f=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),x(e.children,r,f,o,a,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(R(t.dynamicChildren,d,r,o,a,u,c),(null!=e.key||o&&e===o.subTree)&&jn(t,e,!0)):G(t,e,r,f,o,a,u,c,l)},M=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):j(t,e,u)},U=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||gr,o={uid:mr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new Q(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_n(r,i),emitsOptions:_e(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=we.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if(Ke(t)&&(a.ctx.renderer=rt),function(t,e=!1){Tr=e;const{props:n,children:r}=t.vnode,i=Ir(t);mn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ae(e),K(e,"_",n)):Dn(e,t.slots={})}else t.slots={},e&&xn(t,e);K(t.slots,rr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ue(new Proxy(t.ctx,yr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(lt(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;_r(t),ut();const i=Dr(r,t,0,[t.props,n]);if(ct(),Er(),N(i)){if(i.then(Er,Er),e)return i.then((e=>{Sr(t,e)})).catch((e=>{kr(e,t,0)}));t.asyncDep=i}else Sr(t,i)}else Ar(t)}(t,e):void 0;Tr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,q),!t.el){const t=a.subTree=ar(Hn);E(null,t,e,n)}}else q(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||xe(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?xe(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ee(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,e,n);r.next=e,function(t){const e=Lr.indexOf(t);e>Pr&&Lr.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},q=(t,e,n,r,i,o,s)=>{const a=new it((()=>{if(t.isMounted){let e,{next:n,bu:r,u:u,parent:c,vnode:l}=t,h=n;n?(n.el=l.el,z(t,n,s)):n=l,a.allowRecurse=!1,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Un(e,c,n,l),a.allowRecurse=!0;const f=Ce(t),d=t.subTree;t.subTree=f,b(d,f,p(d.el),et(d),t,i,o),n.el=f.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Fn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Fn((()=>Un(e,c,n,l)),i)}else{let s;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t,p=Be(e);if(a.allowRecurse=!1,l&&B(l),!p&&(s=c&&c.onVnodeBeforeMount)&&Un(s,f,e),a.allowRecurse=!0,u&&st){const n=()=>{t.subTree=Ce(t),st(u,t.subTree,t,i,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Ce(t);b(null,s,n,r,t,i,o),e.el=s.el}if(h&&Fn(h,i),!p&&(s=c&&c.onVnodeMounted)){const t=e;Fn((()=>Un(s,f,t)),i)}256&e.shapeFlag&&t.a&&Fn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>Hr(t.update)),t.scope),u=t.update=a.run.bind(a);u.id=t.uid,a.allowRecurse=u.allowRecurse=!0,u()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=ae(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;bn(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=V(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=wn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=F(s);i[e]=wn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&pt(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(g(i,e),n||1!==t||delete i._):(o=!e.$stable,Dn(e,i)),s=e}else e&&(xn(t,e),s={default:1});if(o)for(const a in i)An(a)||a in s||delete i[a]})(t,e.children,n),ut(),$r(void 0,t.update),ct()},G=(t,e,n,r,i,o,s,a,u=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,f=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void W(l,f,n,r,i,o,s,a,u);if(256&p)return void H(l,f,n,r,i,o,s,a,u)}8&d?(16&h&&tt(l,i,o),f!==l&&c(n,f)):16&h?16&d?W(l,f,n,r,i,o,s,a,u):tt(l,i,o,!0):(8&h&&c(n,""),16&d&&x(f,n,r,i,o,s,a,u))},H=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?hr(e[p]):lr(e[p]);b(t[p],r,n,null,i,o,s,a,u)}c>l?tt(t,i,o,!0,!1,f):x(e,n,r,i,o,s,a,u,f)},W=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?hr(e[c]):lr(e[c]);if(!nr(r,l))break;b(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?hr(e[p]):lr(e[p]);if(!nr(r,c))break;b(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)b(null,e[c]=u?hr(e[c]):lr(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)Y(t[c],i,o,!0),c++;else{const d=c,v=c,y=new Map;for(c=v;c<=p;c++){const t=e[c]=u?hr(e[c]):lr(e[c]);null!=t.key&&y.set(t.key,c)}let g,m=0;const w=p-v+1;let _=!1,E=0;const I=new Array(w);for(c=0;c<w;c++)I[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=w){Y(r,i,o,!0);continue}let l;if(null!=r.key)l=y.get(r.key);else for(g=v;g<=p;g++)if(0===I[g-v]&&nr(r,e[g])){l=g;break}void 0===l?Y(r,i,o,!0):(I[l-v]=c+1,l>=E?E=l:_=!0,b(r,e[l],n,null,i,o,s,a,u),m++)}const T=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(I):h;for(g=T.length-1,c=w-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===I[c]?b(null,h,n,f,i,o,s,a,u):_&&(g<0||c!==T[g]?$(h,n,f,2):g--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,rt);if(a===zn){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===Qn)return void T(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Fn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},Y=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Vn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f,d=!Be(t);let v;if(d&&(v=s&&s.onVnodeBeforeUnmount)&&Un(v,e,t),6&l)Z(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Rn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,rt,r):c&&(o!==zn||h>0&&64&h)?tt(c,e,n,!1,!0):(o===zn&&384&h||!i&&16&l)&&tt(u,e,n),r&&X(t)}(d&&(v=s&&s.onVnodeUnmounted)||p)&&Fn((()=>{v&&Un(v,e,t),p&&Rn(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===zn)return void J(n,i);if(e===Qn)return void S(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=d(t),r(t),t=n;r(e)},Z=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:s,um:a}=t;r&&B(r),i.stop(),o&&(o.active=!1,Y(s,t,e,n)),a&&Fn(a,e),Fn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)Y(t[s],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),Yr(),e._vnode=t},rt={p:b,um:Y,m:$,r:X,mt:U,mc:x,pc:G,pbc:R,n:et,o:t};let ot,st;e&&([ot,st]=e(rt));return{render:nt,hydrate:ot,createApp:Pn(nt,ot)}}(t)}function Vn(t,e,n,r,i=!1){if(_(t))return void t.forEach(((t,o)=>Vn(t,e&&(_(e)?e[o]:e),n,r,i)));if(Be(r)&&!i)return;const o=4&r.shapeFlag?Cr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):fe(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,Fn(t,n)):t()}else if(fe(u)){const t=()=>{u.value=s};s?(t.id=-1,Fn(t,n)):t()}else T(u)&&Dr(u,a,12,[s,h])}function Un(t,e,n,r=null){xr(t,e,7,[n,r])}function jn(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=hr(i[o]),e.el=t.el),n||jn(t,e))}}function qn(t,e){return function(t,e,n=!0,r=!1){const i=Ie||br;if(i){const n=i.type;if("components"===t){const t=Nr(n);if(t&&(t===e||t===F(e)||t===U(F(e))))return n}const o=Kn(i[t]||n[t],e)||Kn(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const Bn=Symbol();function Kn(t,e){return t&&(t[e]||t[F(e)]||t[U(F(e))])}const zn=Symbol(void 0),Gn=Symbol(void 0),Hn=Symbol(void 0),Qn=Symbol(void 0),Wn=[];let $n=null;function Yn(t=!1){Wn.push($n=t?null:[])}let Xn=1;function Jn(t){Xn+=t}function Zn(t){return t.dynamicChildren=Xn>0?$n||h:null,Wn.pop(),$n=Wn[Wn.length-1]||null,Xn>0&&$n&&$n.push(t),t}function tr(t,e,n,r,i,o){return Zn(sr(t,e,n,r,i,o,!0))}function er(t){return!!t&&!0===t.__v_isVNode}function nr(t,e){return t.type===e.type&&t.key===e.key}const rr="__vInternal",ir=({key:t})=>null!=t?t:null,or=({ref:t})=>null!=t?S(t)||fe(t)||T(t)?{i:Ie,r:t}:t:null;function sr(t,e=null,n=null,r=0,i=null,o=(t===zn?0:1),s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ir(e),ref:e&&or(e),scopeId:Te,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(fr(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=S(n)?8:16),Xn>0&&!s&&$n&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&$n.push(u),u}const ar=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Bn||(t=Hn);if(er(t)){const r=ur(t,e,!0);return n&&fr(r,n),r}u=t,T(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){e=function(t){return t?se(t)||rr in t?g({},t):t:null}(e);let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),C(n)&&(se(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:C(t)?4:T(t)?2:0;return sr(t,e,n,i,o,c,s,!0)};function ur(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ir(c),ref:e&&e.ref?n&&o?_(o)?o.concat(or(e)):[o,or(e)]:or(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==zn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ur(t.ssContent),ssFallback:t.ssFallback&&ur(t.ssFallback),el:t.el,anchor:t.anchor}}function cr(t=" ",e=0){return ar(Gn,null,t,e)}function lr(t){return null==t||"boolean"==typeof t?ar(Hn):_(t)?ar(zn,null,t.slice()):"object"==typeof t?hr(t):ar(Gn,null,String(t))}function hr(t){return null===t.el||t.memo?t:ur(t)}function fr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),fr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||rr in e?3===r&&Ie&&(1===Ie.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Ie}}else T(e)?(e={default:e,_ctx:Ie},n=32):(e=String(e),64&r?(n=16,e=[cr(e)]):n=8);t.children=e,t.shapeFlag|=n}function pr(t,e,n,r){let i;const o=n&&n[r];if(_(t)||S(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(C(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=e(t[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}const dr=t=>t?Ir(t)?Cr(t)||t.proxy:dr(t.parent):null,vr=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>dr(t.parent),$root:t=>dr(t.root),$emit:t=>t.emit,$options:t=>hn(t),$forceUpdate:t=>()=>Hr(t.update),$nextTick:t=>Gr.bind(t.proxy),$watch:t=>ni.bind(t)}),yr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];an&&(s[e]=4)}}const h=vr[e];let f,p;return h?("$attrs"===e&&lt(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(vr,s)||w(i.config.globalProperties,s)}},gr=On();let mr=0;let br=null;const wr=()=>br||Ie,_r=t=>{br=t,t.scope.on()},Er=()=>{br&&br.scope.off(),br=null};function Ir(t){return 4&t.vnode.shapeFlag}let Tr=!1;function Sr(t,e,n){T(e)?t.render=e:C(e)&&(t.setupState=ge(e)),Ar(t)}function Ar(t,e,n){const r=t.type;t.render||(t.render=r.render||f),_r(t),ut(),un(t),ct(),Er()}function Cr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ge(ue(t.exposed)),{get:(e,n)=>n in e?e[n]:n in vr?vr[n](t):void 0}))}function Nr(t){return T(t)&&t.displayName||t.name}function Dr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){kr(o,e,n)}return i}function xr(t,e,n,r){if(T(t)){const i=Dr(t,e,n,r);return i&&N(i)&&i.catch((t=>{kr(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(xr(t[o],e,n,r));return i}function kr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void Dr(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let Rr=!1,Or=!1;const Lr=[];let Pr=0;const Fr=[];let Mr=null,Vr=0;const Ur=[];let jr=null,qr=0;const Br=Promise.resolve();let Kr=null,zr=null;function Gr(t){const e=Kr||Br;return t?e.then(this?t.bind(this):t):e}function Hr(t){Lr.length&&Lr.includes(t,Rr&&t.allowRecurse?Pr+1:Pr)||t===zr||(null==t.id?Lr.push(t):Lr.splice(function(t){let e=Pr+1,n=Lr.length;for(;e<n;){const r=e+n>>>1;Xr(Lr[r])<t?e=r+1:n=r}return e}(t.id),0,t),Qr())}function Qr(){Rr||Or||(Or=!0,Kr=Br.then(Jr))}function Wr(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Qr()}function $r(t,e=null){if(Fr.length){for(zr=e,Mr=[...new Set(Fr)],Fr.length=0,Vr=0;Vr<Mr.length;Vr++)Mr[Vr]();Mr=null,Vr=0,zr=null,$r(t,e)}}function Yr(t){if(Ur.length){const t=[...new Set(Ur)];if(Ur.length=0,jr)return void jr.push(...t);for(jr=t,jr.sort(((t,e)=>Xr(t)-Xr(e))),qr=0;qr<jr.length;qr++)jr[qr]();jr=null,qr=0}}const Xr=t=>null==t.id?1/0:t.id;function Jr(t){Or=!1,Rr=!0,$r(t),Lr.sort(((t,e)=>Xr(t)-Xr(e)));try{for(Pr=0;Pr<Lr.length;Pr++){const t=Lr[Pr];t&&!1!==t.active&&Dr(t,null,14)}}finally{Pr=0,Lr.length=0,Yr(),Rr=!1,Kr=null,(Lr.length||Fr.length||Ur.length)&&Jr(t)}}const Zr={};function ti(t,e,n){return ei(t,e,n)}function ei(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l){const a=br;let u,c,h=!1,p=!1;if(fe(t)?(u=()=>t.value,h=!!t._shallow):ie(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some(ie),u=()=>t.map((t=>fe(t)?t.value:ie(t)?ii(t):T(t)?Dr(t,a,2):void 0))):u=T(t)?e?()=>Dr(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),xr(t,a,3,[d])}:f,e&&r){const t=u;u=()=>ii(t())}let d=t=>{c=b.onStop=()=>{Dr(t,a,4)}},v=p?[]:Zr;const y=()=>{if(b.active)if(e){const t=b.run();(r||h||(p?t.some(((t,e)=>q(t,v[e]))):q(t,v)))&&(c&&c(),xr(e,a,3,[t,v===Zr?void 0:v,d]),v=t)}else b.run()};let g;y.allowRecurse=!!e,g="sync"===i?y:"post"===i?()=>Fn(y,a&&a.suspense):()=>{!a||a.isMounted?function(t){Wr(t,Mr,Fr,Vr)}(y):y()};const b=new it(u,g);return e?n?y():v=b.run():"post"===i?Fn(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&m(a.scope.effects,b)}}function ni(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?ri(r,t):()=>r[t]:t.bind(r,r);let o;T(e)?o=e:(o=e.handler,n=e);const s=br;_r(this);const a=ei(i,o.bind(r),n);return s?_r(s):Er(),a}function ri(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function ii(t,e=new Set){if(!C(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),fe(t))ii(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)ii(t[n],e);else if(I(t)||E(t))t.forEach((t=>{ii(t,e)}));else if(k(t))for(const n in t)ii(t[n],e);return t}function oi(t,e,n){const r=arguments.length;return 2===r?C(e)&&!_(e)?er(e)?ar(t,null,[e]):ar(t,e):ar(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&er(n)&&(n=[n]),ar(t,e,n))}const si="3.2.3",ai="undefined"!=typeof document?document:null,ui=new Map,ci={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?ai.createElementNS("http://www.w3.org/2000/svg",t):ai.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>ai.createTextNode(t),createComment:t=>ai.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ai.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=ui.get(t);if(!o){const e=ai.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}ui.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const li=/\s*!important$/;function hi(t,e,n){if(_(n))n.forEach((n=>hi(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=pi[e];if(n)return n;let r=F(e);if("filter"!==r&&r in t)return pi[e]=r;r=U(r);for(let i=0;i<fi.length;i++){const n=fi[i]+r;if(n in t)return pi[e]=n}return e}(t,e);li.test(n)?t.setProperty(V(r),n.replace(li,""),"important"):t[r]=n}}const fi=["Webkit","Moz","ms"],pi={};const di="http://www.w3.org/1999/xlink";let vi=Date.now,yi=!1;if("undefined"!=typeof window){vi()>document.createEvent("Event").timeStamp&&(vi=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);yi=!!(t&&Number(t[1])<=53)}let gi=0;const mi=Promise.resolve(),bi=()=>{gi=0};function wi(t,e,n,r){t.addEventListener(e,n,r)}function _i(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(Ei.test(t)){let n;for(e={};n=t.match(Ei);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){wi(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||vi();(yi||r>=n.attached-1)&&xr(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>gi||(mi.then(bi),gi=vi()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const Ei=/(?:Once|Passive|Capture)$/;const Ii=/^on[a-z]/;const Ti="transition",Si=(t,{slots:e})=>oi(Le,function(t){const e={};for(const g in t)g in Ai||(e[g]=t[g]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(C(t))return[Di(t.enter),Di(t.leave)];{const e=Di(t);return[e,e]}}(i),v=d&&d[0],y=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:E,onBeforeAppear:I=m,onAppear:T=b,onAppearCancelled:S=w}=e,A=(t,e,n)=>{ki(t,e?l:a),ki(t,e?c:s),n&&n()},N=(t,e)=>{ki(t,p),ki(t,f),e&&e()},D=t=>(e,n)=>{const i=t?T:b,s=()=>A(e,t,n);Ci(i,[e,s]),Ri((()=>{ki(e,t?u:o),xi(e,t?l:a),Ni(i)||Li(e,r,v,s)}))};return g(e,{onBeforeEnter(t){Ci(m,[t]),xi(t,o),xi(t,s)},onBeforeAppear(t){Ci(I,[t]),xi(t,u),xi(t,c)},onEnter:D(!1),onAppear:D(!0),onLeave(t,e){const n=()=>N(t,e);xi(t,h),document.body.offsetHeight,xi(t,f),Ri((()=>{ki(t,h),xi(t,p),Ni(_)||Li(t,r,y,n)})),Ci(_,[t,n])},onEnterCancelled(t){A(t,!1),Ci(w,[t])},onAppearCancelled(t){A(t,!0),Ci(S,[t])},onLeaveCancelled(t){N(t),Ci(E,[t])}})}(t),e);Si.displayName="Transition";const Ai={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Si.props=g({},Le.props,Ai);const Ci=(t,e=[])=>{_(t)?t.forEach((t=>t(...e))):t&&t(...e)},Ni=t=>!!t&&(_(t)?t.some((t=>t.length>1)):t.length>1);function Di(t){return z(t)}function xi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function ki(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Ri(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Oi=0;function Li(t,e,n,r){const i=t._endId=++Oi,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=Pi(i,o),a=r("animationDelay"),u=r("animationDuration"),c=Pi(a,u);let l=null,h=0,f=0;e===Ti?s>0&&(l=Ti,h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?Ti:"animation":null,f=l?l===Ti?o.length:u.length:0);const p=l===Ti&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:h,propCount:f,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Pi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>Fi(e)+Fi(t[n]))))}function Fi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const Mi=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function Vi(t){t.target.composing=!0}function Ui(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const ji={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Mi(i);const o=r||i.props&&"number"===i.props.type;wi(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=z(r)),t._assign(r)})),n&&wi(t,"change",(()=>{t.value=t.value.trim()})),e||(wi(t,"compositionstart",Vi),wi(t,"compositionend",Ui),wi(t,"change",Ui))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Mi(o),t.composing)return;if(document.activeElement===t){if(n)return;if(r&&t.value.trim()===e)return;if((i||"number"===t.type)&&z(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},qi=["ctrl","shift","alt","meta"],Bi={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>qi.some((n=>t[`${n}Key`]&&!e.includes(n)))},Ki=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Bi[e[t]];if(r&&r(n,e))return}return t(n,...r)},zi={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Gi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Gi(t,!0),r.enter(t)):r.leave(t,(()=>{Gi(t,!1)})):Gi(t,e))},beforeUnmount(t,{value:e}){Gi(t,e)}};function Gi(t,e){t.style.display=e?t._vod:"none"}const Hi=g({patchProp:(t,r,i,o,s=!1,a,u,c,l)=>{"class"===r?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,s):"style"===r?function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)hi(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&hi(r,t,"")}else t.removeAttribute("style")}(t,i,o):v(r)?y(r)||_i(t,r,0,o,u):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&Ii.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(Ii.test(e)&&S(n))return!1;return e in t}(t,r,o,s))?function(t,e,r,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName){t._value=r;const n=null==r?"":r;return t.value!==n&&(t.value=n),void(null==r&&t.removeAttribute(e))}if(""===r||null==r){const i=typeof t[e];if("boolean"===i)return void(t[e]=n(r));if(null==r&&"string"===i)return t[e]="",void t.removeAttribute(e);if("number"===i){try{t[e]=0}catch(u){}return void t.removeAttribute(e)}}try{t[e]=r}catch(ow){}}(t,r,o,a,u,c,l):("true-value"===r?t._trueValue=o:"false-value"===r&&(t._falseValue=o),function(t,r,i,o,s){if(o&&r.startsWith("xlink:"))null==i?t.removeAttributeNS(di,r.slice(6,r.length)):t.setAttributeNS(di,r,i);else{const o=e(r);null==i||o&&!n(i)?t.removeAttribute(r):t.setAttribute(r,o?"":i)}}(t,r,o,s))}},ci);let Qi;const Wi=(...t)=>{const e=(Qi||(Qi=Mn(Hi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var $i=function(t,e){return($i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}$i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Xi=function(){return(Xi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ji(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(ow){o(ow)}}function a(t){try{u(r.throw(t))}catch(ow){o(ow)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Zi(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(ow){o=[6,ow],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function no(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ro={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function io(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=io(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oo=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function so(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ao(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ow){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uo=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,co.prototype.create),o}return Yi(e,t),e}(Error),co=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?lo(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new uo(i,a,r);return u},t}();function lo(t,e){return t.replace(ho,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var ho=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function po(t,e){var n=new vo(t,e);return n.subscribe.bind(n)}var vo=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=yo),void 0===r.error&&(r.error=yo),void 0===r.complete&&(r.complete=yo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(ow){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(ow){"undefined"!=typeof console&&console.error&&console.error(ow)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function yo(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){return t&&t._delegate?t._delegate:t}var mo=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),bo=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new oo;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(ow){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ow){if(r)return null;throw ow}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(ow){}try{for(var r=to(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(ow){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Ji(this,void 0,void 0,(function(){var t;return Zi(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(no(no([],eo(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),eo(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=to(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=eo(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=to(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wo,_o=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new bo(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Eo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Io,To,So=[];(To=Io||(Io={}))[To.DEBUG=0]="DEBUG",To[To.VERBOSE=1]="VERBOSE",To[To.INFO=2]="INFO",To[To.WARN=3]="WARN",To[To.ERROR=4]="ERROR",To[To.SILENT=5]="SILENT";var Ao,Co={debug:Io.DEBUG,verbose:Io.VERBOSE,info:Io.INFO,warn:Io.WARN,error:Io.ERROR,silent:Io.SILENT},No=Io.INFO,Do=((wo={})[Io.DEBUG]="log",wo[Io.VERBOSE]="log",wo[Io.INFO]="info",wo[Io.WARN]="warn",wo[Io.ERROR]="error",wo),xo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Do[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Eo(["["+i+"]  "+t.name+":"],n))}},ko=function(){function t(t){this.name=t,this._logLevel=No,this._logHandler=xo,this._userLogHandler=null,So.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Io))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Co[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Eo([this,Io.DEBUG],t)),this._logHandler.apply(this,Eo([this,Io.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Eo([this,Io.VERBOSE],t)),this._logHandler.apply(this,Eo([this,Io.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Eo([this,Io.INFO],t)),this._logHandler.apply(this,Eo([this,Io.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Eo([this,Io.WARN],t)),this._logHandler.apply(this,Eo([this,Io.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Eo([this,Io.ERROR],t)),this._logHandler.apply(this,Eo([this,Io.ERROR],t))},t}();function Ro(t){So.forEach((function(e){e.setLogLevel(t)}))}var Oo,Lo=((Ao={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ao["bad-app-name"]="Illegal App name: '{$appName}",Ao["duplicate-app"]="Firebase App named '{$appName}' already exists",Ao["app-deleted"]="Firebase App named '{$appName}' already deleted",Ao["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ao["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ao),Po=new co("app","Firebase",Lo),Fo=((Oo={})["@firebase/app"]="fire-core",Oo["@firebase/analytics"]="fire-analytics",Oo["@firebase/app-check"]="fire-app-check",Oo["@firebase/auth"]="fire-auth",Oo["@firebase/database"]="fire-rtdb",Oo["@firebase/functions"]="fire-fn",Oo["@firebase/installations"]="fire-iid",Oo["@firebase/messaging"]="fire-fcm",Oo["@firebase/performance"]="fire-perf",Oo["@firebase/remote-config"]="fire-rc",Oo["@firebase/storage"]="fire-gcs",Oo["@firebase/firestore"]="fire-fst",Oo["fire-js"]="fire-js",Oo["firebase-wrapper"]="fire-js-all",Oo),Mo=new ko("@firebase/app"),Vo=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=io(void 0,t),this.container=new _o(e.name),this._addComponent(new mo("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(ow){Mo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,ow)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Po.create("app-deleted",{appName:this.name_})},t}();Vo.prototype.name&&Vo.prototype.options||Vo.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Po.create("bad-app-name",{appName:String(s)});if(fo(e,s))throw Po.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Fo[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Mo.warn(u.join(" "))}o(new mo(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Ro,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Po.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Co[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Io[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=So;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!fo(e,t=t||"[DEFAULT]"))throw Po.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Mo.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Po.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&io(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jo=function t(){var e=Uo(Vo);return e.INTERNAL=Xi(Xi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){io(e,t)},createSubscribe:po,ErrorFactory:co,deepExtend:io}),e}(),qo=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Mo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bo=self.firebase.SDK_VERSION;Bo&&Bo.indexOf("LITE")>=0&&Mo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ko=jo.initializeApp;jo.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ao()&&Mo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ko.apply(void 0,t)};var zo,Go,Ho=jo;(zo=Ho).INTERNAL.registerComponent(new mo("platform-logger",(function(t){return new qo(t)}),"PRIVATE")),zo.registerVersion("@firebase/app","0.6.29",Go),zo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ho.registerVersion("firebase","8.9.1","app"),Ho.SDK_VERSION="8.9.1";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Qo=function(t,e){return(Qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Wo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $o,Yo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xo=Xo||{},Jo=Yo||self;function Zo(){}function ts(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function es(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ns="closure_uid_"+(1e9*Math.random()>>>0),rs=0;function is(t,e,n){return t.call.apply(t.bind,arguments)}function os(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ss(t,e,n){return(ss=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?is:os).apply(null,arguments)}function as(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function us(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function cs(){this.s=this.s,this.o=this.o}var ls={};cs.prototype.s=!1,cs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ns)&&t[ns]||(t[ns]=++rs)}(this);delete ls[t]}},cs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},fs=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ps(t){return Array.prototype.concat.apply([],arguments)}function ds(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function vs(t){return/^[\s\xa0]*$/.test(t)}var ys,gs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ms(t,e){return-1!=t.indexOf(e)}function bs(t,e){return t<e?-1:t>e?1:0}t:{var ws=Jo.navigator;if(ws){var _s=ws.userAgent;if(_s){ys=_s;break t}}ys=""}function Es(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Is(t){var e={};for(var n in t)e[n]=t[n];return e}var Ts="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ss(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ts.length;o++)n=Ts[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function As(t){return As[" "](t),t}As[" "]=Zo;var Cs,Ns,Ds=ms(ys,"Opera"),xs=ms(ys,"Trident")||ms(ys,"MSIE"),ks=ms(ys,"Edge"),Rs=ks||xs,Os=ms(ys,"Gecko")&&!(ms(ys.toLowerCase(),"webkit")&&!ms(ys,"Edge"))&&!(ms(ys,"Trident")||ms(ys,"MSIE"))&&!ms(ys,"Edge"),Ls=ms(ys.toLowerCase(),"webkit")&&!ms(ys,"Edge");function Ps(){var t=Jo.document;return t?t.documentMode:void 0}t:{var Fs="",Ms=(Ns=ys,Os?/rv:([^\);]+)(\)|;)/.exec(Ns):ks?/Edge\/([\d\.]+)/.exec(Ns):xs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ns):Ls?/WebKit\/(\S+)/.exec(Ns):Ds?/(?:Version)[ \/]?(\S+)/.exec(Ns):void 0);if(Ms&&(Fs=Ms?Ms[1]:""),xs){var Vs=Ps();if(null!=Vs&&Vs>parseFloat(Fs)){Cs=String(Vs);break t}}Cs=Fs}var Us,js={};function qs(){return function(t){var e=js;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=gs(String(Cs)).split("."),n=gs("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=bs(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||bs(0==o[2].length,0==s[2].length)||bs(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(Jo.document&&xs){var Bs=Ps();Us=Bs||(parseInt(Cs,10)||void 0)}else Us=void 0;var Ks=Us,zs=function(){if(!Jo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Jo.addEventListener("test",Zo,e),Jo.removeEventListener("test",Zo,e)}catch(n){}return t}();function Gs(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Hs(t,e){if(Gs.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Os){t:{try{As(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qs[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Hs.Z.h.call(this)}}Gs.prototype.h=function(){this.defaultPrevented=!0},us(Hs,Gs);var Qs={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ws="closure_listenable_"+(1e6*Math.random()|0),$s=0;function Ys(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++$s,this.ca=this.fa=!1}function Xs(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Js(t){this.src=t,this.g={},this.h=0}function Zs(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=hs(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Xs(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ta(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Js.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=ta(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ys(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ea="closure_lm_"+(1e6*Math.random()|0),na={};function ra(t,e,n,r,i){if(r&&r.once)return oa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ra(t,e[o],n,r,i);return null}return n=fa(n),t&&t[Ws]?t.N(e,n,es(r)?!!r.capture:!!r,i):ia(t,e,n,!1,r,i)}function ia(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=es(i)?!!i.capture:!!i,a=la(t);if(a||(t[ea]=a=new Js(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=ca;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ua(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function oa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)oa(t,e[o],n,r,i);return null}return n=fa(n),t&&t[Ws]?t.O(e,n,es(r)?!!r.capture:!!r,i):ia(t,e,n,!0,r,i)}function sa(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sa(t,e[o],n,r,i);else r=es(r)?!!r.capture:!!r,n=fa(n),t&&t[Ws]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ta(o=t.g[e],n,r,i))&&(Xs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=la(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ta(e,n,r,i)),(n=-1<t?e[t]:null)&&aa(n))}function aa(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ws])Zs(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ua(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=la(e))?(Zs(n,t),0==n.h&&(n.src=null,e[ea]=null)):Xs(t)}}}function ua(t){return t in na?na[t]:na[t]="on"+t}function ca(t,e){if(t.ca)t=!0;else{e=new Hs(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&aa(t),t=n.call(r,e)}return t}function la(t){return(t=t[ea])instanceof Js?t:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(t){return"function"==typeof t?t:(t[ha]||(t[ha]=function(e){return t.handleEvent(e)}),t[ha])}function pa(){cs.call(this),this.i=new Js(this),this.P=this,this.I=null}function da(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Gs(e,t);else if(e instanceof Gs)e.target=e.target||t;else{var i=e;Ss(e=new Gs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=va(s,r,!0,e)&&i}if(i=va(s=e.g=t,r,!0,e)&&i,i=va(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=va(s=e.g=n[o],r,!1,e)&&i}function va(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Zs(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}us(pa,cs),pa.prototype[Ws]=!0,pa.prototype.removeEventListener=function(t,e,n,r){sa(this,t,e,n,r)},pa.prototype.M=function(){if(pa.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Xs(n[r]);delete e.g[t],e.h--}}this.I=null},pa.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pa.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ya=Jo.JSON.stringify;function ga(){var t=Sa,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ma,ba=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=wa.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),wa=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new _a}),(function(t){return t.reset()})),_a=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ea(t){Jo.setTimeout((function(){throw t}),0)}function Ia(t,e){ma||function(){var t=Jo.Promise.resolve(void 0);ma=function(){t.then(Aa)}}(),Ta||(ma(),Ta=!0),Sa.add(t,e)}var Ta=!1,Sa=new ba;function Aa(){for(var t;t=ga();){try{t.h.call(t.g)}catch(n){Ea(n)}var e=wa;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ta=!1}function Ca(t,e){pa.call(this),this.h=t||1,this.g=e||Jo,this.j=ss(this.kb,this),this.l=Date.now()}function Na(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Da(t,e,n){if("function"==typeof t)n&&(t=ss(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ss(t.handleEvent,t)}return 2147483647<Number(e)?-1:Jo.setTimeout(t,e||0)}function xa(t){t.g=Da((function(){t.g=null,t.i&&(t.i=!1,xa(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}us(Ca,pa),($o=Ca.prototype).da=!1,$o.S=null,$o.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),da(this,"tick"),this.da&&(Na(this),this.start()))}},$o.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$o.M=function(){Ca.Z.M.call(this),Na(this),delete this.g};var ka=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:xa(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Jo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(cs);function Ra(t){cs.call(this),this.h=t,this.g={}}us(Ra,cs);var Oa=[];function La(t,e,n,r){Array.isArray(n)||(n&&(Oa[0]=n.toString()),n=Oa);for(var i=0;i<n.length;i++){var o=ra(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Pa(t){Es(t.g,(function(t,e){this.g.hasOwnProperty(e)&&aa(t)}),t),t.g={}}function Fa(){this.g=!0}function Ma(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ya(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Ra.prototype.M=function(){Ra.Z.M.call(this),Pa(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fa.prototype.Aa=function(){this.g=!1},Fa.prototype.info=function(){};var Va={},Ua=null;function ja(){return Ua=Ua||new pa}function qa(t){Gs.call(this,Va.Ma,t)}function Ba(t){var e=ja();da(e,new qa(e,t))}function Ka(t,e){Gs.call(this,Va.STAT_EVENT,t),this.stat=e}function za(t){var e=ja();da(e,new Ka(e,t))}function Ga(t,e){Gs.call(this,Va.Na,t),this.size=e}function Ha(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Jo.setTimeout((function(){t()}),e)}Va.Ma="serverreachability",us(qa,Gs),Va.STAT_EVENT="statevent",us(Ka,Gs),Va.Na="timingevent",us(Ga,Gs);var Qa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $a(){}function Ya(t){return t.h||(t.h=t.i())}function Xa(){}$a.prototype.h=null;var Ja,Za={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tu(){Gs.call(this,"d")}function eu(){Gs.call(this,"c")}function nu(){}function ru(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ra(this),this.P=ou,t=Rs?125:void 0,this.W=new Ca(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new iu}function iu(){this.i=null,this.g="",this.h=!1}us(tu,Gs),us(eu,Gs),us(nu,$a),nu.prototype.g=function(){return new XMLHttpRequest},nu.prototype.i=function(){return{}},Ja=new nu;var ou=45e3,su={},au={};function uu(t,e,n){t.K=1,t.v=ku(Su(e)),t.s=n,t.U=!0,cu(t,null)}function cu(t,e){t.F=Date.now(),pu(t),t.A=Su(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),zu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new iu,t.g=Gc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ka(ss(t.Ia,t,t.g),t.O)),La(t.V,t.g,"readystatechange",t.gb),e=t.H?Is(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ba(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function lu(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function hu(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=fu(t,n))==au){4==e&&(t.o=4,za(14),i=!1),Ma(t.j,t.m,null,"[Incomplete Response]");break}if(r==su){t.o=4,za(15),Ma(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Ma(t.j,t.m,r,null),mu(t,r)}lu(t)&&r!=au&&r!=su&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,za(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mc(e),e.L=!0,za(11))):(Ma(t.j,t.m,n,"[Invalid Chunked Response]"),gu(t),yu(t))}function fu(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?au:(n=Number(e.substring(n,r)),isNaN(n)?su:(r+=1)+n>e.length?au:(e=e.substr(r,n),t.C=r+n,e))}function pu(t){t.Y=Date.now()+t.P,du(t,t.P)}function du(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ha(ss(t.eb,t),e)}function vu(t){t.B&&(Jo.clearTimeout(t.B),t.B=null)}function yu(t){0==t.l.G||t.I||jc(t.l,t)}function gu(t){vu(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Na(t.W),Pa(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function mu(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Xu(n.i,t)))if(n.I=t.N,!t.J&&Xu(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Uc(n),Nc(n)}Fc(n),za(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ha(ss(n.ab,n),6e3));if(1>=Yu(n.i)&&n.ka){try{n.ka()}catch(y){}n.ka=void 0}}else Bc(n,11)}else if((t.J||n.g==t)&&Uc(n),!vs(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ms(l,"spdy")||ms(l,"quic")||ms(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ju(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,xu(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=zc(r,r.H?r.la:null,r.W),p.J){Zu(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(vu(d),pu(d)),r.g=p}else Pc(r);0<n.l.length&&kc(n)}else"stop"!=o[0]&&"close"!=o[0]||Bc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Bc(n,7):Cc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ba(4)}catch(y){}}function bu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ts(t)||"string"==typeof t)fs(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ts(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ts(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function wu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _u(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Eu(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Eu(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Eu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($o=ru.prototype).setTimeout=function(t){this.P=t},$o.gb=function(t){t=t.target;var e=this.L;e&&3==Ec(t)?e.l():this.Ia(t)},$o.Ia=function(t){try{if(t==this.g)t:{var e=Ec(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Rs||this.g&&(this.h.h||this.g.ga()||Ic(this.g)))){this.I||4!=e||7==n||Ba(8==n||0>=r?3:2),vu(this);var i=this.g.ba();this.N=i;e:if(lu(this)){var o=Ic(this.g);t="";var s=o.length,a=4==Ec(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){gu(this),yu(this);var u="";break e}this.h.i=new Jo.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vs(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,za(12),gu(this),yu(this);break t}Ma(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mu(this,i)}this.U?(hu(this,e,u),Rs&&this.i&&3==e&&(La(this.V,this.W,"tick",this.fb),this.W.start())):(Ma(this.j,this.m,u,null),mu(this,u)),4==e&&gu(this),this.i&&!this.I&&(4==e?jc(this.l,this):(this.i=!1,pu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,za(12)):(this.o=0,za(13)),gu(this),yu(this)}}}catch(f){}},$o.fb=function(){if(this.g){var t=Ec(this.g),e=this.g.ga();this.C<e.length&&(vu(this),hu(this,t,e),this.i&&4!=t&&pu(this))}},$o.cancel=function(){this.I=!0,gu(this)},$o.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ba(3),za(17)),gu(this),this.o=2,yu(this)):du(this,this.Y-t)},($o=wu.prototype).R=function(){_u(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},$o.T=function(){return _u(this),this.g.concat()},$o.get=function(t,e){return Eu(this.h,t)?this.h[t]:e},$o.set=function(t,e){Eu(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},$o.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Iu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tu(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Tu){this.g=void 0!==e?e:t.g,Au(this,t.j),this.s=t.s,Cu(this,t.i),Nu(this,t.m),this.l=t.l,e=t.h;var n=new ju;n.i=e.i,e.g&&(n.g=new wu(e.g),n.h=e.h),Du(this,n),this.o=t.o}else t&&(n=String(t).match(Iu))?(this.g=!!e,Au(this,n[1]||"",!0),this.s=Ru(n[2]||""),Cu(this,n[3]||"",!0),Nu(this,n[4]),this.l=Ru(n[5]||"",!0),Du(this,n[6]||"",!0),this.o=Ru(n[7]||"")):(this.g=!!e,this.h=new ju(null,this.g))}function Su(t){return new Tu(t)}function Au(t,e,n){t.j=n?Ru(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Cu(t,e,n){t.i=n?Ru(e,!0):e}function Nu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Du(t,e,n){e instanceof ju?(t.h=e,function(t,e){e&&!t.j&&(qu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Bu(this,e),zu(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Ou(e,Vu)),t.h=new ju(e,t.g))}function xu(t,e,n){t.h.set(e,n)}function ku(t){return xu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ru(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ou(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Lu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Lu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ou(e,Pu,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ou(e,Pu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ou(n,"/"==n.charAt(0)?Mu:Fu,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ou(n,Uu)),t.join("")};var Pu=/[#\/\?@]/g,Fu=/[#\?:]/g,Mu=/[#\?]/g,Vu=/[#\?@]/g,Uu=/#/g;function ju(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qu(t){t.g||(t.g=new wu,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Bu(t,e){qu(t),e=Gu(t,e),Eu(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Eu((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&_u(t)))}function Ku(t,e){return qu(t),e=Gu(t,e),Eu(t.g.h,e)}function zu(t,e,n){Bu(t,e),0<n.length&&(t.i=null,t.g.set(Gu(t,e),ds(n)),t.h+=n.length)}function Gu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}($o=ju.prototype).add=function(t,e){qu(this),this.i=null,t=Gu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},$o.forEach=function(t,e){qu(this),this.g.forEach((function(n,r){fs(n,(function(n){t.call(e,n,r,this)}),this)}),this)},$o.T=function(){qu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},$o.R=function(t){qu(this);var e=[];if("string"==typeof t)Ku(this,t)&&(e=ps(e,this.g.get(Gu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ps(e,t[n])}return e},$o.set=function(t,e){return qu(this),this.i=null,Ku(this,t=Gu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},$o.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},$o.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Hu=function(t,e){this.h=t,this.g=e};function Qu(t){this.l=t||Wu,Jo.PerformanceNavigationTiming?t=0<(t=Jo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Jo.g&&Jo.g.Ea&&Jo.g.Ea()&&Jo.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wu=10;function $u(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Yu(t){return t.h?1:t.g?t.g.size:0}function Xu(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ju(t,e){t.g?t.g.add(e):t.h=e}function Zu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function tc(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Wo(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ds(t.i)}function ec(){}function nc(){this.g=new ec}function rc(t,e,n){var r=n||"";try{bu(t,(function(t,n){var i=t;es(t)&&(i=ya(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(ow){throw e.push(r+"type="+encodeURIComponent("_badmap")),ow}}function ic(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function oc(t){this.l=t.$b||null,this.j=t.ib||!1}function sc(t,e){pa.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ac,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qu.prototype.cancel=function(){var t,e;if(this.i=tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Wo(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},ec.prototype.stringify=function(t){return Jo.JSON.stringify(t,void 0)},ec.prototype.parse=function(t){return Jo.JSON.parse(t,void 0)},us(oc,$a),oc.prototype.g=function(){return new sc(this.l,this.j)},oc.prototype.i=function(t){return function(){return t}}({}),us(sc,pa);var ac=0;function uc(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function cc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,lc(t)}function lc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}($o=sc.prototype).open=function(t,e){if(this.readyState!=ac)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,lc(this)},$o.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Jo).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},$o.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cc(this)),this.readyState=ac},$o.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,lc(this)),this.g&&(this.readyState=3,lc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Jo.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uc(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},$o.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?cc(this):lc(this),3==this.readyState&&uc(this)}},$o.Ua=function(t){this.g&&(this.response=this.responseText=t,cc(this))},$o.Ta=function(t){this.g&&(this.response=t,cc(this))},$o.ha=function(){this.g&&cc(this)},$o.setRequestHeader=function(t,e){this.v.append(t,e)},$o.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},$o.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var hc=Jo.JSON.parse;function fc(t){pa.call(this),this.headers=new wu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pc,this.K=this.L=!1}us(fc,pa);var pc="",dc=/^https?$/i,vc=["POST","PUT"];function yc(t){return"content-type"==t.toLowerCase()}function gc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,mc(t),wc(t)}function mc(t){t.D||(t.D=!0,da(t,"complete"),da(t,"error"))}function bc(t){if(t.h&&void 0!==Xo&&(!t.C[1]||4!=Ec(t)||2!=t.ba()))if(t.v&&4==Ec(t))Da(t.Fa,0,t);else if(da(t,"readystatechange"),4==Ec(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Iu)[1]||null;if(!o&&Jo.self&&Jo.self.location){var s=Jo.self.location.protocol;o=s.substr(0,s.length-1)}i=!dc.test(o?o.toLowerCase():"")}e=i}if(e)da(t,"complete"),da(t,"success");else{t.m=6;try{var a=2<Ec(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",mc(t)}}finally{wc(t)}}}function wc(t,e){if(t.g){_c(t);var n=t.g,r=t.C[0]?Zo:null;t.g=null,t.C=null,e||da(t,"ready");try{n.onreadystatechange=r}catch(ow){}}}function _c(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Jo.clearTimeout(t.A),t.A=null)}function Ec(t){return t.g?t.g.readyState:0}function Ic(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case pc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Es(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):xu(t,e,n))}function Sc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ac(t){this.za=0,this.l=[],this.h=new Fa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sc("baseRetryDelayMs",5e3,t),this.$a=Sc("retryDelaySeedMs",1e4,t),this.Ya=Sc("forwardChannelMaxRetries",2,t),this.ra=Sc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Qu(t&&t.concurrentRequestLimit),this.Ca=new nc,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Cc(t){if(Dc(t),3==t.G){var e=t.V++,n=Su(t.F);xu(n,"SID",t.J),xu(n,"RID",e),xu(n,"TYPE","terminate"),Oc(t,n),(e=new ru(t,t.h,e,void 0)).K=2,e.v=ku(Su(n)),n=!1,Jo.navigator&&Jo.navigator.sendBeacon&&(n=Jo.navigator.sendBeacon(e.v.toString(),"")),!n&&Jo.Image&&((new Image).src=e.v,n=!0),n||(e.g=Gc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),pu(e)}Kc(t)}function Nc(t){t.g&&(Mc(t),t.g.cancel(),t.g=null)}function Dc(t){Nc(t),t.u&&(Jo.clearTimeout(t.u),t.u=null),Uc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Jo.clearTimeout(t.m),t.m=null)}function xc(t,e){t.l.push(new Hu(t.Za++,e)),3==t.G&&kc(t)}function kc(t){$u(t.i)||t.m||(t.m=!0,Ia(t.Ha,t),t.C=0)}function Rc(t,e){var n;n=e?e.m:t.V++;var r=Su(t.F);xu(r,"SID",t.J),xu(r,"RID",n),xu(r,"AID",t.U),Oc(t,r),t.o&&t.s&&Tc(r,t.o,t.s),n=new ru(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Lc(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ju(t.i,n),uu(n,r,e)}function Oc(t,e){t.j&&bu({},(function(t,n){xu(e,n,t)}))}function Lc(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ss(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{rc(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Pc(t){t.g||t.u||(t.Y=1,Ia(t.Ga,t),t.A=0)}function Fc(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Ha(ss(t.Ga,t),qc(t,t.A)),t.A++,!0)}function Mc(t){null!=t.B&&(Jo.clearTimeout(t.B),t.B=null)}function Vc(t){t.g=new ru(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Su(t.oa);xu(e,"RID","rpc"),xu(e,"SID",t.J),xu(e,"CI",t.N?"0":"1"),xu(e,"AID",t.U),Oc(t,e),xu(e,"TYPE","xmlhttp"),t.o&&t.s&&Tc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ku(Su(e)),n.s=null,n.U=!0,cu(n,t)}function Uc(t){null!=t.v&&(Jo.clearTimeout(t.v),t.v=null)}function jc(t,e){var n=null;if(t.g==e){Uc(t),Mc(t),t.g=null;var r=2}else{if(!Xu(t.i,e))return;n=e.D,Zu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;da(r=ja(),new Ga(r,n,e,i)),kc(t)}else Pc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Yu(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ha(ss(t.Ha,t,e),qc(t,t.C)),t.C++,0)))}(t,e)||2==r&&Fc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Bc(t,5);break;case 4:Bc(t,10);break;case 3:Bc(t,6);break;default:Bc(t,2)}}function qc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Bc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ss(t.jb,t);n||(n=new Tu("//www.google.com/images/cleardot.gif"),Jo.location&&"http"==Jo.location.protocol||Au(n,"https"),ku(n)),function(t,e){var n=new Fa;if(Jo.Image){var r=new Image;r.onload=as(ic,n,r,"TestLoadImage: loaded",!0,e),r.onerror=as(ic,n,r,"TestLoadImage: error",!1,e),r.onabort=as(ic,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=as(ic,n,r,"TestLoadImage: timeout",!1,e),Jo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else za(2);t.G=0,t.j&&t.j.va(e),Kc(t),Dc(t)}function Kc(t){t.G=0,t.I=-1,t.j&&(0==tc(t.i).length&&0==t.l.length||(t.i.i.length=0,ds(t.l),t.l.length=0),t.j.ua())}function zc(t,e,n){var r=function(t){return t instanceof Tu?Su(t):new Tu(t,void 0)}(n);if(""!=r.i)e&&Cu(r,e+"."+r.i),Nu(r,r.m);else{var i=Jo.location;r=function(t,e,n,r){var i=new Tu(null,void 0);return t&&Au(i,t),e&&Cu(i,e),n&&Nu(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Es(t.aa,(function(t,e){xu(r,e,t)})),e=t.D,n=t.sa,e&&n&&xu(r,e,n),xu(r,"VER",t.ma),Oc(t,r),r}function Gc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new fc(new oc({ib:!0})):new fc(t.qa)).L=t.H,e}function Hc(){}function Qc(){if(xs&&!(10<=Number(Ks)))throw Error("Environmental error: no available transport.")}function Wc(t,e){pa.call(this),this.g=new Ac(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!vs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vs(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Xc(this)}function $c(t){tu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Yc(){eu.call(this),this.status=1}function Xc(t){this.g=t}($o=fc.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ja.g(),this.C=this.u?Ya(this.u):Ya(Ja),this.g.onreadystatechange=ss(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void gc(this,o)}t=n||"";var i=new wu(this.headers);r&&bu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Jo.FormData&&t instanceof Jo.FormData,!(0<=hs(vc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_c(this),0<this.B&&((this.K=function(t){return xs&&qs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ss(this.pa,this)):this.A=Da(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){gc(this,o)}},$o.pa=function(){void 0!==Xo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,da(this,"timeout"),this.abort(8))},$o.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,da(this,"complete"),da(this,"abort"),wc(this))},$o.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wc(this,!0)),fc.Z.M.call(this)},$o.Fa=function(){this.s||(this.F||this.v||this.l?bc(this):this.cb())},$o.cb=function(){bc(this)},$o.ba=function(){try{return 2<Ec(this)?this.g.status:-1}catch(Ns){return-1}},$o.ga=function(){try{return this.g?this.g.responseText:""}catch(Ns){return""}},$o.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hc(e)}},$o.Da=function(){return this.m},$o.La=function(){return"string"==typeof this.j?this.j:String(this.j)},($o=Ac.prototype).ma=8,$o.G=1,$o.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},$o.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ru(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Ss(n=Is(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Lc(this,e,r),xu(i=Su(this.F),"RID",t),xu(i,"CVER",22),this.D&&xu(i,"X-HTTP-Session-Id",this.D),Oc(this,i),this.o&&n&&Tc(i,this.o,n),Ju(this.i,e),this.Ra&&xu(i,"TYPE","init"),this.ja?(xu(i,"$req",r),xu(i,"SID","null"),e.$=!0,uu(e,i,null)):uu(e,i,r),this.G=2}}else 3==this.G&&(t?Rc(this,t):0==this.l.length||$u(this.i)||Rc(this))},$o.Ga=function(){if(this.u=null,Vc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ha(ss(this.bb,this),t)}},$o.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,za(10),Nc(this),Vc(this))},$o.ab=function(){null!=this.v&&(this.v=null,Nc(this),Fc(this),za(19))},$o.jb=function(t){t?(this.h.info("Successfully pinged google.com"),za(2)):(this.h.info("Failed to ping google.com"),za(1))},($o=Hc.prototype).xa=function(){},$o.wa=function(){},$o.va=function(){},$o.ua=function(){},$o.Oa=function(){},Qc.prototype.g=function(t,e){return new Wc(t,e)},us(Wc,pa),Wc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ia(ss(t.hb,t,e))),za(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=zc(t,null,t.W),kc(t)},Wc.prototype.close=function(){Cc(this.g)},Wc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,xc(this.g,e)}else this.v?((e={}).__data__=ya(t),xc(this.g,e)):xc(this.g,t)},Wc.prototype.M=function(){this.g.j=null,delete this.j,Cc(this.g),delete this.g,Wc.Z.M.call(this)},us($c,tu),us(Yc,eu),us(Xc,Hc),Xc.prototype.xa=function(){da(this.g,"a")},Xc.prototype.wa=function(t){da(this.g,new $c(t))},Xc.prototype.va=function(t){da(this.g,new Yc(t))},Xc.prototype.ua=function(){da(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,Wc.prototype.send=Wc.prototype.u,Wc.prototype.open=Wc.prototype.m,Wc.prototype.close=Wc.prototype.close,Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Wa.COMPLETE="complete",Xa.EventType=Za,Za.OPEN="a",Za.CLOSE="b",Za.ERROR="c",Za.MESSAGE="d",pa.prototype.listen=pa.prototype.N,fc.prototype.listenOnce=fc.prototype.O,fc.prototype.getLastError=fc.prototype.La,fc.prototype.getLastErrorCode=fc.prototype.Da,fc.prototype.getStatus=fc.prototype.ba,fc.prototype.getResponseJson=fc.prototype.Qa,fc.prototype.getResponseText=fc.prototype.ga,fc.prototype.send=fc.prototype.ea;var Jc=Qa,Zc=Wa,tl=Va,el=10,nl=11,rl=oc,il=Xa,ol=fc,sl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();sl.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var al={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ul=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Yi(e,t),e}(Error),cl=new ko("@firebase/firestore");function ll(){return cl.logLevel}function hl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(cl.logLevel<=Io.DEBUG){var r=e.map(dl);cl.debug.apply(cl,no(["Firestore (8.8.1): "+t],r))}}function fl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(cl.logLevel<=Io.ERROR){var r=e.map(dl);cl.error.apply(cl,no(["Firestore (8.8.1): "+t],r))}}function pl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(cl.logLevel<=Io.WARN){var r=e.map(dl);cl.warn.apply(cl,no(["Firestore (8.8.1): "+t],r))}}function dl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw fl(e),new Error(e)}function yl(t,e){t||vl()}function gl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ml(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function wl(t,e){return t<e?-1:t>e?1:0}function _l(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function El(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Il=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ul(al.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ul(al.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ul(al.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ul(al.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?wl(this.nanoseconds,t.nanoseconds):wl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Tl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Il(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Al(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&vl(),void 0===n?n=t.length-e:n>t.length-e&&vl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ul(al.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Nl),xl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return xl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ul(al.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ul(al.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ul(al.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ul(al.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Nl),Rl=function(){function t(t){this.fields=t,t.sort(kl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return _l(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ol=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return wl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ol.EMPTY_BYTE_STRING=new Ol("");var Ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pl(t){if(yl(!!t),"string"==typeof t){var e=0,n=Ll.exec(t);if(yl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fl(t.seconds),nanos:Fl(t.nanos)}}function Fl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ml(t){return"string"==typeof t?Ol.fromBase64String(t):Ol.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ul(t){var e=t.mapValue.fields.__previous_value__;return Vl(e)?Ul(e):e}function jl(t){var e=Pl(t.mapValue.fields.__local_write_time__.timestampValue);return new Il(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return null==t}function Bl(t){return 0===t&&1/t==-1/0}function Kl(t){return"number"==typeof t&&Number.isInteger(t)&&!Bl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Dl.fromString(e))},t.fromName=function(e){return new t(Dl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Dl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Dl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Dl(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vl(t)?4:10:vl()}function Hl(t,e){var n,r=Gl(t);if(r!==Gl(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Pl(t.timestampValue),r=Pl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Ml(t.bytesValue).isEqual(Ml(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Fl(t.geoPointValue.latitude)===Fl(e.geoPointValue.latitude)&&Fl(t.geoPointValue.longitude)===Fl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fl(t.integerValue)===Fl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Fl(t.doubleValue),r=Fl(e.doubleValue);return n===r?Bl(n)===Bl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _l(t.arrayValue.values||[],e.arrayValue.values||[],Hl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Sl(n)!==Sl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hl(n[i],r[i])))return!1;return!0}(t,e);default:return vl()}}function Ql(t,e){return void 0!==(t.values||[]).find((function(t){return Hl(t,e)}))}function Wl(t,e){var n,r,i,o,s=Gl(t),a=Gl(e);if(s!==a)return wl(s,a);switch(s){case 0:return 0;case 1:return wl(t.booleanValue,e.booleanValue);case 2:return r=e,i=Fl((n=t).integerValue||n.doubleValue),o=Fl(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return $l(t.timestampValue,e.timestampValue);case 4:return $l(jl(t),jl(e));case 5:return wl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ml(t),r=Ml(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=wl(n[i],r[i]);if(0!==o)return o}return wl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=wl(Fl(t.latitude),Fl(e.latitude));return 0!==n?n:wl(Fl(t.longitude),Fl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Wl(n[i],r[i]);if(o)return o}return wl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=wl(r[s],o[s]);if(0!==a)return a;var u=Wl(n[r[s]],i[o[s]]);if(0!==u)return u}return wl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw vl()}}function $l(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return wl(t,e);var n=Pl(t),r=Pl(e),i=wl(n.seconds,r.seconds);return 0!==i?i:wl(n.nanos,r.nanos)}function Yl(t){return Xl(t)}function Xl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Pl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Ml(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,zl.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Xl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Xl(t.fields[o])}return e+"}"}(t.mapValue):vl();var e,n,r,i}function Jl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Zl(t){return!!t&&"integerValue"in t}function th(t){return!!t&&"arrayValue"in t}function eh(t){return!!t&&"nullValue"in t}function nh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rh(t){return!!t&&"mapValue"in t}function ih(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Al(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ih(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ih(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!rh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ih(e)},t.prototype.setAll=function(t){var e=this,n=kl.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ih(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());rh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Hl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];rh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Al(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ih(this.value))},t}();function sh(t){var e=[];return Al(t.fields,(function(t,n){var r=new kl([t]);if(rh(n)){var i=sh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Rl(e)}var ah=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Tl.min(),oh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,oh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,oh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=oh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=oh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),uh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new uh(t,e,n,r,i,o,s)}function lh(t){var e=gl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Yl(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),ql(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ih(e.startAt)),e.endAt&&(n+="|ub:",n+=Ih(e.endAt)),e.h=n}return e.h}function hh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Sh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Hl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ch(t.startAt,e.startAt)&&Ch(t.endAt,e.endAt)}function fh(t){return zl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Yi(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new dh(t,n,r):"array-contains"===n?new mh(t,r):"in"===n?new bh(t,r):"not-in"===n?new wh(t,r):"array-contains-any"===n?new _h(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new vh(t,n):new yh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Wl(e,this.value)):null!==e&&Gl(this.value)===Gl(e)&&this.m(Wl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return vl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),dh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=zl.fromName(r.referenceValue),i}return Yi(e,t),e.prototype.matches=function(t){var e=zl.comparator(t.key,this.key);return this.m(e)},e}(ph),vh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=gh("in",n),r}return Yi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ph),yh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=gh("not-in",n),r}return Yi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ph);function gh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return zl.fromName(t.referenceValue)}))}var mh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Yi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return th(e)&&Ql(e.arrayValue,this.value)},e}(ph),bh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Yi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ql(this.value.arrayValue,e)},e}(ph),wh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Yi(e,t),e.prototype.matches=function(t){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ql(this.value.arrayValue,e)},e}(ph),_h=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Yi(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!th(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ql(e.value.arrayValue,t)}))},e}(ph),Eh=function(t,e){this.position=t,this.before=e};function Ih(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Yl(t)})).join(",")}var Th=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Sh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ah(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?zl.comparator(zl.fromName(s.referenceValue),n.key):Wl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ch(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Hl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Dh(t,e,n,r,i,o,s,a){return new Nh(t,e,n,r,i,o,s,a)}function xh(t){return new Nh(t)}function kh(t){return!ql(t.limit)&&"F"===t.limitType}function Rh(t){return!ql(t.limit)&&"L"===t.limitType}function Oh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ph(t){return null!==t.collectionGroup}function Fh(t){var e=gl(t);if(null===e.p){e.p=[];var n=Lh(e),r=Oh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Th(n)),e.p.push(new Th(kl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Th(kl.keyField(),u))}}}return e.p}function Mh(t){var e=gl(t);if(!e.T)if("F"===e.limitType)e.T=ch(e.path,e.collectionGroup,Fh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Fh(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Th(o.field,s))}var a=e.endAt?new Eh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Eh(e.startAt.position,!e.startAt.before):null;e.T=ch(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Vh(t,e,n){return new Nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return hh(Mh(t),Mh(e))&&t.limitType===e.limitType}function jh(t){return lh(Mh(t))+"|lt:"+t.limitType}function qh(t){return"Query(target="+(e=Mh(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Yl(e.value);var e})).join(", ")+"]"),ql(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ih(e.startAt)),e.endAt&&(n+=", endAt: "+Ih(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Bh(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):zl.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ah(t.startAt,Fh(t),e)||t.endAt&&Ah(t.endAt,Fh(t),e))}(t,e);var n,r,i}function Kh(t){return function(e,n){for(var r=!1,i=0,o=Fh(t);i<o.length;i++){var s=o[i],a=zh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function zh(t,e,n){var r,i,o,s,a=t.field.isKeyField()?zl.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?Wl(o,s):vl());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return vl()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function Hh(t){return{integerValue:""+t}}function Qh(t,e){return Kl(e)?Hh(e):Gh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wh=function(){this._=void 0};function $h(t,e,n){return t instanceof Jh?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Zh?tf(t,e):t instanceof ef?nf(t,e):function(t,e){var n=Xh(t,e),r=of(n)+of(t.A);return Zl(n)&&Zl(t.A)?Hh(r):Gh(t.R,r)}(t,e);var r,i,o}function Yh(t,e,n){return t instanceof Zh?tf(t,e):t instanceof ef?nf(t,e):n}function Xh(t,e){return t instanceof rf?Zl(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e}(Wh),Zh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Yi(e,t),e}(Wh);function tf(t,e){for(var n=sf(e),r=function(t){n.some((function(e){return Hl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ef=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Yi(e,t),e}(Wh);function nf(t,e){for(var n=sf(e),r=function(t){n=n.filter((function(e){return!Hl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Yi(e,t),e}(Wh);function of(t){return Fl(t.integerValue||t.doubleValue)}function sf(t){return th(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var af=function(t,e){this.field=t,this.transform=e},uf=function(t,e){this.version=t,this.transformResults=e},cf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function lf(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var hf=function(){};function ff(t,e,n){var r,i,o,s,a;t instanceof gf?(i=e,o=n,s=(r=t).value.clone(),a=wf(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof mf?function(t,e,n){if(lf(t.precondition,e)){var r=wf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(bf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function pf(t,e,n){var r;t instanceof gf?function(t,e,n){if(lf(t.precondition,e)){var r=t.value.clone(),i=_f(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(yf(e),r).setHasLocalMutations()}}(t,e,n):t instanceof mf?function(t,e,n){if(lf(t.precondition,e)){var r=_f(t.fieldTransforms,n,e),i=e.data;i.setAll(bf(t)),i.setAll(r),e.convertToFoundDocument(yf(e),i).setHasLocalMutations()}}(t,e,n):(r=e,lf(t.precondition,r)&&r.convertToNoDocument(Tl.min()))}function df(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Xh(o.transform,s||null);null!=a&&(null==n&&(n=oh.empty()),n.set(o.field,a))}return n||null}function vf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&_l(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Zh&&o instanceof Zh||i instanceof ef&&o instanceof ef?_l(i.elements,o.elements,Hl):i instanceof rf&&o instanceof rf?Hl(i.A,o.A):i instanceof Jh&&o instanceof Jh);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function yf(t){return t.isFoundDocument()?t.version:Tl.min()}var gf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Yi(e,t),e}(hf),mf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Yi(e,t),e}(hf);function bf(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function wf(t,e,n){var r=new Map;yl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Yh(s,a,n[i]))}return r}function _f(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,$h(a,u,e))}return r}var Ef,If,Tf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Yi(e,t),e}(hf),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Yi(e,t),e}(hf),Af=function(t){this.count=t};function Cf(t){switch(t){case al.OK:return vl();case al.CANCELLED:case al.UNKNOWN:case al.DEADLINE_EXCEEDED:case al.RESOURCE_EXHAUSTED:case al.INTERNAL:case al.UNAVAILABLE:case al.UNAUTHENTICATED:return!1;case al.INVALID_ARGUMENT:case al.NOT_FOUND:case al.ALREADY_EXISTS:case al.PERMISSION_DENIED:case al.FAILED_PRECONDITION:case al.ABORTED:case al.OUT_OF_RANGE:case al.UNIMPLEMENTED:case al.DATA_LOSS:return!0;default:return vl()}}function Nf(t){if(void 0===t)return fl("GRPC error has no .code"),al.UNKNOWN;switch(t){case Ef.OK:return al.OK;case Ef.CANCELLED:return al.CANCELLED;case Ef.UNKNOWN:return al.UNKNOWN;case Ef.DEADLINE_EXCEEDED:return al.DEADLINE_EXCEEDED;case Ef.RESOURCE_EXHAUSTED:return al.RESOURCE_EXHAUSTED;case Ef.INTERNAL:return al.INTERNAL;case Ef.UNAVAILABLE:return al.UNAVAILABLE;case Ef.UNAUTHENTICATED:return al.UNAUTHENTICATED;case Ef.INVALID_ARGUMENT:return al.INVALID_ARGUMENT;case Ef.NOT_FOUND:return al.NOT_FOUND;case Ef.ALREADY_EXISTS:return al.ALREADY_EXISTS;case Ef.PERMISSION_DENIED:return al.PERMISSION_DENIED;case Ef.FAILED_PRECONDITION:return al.FAILED_PRECONDITION;case Ef.ABORTED:return al.ABORTED;case Ef.OUT_OF_RANGE:return al.OUT_OF_RANGE;case Ef.UNIMPLEMENTED:return al.UNIMPLEMENTED;case Ef.DATA_LOSS:return al.DATA_LOSS;default:return vl()}}(If=Ef||(Ef={}))[If.OK=0]="OK",If[If.CANCELLED=1]="CANCELLED",If[If.UNKNOWN=2]="UNKNOWN",If[If.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",If[If.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",If[If.NOT_FOUND=5]="NOT_FOUND",If[If.ALREADY_EXISTS=6]="ALREADY_EXISTS",If[If.PERMISSION_DENIED=7]="PERMISSION_DENIED",If[If.UNAUTHENTICATED=16]="UNAUTHENTICATED",If[If.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",If[If.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",If[If.ABORTED=10]="ABORTED",If[If.OUT_OF_RANGE=11]="OUT_OF_RANGE",If[If.UNIMPLEMENTED=12]="UNIMPLEMENTED",If[If.INTERNAL=13]="INTERNAL",If[If.UNAVAILABLE=14]="UNAVAILABLE",If[If.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Df=function(){function t(t,e){this.comparator=t,this.root=e||kf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new xf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new xf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new xf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new xf(this.root,t,this.comparator,!0)},t}(),xf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),kf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw vl();if(this.right.isRed())throw vl();var t=this.left.check();if(t!==this.right.check())throw vl();return t+(this.isRed()?0:1)},t}();kf.EMPTY=null,kf.RED=!0,kf.BLACK=!1,kf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw vl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw vl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new kf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rf=function(){function t(t){this.comparator=t,this.data=new Df(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Of(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Of(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Of=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Lf=new Df(zl.comparator);function Pf(){return Lf}var Ff=new Df(zl.comparator);function Mf(){return Ff}var Vf=new Df(zl.comparator);var Uf=new Rf(zl.comparator);function jf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Uf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var qf=new Rf(wl);function Bf(){return qf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Tl.min(),r,Bf(),Pf(),jf())},t}(),zf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ol.EMPTY_BYTE_STRING,n,jf(),jf(),jf())},t}(),Gf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Hf=function(t,e){this.targetId=t,this.V=e},Qf=function(t,e,n,r){void 0===n&&(n=Ol.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wf=function(){function t(){this.S=0,this.D=Xf(),this.C=Ol.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=jf(),e=jf(),n=jf();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:vl()}})),new zf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Xf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),$f=function(){function t(t){this.W=t,this.G=new Map,this.H=Pf(),this.J=Yf(),this.Y=new Rf(wl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:vl()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(fh(i))if(0===n){var o=new zl(i.path);this.tt(e,o,ah.newNoDocument(o,Tl.min()))}else yl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&fh(o.target)){var s=new zl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ah.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=jf();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Kf(t,n,this.Y,this.H,r);return this.H=Pf(),this.J=Yf(),this.Y=new Rf(wl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Wf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Rf(wl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||hl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Wf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Yf(){return new Df(zl.comparator)}function Xf(){return new Df(zl.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jf={asc:"ASCENDING",desc:"DESCENDING"},Zf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tp=function(t,e){this.databaseId=t,this.I=e};function ep(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function np(t,e){return t.I?e.toBase64():e.toUint8Array()}function rp(t,e){return ep(t,e.toTimestamp())}function ip(t){return yl(!!t),Tl.fromTimestamp((e=Pl(t),new Il(e.seconds,e.nanos)));var e}function op(t,e){return(n=t,new Dl(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function sp(t){var e=Dl.fromString(t);return yl(Dp(e)),e}function ap(t,e){return op(t.databaseId,e.path)}function up(t,e){var n=sp(e);if(n.get(1)!==t.databaseId.projectId)throw new ul(al.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ul(al.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new zl(fp(n))}function cp(t,e){return op(t.databaseId,e)}function lp(t){var e=sp(t);return 4===e.length?Dl.emptyPath():fp(e)}function hp(t){return new Dl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fp(t){return yl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function pp(t,e,n){return{name:ap(t,e),fields:n.value.mapValue.fields}}function dp(t,e){var n,r,i;if(e instanceof gf)n={update:pp(t,e.key,e.value)};else if(e instanceof Tf)n={delete:ap(t,e.key)};else if(e instanceof mf)n={update:pp(t,e.key,e.data),updateMask:Np(e.fieldMask)};else{if(!(e instanceof Sf))return vl();n={verify:ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Jh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ef)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rf)return{fieldPath:e.field.canonicalString(),increment:n.A};throw vl()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:rp(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:vl())),n}function vp(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?cf.updateTime(ip(n.updateTime)):void 0!==n.exists?cf.exists(n.exists):cf.none():cf.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)yl("REQUEST_TIME"===e.setToServerValue),n=new Jh;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Zh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ef(i)}else"increment"in e?n=new rf(t,e.increment):vl();var o=kl.fromServerFormat(e.fieldPath);return new af(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=up(t,e.update.name),s=new oh({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Rl(e.map((function(t){return kl.fromServerFormat(t)})))}(e.updateMask);return new mf(o,s,a,r,i)}return new gf(o,s,r,i)}if(e.delete){var u=up(t,e.delete);return new Tf(u,r)}if(e.verify){var c=up(t,e.verify);return new Sf(c,r)}return vl()}function yp(t,e){return{documents:[cp(t,e.path)]}}function gp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=cp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(nh(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NAN"}};if(eh(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(nh(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NOT_NAN"}};if(eh(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tp(t.field),op:Ip(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Tp((e=t).field),direction:Ep(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||ql(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=wp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wp(e.endAt)),n}function mp(t){var e=lp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=bp(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Th(Sp((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=ql(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=_p(n.startAt));var f=null;return n.endAt&&(f=_p(n.endAt)),Dh(e,i,a,s,l,"F",h,f)}function bp(t){return t?void 0!==t.unaryFilter?[Cp(t)]:void 0!==t.fieldFilter?[Ap(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return bp(t)})).reduce((function(t,e){return t.concat(e)})):vl():[]}function wp(t){return{before:t.before,values:t.position}}function _p(t){var e=!!t.before,n=t.values||[];return new Eh(n,e)}function Ep(t){return Jf[t]}function Ip(t){return Zf[t]}function Tp(t){return{fieldPath:t.canonicalString()}}function Sp(t){return kl.fromServerFormat(t.fieldPath)}function Ap(t){return ph.create(Sp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vl()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Sp(t.unaryFilter.field);return ph.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Sp(t.unaryFilter.field);return ph.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sp(t.unaryFilter.field);return ph.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sp(t.unaryFilter.field);return ph.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vl()}}function Np(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Dp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Rp(e)),e=kp(t.get(n),e);return Rp(e)}function kp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Rp(t){return t+""}function Op(t){var e=t.length;if(yl(e>=2),2===e)return yl(""===t.charAt(0)&&""===t.charAt(1)),Dl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&vl(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:vl()}o=s+2}return new Dl(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lp=function(t,e){this.seconds=t,this.nanoseconds=e},Pp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Pp.store="owner",Pp.key="owner";var Fp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fp.store="mutationQueues",Fp.keyPath="userId";var Mp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Mp.store="mutations",Mp.keyPath="batchId",Mp.userMutationsIndex="userMutationsIndex",Mp.userMutationsKeyPath=["userId","batchId"];var Vp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,xp(e)]},t.key=function(t,e,n){return[t,xp(e),n]},t}();Vp.store="documentMutations",Vp.PLACEHOLDER=new Vp;var Up=function(t,e){this.path=t,this.readTime=e},jp=function(t,e){this.path=t,this.version=e},qp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qp.store="remoteDocuments",qp.readTimeIndex="readTimeIndex",qp.readTimeIndexPath="readTime",qp.collectionReadTimeIndex="collectionReadTimeIndex",qp.collectionReadTimeIndexPath=["parentPath","readTime"];var Bp=function(t){this.byteSize=t};Bp.store="remoteDocumentGlobal",Bp.key="remoteDocumentGlobalKey";var Kp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Kp.store="targets",Kp.keyPath="targetId",Kp.queryTargetsIndexName="queryTargetsIndex",Kp.queryTargetsKeyPath=["canonicalId","targetId"];var zp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};zp.store="targetDocuments",zp.keyPath=["targetId","path"],zp.documentTargetsIndex="documentTargetsIndex",zp.documentTargetsKeyPath=["path","targetId"];var Gp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Gp.key="targetGlobalKey",Gp.store="targetGlobal";var Hp=function(t,e){this.collectionId=t,this.parent=e};Hp.store="collectionParents",Hp.keyPath=["collectionId","parent"];var Qp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Qp.store="clientMetadata",Qp.keyPath="clientId";var Wp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Wp.store="bundles",Wp.keyPath="bundleId";var $p=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};$p.store="namedQueries",$p.keyPath="name";var Yp=no(no([],no(no([],no(no([],no(no([],[Fp.store,Mp.store,Vp.store,qp.store,Kp.store,Pp.store,Gp.store,zp.store]),[Qp.store])),[Bp.store])),[Hp.store])),[Wp.store,$p.store]),Xp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Zp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},td=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ed=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Zp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new id(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=cd(e.target.error);n.ft.reject(new id(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new id(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(hl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new sd(e)},t}(),nd=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(so())&&fl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return hl("SimpleDb","Removing database:",t),ad(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=so(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Ji(this,void 0,void 0,(function(){var e,n=this;return Zi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(hl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new id(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ul(al.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new id(t,n))},i.onupgradeneeded=function(t){hl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){hl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Ji(this,void 0,void 0,(function(){var i,o,s,a,u;return Zi(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Zi(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=ed.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),td.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,hl("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),rd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ad(this.Pt.delete())},t}(),id=function(t){function e(e,n){var r=this;return(r=t.call(this,al.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Yi(e,t),e}(ul);function od(t){return"IndexedDbTransactionError"===t.name}var sd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(hl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(hl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ad(n)},t.prototype.add=function(t){return hl("SimpleDb","ADD",this.store.name,t,t),ad(this.store.add(t))},t.prototype.get=function(t){var e=this;return ad(this.store.get(t)).next((function(n){return void 0===n&&(n=null),hl("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return hl("SimpleDb","DELETE",this.store.name,t),ad(this.store.delete(t))},t.prototype.count=function(){return hl("SimpleDb","COUNT",this.store.name),ad(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){hl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new td((function(n,r){e.onerror=function(t){var e=cd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new td((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new rd(i),s=e(i.primaryKey,i.value,o);if(s instanceof td){var a=s.catch((function(t){return o.done(),td.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return td.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ad(t){return new td((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=cd(t.target.error);n(e)}}))}var ud=!1;function cd(t){var e=nd._t(so());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ul("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ud||(ud=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ld=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Yi(e,t),e}(Jp);function hd(t,e){var n=gl(t);return nd.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ff(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&pf(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&pf(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Tl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),jf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_l(this.mutations,t.mutations,(function(t,e){return vf(t,e)}))&&_l(this.baseMutations,t.baseMutations,(function(t,e){return vf(t,e)}))},t}(),pd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){yl(e.mutations.length===r.length);for(var i=Vf,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),dd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Tl.min()),void 0===o&&(o=Tl.min()),void 0===s&&(s=Ol.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vd=function(t){this.Lt=t};function yd(t,e){if(e.document)return function(t,e,n){var r=up(t,e.name),i=ip(e.updateTime),o=new oh({mapValue:{fields:e.fields}}),s=ah.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=zl.fromSegments(e.noDocument.path),r=_d(e.noDocument.readTime),i=ah.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=zl.fromSegments(e.unknownDocument.path);return r=_d(e.unknownDocument.version),ah.newUnknownDocument(o,r)}return vl()}function gd(t,e,n){var r,i,o=md(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:ap(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:ep(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new qp(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=wd(e.version);return u=e.hasCommittedMutations,new qp(null,new Up(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=wd(e.version);return new qp(new jp(h,f),null,null,!0,o,s)}return vl()}function md(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bd(t){var e=new Il(t[0],t[1]);return Tl.fromTimestamp(e)}function wd(t){var e=t.toTimestamp();return new Lp(e.seconds,e.nanoseconds)}function _d(t){var e=new Il(t.seconds,t.nanoseconds);return Tl.fromTimestamp(e)}function Ed(t,e){for(var n=(e.baseMutations||[]).map((function(e){return vp(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return vp(t.Lt,e)})),a=Il.fromMillis(e.localWriteTimeMs);return new fd(e.batchId,a,n,s)}function Id(t){var e,n,r=_d(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_d(t.lastLimboFreeSnapshotVersion):Tl.min();return void 0!==t.query.documents?(yl(1===(n=t.query).documents.length),e=Mh(xh(lp(n.documents[0])))):e=Mh(mp(t.query)),new dd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ol.fromBase64String(t.resumeToken))}function Td(t,e){var n,r=wd(e.snapshotVersion),i=wd(e.lastLimboFreeSnapshotVersion);n=fh(e.target)?yp(t.Lt,e.target):gp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Kp(e.targetId,lh(e.target),r,o,e.sequenceNumber,i,n)}function Sd(t){var e=mp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vh(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ad=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Cd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:_d(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Cd(t).put({bundleId:(n=e).id,createTime:wd(ip(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Nd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Sd(e.bundledQuery),readTime:_d(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Nd(t).put({name:(n=e).name,readTime:wd(ip(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function Cd(t){return hd(t,Wp.store)}function Nd(t){return hd(t,$p.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd=function(){function t(){this.Bt=new xd}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),td.resolve()},t.prototype.getCollectionParents=function(t,e){return td.resolve(this.Bt.getEntries(e))},t}(),xd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Rf(Dl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Rf(Dl.comparator)).toArray()},t}(),kd=function(){function t(){this.qt=new xd}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:xp(i)};return Rd(t).put(o)}return td.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[El(e),""],!1,!0);return Rd(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Op(o.parent))}return n}))},t}();function Rd(t){return hd(t,Hp.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ld=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e,n){var r=t.store(Mp.store),i=t.store(Vp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){yl(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Vp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return td.waitFor(o).next((function(){return c}))}function Fd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vl();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ld.DEFAULT_COLLECTION_PERCENTILE=10,Ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ld.DEFAULT=new Ld(41943040,Ld.DEFAULT_COLLECTION_PERCENTILE,Ld.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ld.DISABLED=new Ld(-1,0,0);var Md=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return yl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ud(t).$t({index:Mp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=jd(t),s=Ud(t);return s.add({}).next((function(a){yl("number"==typeof a);for(var u=new fd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return dp(t.Lt,e)})),i=n.mutations.map((function(e){return dp(t.Lt,e)}));return new Mp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Rf((function(t,e){return wl(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Vp.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,Vp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),td.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ud(t).get(e).next((function(t){return t?(yl(t.userId===n.userId),Ed(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?td.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ud(t).$t({index:Mp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(yl(e.batchId>=r),o=Ed(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ud(t).$t({index:Mp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ud(t).Nt(Mp.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ed(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Vp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return jd(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Op(u);if(a===n.userId&&e.path.isEqual(l))return Ud(t).get(c).next((function(t){if(!t)throw vl();yl(t.userId===n.userId),o.push(Ed(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Rf(wl),i=[];return e.forEach((function(e){var o=Vp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=jd(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Op(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),td.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Vp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Rf(wl);return jd(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Op(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ud(t).get(e).next((function(t){if(null===t)throw vl();yl(t.userId===n.userId),r.push(Ed(n.R,t))})))})),td.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Pd(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),td.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return td.resolve();var r=IDBKeyRange.lowerBound(Vp.prefixForUser(e.userId)),i=[];return jd(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Op(t[1]);i.push(o)}else r.done()})).next((function(){yl(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Vd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return qd(t).get(this.userId).next((function(t){return t||new Fp(e.userId,-1,"")}))},t}();function Vd(t,e,n){var r=Vp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return jd(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Ud(t){return hd(t,Mp.store)}function jd(t){return hd(t,Vp.store)}function qd(t){return hd(t,Fp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Kd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Bd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Tl.fromTimestamp(new Il(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return zd(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return yl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return zd(t).$t((function(s,a){var u=Id(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return td.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return zd(t).$t((function(t,n){var r=Id(n);e(r)}))},t.prototype.Xt=function(t){return Gd(t).get(Gp.key).next((function(t){return yl(null!==t),t}))},t.prototype.Zt=function(t,e){return Gd(t).put(Gp.key,e)},t.prototype.te=function(t,e){return zd(t).put(Td(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=lh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zd(t).$t({range:r,index:Kp.queryTargetsIndexName},(function(t,n,r){var o=Id(n);hh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Hd(t);return e.forEach((function(e){var s=xp(e.path);i.push(o.put(new zp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),td.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Hd(t);return td.forEach(e,(function(e){var o=xp(e.path);return td.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Hd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hd(t),i=jf();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Op(t[1]),o=new zl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=xp(e.path),r=IDBKeyRange.bound([n],[El(n)],!1,!0),i=0;return Hd(t).$t({index:zp.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return zd(t).get(e).next((function(t){return t?Id(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){return hd(t,Kp.store)}function Gd(t){return hd(t,Gp.store)}function Hd(t){return hd(t,zp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){if(t.code!==al.FAILED_PRECONDITION||t.message!==Xp)throw t;return hl("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=wl(n,i);return 0===s?wl(r,o):s}var $d=function(){function t(t){this.ne=t,this.buffer=new Rf(Wd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Wd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Yd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;hl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Ji(e,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return od(e=n.sent())?(hl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Qd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Xd=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return td.resolve(sl.o);var r=new $d(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; disabled"),td.resolve(Od)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Od):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(hl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ll()<=Io.DEBUG&&hl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),td.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Jd=function(){function t(t,e){this.db=t,this.garbageCollector=new Xd(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Zd(t,n)},t.prototype.removeReference=function(t,e,n){return Zd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Zd(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,qd(n=t).Ot((function(t){return Vd(n,t,r).next((function(t){return t&&(i=!0),td.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Hd(t).delete([0,xp(s.path)])}))}));i.push(u)}})).next((function(){return td.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Zd(t,e)},t.prototype.we=function(t,e){var n,r=Hd(t),i=sl.o;return r.$t({index:zp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==sl.o&&e(new zl(Op(n)),i),i=a,n=s):i=sl.o})).next((function(){i!==sl.o&&e(new zl(Op(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Zd(t,e){return Hd(t).put((n=e,r=t.currentSequenceNumber,new zp(0,xp(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tv=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Al(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Cl(this.inner)},t}(),ev=function(){function t(){this.changes=new tv((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Tl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ah.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?td.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),nv=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ov(t).put(sv(e),n)},t.prototype.removeEntry=function(t,e){var n=ov(t),r=sv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ov(t).get(sv(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ov(t).get(sv(e)).next((function(t){return{document:n.ye(e,t),size:Fd(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Pf();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Pf(),i=new Df(zl.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Fd(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return td.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ov(t).$t({range:r},(function(t,e,r){for(var s=zl.fromSegments(t);o&&zl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Pf(),o=e.path.length+1,s={};if(n.isEqual(Tl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=md(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=qp.collectionReadTimeIndex}return ov(t).$t(s,(function(t,n,s){if(t.length===o){var a=yd(r.R,n);e.path.isPrefixOf(a.key.path)?Bh(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new rv(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return iv(t).get(Bp.key).next((function(t){return yl(!!t),t}))},t.prototype.me=function(t,e){return iv(t).put(Bp.key,e)},t.prototype.ye=function(t,e){if(e){var n=yd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Tl.min()))return n}return ah.newInvalidDocument(t)},t}(),rv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new tv((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Yi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Rf((function(t,e){return wl(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=gd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Fd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=gd(e.Ie.R,ah.newNoDocument(o,Tl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),td.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ev);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){return hd(t,Bp.store)}function ov(t){return hd(t,qp.store)}function sv(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var av=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;yl(n<r&&n>=0&&r<=11);var o=new ed("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Pp.store),function(t){t.createObjectStore(Fp.store,{keyPath:Fp.keyPath}),t.createObjectStore(Mp.store,{keyPath:Mp.keyPath,autoIncrement:!0}).createIndex(Mp.userMutationsIndex,Mp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Vp.store)}(t),uv(t),function(t){t.createObjectStore(qp.store)}(t));var s=td.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(zp.store),t.deleteObjectStore(Kp.store),t.deleteObjectStore(Gp.store)}(t),uv(t)),s=s.next((function(){return function(t){var e=t.store(Gp.store),n=new Gp(0,0,Tl.min().toTimestamp(),0);return e.put(Gp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Mp.store).Nt().next((function(n){t.deleteObjectStore(Mp.store),t.createObjectStore(Mp.store,{keyPath:Mp.keyPath,autoIncrement:!0}).createIndex(Mp.userMutationsIndex,Mp.userMutationsKeyPath,{unique:!0});var r=e.store(Mp.store),i=n.map((function(t){return r.put(t)}));return td.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Qp.store,{keyPath:Qp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Bp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(qp.store);e.createIndex(qp.readTimeIndex,qp.readTimeIndexPath,{unique:!1}),e.createIndex(qp.collectionReadTimeIndex,qp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Wp.store,{keyPath:Wp.keyPath})}(t),function(t){t.createObjectStore($p.store,{keyPath:$p.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(qp.store).$t((function(t,n){e+=Fd(n)})).next((function(){var n=new Bp(e);return t.store(Bp.store).put(Bp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Fp.store),r=t.store(Mp.store);return n.Nt().next((function(n){return td.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Mp.userMutationsIndex,i).next((function(r){return td.forEach(r,(function(r){yl(r.userId===n.userId);var i=Ed(e.R,r);return Pd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(zp.store),n=t.store(qp.store);return t.store(Gp.store).get(Gp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Dl(n),s=[0,xp(o)];r.push(e.get(s).next((function(n){return n?td.resolve():(r=o,e.put(new zp(0,xp(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return td.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Hp.store,{keyPath:Hp.keyPath});var n=e.store(Hp.store),r=new xd,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:xp(i)})}};return e.store(qp.store).$t({kt:!0},(function(t,e){var n=new Dl(t);return i(n.popLast())})).next((function(){return e.store(Vp.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Op(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Kp.store);return n.$t((function(t,r){var i=Id(r),o=Td(e.R,i);return n.put(o)}))},t}();function uv(t){t.createObjectStore(zp.store,{keyPath:zp.keyPath}).createIndex(zp.documentTargetsIndex,zp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Kp.store,{keyPath:Kp.keyPath}).createIndex(Kp.queryTargetsIndexName,Kp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Gp.store)}var cv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lv=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ul(al.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new Jd(this,i),this.Le=n+"main",this.R=new vd(u),this.Be=new nd(this.Le,11,new av(this.R)),this.qe=new Kd(this.referenceDelegate,this.R),this.Ut=new kd,this.Ue=(h=this.R,f=this.Ut,new nv(h,f)),this.Ke=new Ad,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&fl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ul(al.FAILED_PRECONDITION,cv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new sl(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Ji(e,void 0,void 0,(function(){return Zi(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Ji(e,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Ji(e,void 0,void 0,(function(){return Zi(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return fv(e).put(new Qp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(od(e))return hl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return hl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return hv(t).get(Pp.key).next((function(t){return td.resolve(e.tn(t))}))},t.prototype.en=function(t){return fv(t).delete(this.clientId)},t.prototype.nn=function(){return Ji(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Zi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=hd(t,Qp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return td.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?td.resolve(!0):hv(t).get(Pp.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ul(al.FAILED_PRECONDITION,cv);return!1}}return!(!e.networkEnabled||!e.inForeground)||fv(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&hl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Ji(this,void 0,void 0,(function(){var t=this;return Zi(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Pp.store,Qp.store],(function(e){var n=new ld(e,sl.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return fv(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Md.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;hl("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Yp,(function(o){return i=new ld(o,r.Ne?r.Ne.next():sl.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw fl("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new ul(al.FAILED_PRECONDITION,Xp);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return hv(t).get(Pp.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ul(al.FAILED_PRECONDITION,cv)}))},t.prototype.Ze=function(t){var e=new Pp(this.clientId,this.allowTabSynchronization,Date.now());return hv(t).put(Pp.key,e)},t.yt=function(){return nd.yt()},t.prototype.Xe=function(t){var e=this,n=hv(t);return n.get(Pp.key).next((function(t){return e.tn(t)?(hl("IndexedDbPersistence","Releasing primary lease."),n.delete(Pp.key)):td.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(fl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!ao()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return hl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return fl("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){fl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function hv(t){return hd(t,Pp.store)}function fv(t){return hd(t,Qp.store)}function pv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var dv=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,zl.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Ph(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new zl(e)).next((function(t){var e=Mf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Mf();return this.Ut.getCollectionParents(t,i).next((function(s){return td.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Nh(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=ah.newInvalidDocument(c),r=r.insert(c,l)),pf(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Bh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=jf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof mf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),vv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=jf(),i=jf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),yv=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Tl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(kh(e)||Rh(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(ll()<=Io.DEBUG&&hl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qh(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Rf(Kh(t));return e.forEach((function(e,r){Bh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ll()<=Io.DEBUG&&hl("QueryEngine","Using full collection scan to execute query:",qh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Tl.min())},t}(),gv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Df(wl),this.kn=new tv((function(t){return lh(t)}),hh),this.$n=Tl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new dv(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e,n,r){return new gv(t,e,n,r)}function bv(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o;return Zi(this,(function(s){switch(s.label){case 0:return n=gl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new dv(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=jf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function wv(t,e){var n=gl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=td.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);yl(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function _v(t){var e=gl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ev(t,e){var n=gl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,yl((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=Pf();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=jf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Pf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Tl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):hl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Tl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return td.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Iv(t,e){var n=gl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Tv(t,e){var n=gl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,td.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new dd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Sv(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s;return Zi(this,(function(a){switch(a.label){case 0:r=gl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!od(s=a.sent()))throw s;return hl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Av(t,e,n){var r=gl(t),i=Tl.min(),o=jf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=Mh(e),c=gl(s),l=c.kn.get(u),void 0!==l?td.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Tl.min(),n?o:jf())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function Cv(t,e){var n=gl(t),r=gl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Nv(t){var e=gl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=gl(n),s=Pf(),a=md(i),u=ov(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:qp.readTimeIndex,range:c},(function(t,e){var n=yd(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:bd(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Dv(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){return[2,(e=gl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=ov(t),n=Tl.min(),e.$t({index:qp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=bd(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return td.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ip(n.createTime)}),td.resolve()},t.prototype.getNamedQuery=function(t,e){return td.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:Sd(n.bundledQuery),readTime:ip(n.readTime)}),td.resolve();var n},t}(),kv=function(){function t(){this.Wn=new Rf(Rv.Gn),this.zn=new Rf(Rv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Rv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Rv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new zl(new Dl([])),r=new Rv(n,t),i=new Rv(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new zl(new Dl([])),n=new Rv(e,t),r=new Rv(e,t+1),i=jf();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Rv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Rv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return zl.comparator(t.key,e.key)||wl(t.ns,e.ns)},t.Hn=function(t,e){return wl(t.ns,e.ns)||zl.comparator(t.key,e.key)},t}(),Ov=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Rf(Rv.Gn)}return t.prototype.checkEmpty=function(t){return td.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new fd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Rv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return td.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return td.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return td.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return td.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return td.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Rv(e,0),i=new Rv(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),td.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Rf(wl);return e.forEach((function(t){var e=new Rv(t,0),i=new Rv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),td.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;zl.isDocumentKey(i)||(i=i.child(""));var o=new Rv(new zl(i),0),s=new Rf(wl);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),td.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;yl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return td.forEach(e.mutations,(function(i){var o=new Rv(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Rv(e,0),r=this.rs.firstAfterOrEqual(n);return td.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,td.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Lv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Df(zl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return td.resolve(n?n.document.clone():ah.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Pf();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ah.newInvalidDocument(t))})),td.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Pf(),i=new zl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||Bh(e,c)&&(r=r.insert(c.key,c.clone()))}return td.resolve(r)},t.prototype.fs=function(t,e){return td.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Pv(this)},t.prototype.getSize=function(t){return td.resolve(this.size)},t}(),Pv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Yi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),td.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ev),Fv=function(){function t(t){this.persistence=t,this.ds=new tv((function(t){return lh(t)}),hh),this.lastRemoteSnapshotVersion=Tl.min(),this.highestTargetId=0,this.ws=0,this._s=new kv,this.targetCount=0,this.ys=Bd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),td.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return td.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return td.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),td.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),td.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Bd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,td.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),td.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,td.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),td.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return td.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return td.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),td.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),td.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),td.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return td.resolve(n)},t.prototype.containsKey=function(t,e){return td.resolve(this._s.containsKey(e))},t}(),Mv=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new sl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Fv(this),this.Ut=new Dd,this.Ue=(n=this.Ut,new Lv(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new vd(e),this.Ke=new xv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ov(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;hl("MemoryPersistence","Starting transaction:",t);var i=new Vv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return td.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Yi(e,t),e}(Jp),Uv=function(){function t(t){this.persistence=t,this.As=new kv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw vl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),td.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),td.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),td.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return td.forEach(this.vs,(function(r){var i=zl.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return td.or([function(){return td.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),jv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){return"firestore_clients_"+t+"_"+e}function Bv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Kv(t,e){return"firestore_targets_"+t+"_"+e}jv.UNAUTHENTICATED=new jv(null),jv.GOOGLE_CREDENTIALS=new jv("google-credentials-uid"),jv.FIRST_PARTY=new jv("first-party-uid");var zv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ul(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(fl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ul(i.error.code,i.error.message)),o?new t(e,i.state,r):(fl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Kl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(fl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Qv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(fl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Wv=function(){function t(){this.activeTargetIds=Bf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$v=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Df(wl),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=qv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Wv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Ji(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Zi(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(qv(this.persistenceKey,r)))&&(o=Hv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Kv(this.persistenceKey,t));if(n){var r=Gv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Kv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return hl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){hl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){hl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(hl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void fl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Ji(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Zi(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=sl.o;if(null!=t)try{var n=JSON.parse(t);yl("number"==typeof n),e=n}catch(r){fl("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==sl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new zv(this.currentUser,t,e,n),i=Bv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Bv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Kv(this.persistenceKey,t),i=new Gv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Hv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zv.Vs(new jv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Gv.Vs(r,e)},t.prototype.js=function(t){return Qv.Vs(t)},t.prototype.ii=function(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(hl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Bf();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Yv=function(){function t(){this.li=new Wv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Wv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Xv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Jv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){hl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){hl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Zv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ty=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),ey=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Yi(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new ol;s.listenOnce(Zc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Jc.NO_ERROR:var e=s.getResponseJson();hl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Jc.TIMEOUT:hl("Connection",'RPC "'+t+'" timed out'),o(new ul(al.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:var n=s.getStatus();if(hl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(al).indexOf(c)>=0?c:al.UNKNOWN);o(new ul(a,r.message))}else o(new ul(al.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ul(al.UNAVAILABLE,"Connection failed."));break;default:vl()}}finally{hl("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Qc,s=ja(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new rl({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(so())||"object"==typeof navigator&&"ReactNative"===navigator.product||so().indexOf("Electron/")>=0||((r=so()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||so().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");hl("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new ty({Ei:function(t){h?hl("Connection","Not sending because WebChannel is closed:",t):(l||(hl("Connection","Opening WebChannel transport."),c.open(),l=!0),hl("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,il.EventType.OPEN,(function(){h||hl("Connection","WebChannel transport opened.")})),p(c,il.EventType.CLOSE,(function(){h||(h=!0,hl("Connection","WebChannel transport closed"),f.Vi())})),p(c,il.EventType.ERROR,(function(t){h||(h=!0,pl("Connection","WebChannel transport errored:",t),f.Vi(new ul(al.UNAVAILABLE,"The operation could not be completed")))})),p(c,il.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];yl(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){hl("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ef[t];if(void 0!==e)return Nf(e)}(o),a=i.message;void 0===s&&(s=al.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new ul(s,a)),c.close()}else hl("Connection","WebChannel received:",n),f.Si(n)}})),p(s,tl.STAT_EVENT,(function(t){t.stat===el?hl("Connection","Detected buffering proxy"):t.stat===nl&&hl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);hl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return hl("RestConnection","Received: ",t),t}),(function(e){throw pl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Zv[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){return"undefined"!=typeof window?window:null}function ry(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t){return new tp(t,!0)}var oy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&hl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),sy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new oy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===al.RESOURCE_EXHAUSTED?(fl(e.toString()),fl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===al.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new ul(al.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Ji(t,void 0,void 0,(function(){return Zi(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return hl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(hl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ay=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Yi(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:vl(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(yl(void 0===e||"string"==typeof e),Ol.fromBase64String(e||"")):(yl(void 0===e||e instanceof Uint8Array),Ol.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?al.UNKNOWN:Nf(t.code);return new ul(e,t.message||"")}(u);n=new Qf(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=up(t,i.document.name),s=ip(i.document.updateTime);var u=new oh({mapValue:{fields:i.document.fields}}),c=(a=ah.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Gf(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=up(t,i.document),s=i.readTime?ip(i.readTime):Tl.min(),u=ah.newNoDocument(o,s),a=i.removedTargetIds||[],n=new Gf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=up(t,i.document),s=i.removedTargetIds||[],n=new Gf([],s,o,null);else{if(!("filter"in e))return vl();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new Af(i),s=h.targetId,n=new Hf(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Tl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Tl.min():e.readTime?ip(e.readTime):Tl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=hp(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=fh(i)?{documents:yp(e,i)}:{query:gp(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=np(e,n.resumeToken):n.snapshotVersion.compareTo(Tl.min())>0&&(r.readTime=ep(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=hp(this.R),e.removeTarget=t,this.cr(e)},e}(sy),uy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Yi(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(yl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(yl(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?ip(e.updateTime):ip(n)).isEqual(Tl.min())&&(r=ip(n)),new uf(r,e.transformResults||[]);var e,n,r}))):[]),n=ip(t.commitTime);return this.listener.Tr(n,e)}var r,i;return yl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=hp(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return dp(e.R,t)}))};this.cr(n)},e}(sy),cy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Yi(e,t),e.prototype.br=function(){if(this.Rr)throw new ul(al.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===al.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ul(al.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===al.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ul(al.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),ly=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(fl(e),this.Vr=!1):hl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),hy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Ji(o,void 0,void 0,(function(){return Zi(this,(function(t){switch(t.label){case 0:return wy(this)?(hl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return(e=gl(t)).Or.add(4),[4,py(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,fy(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new ly(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){return Ji(this,void 0,void 0,(function(){var e,n;return Zi(this,(function(r){switch(r.label){case 0:if(!wy(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function py(t){return Ji(this,void 0,void 0,(function(){var e,n;return Zi(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function dy(t,e){var n=gl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),by(n)?my(n):Py(n).er()&&yy(n,e))}function vy(t,e){var n=gl(t),r=Py(n);n.$r.delete(e),r.er()&&gy(n,e),0===n.$r.size&&(r.er()?r.ir():wy(n)&&n.Br.set("Unknown"))}function yy(t,e){t.qr.U(e.targetId),Py(t).mr(e)}function gy(t,e){t.qr.U(e),Py(t).yr(e)}function my(t){t.qr=new $f({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Py(t).start(),t.Br.Sr()}function by(t){return wy(t)&&!Py(t).tr()&&t.$r.size>0}function wy(t){return 0===gl(t).Or.size}function _y(t){t.qr=void 0}function Ey(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){return t.$r.forEach((function(e,n){yy(t,e)})),[2]}))}))}function Iy(t,e){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){return _y(t),by(t)?(t.Br.Nr(e),my(t)):t.Br.set("Unknown"),[2]}))}))}function Ty(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o;return Zi(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Qf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o;return Zi(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),hl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Sy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Gf?t.qr.X(e):e instanceof Hf?t.qr.rt(e):t.qr.et(e),n.isEqual(Tl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,_v(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(Ol.EMPTY_BYTE_STRING,e.snapshotVersion)),gy(a,t);var n=new dd(e.target,t,1,e.sequenceNumber);yy(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return hl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Sy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function Sy(t,e,n){return Ji(this,void 0,void 0,(function(){var r=this;return Zi(this,(function(i){switch(i.label){case 0:if(!od(e))throw e;return t.Or.add(1),[4,py(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return _v(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Ji(r,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return hl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,fy(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ay(t,e){return e().catch((function(n){return Sy(t,n,e)}))}function Cy(t){return Ji(this,void 0,void 0,(function(){var e,n,r,i,o;return Zi(this,(function(s){switch(s.label){case 0:e=gl(t),n=Fy(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(wy(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Iv(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fy(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Sy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ny(e)&&Dy(e),[2]}var a}))}))}function Ny(t){return wy(t)&&!Fy(t).tr()&&t.kr.length>0}function Dy(t){Fy(t).start()}function xy(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){return Fy(t).Ar(),[2]}))}))}function ky(t){return Ji(this,void 0,void 0,(function(){var e,n,r,i;return Zi(this,(function(o){for(e=Fy(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Ry(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i;return Zi(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=pd.from(r,e,n),[4,Ay(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Cy(t)];case 2:return o.sent(),[2]}}))}))}function Oy(t,e){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return e&&Fy(t).pr?[4,function(t,e){return Ji(this,void 0,void 0,(function(){var n,r;return Zi(this,(function(i){switch(i.label){case 0:return Cf(r=e.code)&&r!==al.ABORTED?(n=t.kr.shift(),Fy(t).sr(),[4,Ay(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Cy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ny(t)&&Dy(t),[2]}}))}))}function Ly(t,e){return Ji(this,void 0,void 0,(function(){var n;return Zi(this,(function(r){switch(r.label){case 0:return n=gl(t),e?(n.Or.delete(2),[4,fy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,py(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Py(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:Ey.bind(null,t),Ri:Iy.bind(null,t),_r:Ty.bind(null,t)},(i=gl(e)).br(),new ay(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Ji(o,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),by(t)?my(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),_y(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Fy(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:xy.bind(null,t),Ri:Oy.bind(null,t),Ir:ky.bind(null,t),Tr:Ry.bind(null,t)},(i=gl(e)).br(),new uy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Ji(o,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,Cy(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(hl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var My=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ul(al.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Vy(t,e){if(fl("AsyncQueue",e+": "+t),od(t))return new ul(al.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uy=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||zl.comparator(e.key,n.key)}:function(t,e){return zl.comparator(t.key,e.key)},this.keyedMap=Mf(),this.sortedSet=new Df(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),jy=function(){function t(){this.Qr=new Df(zl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):vl():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),qy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Uy.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Uh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),By=function(){this.Wr=void 0,this.listeners=[]},Ky=function(){this.queries=new tv((function(t){return jh(t)}),Uh),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Zi(this,(function(c){switch(c.label){case 0:if(n=gl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new By),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Vy(a,"Initialization of query '"+qh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Wy(n),[2]}}))}))}function Gy(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s;return Zi(this,(function(a){return n=gl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Hy(t,e){for(var n=gl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Wy(n)}function Qy(t,e,n){var r=gl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Wy(t){t.Gr.forEach((function(t){t.next()}))}var $y=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=qy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Yy=function(t){this.key=t},Xy=function(t){this.key=t},Jy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=jf(),this.mutatedKeys=jf(),this.lo=Kh(t),this.fo=new Uy(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new jy,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=kh(this.query)&&i.size===this.query.limit?i.last():null,c=Rh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Bh(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),kh(this.query)||Rh(this.query))for(;s.size>this.query.limit;){var l=kh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vl()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new qy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new jy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=jf(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Xy(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Yy(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=jf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return qy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Zy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tg=function(t){this.key=t,this.bo=!1},eg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new tv((function(t){return jh(t)}),Uh),this.Vo=new Map,this.So=new Set,this.Do=new Df(zl.comparator),this.Co=new Map,this.No=new kv,this.xo={},this.Fo=new Map,this.ko=Bd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Zi(this,(function(u){switch(u.label){case 0:return n=kg(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Tv(n.localStore,Mh(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,rg(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&dy(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function rg(t,e,n,r){return Ji(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Zi(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Ji(this,void 0,void 0,(function(){var i,o,s;return Zi(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Av(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(yg(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Av(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Jy(e,i.Bn),s=o._o(i.documents),a=zf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),yg(t,n,u.To),c=new Zy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function ig(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i;return Zi(this,(function(o){switch(o.label){case 0:return n=gl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Uh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Sv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),vy(n.remoteStore,r.targetId),dg(n,r.targetId)})).catch(Qd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return dg(n,r.targetId),[4,Sv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function og(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s;return Zi(this,(function(a){switch(a.label){case 0:r=Rg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=gl(u),f=Il.now(),p=c.reduce((function(t,e){return t.add(e.key)}),jf()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=df(o,l.get(o.key));null!=s&&n.push(new mf(o.key,s,sh(s.value.mapValue),cf.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Df(wl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,bg(r,i.changes)];case 3:return a.sent(),[4,Cy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Vy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function sg(t,e){return Ji(this,void 0,void 0,(function(){var n,r;return Zi(this,(function(i){switch(i.label){case 0:n=gl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ev(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(yl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?yl(r.bo):t.removedDocuments.size>0&&(yl(r.bo),r.bo=!1))})),[4,bg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Qd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ag(t,e,n){var r=gl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=gl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Wy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ug(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Zi(this,(function(c){switch(c.label){case 0:return(r=gl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Df(zl.comparator)).insert(o,ah.newNoDocument(o,Tl.min())),a=jf().add(o),u=new Kf(Tl.min(),new Map,new Rf(wl),s,a),[4,sg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),mg(r),[3,4];case 2:return[4,Sv(r.localStore,e,!1).then((function(){return dg(r,e,n)})).catch(Qd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function cg(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i;return Zi(this,(function(o){switch(o.label){case 0:n=gl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,wv(n.localStore,e)];case 2:return i=o.sent(),pg(n,r,null),fg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,bg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function lg(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i;return Zi(this,(function(o){switch(o.label){case 0:r=gl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=gl(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return yl(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),pg(r,e,n),fg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,bg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function hg(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s;return Zi(this,(function(a){switch(a.label){case 0:wy((n=gl(t)).remoteStore)||hl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=gl(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Vy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function fg(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function pg(t,e,n){var r=gl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function dg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||vg(t,e)}))}function vg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(vy(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),mg(t))}function yg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yy?(t.No.addReference(o.key,e),gg(t,o)):o instanceof Xy?(hl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||vg(t,o.key)):vl()}}function gg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(hl("SyncEngine","New document in limbo: "+n),t.So.add(r),mg(t))}function mg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new zl(Dl.fromString(e)),r=t.ko.next();t.Co.set(r,new tg(n)),t.Do=t.Do.insert(n,r),dy(t.remoteStore,new dd(Mh(xh(n.path)),r,2,sl.o))}}function bg(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s;return Zi(this,(function(a){switch(a.label){case 0:return r=gl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=vv.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Zi(this,(function(h){switch(h.label){case 0:n=gl(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return td.forEach(e,(function(e){return td.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return td.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!od(r=h.sent()))throw r;return hl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function wg(t,e){return Ji(this,void 0,void 0,(function(){var n,r;return Zi(this,(function(i){switch(i.label){case 0:return(n=gl(t)).currentUser.isEqual(e)?[3,3]:(hl("SyncEngine","User change. New user:",e.toKey()),[4,bv(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new ul(al.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,bg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function _g(t,e){var n=gl(t),r=n.Co.get(e);if(r&&r.bo)return jf().add(r.key);var i=jf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Eg(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i;return Zi(this,(function(o){switch(o.label){case 0:return[4,Av((n=gl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&yg(n,e.targetId,i.To),i)]}}))}))}function Ig(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){return[2,Nv((e=gl(t)).localStore).then((function(t){return bg(e,t)}))]}))}))}function Tg(t,e,n,r){return Ji(this,void 0,void 0,(function(){var i,o;return Zi(this,(function(s){switch(s.label){case 0:return[4,(a=(i=gl(t)).localStore,u=e,c=gl(a),l=gl(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):td.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Cy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pg(i,e,r||null),fg(i,e),function(t,e){gl(gl(t)._n).Gt(e)}(i.localStore,e)):vl(),s.label=4;case 4:return[4,bg(i,o)];case 5:return s.sent(),[3,7];case 6:hl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function Sg(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Zi(this,(function(l){switch(l.label){case 0:return kg(n=gl(t)),Rg(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ag(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Ly(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],dy(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return dg(n,e),Sv(n.localStore,e,!0)})),vy(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Ag(n,u)];case 5:return l.sent(),(h=gl(n)).Co.forEach((function(t,e){vy(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Df(zl.comparator),n.$o=!1,[4,Ly(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function Ag(t,e,n){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Zi(this,(function(y){switch(y.label){case 0:n=gl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Tv(n.localStore,Mh(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,Eg(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Cv(n.localStore,a)];case 8:return v=y.sent(),[4,Tv(n.localStore,v)];case 9:return u=y.sent(),[4,rg(n,Cg(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Cg(t){return Dh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ng(t){var e=gl(t);return gl(gl(e.localStore).persistence).fn()}function Dg(t,e,n,r){return Ji(this,void 0,void 0,(function(){var i,o,s;return Zi(this,(function(a){switch(a.label){case 0:return(i=gl(t)).$o?(hl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Nv(i.localStore)];case 3:return o=a.sent(),s=Kf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,bg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Sv(i.localStore,e,!0)];case 6:return a.sent(),dg(i,e,r),[3,8];case 7:vl(),a.label=8;case 8:return[2]}}))}))}function xg(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Zi(this,(function(p){switch(p.label){case 0:if(!(r=kg(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(hl("SyncEngine","Adding an already active target "+s),[3,5]):[4,Cv(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Tv(r.localStore,a)];case 3:return u=p.sent(),[4,rg(r,Cg(a),u.targetId,!1)];case 4:p.sent(),dy(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Zi(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Sv(r.localStore,t,!1).then((function(){vy(r.remoteStore,t),dg(r,t)})).catch(Qd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function kg(t){var e=gl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_g.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ug.bind(null,e),e.vo._r=Hy.bind(null,e.eventManager),e.vo.Mo=Qy.bind(null,e.eventManager),e}function Rg(t){var e=gl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lg.bind(null,e),e}var Og=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return this.R=iy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return mv(this.persistence,new yv,t.initialUser,this.R)},t.prototype.qo=function(t){return new Mv(Uv.bs,this.R)},t.prototype.Bo=function(t){return new Yv},t.prototype.terminate=function(){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Lg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Yi(e,t),e.prototype.initialize=function(e){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Dv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Rg(this.Qo.syncEngine)];case 4:return n.sent(),[4,Cy(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return mv(this.persistence,new yv,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Yd(e,t.asyncQueue)},e.prototype.qo=function(t){var e=pv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ld.withCacheSize(this.cacheSizeBytes):Ld.DEFAULT;return new lv(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ny(),ry(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Yv},e}(Og),Pg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Yi(e,t),e.prototype.initialize=function(e){return Ji(this,void 0,void 0,(function(){var n,r=this;return Zi(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof $v?(this.sharedClientState.syncEngine={ui:Tg.bind(null,n),ai:Dg.bind(null,n),hi:xg.bind(null,n),fn:Ng.bind(null,n),ci:Ig.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Ji(r,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return[4,Sg(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=ny();if(!$v.yt(e))throw new ul(al.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=pv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $v(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Lg),Fg=function(){function t(){}return t.prototype.initialize=function(t,e){return Ji(this,void 0,void 0,(function(){var n=this;return Zi(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ag(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=wg.bind(null,this.syncEngine),[4,Ly(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Ky},t.prototype.createDatastore=function(t){var e,n,r=iy(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new ey(e));return n=t.credentials,new cy(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ag(s.syncEngine,t,0)},o=Jv.yt()?new Jv:new Xv,new hy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new eg(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return e=gl(t),hl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,py(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Mg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Vg=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Ji(this,void 0,void 0,(function(){var e,n=this;return Zi(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ul(al.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Zi(this,(function(u){switch(u.label){case 0:return n=gl(t),r=hp(n.R)+"/documents",i={documents:e.map((function(t){return ap(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){yl(!!e.found),e.found.name,e.found.updateTime;var n=up(t,e.found.name),r=ip(e.found.updateTime),i=new oh({mapValue:{fields:e.found.fields}});return ah.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){yl(!!e.missing),yl(!!e.readTime);var n=up(t,e.missing),r=ip(e.readTime);return ah.newNoDocument(n,r)}(e,r):vl());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());yl(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Tf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Ji(this,void 0,void 0,(function(){var t,e=this;return Zi(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=zl.fromPath(n);e.mutations.push(new Sf(r,e.precondition(r)))})),[4,function(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i;return Zi(this,(function(o){switch(o.label){case 0:return n=gl(t),r=hp(n.R)+"/documents",i={writes:e.map((function(t){return dp(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw vl();e=Tl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ul(al.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?cf.updateTime(e):cf.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Tl.min()))throw new ul(al.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cf.updateTime(e)}return cf.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Ug=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new oy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Ji(t,void 0,void 0,(function(){var t,e,n=this;return Zi(this,(function(r){return t=new Vg(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ql(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Cf(e)}return!1},t}(),jg=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=jv.UNAUTHENTICATED,this.clientId=bl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Ji(r,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return hl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ul(al.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Ji(t,void 0,void 0,(function(){var t,n;return Zi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Vy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qg(t,e){return Ji(this,void 0,void 0,(function(){var n,r,i=this;return Zi(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),hl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Ji(i,void 0,void 0,(function(){return Zi(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,bv(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Bg(t,e){return Ji(this,void 0,void 0,(function(){var n,r;return Zi(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Kg(t)];case 1:return n=i.sent(),hl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Ji(this,void 0,void 0,(function(){var n,r;return Zi(this,(function(i){switch(i.label){case 0:return(n=gl(t)).asyncQueue.verifyOperationInProgress(),hl("RemoteStore","RemoteStore received new credentials"),r=wy(n),n.Or.add(3),[4,py(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,fy(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Kg(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(hl("FirestoreClient","Using default OfflineComponentProvider"),[4,qg(t,new Og)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function zg(t){return Ji(this,void 0,void 0,(function(){return Zi(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(hl("FirestoreClient","Using default OnlineComponentProvider"),[4,Bg(t,new Fg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Gg(t){return Kg(t).then((function(t){return t.persistence}))}function Hg(t){return Kg(t).then((function(t){return t.localStore}))}function Qg(t){return zg(t).then((function(t){return t.remoteStore}))}function Wg(t){return zg(t).then((function(t){return t.syncEngine}))}function $g(t){return Ji(this,void 0,void 0,(function(){var e,n;return Zi(this,(function(r){switch(r.label){case 0:return[4,zg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ng.bind(null,e.syncEngine),n.onUnlisten=ig.bind(null,e.syncEngine),n)]}}))}))}function Yg(t,e,n){var r=this;void 0===n&&(n={});var i=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(r,void 0,void 0,(function(){var r;return Zi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mg({next:function(o){e.enqueueAndForget((function(){return Gy(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ul(al.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ul(al.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new $y(xh(n.path),o,{includeMetadataChanges:!0,so:!0});return zy(t,s)},[4,$g(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Xg(t,e,n){var r=this;void 0===n&&(n={});var i=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(r,void 0,void 0,(function(){var r;return Zi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mg({next:function(n){e.enqueueAndForget((function(){return Gy(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ul(al.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new $y(n,o,{includeMetadataChanges:!0,so:!0});return zy(t,s)},[4,$g(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Jg=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Zg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),tm=new Map,em=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},nm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(jv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),im=function(){function t(t){var e=this;this.currentUser=jv.UNAUTHENTICATED,this.oc=new Zp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){hl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(hl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(hl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(yl("string"==typeof n.accessToken),new em(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Ji(n,void 0,void 0,(function(){return Zi(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return yl(null===t||"string"==typeof t),new jv(t)},t}(),om=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=jv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),sm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new om(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(jv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e,n){if(!n)throw new ul(al.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function um(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ul(al.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function cm(t,e,n,r){if(!0===e&&!0===r)throw new ul(al.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function lm(t){if(!zl.isDocumentKey(t))throw new ul(al.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function hm(t){if(zl.isDocumentKey(t))throw new ul(al.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function fm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":vl()}function pm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ul(al.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fm(t);throw new ul(al.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function dm(t,e){if(e<=0)throw new ul(al.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ul(al.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ul(al.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,cm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),ym=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vm({}),this._settingsFrozen=!1,t instanceof Zg?(this._databaseId=t,this._credentials=new nm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ul(al.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zg(t.options.projectId)}(t),this._credentials=new im(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ul(al.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ul(al.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new nm;switch(t.type){case"gapi":var e=t.client;return yl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new sm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ul(al.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=tm.get(this))&&(hl("ComponentProvider","Removing Datastore"),tm.delete(this),t.terminate()),Promise.resolve();var t},t}(),gm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),mm=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),bm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,xh(r))||this)._path=r,i.type="collection",i}return Yi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new gm(this.firestore,null,new zl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(mm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=go(t),am("collection","path",e),t instanceof ym)return hm(n=Dl.fromString.apply(Dl,no([e],r))),new bm(t,null,n);if(!(t instanceof gm||t instanceof bm))throw new ul(al.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return hm(n=Dl.fromString.apply(Dl,no([t.path],r)).child(Dl.fromString(e))),new bm(t.firestore,null,n)}function _m(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=go(t),1===arguments.length&&(e=bl.u()),am("doc","path",e),t instanceof ym)return lm(n=Dl.fromString.apply(Dl,no([e],r))),new gm(t,null,new zl(n));if(!(t instanceof gm||t instanceof bm))throw new ul(al.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lm(n=t._path.child(Dl.fromString.apply(Dl,no([e],r)))),new gm(t.firestore,t instanceof bm?t.converter:null,new zl(n))}function Em(t,e){return t=go(t),e=go(e),(t instanceof gm||t instanceof bm)&&(e instanceof gm||e instanceof bm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Im(t,e){return t=go(t),e=go(e),t instanceof mm&&e instanceof mm&&t.firestore===e.firestore&&Uh(t._query,e._query)&&t.converter===e.converter}var Tm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new oy(this,"async_queue_retry"),this.Ic=function(){var e=ry();e&&hl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ry();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ry();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Zp;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Ji(this,void 0,void 0,(function(){var t,e=this;return Zi(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!od(t=n.sent()))throw t;return hl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,fl("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=My.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&vl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Ji(this,void 0,void 0,(function(){var t;return Zi(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Sm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Am=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Tm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Yi(e,t),e.prototype._terminate=function(){return this._firestoreClient||Nm(this),this._firestoreClient.terminate()},e}(ym);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){return t._firestoreClient||Nm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nm(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new Jg(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new jg(t._credentials,t._queue,a)}function Dm(t,e,n){var r=this,i=new Zp;return t.asyncQueue.enqueue((function(){return Ji(r,void 0,void 0,(function(){var r;return Zi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,qg(t,n)];case 1:return o.sent(),[4,Bg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===al.FAILED_PRECONDITION||s.code===al.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function xm(t){if(t._initialized||t._terminated)throw new ul(al.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var km=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ul(al.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Rm=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ol.fromBase64String(e))}catch(n){throw new ul(al.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(Ol.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Om=function(t){this._methodName=t},Lm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ul(al.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ul(al.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return wl(this._lat,t._lat)||wl(this._long,t._long)},t}(),Pm=/^__.*__$/,Fm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new mf(t,this.data,this.fieldMask,e,this.fieldTransforms):new gf(t,this.data,e,this.fieldTransforms)},t}(),Mm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new mf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vl()}}var Um=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return ob(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Vm(this.Nc)&&Pm.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),jm=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||iy(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Um({Nc:t,methodName:e,qc:n,path:kl.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function qm(t){var e=t._freezeSettings(),n=iy(t._databaseId);return new jm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);eb("Data must be an object, but it was:",s,r);var a,u,c=Zm(r,s);if(o.merge)a=new Rl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=nb(e,f[h],n);if(!s.contains(p))throw new ul(al.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");sb(l,p)||l.push(p)}a=new Rl(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Fm(new oh(c),a,u)}var Km=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Om);function zm(t,e,n){return new Um({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype._toFieldTransform=function(t){return new af(t.path,new Jh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Om),Hm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Yi(e,t),e.prototype._toFieldTransform=function(t){var e=zm(this,t,!0),n=this.Kc.map((function(t){return Jm(t,e)})),r=new Zh(n);return new af(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Om),Qm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Yi(e,t),e.prototype._toFieldTransform=function(t){var e=zm(this,t,!0),n=this.Kc.map((function(t){return Jm(t,e)})),r=new ef(n);return new af(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Om),Wm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Yi(e,t),e.prototype._toFieldTransform=function(t){var e=new rf(t.R,Qh(t.R,this.Qc));return new af(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Om);function $m(t,e,n,r){var i=t.Uc(1,e,n);eb("Data must be an object, but it was:",i,r);var o=[],s=oh.empty();Al(r,(function(t,r){var a=ib(e,t,n);r=go(r);var u=i.Oc(a);if(r instanceof Km)o.push(a);else{var c=Jm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Rl(o);return new Mm(s,a,i.fieldTransforms)}function Ym(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[nb(e,r,n)],u=[i];if(o.length%2!=0)throw new ul(al.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(nb(e,o[c])),u.push(o[c+1]);for(var l=[],h=oh.empty(),f=a.length-1;f>=0;--f)if(!sb(l,a[f])){var p=a[f],d=u[f];d=go(d);var v=s.Oc(p);if(d instanceof Km)l.push(p);else{var y=Jm(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new Rl(l);return new Mm(h,g,s.fieldTransforms)}function Xm(t,e,n,r){return void 0===r&&(r=!1),Jm(n,t.Uc(r?4:3,e))}function Jm(t,e){if(tb(t=go(t)))return eb("Unsupported field value:",e,t),Zm(t,e);if(t instanceof Om)return function(t,e){if(!Vm(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Jm(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=go(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Il.fromDate(t);return{timestampValue:ep(e.R,n)}}if(t instanceof Il)return n=new Il(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ep(e.R,n)};if(t instanceof Lm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rm)return{bytesValue:np(e.R,t._byteString)};if(t instanceof gm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:op(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+fm(t))}(t,e)}function Zm(t,e){var n={};return Cl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Al(t,(function(t,r){var i=Jm(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function tb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Il||t instanceof Lm||t instanceof Rm||t instanceof gm||t instanceof Om)}function eb(t,e,n){if(!tb(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=fm(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function nb(t,e,n){if((e=go(e))instanceof km)return e._internalPath;if("string"==typeof e)return ib(t,e);throw ob("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var rb=new RegExp("[~\\*/\\[\\]]");function ib(t,e,n){if(e.search(rb)>=0)throw ob("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(km.bind.apply(km,no([void 0],e.split(".")))))._internalPath}catch(ow){throw ob("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ob(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ul(al.INVALID_ARGUMENT,(a+=". ")+t+u)}function sb(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ab=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new ub(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(cb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ab);function cb(t,e){return"string"==typeof e?ib(t,e):e instanceof km?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),hb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Yi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new fb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(cb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ab),fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(hb),pb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new lb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new fb(n._firestore,n._userDataWriter,r.key,r,new lb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ul(al.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new fb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new fb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:db(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function db(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vl()}}function vb(t,e){return t instanceof hb&&e instanceof hb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof pb&&e instanceof pb&&t._firestore===e._firestore&&Im(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){if(Rh(t)&&0===t.explicitOrderBy.length)throw new ul(al.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gb=function(){};function mb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Yi(e,t),e.prototype._apply=function(t){var e,n,r,i=qm(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ab(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Sb(r,t,h))}a={arrayValue:{values:u}}}else a=Sb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ab(s,o),a=Xm(n,"where",s,"in"===o||"not-in"===o);var f=ph.create(i,o,a);return function(t,e){if(e.g()){var n=Lh(t);if(null!==n&&!n.isEqual(e.field))throw new ul(al.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Oh(t);null!==r&&Cb(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new ul(al.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ul(al.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new mm(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(gb),wb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Yi(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new ul(al.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ul(al.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Th(e,n);return function(t,e){if(null===Oh(t)){var n=Lh(t);null!==n&&Cb(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new mm(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new Nh(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(gb),_b=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Yi(e,t),e.prototype._apply=function(t){return new mm(t.firestore,t.converter,Vh(t._query,this.Hc,this.Jc))},e}(gb),Eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Yi(e,t),e.prototype._apply=function(t){var e,n,r=Tb(t,this.type,this.Yc,this.Xc);return new mm(t.firestore,t.converter,(e=t._query,n=r,new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(gb),Ib=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Yi(e,t),e.prototype._apply=function(t){var e,n,r=Tb(t,this.type,this.Yc,this.Xc);return new mm(t.firestore,t.converter,(e=t._query,n=r,new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(gb);function Tb(t,e,n,r){if(n[0]=go(n[0]),n[0]instanceof ab)return function(t,e,n,r,i){if(!r)throw new ul(al.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Fh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Jl(e,r.key));else{var c=r.data.field(u.field);if(Vl(c))throw new ul(al.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ul(al.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Eh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=qm(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ul(al.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ul(al.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ph(t)&&-1!==c.indexOf("/"))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Dl.fromString(c));if(!zl.isDocumentKey(l))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new zl(l);a.push(Jl(e,h))}else{var f=Xm(n,r,c);a.push(f)}}return new Eh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Sb(t,e,n){if("string"==typeof(n=go(n))){if(""===n)throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ph(e)&&-1!==n.indexOf("/"))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Dl.fromString(n));if(!zl.isDocumentKey(r))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Jl(t,new zl(r))}if(n instanceof gm)return Jl(t,n._key);throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+fm(n)+".")}function Ab(t,e){if(!Array.isArray(t)||0===t.length)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Cb(t,e,n){if(!n.isEqual(e))throw new ul(al.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Gl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ml(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Al(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Lm(Fl(t.latitude),Fl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ul(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(jl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Pl(t);return new Il(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Dl.fromString(t);yl(Dp(n));var r=new Zg(n.get(1),n.get(3)),i=new zl(n.popFirst(5));return r.isEqual(e)||fl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var xb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yi(e,t),e.prototype.convertBytes=function(t){return new Rm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gm(this.firestore,null,e)},e}(Nb),kb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qm(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Rb(t,this._firestore),i=Db(r.converter,e,n),o=Bm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,cf.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Rb(t,this._firestore);return o="string"==typeof(e=go(e))||e instanceof km?Ym(this._dataReader,"WriteBatch.update",s._key,e,n,r):$m(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,cf.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Rb(t,this._firestore);return this._mutations=this._mutations.concat(new Tf(e._key,cf.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ul(al.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e){if((t=go(t)).firestore!==e)throw new ul(al.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ob=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yi(e,t),e.prototype.convertBytes=function(t){return new Rm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gm(this.firestore,null,e)},e}(Nb);function Lb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=pm(t,gm);var o=pm(t.firestore,Am),s=qm(o);return Fb(o,[("string"==typeof(e=go(e))||e instanceof km?Ym(s,"updateDoc",t._key,e,n,r):$m(s,"updateDoc",t._key,e)).toMutation(t._key,cf.exists(!0))])}function Pb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=go(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Sm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Sm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof gm)c=pm(t.firestore,Am),l=xh(t._key.path),u={next:function(e){i[a]&&i[a](Mb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=pm(t,mm);c=pm(p.firestore,Am),l=p._query;var d=new Ob(c);u={next:function(t){i[a]&&i[a](new pb(c,d,p,t))},error:i[a+1],complete:i[a+2]},yb(t._query)}return function(t,e,n,r){var i=this,o=new Mg(r),s=new $y(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Ji(i,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return e=zy,[4,$g(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ji(i,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return e=Gy,[4,$g(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Cm(c),l,h,u)}function Fb(t,e){return function(t,e){var n=this,r=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var n;return Zi(this,(function(i){switch(i.label){case 0:return n=og,[4,Wg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Cm(t),e)}function Mb(t,e,n){var r=n.docs.get(e._key),i=new Ob(t);return new hb(t,i,e._key,r,new lb(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Yi(e,t),e.prototype.get=function(e){var n=this,r=Rb(e,this._firestore),i=new Ob(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new hb(n._firestore,i,r._key,t._document,new lb(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=qm(t)}return t.prototype.get=function(t){var e=this,n=Rb(t,this._firestore),r=new xb(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return vl();var i=t[0];if(i.isFoundDocument())return new ab(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ab(e._firestore,r,n._key,null,n.converter);throw vl()}))},t.prototype.set=function(t,e,n){var r=Rb(t,this._firestore),i=Db(r.converter,e,n),o=Bm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Rb(t,this._firestore);return o="string"==typeof(e=go(e))||e instanceof km?Ym(this._dataReader,"Transaction.update",s._key,e,n,r):$m(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Rb(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if("undefined"==typeof Uint8Array)throw new ul(al.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jb(){if("undefined"==typeof atob)throw new ul(al.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var qb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return jb(),new t(Rm.fromBase64String(e))},t.fromUint8Array=function(e){return Ub(),new t(Rm.fromUint8Array(e))},t.prototype.toBase64=function(){return jb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Ub(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Bb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xm(t=pm(t,Am));var n=Cm(t),r=t._freezeSettings(),i=new Fg;return Dm(n,i,new Lg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xm(t=pm(t,Am));var e=Cm(t),n=t._freezeSettings(),r=new Fg;return Dm(e,r,new Pg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ul(al.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Zp;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Ji(e,void 0,void 0,(function(){var e;return Zi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return nd.yt()?(e=t+"main",[4,nd.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(pv(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Kb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Zg||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=pm(t,ym))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Xi({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ro.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),ro.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ul(al.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new rm(new em(o,new jv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ji(e,void 0,void 0,(function(){var e,n;return Zi(this,(function(r){switch(r.label){case 0:return[4,Gg(t)];case 1:return e=r.sent(),[4,Qg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=gl(i),o.Or.delete(0),fy(o))]}var i,o}))}))}))}(Cm(pm(this._delegate,Am)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ji(e,void 0,void 0,(function(){var e,n;return Zi(this,(function(r){switch(r.label){case 0:return[4,Gg(t)];case 1:return e=r.sent(),[4,Qg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Ji(this,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return(e=gl(t)).Or.add(0),[4,py(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Cm(pm(this._delegate,Am)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&cm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(e,void 0,void 0,(function(){var e;return Zi(this,(function(r){switch(r.label){case 0:return e=hg,[4,Wg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Cm(pm(this._delegate,Am)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new Mg(e);return t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return e=function(t,e){gl(t).Gr.add(e),e.next()},[4,$g(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var e;return Zi(this,(function(n){switch(n.label){case 0:return e=function(t,e){gl(t).Gr.delete(e)},[4,$g(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Cm(e=pm(e,Am)),Sm(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new ul(al.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new rw(this,wm(this._delegate,t))}catch(e){throw $b(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Wb(this,_m(this._delegate,t))}catch(e){throw $b(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new tw(this,function(t,e){if(t=pm(t,ym),am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ul(al.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mm(t,null,(n=e,new Nh(Dl.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw $b(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var n;return Zi(this,(function(i){switch(i.label){case 0:return[4,(o=t,zg(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Ug(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(Cm(e=this._delegate),(function(r){return function(e){return t(new Gb(n,e))}(new Vb(e,r))}))},t.prototype.batch=function(){var t=this;return Cm(this._delegate),new Hb(new kb(this._delegate,(function(e){return Fb(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new ul(al.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ul(al.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),zb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yi(e,t),e.prototype.convertBytes=function(t){return new qb(new Rm(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Wb.eu(e,this.firestore,null)},e}(Nb);var Gb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new zb(t)}return t.prototype.get=function(t){var e=this,n=iw(t);return this._delegate.get(n).then((function(t){return new Jb(e._firestore,new hb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=iw(t);return n?(um("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,no([s,e,n],i)),this},t.prototype.delete=function(t){var e=iw(t);return this._delegate.delete(e),this},t}(),Hb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=iw(t);return n?(um("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,no([s,e,n],i)),this},t.prototype.delete=function(t){var e=iw(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Qb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new fb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Zb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new zb(e),n),i.set(n,o)),o},t}();Qb.su=new WeakMap;var Wb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zb(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new ul(al.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gm(n._delegate,r,new zl(e)))},t.eu=function(e,n,r){return new t(n,new gm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new rw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new rw(this.firestore,wm(this._delegate,t))}catch(e){throw $b(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=go(t))instanceof gm&&Em(this._delegate,t)},t.prototype.set=function(t,e){e=um("DocumentReference.set",e);try{return function(t,e,n){t=pm(t,gm);var r=pm(t.firestore,Am),i=Db(t.converter,e,n);return Fb(r,[Bm(qm(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,cf.none())])}(this._delegate,t,e)}catch(n){throw $b(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Lb(this._delegate,t):Lb.apply(void 0,no([this._delegate,t,e],n))}catch(i){throw $b(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Fb(pm((t=this._delegate).firestore,Am),[new Tf(t._key,cf.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yb(e),i=Xb(e,(function(e){return new Jb(t.firestore,new hb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Pb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pm(t,gm);var e=pm(t.firestore,Am),n=Cm(e),r=new Ob(e);return function(t,e){var n=this,r=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var n;return Zi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i;return Zi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=gl(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ul(al.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Vy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,Hg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new hb(e,r,t._key,n,new lb(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=pm(t,gm);var e=pm(t.firestore,Am);return Yg(Cm(e),t._key,{source:"server"}).then((function(n){return Mb(e,t,n)}))}(this._delegate):function(t){t=pm(t,gm);var e=pm(t.firestore,Am);return Yg(Cm(e),t._key).then((function(n){return Mb(e,t,n)}))}(this._delegate)).then((function(t){return new Jb(e.firestore,new hb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Qb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function $b(t,e,n){return t.message=t.message.replace(e,n),t}function Yb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Sm(r))return r}return{}}function Xb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Sm(t[0])?t[0]:Sm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Jb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Wb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return vb(this._delegate,t._delegate)},t}(),Zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yi(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Jb),tw=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,mb(this._delegate,(o=r,s=i=n,a=cb("where",e),new bb(a,s,o))))}catch(i){throw $b(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,mb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=cb("orderBy",t);return new wb(r,n)}(e,n)))}catch(r){throw $b(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,mb(this._delegate,(dm("limit",n=e),new _b("limit",n,"F"))))}catch(r){throw $b(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,mb(this._delegate,(dm("limitToLast",n=e),new _b("limitToLast",n,"L"))))}catch(r){throw $b(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,mb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw $b(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,mb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eb("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw $b(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,mb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ib("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw $b(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,mb(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ib("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw $b(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Im(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pm(t,mm);var e=pm(t.firestore,Am),n=Cm(e),r=new Ob(e);return function(t,e){var n=this,r=new Zp;return t.asyncQueue.enqueueAndForget((function(){return Ji(n,void 0,void 0,(function(){var n;return Zi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ji(this,void 0,void 0,(function(){var r,i,o,s,a;return Zi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Av(t,e,!0)];case 1:return a=u.sent(),r=new Jy(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Vy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Hg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new pb(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=pm(t,mm);var e=pm(t.firestore,Am),n=Cm(e),r=new Ob(e);return Xg(n,t._query,{source:"server"}).then((function(n){return new pb(e,r,t,n)}))}(this._delegate):function(t){t=pm(t,mm);var e=pm(t.firestore,Am),n=Cm(e),r=new Ob(e);return yb(t._query),Xg(n,t._query).then((function(n){return new pb(e,r,t,n)}))}(this._delegate)).then((function(t){return new nw(e.firestore,new pb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yb(e),i=Xb(e,(function(e){return new nw(t.firestore,new pb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Pb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Qb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),ew=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Zb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),nw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new tw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Zb(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new ew(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Zb(n._firestore,r))}))},t.prototype.isEqual=function(t){return vb(this._delegate,t._delegate)},t}(),rw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Yi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Wb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Wb(this.firestore,void 0===t?_m(this._delegate):_m(this._delegate,t))}catch(e){throw $b(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=pm(e.firestore,Am),i=_m(e),o=Db(e.converter,n),Fb(r,[Bm(qm(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,cf.exists(!1))]).then((function(){return i}))).then((function(t){return new Wb(s.firestore,t)}))},e.prototype.isEqual=function(t){return Em(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Qb.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(tw);function iw(t){return pm(t,gm)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ow,sw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(km.bind.apply(km,no([void 0],t)))}return t.documentId=function(){return new t(kl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=go(t))instanceof km&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),aw=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Km("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hm("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qm("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new Wm("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),uw={Firestore:Kb,GeoPoint:Lm,Timestamp:Il,Blob:qb,Transaction:Gb,WriteBatch:Hb,DocumentReference:Wb,DocumentSnapshot:Jb,Query:tw,QueryDocumentSnapshot:Zb,QuerySnapshot:nw,CollectionReference:rw,FieldPath:sw,FieldValue:aw,setLogLevel:function(t){var e;e=t,cl.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(ow=Ho).INTERNAL.registerComponent(new mo("firestore",(function(t){return function(t,e){return new Kb(t,new Am(t,e),new Bb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},uw))),ow.registerVersion("@firebase/firestore","2.3.10");
/*!
  * vue-router v4.0.11
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const cw="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,lw=t=>cw?Symbol(t):"_vr_"+t,hw=lw("rvlm"),fw=lw("rvd"),pw=lw("r"),dw=lw("rl"),vw=lw("rvl"),yw="undefined"!=typeof window;const gw=Object.assign;function mw(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const bw=()=>{},ww=/\/$/;function _w(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function Ew(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Iw(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Sw(t[n],e[n]))return!1;return!0}function Sw(t,e){return Array.isArray(t)?Aw(t,e):Array.isArray(e)?Aw(e,t):t===e}function Aw(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var Cw,Nw,Dw,xw;function kw(t){if(!t)if(yw){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(ww,"")}(Nw=Cw||(Cw={})).pop="pop",Nw.push="push",(xw=Dw||(Dw={})).back="back",xw.forward="forward",xw.unknown="";const Rw=/^[^#]+#/;function Ow(t,e){return t.replace(Rw,"#")+e}const Lw=()=>({left:window.pageXOffset,top:window.pageYOffset});function Pw(t){let e;if("el"in t){const n=t.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function Fw(t,e){return(history.state?history.state.position-e:-1)+t}const Mw=new Map;function Vw(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),Ew(n,"")}return Ew(n,t)+r+i}function Uw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Lw():null}}function jw(t){const{history:e,location:n}=window,r={value:Vw(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=gw({},i.value,e.state,{forward:t,scroll:Lw()});o(s.current,s,!0),o(t,gw({},Uw(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,gw({},e.state,Uw(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function qw(t){const e=jw(t=kw(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=Vw(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:l,type:Cw.pop,direction:l?l>0?Dw.forward:Dw.back:Dw.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(gw({},t.state,{scroll:Lw()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=gw({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:Ow.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Bw(t){return"string"==typeof t||"symbol"==typeof t}const Kw={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},zw=lw("nf");var Gw,Hw;function Qw(t,e){return gw(new Error,{type:t,[zw]:!0},e)}function Ww(t,e){return t instanceof Error&&zw in t&&(null==e||!!(t.type&e))}(Hw=Gw||(Gw={}))[Hw.aborted=4]="aborted",Hw[Hw.cancelled=8]="cancelled",Hw[Hw.duplicated=16]="duplicated";const $w={sensitive:!1,strict:!1,start:!0,end:!0},Yw=/[.+*?^${}()[\]/\\]/g;function Xw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Jw(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=Xw(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const Zw={type:0,value:""},t_=/[a-zA-Z0-9_]/;function e_(t,e,n){const r=function(t,e){const n=gw({},$w,e),r=[];let i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(Yw,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const h=l||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=c&&u.length<2?`(?:/${f})`:"/"+f),c&&(f+="?"),i+=f,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[Zw]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:t_.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}(t.path),n),i=gw(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function n_(t,e){const n=[],r=new Map;function i(t,n,r){const a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:r_(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=s_(e,t),l=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(gw({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let h,f;for(const e of l){const{path:l}=e;if(n&&"/"!==l[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=e_(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!i_(h)&&o(t.name)),"children"in u){const t=u.children;for(let e=0;e<t.length;e++)i(t[e],h,r&&r.children[e])}r=r||h,s(h)}return f?()=>{o(f)}:bw}function o(t){if(Bw(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&Jw(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!i_(t)&&r.set(t.record.name,t)}return e=s_({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw Qw(1,{location:t});s=i.record.name,a=gw(function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw Qw(1,{location:t,currentLocation:e});s=i.record.name,a=gw({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:o_(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function r_(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function i_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function o_(t){return t.reduce(((t,e)=>gw(t,e.meta)),{})}function s_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const a_=/#/g,u_=/&/g,c_=/\//g,l_=/=/g,h_=/\?/g,f_=/\+/g,p_=/%5B/g,d_=/%5D/g,v_=/%5E/g,y_=/%60/g,g_=/%7B/g,m_=/%7C/g,b_=/%7D/g,w_=/%20/g;function __(t){return encodeURI(""+t).replace(m_,"|").replace(p_,"[").replace(d_,"]")}function E_(t){return __(t).replace(f_,"%2B").replace(w_,"+").replace(a_,"%23").replace(u_,"%26").replace(y_,"`").replace(g_,"{").replace(b_,"}").replace(v_,"^")}function I_(t){return null==t?"":function(t){return __(t).replace(a_,"%23").replace(h_,"%3F")}(t).replace(c_,"%2F")}function T_(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function S_(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(f_," "),i=t.indexOf("="),o=T_(i<0?t:t.slice(0,i)),s=i<0?null:T_(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function A_(t){let e="";for(let n in t){const r=t[n];if(n=E_(n).replace(l_,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&E_(t))):[r&&E_(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function C_(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function N_(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function D_(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(Qw(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(Qw(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>a(t)))}))}function x_(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(D_(o,n,r,s,t))}else{let o=a();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||cw&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=(o.__vccOpts||o)[e];return u&&D_(u,n,r,s,t)()}))))}}var o;return i}function k_(t){const e=Re(pw),n=Re(dw),r=be((()=>e.resolve(ve(t.to)))),i=be((()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],o=n.matched;if(!i||!o.length)return-1;const s=o.findIndex(Iw.bind(null,i));if(s>-1)return s;const a=O_(t[e-2]);return e>1&&O_(i)===a&&o[o.length-1].path!==a?o.findIndex(Iw.bind(null,t[e-2])):s})),o=be((()=>i.value>-1&&function(t,e){for(const n in e){const r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=be((()=>i.value>-1&&i.value===n.matched.length-1&&Tw(n.params,r.value.params)));return{route:r,href:be((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[ve(t.replace)?"replace":"push"](ve(t.to)).catch(bw):Promise.resolve()}}}const R_=qe({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:k_,setup(t,{slots:e}){const n=ee(k_(t)),{options:r}=Re(pw),i=be((()=>({[L_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[L_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:oi("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function O_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const L_=(t,e,n)=>null!=t?t:null!=e?e:n;function P_(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const F_=qe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Re(vw),i=be((()=>t.route||r.value)),o=Re(fw,0),s=be((()=>i.value.matched[o]));ke(fw,o+1),ke(hw,s),ke(vw,i);const a=de(u);var u;return ti((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&Iw(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return P_(n.default,{Component:u,route:r});const l=o.props[t.name],h=l?!0===l?r.params:"function"==typeof l?l(r):l:null,f=oi(u,gw({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return P_(n.default,{Component:f,route:r})||f}}});function M_(t){const e=n_(t.routes,t),n=t.parseQuery||S_,r=t.stringifyQuery||A_,i=t.history,o=N_(),s=N_(),a=N_(),u=de(Kw,!0);let c=Kw;yw&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=mw.bind(null,(t=>""+t)),h=mw.bind(null,I_),f=mw.bind(null,T_);function p(t,o){if(o=gw({},o||u.value),"string"==typeof t){const r=_w(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return gw(r,s,{params:f(s.params),hash:T_(r.hash),redirectedFrom:void 0,href:a})}let s;if("path"in t)s=gw({},t,{path:_w(n,t.path,o.path).path});else{const e=gw({},t.params);for(const t in e)null==e[t]&&delete e[t];s=gw({},t,{params:h(t.params)}),o.params=h(o.params)}const a=e.resolve(s,o),c=t.hash||"";a.params=l(f(a.params));const p=function(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,gw({},t,{hash:(d=c,__(d).replace(g_,"{").replace(b_,"}").replace(v_,"^")),path:a.path}));var d;const v=i.createHref(p);return gw({fullPath:p,hash:c,query:r===A_?C_(t.query):t.query||{}},a,{redirectedFrom:void 0,href:v})}function d(t){return"string"==typeof t?_w(n,t,u.value.path):gw({},t)}function v(t,e){if(c!==t)return Qw(8,{from:e,to:t})}function y(t){return m(t)}function g(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=d(r):{path:r},r.params={}),gw({query:t.query,hash:t.hash,params:t.params},r)}}function m(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,l=g(n);if(l)return m(gw(d(l),{state:o,force:s,replace:a}),e||n);const h=n;let f;return h.redirectedFrom=e,!s&&function(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Iw(e.matched[r],n.matched[i])&&Tw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=Qw(16,{to:h,from:i}),x(i,i,!0,!1)),(f?Promise.resolve(f):w(h,i)).catch((t=>Ww(t)?t:N(t,h,i))).then((t=>{if(t){if(Ww(t,2))return m(gw(d(t.to),{state:o,force:s,replace:a}),e||h)}else t=E(h,i,!0,a,o);return _(h,i,t),t}))}function b(t,e){const n=v(t,e);return n?Promise.reject(n):Promise.resolve()}function w(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>Iw(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>Iw(t,a)))||i.push(a))}return[n,r,i]}(t,e);n=x_(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(D_(r,t,e))}));const u=b.bind(null,t,e);return n.push(u),V_(n).then((()=>{n=[];for(const r of o.list())n.push(D_(r,t,e));return n.push(u),V_(n)})).then((()=>{n=x_(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(D_(r,t,e))}));return n.push(u),V_(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(D_(i,t,e));else n.push(D_(r.beforeEnter,t,e));return n.push(u),V_(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=x_(a,"beforeRouteEnter",t,e),n.push(u),V_(n)))).then((()=>{n=[];for(const r of s.list())n.push(D_(r,t,e));return n.push(u),V_(n)})).catch((t=>Ww(t,8)?t:Promise.reject(t)))}function _(t,e,n){for(const r of a.list())r(t,e,n)}function E(t,e,n,r,o){const s=v(t,e);if(s)return s;const a=e===Kw,c=yw?history.state:{};n&&(r||a?i.replace(t.fullPath,gw({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,x(t,e,n,a),D()}let I;function T(){I=i.listen(((t,e,n)=>{const r=p(t),o=g(r);if(o)return void m(gw(o,{replace:!0}),r).catch(bw);c=r;const s=u.value;var a,l;yw&&(a=Fw(s.fullPath,n.delta),l=Lw(),Mw.set(a,l)),w(r,s).catch((t=>Ww(t,12)?t:Ww(t,2)?(m(t.to,r).then((t=>{Ww(t,20)&&!n.delta&&n.type===Cw.pop&&i.go(-1,!1)})).catch(bw),Promise.reject()):(n.delta&&i.go(-n.delta,!1),N(t,r,s)))).then((t=>{(t=t||E(r,s,!1))&&(n.delta?i.go(-n.delta,!1):n.type===Cw.pop&&Ww(t,20)&&i.go(-1,!1)),_(r,s,t)})).catch(bw)}))}let S,A=N_(),C=N_();function N(t,e,n){D(t);const r=C.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function D(t){S||(S=!0,T(),A.list().forEach((([e,n])=>t?n(t):e())),A.reset())}function x(e,n,r,i){const{scrollBehavior:o}=t;if(!yw||!o)return Promise.resolve();const s=!r&&function(t){const e=Mw.get(t);return Mw.delete(t),e}(Fw(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Gr().then((()=>o(e,n,s))).then((t=>t&&Pw(t))).catch((t=>N(t,e,n)))}const k=t=>i.go(t);let R;const O=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return Bw(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:y,replace:function(t){return y(gw(d(t),{replace:!0}))},go:k,back:()=>k(-1),forward:()=>k(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:C.add,isReady:function(){return S&&u.value!==Kw?Promise.resolve():new Promise(((t,e)=>{A.add([t,e])}))},install(t){t.component("RouterLink",R_),t.component("RouterView",F_),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(u)}),yw&&!R&&u.value===Kw&&(R=!0,y(i.location).catch((t=>{})));const e={};for(const r in Kw)e[r]=be((()=>u.value[r]));t.provide(pw,this),t.provide(dw,ee(e)),t.provide(vw,u);const n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(c=Kw,I&&I(),u.value=Kw,R=!1,S=!1),n()}}}}function V_(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}export{zn as F,Si as T,ar as a,sr as b,tr as c,ee as d,Ye as e,Ae as f,pr as g,cr as h,Ki as i,ji as j,M_ as k,qw as l,Ho as m,Wi as n,Yn as o,qn as r,u as t,ve as u,zi as v,kn as w};
