function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=S(i)?s(i):r(i);if(o)for(const t in o)e[t]=o[t]}return e}return S(t)||C(t)?t:void 0}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(C(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":_(t)||C(t)&&(t.toString===D||!T(t.toString))?JSON.stringify(t,c,2):String(t),c=(t,e)=>e&&e.__v_isRef?c(t,e.value):E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!C(e)||_(e)||k(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===x(t),I=t=>"[object Set]"===x(t),T=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,C=t=>null!==t&&"object"==typeof t,N=t=>C(t)&&T(t.then)&&T(t.catch),D=Object.prototype.toString,x=t=>D.call(t),k=t=>"[object Object]"===x(t),R=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},P=/-(\w)/g,F=L((t=>t.replace(P,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,V=L((t=>t.replace(M,"-$1").toLowerCase())),U=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=L((t=>t?`on${U(t)}`:"")),q=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let G;const H=[];class Q{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&G&&(this.parent=G,this.index=(G.scopes||(G.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(H.push(this),G=this)}off(){this.active&&(H.pop(),G=H[H.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const W=t=>{const e=new Set(t);return e.w=0,e.n=0,e},$=t=>(t.w&Z)>0,Y=t=>(t.n&Z)>0,X=new WeakMap;let J=0,Z=1;const tt=[];let et;const nt=Symbol(""),rt=Symbol("");class it{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||G)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!tt.includes(this))try{return tt.push(et=this),at.push(st),st=!0,Z=1<<++J,J<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Z})(this):ot(this),this.fn()}finally{J<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];$(i)&&!Y(i)?i.delete(t):e[n++]=i,i.w&=~Z,i.n&=~Z}e.length=n}})(this),Z=1<<--J,ct(),tt.pop();const t=tt.length;et=t>0?tt[t-1]:void 0}}stop(){this.active&&(ot(this),this.onStop&&this.onStop(),this.active=!1)}}function ot(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let st=!0;const at=[];function ut(){at.push(st),st=!1}function ct(){const t=at.pop();st=void 0===t||t}function lt(t,e,n){if(!ht())return;let r=X.get(t);r||X.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=W()),ft(i)}function ht(){return st&&void 0!==et}function ft(t,e){let n=!1;J<=30?Y(t)||(t.n|=Z,n=!$(t)):n=!t.has(et),n&&(t.add(et),et.deps.push(t))}function pt(t,e,n,r,i,o){const s=X.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":_(t)?R(n)&&a.push(s.get("length")):(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"delete":_(t)||(a.push(s.get(nt)),E(t)&&a.push(s.get(rt)));break;case"set":E(t)&&a.push(s.get(nt))}if(1===a.length)a[0]&&dt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);dt(W(t))}}function dt(t,e){for(const n of _(t)?t:[...t])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const vt=t("__proto__,__v_isRef,__isVue"),yt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),gt=Et(),mt=Et(!1,!0),bt=Et(!0),wt=_t();function _t(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ae(this);for(let e=0,i=this.length;e<i;e++)lt(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(ae)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ut();const n=ae(this)[e].apply(this,t);return ct(),n}})),t}function Et(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Zt:Jt:e?Xt:Yt).get(n))return n;const o=_(n);if(!t&&o&&w(wt,r))return Reflect.get(wt,r,i);const s=Reflect.get(n,r,i);if(A(r)?yt.has(r):vt(r))return s;if(t||lt(n,0,r),e)return s;if(ce(s)){return!o||!R(r)?s.value:s}return C(s)?t?ne(s):ee(s):s}}function It(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=ae(r),o=ae(o),!_(e)&&ce(o)&&!ce(r)))return o.value=r,!0;const s=_(e)&&R(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===ae(i)&&(s?q(r,o)&&pt(e,"set",n,r):pt(e,"add",n,r)),a}}const Tt={get:gt,set:It(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&pt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&yt.has(e)||lt(t,0,e),n},ownKeys:function(t){return lt(t,0,_(t)?"length":nt),Reflect.ownKeys(t)}},St={get:bt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},At=g({},Tt,{get:mt,set:It(!0)}),Ct=t=>C(t)?ee(t):t,Nt=t=>C(t)?ne(t):t,Dt=t=>t,xt=t=>Reflect.getPrototypeOf(t);function kt(t,e,n=!1,r=!1){const i=ae(t=t.__v_raw),o=ae(e);e!==o&&!n&&lt(i,0,e),!n&&lt(i,0,o);const{has:s}=xt(i),a=r?Dt:n?Nt:Ct;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Rt(t,e=!1){const n=this.__v_raw,r=ae(n),i=ae(t);return t!==i&&!e&&lt(r,0,t),!e&&lt(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Ot(t,e=!1){return t=t.__v_raw,!e&&lt(ae(t),0,nt),Reflect.get(t,"size",t)}function Lt(t){t=ae(t);const e=ae(this);return xt(e).has.call(e,t)||(e.add(t),pt(e,"add",t,t)),this}function Pt(t,e){e=ae(e);const n=ae(this),{has:r,get:i}=xt(n);let o=r.call(n,t);o||(t=ae(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&pt(n,"set",t,e):pt(n,"add",t,e),this}function Ft(t){const e=ae(this),{has:n,get:r}=xt(e);let i=n.call(e,t);i||(t=ae(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&pt(e,"delete",t,void 0),o}function Mt(){const t=ae(this),e=0!==t.size,n=t.clear();return e&&pt(t,"clear",void 0,void 0),n}function Vt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=ae(o),a=e?Dt:t?Nt:Ct;return!t&&lt(s,0,nt),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Ut(t,e,n){return function(...r){const i=this.__v_raw,o=ae(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?Dt:e?Nt:Ct;return!e&&lt(o,0,u?rt:nt),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function jt(t){return function(...e){return"delete"!==t&&this}}function qt(){const t={get(t){return kt(this,t)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!1)},e={get(t){return kt(this,t,!1,!0)},get size(){return Ot(this)},has:Rt,add:Lt,set:Pt,delete:Ft,clear:Mt,forEach:Vt(!1,!0)},n={get(t){return kt(this,t,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!1)},r={get(t){return kt(this,t,!0,!0)},get size(){return Ot(this,!0)},has(t){return Rt.call(this,t,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:Vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Ut(i,!1,!1),n[i]=Ut(i,!0,!1),e[i]=Ut(i,!1,!0),r[i]=Ut(i,!0,!0)})),[t,n,e,r]}const[Bt,Kt,zt,Gt]=qt();function Ht(t,e){const n=e?t?Gt:zt:t?Kt:Bt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Qt={get:Ht(!1,!1)},Wt={get:Ht(!1,!0)},$t={get:Ht(!0,!1)},Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;function te(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>x(t).slice(8,-1))(t))}function ee(t){return t&&t.__v_isReadonly?t:re(t,!1,Tt,Qt,Yt)}function ne(t){return re(t,!0,St,$t,Jt)}function re(t,e,n,r,i){if(!C(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=te(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function ie(t){return oe(t)?ie(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function se(t){return ie(t)||oe(t)}function ae(t){const e=t&&t.__v_raw;return e?ae(e):t}function ue(t){return K(t,"__v_skip",!0),t}function ce(t){return Boolean(t&&!0===t.__v_isRef)}function le(t){return ce(t)?t.value:t}const he={get:(t,e,n)=>le(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ce(i)&&!ce(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function fe(t){return ie(t)?t:new Proxy(t,he)}class pe{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new it(t,(()=>{var t;this._dirty||(this._dirty=!0,(t=ae(t=this)).dep&&dt(t.dep))})),this.__v_isReadonly=n}get value(){const t=ae(this);var e;return e=t,ht()&&((e=ae(e)).dep||(e.dep=W()),ft(e.dep)),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function de(t,e){let n,r;T(t)?(n=t,r=f):(n=t.get,r=t.set);return new pe(n,r,T(t)||!t.set)}Promise.resolve();function ve(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(z))}let a,u=r[a=j(e)]||r[a=j(F(e))];!u&&o&&(u=r[a=j(V(e))]),u&&wr(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,wr(c,t,6,i)}}function ye(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!T(t)){const r=t=>{const n=ye(t,e,!0);n&&(a=!0,g(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):g(s,o),r.set(t,s),s):(r.set(t,null),null)}function ge(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,V(e))||w(t,e))}let me=null,be=null;function we(t){const e=me;return me=t,be=t&&t.type.__scopeId||null,e}function _e(t,e=me,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Kn(-1);const i=we(e),o=t(...n);return we(i),r._d&&Kn(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Ee(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let g;const m=we(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=er(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=er(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Ie(u)}let m=g;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&7&n&&(s&&e.some(y)&&(t=Te(t,s)),m=Zn(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){Un.length=0,_r(b,t,1),g=Jn(Mn)}return we(m),g}const Ie=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},Te=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Se(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!ge(n,o))return!0}return!1}function Ae(t,e,n=!1){const r=lr||me;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e.call(r.proxy):e}}const Ce=[Function,Array],Ne={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ce,onEnter:Ce,onAfterEnter:Ce,onEnterCancelled:Ce,onBeforeLeave:Ce,onLeave:Ce,onAfterLeave:Ce,onLeaveCancelled:Ce,onBeforeAppear:Ce,onAppear:Ce,onAfterAppear:Ce,onAppearCancelled:Ce},setup(t,{slots:e}){const n=hr(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ze((()=>{t.isMounted=!0})),Qe((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&Le(e.default(),!0);if(!o||!o.length)return;const s=ae(t),{mode:a}=s,u=o[0];if(r.isLeaving)return ke(u);const c=Re(u);if(!c)return ke(u);const l=xe(c,s,r,n);Oe(c,l);const h=n.subTree,f=h&&Re(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==Mn&&(!Qn(c,f)||p)){const t=xe(f,s,r,n);if(Oe(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},ke(u);"in-out"===a&&c.type!==Mn&&(t.delayLeave=(t,e,n)=>{De(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function De(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function xe(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=De(n,t),_=(t,e)=>{t&&wr(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=v||a}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&Qn(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||u,r=g||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>xe(t,e,n,r)};return E}function ke(t){if(Fe(t))return(t=Zn(t)).children=null,t}function Re(t){return Fe(t)?t.children?t.children[0]:void 0:t}function Oe(t,e){6&t.shapeFlag&&t.component?Oe(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Le(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Pn?(128&o.patchFlag&&r++,n=n.concat(Le(o.children,e))):(e||o.type!==Mn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const Pe=t=>!!t.type.__asyncLoader,Fe=t=>t.type.__isKeepAlive;function Me(t,e){Ue(t,"a",e)}function Ve(t,e){Ue(t,"da",e)}function Ue(t,e,n=lr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(qe(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Fe(t.parent.vnode)&&je(r,e,n,t),t=t.parent}}function je(t,e,n,r){const i=qe(e,t,r,!0);We((()=>{m(r[e],i)}),n)}function qe(t,e,n=lr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ut(),fr(n);const i=wr(e,n,t,r);return pr(),ct(),i});return r?i.unshift(o):i.push(o),o}}const Be=t=>(e,n=lr)=>(!vr||"sp"===t)&&qe(t,e,n),Ke=Be("bm"),ze=Be("m"),Ge=Be("bu"),He=Be("u"),Qe=Be("bum"),We=Be("um"),$e=Be("sp"),Ye=Be("rtg"),Xe=Be("rtc");function Je(t,e=lr){qe("ec",t,e)}let Ze=!0;function tn(t){const e=rn(t),n=t.proxy,r=t.ctx;Ze=!1,e.beforeCreate&&en(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:v,activated:y,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:E,render:I,renderTracked:S,renderTriggered:A,errorCaptured:N,serverPrefetch:D,expose:x,inheritAttrs:k,components:R,directives:O,filters:L}=e;if(c&&function(t,e,n=f,r=!1){_(t)&&(t=un(t));for(const i in t){const n=t[i];let o;o=C(n)?"default"in n?Ae(n.from||i,n.default,!0):Ae(n.from||i):Ae(n),ce(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const f in s){const t=s[f];T(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);C(e)&&(t.data=ee(e))}if(Ze=!0,o)for(const _ in o){const t=o[_],e=de({get:T(t)?t.bind(n,n):T(t.get)?t.get.bind(n,n):f,set:!T(t)&&T(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)nn(a[f],r,n,f);if(u){const t=T(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(lr){let n=lr.provides;const r=lr.parent&&lr.parent.provides;r===n&&(n=lr.provides=Object.create(r)),n[t]=e}}(e,t[e])}))}function P(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&en(l,t,"c"),P(Ke,h),P(ze,p),P(Ge,d),P(He,v),P(Me,y),P(Ve,g),P(Je,N),P(Xe,S),P(Ye,A),P(Qe,b),P(We,E),P($e,D),_(x))if(x.length){const e=t.exposed||(t.exposed={});x.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===f&&(t.render=I),null!=k&&(t.inheritAttrs=k),R&&(t.components=R),O&&(t.directives=O)}function en(t,e,n){wr(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function nn(t,e,n,r){const i=r.includes(".")?Qr(n,r):()=>n[r];if(S(t)){const n=e[t];T(n)&&zr(i,n)}else if(T(t))zr(i,t.bind(n));else if(C(t))if(_(t))t.forEach((t=>nn(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&zr(i,r,t)}}function rn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>on(u,t,s,!0))),on(u,e,s)):u=e,o.set(e,u),u}function on(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&on(t,o,n,!0),i&&i.forEach((e=>on(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=sn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const sn={data:an,props:ln,emits:ln,methods:ln,computed:ln,beforeCreate:cn,created:cn,beforeMount:cn,mounted:cn,beforeUpdate:cn,updated:cn,beforeDestroy:cn,destroyed:cn,activated:cn,deactivated:cn,errorCaptured:cn,serverPrefetch:cn,components:ln,directives:ln,watch:function(t,e){if(!t)return e;if(!e)return t;const n=g(Object.create(null),t);for(const r in e)n[r]=cn(t[r],e[r]);return n},provide:an,inject:function(t,e){return ln(un(t),un(e))}};function an(t,e){return e?t?function(){return g(T(t)?t.call(this,this):t,T(e)?e.call(this,this):e)}:e:t}function un(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function cn(t,e){return t?[...new Set([].concat(t,e))]:e}function ln(t,e){return t?g(g(Object.create(null),t),e):e}function hn(t,e,n,r=!1){const i={},o={};K(o,Wn,1),t.propsDefaults=Object.create(null),fn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:re(i,!1,At,Wt,Xt):t.type.props?t.props=i:t.props=o,t.attrs=o}function fn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(O(u))continue;const c=e[u];let l;i&&w(i,l=F(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:ge(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=ae(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=pn(i,e,a,r[a],t,!w(r,a))}}return a}function pn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&T(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(fr(i),r=o[n]=t.call(null,e),pr())}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==V(n)||(r=!0))}return r}function dn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!T(t)){const r=t=>{u=!0;const[n,r]=dn(t,e,!0);g(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=F(o[h]);vn(t)&&(s[t]=l)}else if(o)for(const l in o){const t=F(l);if(vn(t)){const e=o[l],n=s[t]=_(e)||T(e)?{type:e}:e;if(n){const e=mn(Boolean,n.type),r=mn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function vn(t){return"$"!==t[0]}function yn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function gn(t,e){return yn(t)===yn(e)}function mn(t,e){return _(e)?e.findIndex((e=>gn(e,t))):T(e)&&gn(e,t)?0:-1}const bn=t=>"_"===t[0]||"$stable"===t,wn=t=>_(t)?t.map(er):[er(t)],_n=(t,e,n)=>{const r=_e((t=>wn(e(t))),n);return r._c=!1,r},En=(t,e,n)=>{const r=t._ctx;for(const i in t){if(bn(i))continue;const n=t[i];if(T(n))e[i]=_n(0,n,r);else if(null!=n){const t=wn(n);e[i]=()=>t}}},In=(t,e)=>{const n=wn(e);t.slots.default=()=>n};function Tn(t,e){if(null===me)return t;const n=me.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=l]=e[i];T(t)&&(t={mounted:t,updated:t}),t.deep&&Wr(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Sn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(ut(),wr(u,n,8,[t.el,a,t,e]),ct())}}function An(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cn=0;function Nn(t,e){return function(n,r=null){null==r||C(r)||(r=null);const i=An(),o=new Set;let s=!1;const a=i.app={_uid:Cn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:$r,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(a,...e)):T(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=Jn(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Dn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):Vr(t,xr,Dr,kr)};function xn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:s,createComment:a,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:v=f,cloneNode:y,insertStaticContent:m}=t,b=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!Qn(t,e)&&(r=et(t),Y(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case Fn:_(t,e,n,r);break;case Mn:E(t,e,n,r);break;case Vn:null==t&&I(e,n,r,s);break;case Pn:P(t,e,n,r,i,o,s,a,u);break;default:1&h?A(t,e,n,r,i,o,s,a,u):6&h?M(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,rt)}null!=l&&i&&kn(l,t&&t.ref,o,e||t,!e)},_=(t,e,r,i)=>{if(null==t)n(e.el=s(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},E=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},I=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},T=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=d(t),n(t,r,i),t=o;n(e,r,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=d(t),r(t),t=n;r(e)},A=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,u):k(t,e,i,o,s,a,u)},C=(t,e,r,s,a,u,l,h)=>{let f,p;const{type:d,props:v,shapeFlag:g,transition:m,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==y&&-1===b)f=t.el=y(t.el);else{if(f=t.el=o(t.type,u,v&&v.is,v),8&g?c(f,t.children):16&g&&x(t.children,f,null,s,a,u&&"foreignObject"!==d,l,h),w&&Sn(t,null,s,"created"),v){for(const e in v)"value"===e||O(e)||i(f,e,null,v[e],u,t.children,s,a,tt);"value"in v&&i(f,"value",null,v.value),(p=v.onVnodeBeforeMount)&&Rn(p,s,t)}D(f,t,t.scopeId,l,s)}w&&Sn(t,null,s,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;_&&m.beforeEnter(f),n(f,e,r),((p=v&&v.onVnodeMounted)||_||w)&&Dn((()=>{p&&Rn(p,s,t),_&&m.enter(f),w&&Sn(t,null,s,"mounted")}),a)},D=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;D(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},x=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?nr(t[c]):er(t[c]);b(null,u,e,n,r,i,o,s,a)}},k=(t,e,n,r,o,s,a)=>{const u=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:p}=e;h|=16&t.patchFlag;const d=t.props||l,v=e.props||l;let y;(y=v.onVnodeBeforeUpdate)&&Rn(y,n,e,t),p&&Sn(e,t,n,"beforeUpdate");const g=o&&"foreignObject"!==e.type;if(f?R(t.dynamicChildren,f,u,n,r,g,s):a||G(t,e,u,null,n,r,g,s,!1),h>0){if(16&h)L(u,e,d,v,n,r,o);else if(2&h&&d.class!==v.class&&i(u,"class",null,v.class,o),4&h&&i(u,"style",d.style,v.style,o),8&h){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],c=d[a],l=v[a];l===c&&"value"!==a||i(u,a,c,l,o,t.children,n,r,tt)}}1&h&&t.children!==e.children&&c(u,e.children)}else a||null!=f||L(u,e,d,v,n,r,o);((y=v.onVnodeUpdated)||p)&&Dn((()=>{y&&Rn(y,n,e,t),p&&Sn(e,t,n,"updated")}),r)},R=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===Pn||!Qn(u,c)||70&u.shapeFlag)?p(u.el):n;b(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,o,s,a)=>{if(n!==r){for(const u in r){if(O(u))continue;const c=r[u],l=n[u];c!==l&&"value"!==u&&i(t,u,l,c,a,e.children,o,s,tt)}if(n!==l)for(const u in n)O(u)||u in r||i(t,u,n[u],null,a,e.children,o,s,tt);"value"in r&&i(t,"value",n.value,r.value)}},P=(t,e,r,i,o,a,u,c,l)=>{const h=e.el=t?t.el:s(""),f=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),x(e.children,r,f,o,a,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(R(t.dynamicChildren,d,r,o,a,u,c),(null!=e.key||o&&e===o.subTree)&&On(t,e,!0)):G(t,e,r,f,o,a,u,c,l)},M=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):j(t,e,u)},U=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||ur,o={uid:cr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new Q(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dn(r,i),emitsOptions:ye(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=ve.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if(Fe(t)&&(a.ctx.renderer=rt),function(t,e=!1){vr=e;const{props:n,children:r}=t.vnode,i=dr(t);hn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ae(e),K(e,"_",n)):En(e,t.slots={})}else t.slots={},e&&In(t,e);K(t.slots,Wn,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ue(new Proxy(t.ctx,ar));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(lt(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;fr(t),ut();const i=br(r,t,0,[t.props,n]);if(ct(),pr(),N(i)){if(i.then(pr,pr),e)return i.then((e=>{yr(t,e)})).catch((e=>{_r(e,t,0)}));t.asyncDep=i}else yr(t,i)}else gr(t)}(t,e):void 0;vr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,q),!t.el){const t=a.subTree=Jn(Mn);E(null,t,e,n)}}else q(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Se(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?Se(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!ge(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,e,n);r.next=e,function(t){const e=Tr.indexOf(t);e>Sr&&Tr.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},q=(t,e,n,r,i,o,s)=>{const a=new it((()=>{if(t.isMounted){let e,{next:n,bu:r,u:u,parent:c,vnode:l}=t,h=n;n?(n.el=l.el,z(t,n,s)):n=l,a.allowRecurse=!1,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Rn(e,c,n,l),a.allowRecurse=!0;const f=Ee(t),d=t.subTree;t.subTree=f,b(d,f,p(d.el),et(d),t,i,o),n.el=f.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Dn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Dn((()=>Rn(e,c,n,l)),i)}else{let s;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t,p=Pe(e);if(a.allowRecurse=!1,l&&B(l),!p&&(s=c&&c.onVnodeBeforeMount)&&Rn(s,f,e),a.allowRecurse=!0,u&&st){const n=()=>{t.subTree=Ee(t),st(u,t.subTree,t,i,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Ee(t);b(null,s,n,r,t,i,o),e.el=s.el}if(h&&Dn(h,i),!p&&(s=c&&c.onVnodeMounted)){const t=e;Dn((()=>Rn(s,f,t)),i)}256&e.shapeFlag&&t.a&&Dn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>Fr(t.update)),t.scope),u=t.update=a.run.bind(a);u.id=t.uid,a.allowRecurse=u.allowRecurse=!0,u()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=ae(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;fn(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=V(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=pn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=F(s);i[e]=pn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&pt(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(g(i,e),n||1!==t||delete i._):(o=!e.$stable,En(e,i)),s=e}else e&&(In(t,e),s={default:1});if(o)for(const a in i)bn(a)||a in s||delete i[a]})(t,e.children,n),ut(),Ur(void 0,t.update),ct()},G=(t,e,n,r,i,o,s,a,u=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,f=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void W(l,f,n,r,i,o,s,a,u);if(256&p)return void H(l,f,n,r,i,o,s,a,u)}8&d?(16&h&&tt(l,i,o),f!==l&&c(n,f)):16&h?16&d?W(l,f,n,r,i,o,s,a,u):tt(l,i,o,!0):(8&h&&c(n,""),16&d&&x(f,n,r,i,o,s,a,u))},H=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?nr(e[p]):er(e[p]);b(t[p],r,n,null,i,o,s,a,u)}c>l?tt(t,i,o,!0,!1,f):x(e,n,r,i,o,s,a,u,f)},W=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?nr(e[c]):er(e[c]);if(!Qn(r,l))break;b(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?nr(e[p]):er(e[p]);if(!Qn(r,c))break;b(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)b(null,e[c]=u?nr(e[c]):er(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)Y(t[c],i,o,!0),c++;else{const d=c,v=c,y=new Map;for(c=v;c<=p;c++){const t=e[c]=u?nr(e[c]):er(e[c]);null!=t.key&&y.set(t.key,c)}let g,m=0;const w=p-v+1;let _=!1,E=0;const I=new Array(w);for(c=0;c<w;c++)I[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=w){Y(r,i,o,!0);continue}let l;if(null!=r.key)l=y.get(r.key);else for(g=v;g<=p;g++)if(0===I[g-v]&&Qn(r,e[g])){l=g;break}void 0===l?Y(r,i,o,!0):(I[l-v]=c+1,l>=E?E=l:_=!0,b(r,e[l],n,null,i,o,s,a,u),m++)}const T=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(I):h;for(g=T.length-1,c=w-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===I[c]?b(null,h,n,f,i,o,s,a,u):_&&(g<0||c!==T[g]?$(h,n,f,2):g--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,rt);if(a===Pn){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===Vn)return void T(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Dn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},Y=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&kn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f,d=!Pe(t);let v;if(d&&(v=s&&s.onVnodeBeforeUnmount)&&Rn(v,e,t),6&l)Z(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Sn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,rt,r):c&&(o!==Pn||h>0&&64&h)?tt(c,e,n,!1,!0):(o===Pn&&384&h||!i&&16&l)&&tt(u,e,n),r&&X(t)}(d&&(v=s&&s.onVnodeUnmounted)||p)&&Dn((()=>{v&&Rn(v,e,t),p&&Sn(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Pn)return void J(n,i);if(e===Vn)return void S(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=d(t),r(t),t=n;r(e)},Z=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:s,um:a}=t;r&&B(r),i.stop(),o&&(o.active=!1,Y(s,t,e,n)),a&&Dn(a,e),Dn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)Y(t[s],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),jr(),e._vnode=t},rt={p:b,um:Y,m:$,r:X,mt:U,mc:x,pc:G,pbc:R,n:et,o:t};let ot,st;e&&([ot,st]=e(rt));return{render:nt,hydrate:ot,createApp:Nn(nt,ot)}}(t)}function kn(t,e,n,r,i=!1){if(_(t))return void t.forEach(((t,o)=>kn(t,e&&(_(e)?e[o]:e),n,r,i)));if(Pe(r)&&!i)return;const o=4&r.shapeFlag?mr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):ce(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,Dn(t,n)):t()}else if(ce(u)){const t=()=>{u.value=s};s?(t.id=-1,Dn(t,n)):t()}else T(u)&&br(u,a,12,[s,h])}function Rn(t,e,n,r=null){wr(t,e,7,[n,r])}function On(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=nr(i[o]),e.el=t.el),n||On(t,e))}}const Ln=Symbol(),Pn=Symbol(void 0),Fn=Symbol(void 0),Mn=Symbol(void 0),Vn=Symbol(void 0),Un=[];let jn=null;function qn(t=!1){Un.push(jn=t?null:[])}let Bn=1;function Kn(t){Bn+=t}function zn(t){return t.dynamicChildren=Bn>0?jn||h:null,Un.pop(),jn=Un[Un.length-1]||null,Bn>0&&jn&&jn.push(t),t}function Gn(t,e,n,r,i,o){return zn(Xn(t,e,n,r,i,o,!0))}function Hn(t){return!!t&&!0===t.__v_isVNode}function Qn(t,e){return t.type===e.type&&t.key===e.key}const Wn="__vInternal",$n=({key:t})=>null!=t?t:null,Yn=({ref:t})=>null!=t?S(t)||ce(t)||T(t)?{i:me,r:t}:t:null;function Xn(t,e=null,n=null,r=0,i=null,o=(t===Pn?0:1),s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$n(e),ref:e&&Yn(e),scopeId:be,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(rr(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=S(n)?8:16),Bn>0&&!s&&jn&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&jn.push(u),u}const Jn=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Ln||(t=Mn);if(Hn(t)){const r=Zn(t,e,!0);return n&&rr(r,n),r}u=t,T(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){e=function(t){return t?se(t)||Wn in t?g({},t):t:null}(e);let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),C(n)&&(se(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:C(t)?4:T(t)?2:0;return Xn(t,e,n,i,o,c,s,!0)};function Zn(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&$n(c),ref:e&&e.ref?n&&o?_(o)?o.concat(Yn(e)):[o,Yn(e)]:Yn(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zn(t.ssContent),ssFallback:t.ssFallback&&Zn(t.ssFallback),el:t.el,anchor:t.anchor}}function tr(t=" ",e=0){return Jn(Fn,null,t,e)}function er(t){return null==t||"boolean"==typeof t?Jn(Mn):_(t)?Jn(Pn,null,t.slice()):"object"==typeof t?nr(t):Jn(Fn,null,String(t))}function nr(t){return null===t.el||t.memo?t:Zn(t)}function rr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),rr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Wn in e?3===r&&me&&(1===me.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=me}}else T(e)?(e={default:e,_ctx:me},n=32):(e=String(e),64&r?(n=16,e=[tr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ir(t,e,n,r){let i;const o=n&&n[r];if(_(t)||S(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(C(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=e(t[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}const or=t=>t?dr(t)?mr(t)||t.proxy:or(t.parent):null,sr=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>or(t.parent),$root:t=>or(t.root),$emit:t=>t.emit,$options:t=>rn(t),$forceUpdate:t=>()=>Fr(t.update),$nextTick:t=>Pr.bind(t.proxy),$watch:t=>Hr.bind(t)}),ar={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];Ze&&(s[e]=4)}}const h=sr[e];let f,p;return h?("$attrs"===e&&lt(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(sr,s)||w(i.config.globalProperties,s)}},ur=An();let cr=0;let lr=null;const hr=()=>lr||me,fr=t=>{lr=t,t.scope.on()},pr=()=>{lr&&lr.scope.off(),lr=null};function dr(t){return 4&t.vnode.shapeFlag}let vr=!1;function yr(t,e,n){T(e)?t.render=e:C(e)&&(t.setupState=fe(e)),gr(t)}function gr(t,e,n){const r=t.type;t.render||(t.render=r.render||f),fr(t),ut(),tn(t),ct(),pr()}function mr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(fe(ue(t.exposed)),{get:(e,n)=>n in e?e[n]:n in sr?sr[n](t):void 0}))}function br(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){_r(o,e,n)}return i}function wr(t,e,n,r){if(T(t)){const i=br(t,e,n,r);return i&&N(i)&&i.catch((t=>{_r(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(wr(t[o],e,n,r));return i}function _r(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void br(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let Er=!1,Ir=!1;const Tr=[];let Sr=0;const Ar=[];let Cr=null,Nr=0;const Dr=[];let xr=null,kr=0;const Rr=Promise.resolve();let Or=null,Lr=null;function Pr(t){const e=Or||Rr;return t?e.then(this?t.bind(this):t):e}function Fr(t){Tr.length&&Tr.includes(t,Er&&t.allowRecurse?Sr+1:Sr)||t===Lr||(null==t.id?Tr.push(t):Tr.splice(function(t){let e=Sr+1,n=Tr.length;for(;e<n;){const r=e+n>>>1;qr(Tr[r])<t?e=r+1:n=r}return e}(t.id),0,t),Mr())}function Mr(){Er||Ir||(Ir=!0,Or=Rr.then(Br))}function Vr(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Mr()}function Ur(t,e=null){if(Ar.length){for(Lr=e,Cr=[...new Set(Ar)],Ar.length=0,Nr=0;Nr<Cr.length;Nr++)Cr[Nr]();Cr=null,Nr=0,Lr=null,Ur(t,e)}}function jr(t){if(Dr.length){const t=[...new Set(Dr)];if(Dr.length=0,xr)return void xr.push(...t);for(xr=t,xr.sort(((t,e)=>qr(t)-qr(e))),kr=0;kr<xr.length;kr++)xr[kr]();xr=null,kr=0}}const qr=t=>null==t.id?1/0:t.id;function Br(t){Ir=!1,Er=!0,Ur(t),Tr.sort(((t,e)=>qr(t)-qr(e)));try{for(Sr=0;Sr<Tr.length;Sr++){const t=Tr[Sr];t&&!1!==t.active&&br(t,null,14)}}finally{Sr=0,Tr.length=0,jr(),Er=!1,Or=null,(Tr.length||Ar.length||Dr.length)&&Br(t)}}const Kr={};function zr(t,e,n){return Gr(t,e,n)}function Gr(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l){const a=lr;let u,c,h=!1,p=!1;if(ce(t)?(u=()=>t.value,h=!!t._shallow):ie(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some(ie),u=()=>t.map((t=>ce(t)?t.value:ie(t)?Wr(t):T(t)?br(t,a,2):void 0))):u=T(t)?e?()=>br(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),wr(t,a,3,[d])}:f,e&&r){const t=u;u=()=>Wr(t())}let d=t=>{c=b.onStop=()=>{br(t,a,4)}},v=p?[]:Kr;const y=()=>{if(b.active)if(e){const t=b.run();(r||h||(p?t.some(((t,e)=>q(t,v[e]))):q(t,v)))&&(c&&c(),wr(e,a,3,[t,v===Kr?void 0:v,d]),v=t)}else b.run()};let g;y.allowRecurse=!!e,g="sync"===i?y:"post"===i?()=>Dn(y,a&&a.suspense):()=>{!a||a.isMounted?function(t){Vr(t,Cr,Ar,Nr)}(y):y()};const b=new it(u,g);return e?n?y():v=b.run():"post"===i?Dn(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&m(a.scope.effects,b)}}function Hr(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?Qr(r,t):()=>r[t]:t.bind(r,r);let o;T(e)?o=e:(o=e.handler,n=e);const s=lr;fr(this);const a=Gr(i,o.bind(r),n);return s?fr(s):pr(),a}function Qr(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Wr(t,e=new Set){if(!C(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),ce(t))Wr(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)Wr(t[n],e);else if(I(t)||E(t))t.forEach((t=>{Wr(t,e)}));else if(k(t))for(const n in t)Wr(t[n],e);return t}const $r="3.2.3",Yr="undefined"!=typeof document?document:null,Xr=new Map,Jr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Yr.createElementNS("http://www.w3.org/2000/svg",t):Yr.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>Yr.createTextNode(t),createComment:t=>Yr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=Xr.get(t);if(!o){const e=Yr.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}Xr.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Zr=/\s*!important$/;function ti(t,e,n){if(_(n))n.forEach((n=>ti(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=ni[e];if(n)return n;let r=F(e);if("filter"!==r&&r in t)return ni[e]=r;r=U(r);for(let i=0;i<ei.length;i++){const n=ei[i]+r;if(n in t)return ni[e]=n}return e}(t,e);Zr.test(n)?t.setProperty(V(r),n.replace(Zr,""),"important"):t[r]=n}}const ei=["Webkit","Moz","ms"],ni={};const ri="http://www.w3.org/1999/xlink";let ii=Date.now,oi=!1;if("undefined"!=typeof window){ii()>document.createEvent("Event").timeStamp&&(ii=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);oi=!!(t&&Number(t[1])<=53)}let si=0;const ai=Promise.resolve(),ui=()=>{si=0};function ci(t,e,n,r){t.addEventListener(e,n,r)}function li(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(hi.test(t)){let n;for(e={};n=t.match(hi);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){ci(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||ii();(oi||r>=n.attached-1)&&wr(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>si||(ai.then(ui),si=ii()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const hi=/(?:Once|Passive|Capture)$/;const fi=/^on[a-z]/;const pi="transition",di=(t,{slots:e})=>function(t,e,n){const r=arguments.length;return 2===r?C(e)&&!_(e)?Hn(e)?Jn(t,null,[e]):Jn(t,e):Jn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Hn(n)&&(n=[n]),Jn(t,e,n))}(Ne,function(t){const e={};for(const g in t)g in vi||(e[g]=t[g]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(C(t))return[mi(t.enter),mi(t.leave)];{const e=mi(t);return[e,e]}}(i),v=d&&d[0],y=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:E,onBeforeAppear:I=m,onAppear:T=b,onAppearCancelled:S=w}=e,A=(t,e,n)=>{wi(t,e?l:a),wi(t,e?c:s),n&&n()},N=(t,e)=>{wi(t,p),wi(t,f),e&&e()},D=t=>(e,n)=>{const i=t?T:b,s=()=>A(e,t,n);yi(i,[e,s]),_i((()=>{wi(e,t?u:o),bi(e,t?l:a),gi(i)||Ii(e,r,v,s)}))};return g(e,{onBeforeEnter(t){yi(m,[t]),bi(t,o),bi(t,s)},onBeforeAppear(t){yi(I,[t]),bi(t,u),bi(t,c)},onEnter:D(!1),onAppear:D(!0),onLeave(t,e){const n=()=>N(t,e);bi(t,h),document.body.offsetHeight,bi(t,f),_i((()=>{wi(t,h),bi(t,p),gi(_)||Ii(t,r,y,n)})),yi(_,[t,n])},onEnterCancelled(t){A(t,!1),yi(w,[t])},onAppearCancelled(t){A(t,!0),yi(S,[t])},onLeaveCancelled(t){N(t),yi(E,[t])}})}(t),e);di.displayName="Transition";const vi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};di.props=g({},Ne.props,vi);const yi=(t,e=[])=>{_(t)?t.forEach((t=>t(...e))):t&&t(...e)},gi=t=>!!t&&(_(t)?t.some((t=>t.length>1)):t.length>1);function mi(t){return z(t)}function bi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function wi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function _i(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Ei=0;function Ii(t,e,n,r){const i=t._endId=++Ei,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=Ti(i,o),a=r("animationDelay"),u=r("animationDuration"),c=Ti(a,u);let l=null,h=0,f=0;e===pi?s>0&&(l=pi,h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?pi:"animation":null,f=l?l===pi?o.length:u.length:0);const p=l===pi&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:h,propCount:f,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Ti(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>Si(e)+Si(t[n]))))}function Si(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const Ai=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function Ci(t){t.target.composing=!0}function Ni(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const Di={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Ai(i);const o=r||i.props&&"number"===i.props.type;ci(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=z(r)),t._assign(r)})),n&&ci(t,"change",(()=>{t.value=t.value.trim()})),e||(ci(t,"compositionstart",Ci),ci(t,"compositionend",Ni),ci(t,"change",Ni))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Ai(o),t.composing)return;if(document.activeElement===t){if(n)return;if(r&&t.value.trim()===e)return;if((i||"number"===t.type)&&z(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},xi=["ctrl","shift","alt","meta"],ki={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>xi.some((n=>t[`${n}Key`]&&!e.includes(n)))},Ri=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=ki[e[t]];if(r&&r(n,e))return}return t(n,...r)},Oi={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Li(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Li(t,!0),r.enter(t)):r.leave(t,(()=>{Li(t,!1)})):Li(t,e))},beforeUnmount(t,{value:e}){Li(t,e)}};function Li(t,e){t.style.display=e?t._vod:"none"}const Pi=g({patchProp:(t,r,i,o,s=!1,a,u,c,l)=>{"class"===r?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,s):"style"===r?function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)ti(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&ti(r,t,"")}else t.removeAttribute("style")}(t,i,o):v(r)?y(r)||li(t,r,0,o,u):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&fi.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(fi.test(e)&&S(n))return!1;return e in t}(t,r,o,s))?function(t,e,r,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName){t._value=r;const n=null==r?"":r;return t.value!==n&&(t.value=n),void(null==r&&t.removeAttribute(e))}if(""===r||null==r){const i=typeof t[e];if("boolean"===i)return void(t[e]=n(r));if(null==r&&"string"===i)return t[e]="",void t.removeAttribute(e);if("number"===i){try{t[e]=0}catch(u){}return void t.removeAttribute(e)}}try{t[e]=r}catch(Wb){}}(t,r,o,a,u,c,l):("true-value"===r?t._trueValue=o:"false-value"===r&&(t._falseValue=o),function(t,r,i,o,s){if(o&&r.startsWith("xlink:"))null==i?t.removeAttributeNS(ri,r.slice(6,r.length)):t.setAttributeNS(ri,r,i);else{const o=e(r);null==i||o&&!n(i)?t.removeAttribute(r):t.setAttribute(r,o?"":i)}}(t,r,o,s))}},Jr);let Fi;const Mi=(...t)=>{const e=(Fi||(Fi=xn(Pi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Vi=function(t,e){return(Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ui(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Vi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ji=function(){return(ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function qi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(Wb){o(Wb)}}function a(t){try{u(r.throw(t))}catch(Wb){o(Wb)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Bi(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(Wb){o=[6,Wb],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Ki(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Gi(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Qi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Qi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wi=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $i(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Yi(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Wb){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xi=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ji.prototype.create),o}return Ui(e,t),e}(Error),Ji=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Zi(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Xi(i,a,r);return u},t}();function Zi(t,e){return t.replace(to,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var to=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function no(t,e){var n=new ro(t,e);return n.subscribe.bind(n)}var ro=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=io),void 0===r.error&&(r.error=io),void 0===r.complete&&(r.complete=io);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(Wb){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(Wb){"undefined"!=typeof console&&console.error&&console.error(Wb)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function io(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){return t&&t._delegate?t._delegate:t}var so=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),ao=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Wi;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(Wb){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Wb){if(r)return null;throw Wb}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(Wb){}try{for(var r=Ki(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=zi(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(Wb){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return qi(this,void 0,void 0,(function(){var t;return Bi(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Gi(Gi([],zi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),zi(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=Ki(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=zi(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Ki(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uo,co=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ao(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function lo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ho,fo,po=[];(fo=ho||(ho={}))[fo.DEBUG=0]="DEBUG",fo[fo.VERBOSE=1]="VERBOSE",fo[fo.INFO=2]="INFO",fo[fo.WARN=3]="WARN",fo[fo.ERROR=4]="ERROR",fo[fo.SILENT=5]="SILENT";var vo,yo={debug:ho.DEBUG,verbose:ho.VERBOSE,info:ho.INFO,warn:ho.WARN,error:ho.ERROR,silent:ho.SILENT},go=ho.INFO,mo=((uo={})[ho.DEBUG]="log",uo[ho.VERBOSE]="log",uo[ho.INFO]="info",uo[ho.WARN]="warn",uo[ho.ERROR]="error",uo),bo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=mo[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,lo(["["+i+"]  "+t.name+":"],n))}},wo=function(){function t(t){this.name=t,this._logLevel=go,this._logHandler=bo,this._userLogHandler=null,po.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ho))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?yo[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,lo([this,ho.DEBUG],t)),this._logHandler.apply(this,lo([this,ho.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,lo([this,ho.VERBOSE],t)),this._logHandler.apply(this,lo([this,ho.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,lo([this,ho.INFO],t)),this._logHandler.apply(this,lo([this,ho.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,lo([this,ho.WARN],t)),this._logHandler.apply(this,lo([this,ho.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,lo([this,ho.ERROR],t)),this._logHandler.apply(this,lo([this,ho.ERROR],t))},t}();function _o(t){po.forEach((function(e){e.setLogLevel(t)}))}var Eo,Io=((vo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",vo["bad-app-name"]="Illegal App name: '{$appName}",vo["duplicate-app"]="Firebase App named '{$appName}' already exists",vo["app-deleted"]="Firebase App named '{$appName}' already deleted",vo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",vo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",vo),To=new Ji("app","Firebase",Io),So=((Eo={})["@firebase/app"]="fire-core",Eo["@firebase/analytics"]="fire-analytics",Eo["@firebase/app-check"]="fire-app-check",Eo["@firebase/auth"]="fire-auth",Eo["@firebase/database"]="fire-rtdb",Eo["@firebase/functions"]="fire-fn",Eo["@firebase/installations"]="fire-iid",Eo["@firebase/messaging"]="fire-fcm",Eo["@firebase/performance"]="fire-perf",Eo["@firebase/remote-config"]="fire-rc",Eo["@firebase/storage"]="fire-gcs",Eo["@firebase/firestore"]="fire-fst",Eo["fire-js"]="fire-js",Eo["firebase-wrapper"]="fire-js-all",Eo),Ao=new wo("@firebase/app"),Co=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Qi(void 0,t),this.container=new co(e.name),this._addComponent(new so("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(Wb){Ao.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,Wb)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw To.create("app-deleted",{appName:this.name_})},t}();Co.prototype.name&&Co.prototype.options||Co.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function No(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw To.create("bad-app-name",{appName:String(s)});if(eo(e,s))throw To.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=So[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ao.warn(u.join(" "))}o(new so(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:_o,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw To.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=yo[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ho[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=po;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!eo(e,t=t||"[DEFAULT]"))throw To.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Ao.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw To.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Qi(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do=function t(){var e=No(Co);return e.INTERNAL=ji(ji({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Qi(e,t)},createSubscribe:no,ErrorFactory:Ji,deepExtend:Qi}),e}(),xo=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ao.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ko=self.firebase.SDK_VERSION;ko&&ko.indexOf("LITE")>=0&&Ao.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ro=Do.initializeApp;Do.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yi()&&Ao.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ro.apply(void 0,t)};var Oo,Lo,Po=Do;(Oo=Po).INTERNAL.registerComponent(new so("platform-logger",(function(t){return new xo(t)}),"PRIVATE")),Oo.registerVersion("@firebase/app","0.6.29",Lo),Oo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Po.registerVersion("firebase","8.9.1","app"),Po.SDK_VERSION="8.9.1";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Fo=function(t,e){return(Fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Mo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Vo,Uo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},jo=jo||{},qo=Uo||self;function Bo(){}function Ko(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function zo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Go="closure_uid_"+(1e9*Math.random()>>>0),Ho=0;function Qo(t,e,n){return t.call.apply(t.bind,arguments)}function Wo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $o(t,e,n){return($o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qo:Wo).apply(null,arguments)}function Yo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Xo(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Jo(){this.s=this.s,this.o=this.o}var Zo={};Jo.prototype.s=!1,Jo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Go)&&t[Go]||(t[Go]=++Ho)}(this);delete Zo[t]}},Jo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ts=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},es=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ns(t){return Array.prototype.concat.apply([],arguments)}function rs(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function is(t){return/^[\s\xa0]*$/.test(t)}var os,ss=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function as(t,e){return-1!=t.indexOf(e)}function us(t,e){return t<e?-1:t>e?1:0}t:{var cs=qo.navigator;if(cs){var ls=cs.userAgent;if(ls){os=ls;break t}}os=""}function hs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function fs(t){var e={};for(var n in t)e[n]=t[n];return e}var ps="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ds(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ps.length;o++)n=ps[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vs(t){return vs[" "](t),t}vs[" "]=Bo;var ys,gs,ms=as(os,"Opera"),bs=as(os,"Trident")||as(os,"MSIE"),ws=as(os,"Edge"),_s=ws||bs,Es=as(os,"Gecko")&&!(as(os.toLowerCase(),"webkit")&&!as(os,"Edge"))&&!(as(os,"Trident")||as(os,"MSIE"))&&!as(os,"Edge"),Is=as(os.toLowerCase(),"webkit")&&!as(os,"Edge");function Ts(){var t=qo.document;return t?t.documentMode:void 0}t:{var Ss="",As=(gs=os,Es?/rv:([^\);]+)(\)|;)/.exec(gs):ws?/Edge\/([\d\.]+)/.exec(gs):bs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(gs):Is?/WebKit\/(\S+)/.exec(gs):ms?/(?:Version)[ \/]?(\S+)/.exec(gs):void 0);if(As&&(Ss=As?As[1]:""),bs){var Cs=Ts();if(null!=Cs&&Cs>parseFloat(Ss)){ys=String(Cs);break t}}ys=Ss}var Ns,Ds={};function xs(){return function(t){var e=Ds;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=ss(String(ys)).split("."),n=ss("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=us(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||us(0==o[2].length,0==s[2].length)||us(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(qo.document&&bs){var ks=Ts();Ns=ks||(parseInt(ys,10)||void 0)}else Ns=void 0;var Rs=Ns,Os=function(){if(!qo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qo.addEventListener("test",Bo,e),qo.removeEventListener("test",Bo,e)}catch(n){}return t}();function Ls(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ps(t,e){if(Ls.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Es){t:{try{vs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fs[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ps.Z.h.call(this)}}Ls.prototype.h=function(){this.defaultPrevented=!0},Xo(Ps,Ls);var Fs={2:"touch",3:"pen",4:"mouse"};Ps.prototype.h=function(){Ps.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ms="closure_listenable_"+(1e6*Math.random()|0),Vs=0;function Us(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Vs,this.ca=this.fa=!1}function js(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function qs(t){this.src=t,this.g={},this.h=0}function Bs(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ts(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(js(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ks(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}qs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ks(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Us(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var zs="closure_lm_"+(1e6*Math.random()|0),Gs={};function Hs(t,e,n,r,i){if(r&&r.once)return Ws(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hs(t,e[o],n,r,i);return null}return n=ea(n),t&&t[Ms]?t.N(e,n,zo(r)?!!r.capture:!!r,i):Qs(t,e,n,!1,r,i)}function Qs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=zo(i)?!!i.capture:!!i,a=Zs(t);if(a||(t[zs]=a=new qs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Js;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Os||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ws(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ws(t,e[o],n,r,i);return null}return n=ea(n),t&&t[Ms]?t.O(e,n,zo(r)?!!r.capture:!!r,i):Qs(t,e,n,!0,r,i)}function $s(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$s(t,e[o],n,r,i);else r=zo(r)?!!r.capture:!!r,n=ea(n),t&&t[Ms]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Ks(o=t.g[e],n,r,i))&&(js(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Zs(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ks(e,n,r,i)),(n=-1<t?e[t]:null)&&Ys(n))}function Ys(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ms])Bs(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zs(e))?(Bs(n,t),0==n.h&&(n.src=null,e[zs]=null)):js(t)}}}function Xs(t){return t in Gs?Gs[t]:Gs[t]="on"+t}function Js(t,e){if(t.ca)t=!0;else{e=new Ps(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ys(t),t=n.call(r,e)}return t}function Zs(t){return(t=t[zs])instanceof qs?t:null}var ta="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(t){return"function"==typeof t?t:(t[ta]||(t[ta]=function(e){return t.handleEvent(e)}),t[ta])}function na(){Jo.call(this),this.i=new qs(this),this.P=this,this.I=null}function ra(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ls(e,t);else if(e instanceof Ls)e.target=e.target||t;else{var i=e;ds(e=new Ls(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ia(s,r,!0,e)&&i}if(i=ia(s=e.g=t,r,!0,e)&&i,i=ia(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ia(s=e.g=n[o],r,!1,e)&&i}function ia(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Bs(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Xo(na,Jo),na.prototype[Ms]=!0,na.prototype.removeEventListener=function(t,e,n,r){$s(this,t,e,n,r)},na.prototype.M=function(){if(na.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)js(n[r]);delete e.g[t],e.h--}}this.I=null},na.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},na.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var oa=qo.JSON.stringify;function sa(){var t=da,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var aa,ua=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=ca.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),ca=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new la}),(function(t){return t.reset()})),la=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function ha(t){qo.setTimeout((function(){throw t}),0)}function fa(t,e){aa||function(){var t=qo.Promise.resolve(void 0);aa=function(){t.then(va)}}(),pa||(aa(),pa=!0),da.add(t,e)}var pa=!1,da=new ua;function va(){for(var t;t=sa();){try{t.h.call(t.g)}catch(n){ha(n)}var e=ca;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}pa=!1}function ya(t,e){na.call(this),this.h=t||1,this.g=e||qo,this.j=$o(this.kb,this),this.l=Date.now()}function ga(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ma(t,e,n){if("function"==typeof t)n&&(t=$o(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$o(t.handleEvent,t)}return 2147483647<Number(e)?-1:qo.setTimeout(t,e||0)}function ba(t){t.g=ma((function(){t.g=null,t.i&&(t.i=!1,ba(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Xo(ya,na),(Vo=ya.prototype).da=!1,Vo.S=null,Vo.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ra(this,"tick"),this.da&&(ga(this),this.start()))}},Vo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vo.M=function(){ya.Z.M.call(this),ga(this),delete this.g};var wa=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Fo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ba(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(qo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Jo);function _a(t){Jo.call(this),this.h=t,this.g={}}Xo(_a,Jo);var Ea=[];function Ia(t,e,n,r){Array.isArray(n)||(n&&(Ea[0]=n.toString()),n=Ea);for(var i=0;i<n.length;i++){var o=Hs(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Ta(t){hs(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ys(t)}),t),t.g={}}function Sa(){this.g=!0}function Aa(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return oa(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}_a.prototype.M=function(){_a.Z.M.call(this),Ta(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sa.prototype.Aa=function(){this.g=!1},Sa.prototype.info=function(){};var Ca={},Na=null;function Da(){return Na=Na||new na}function xa(t){Ls.call(this,Ca.Ma,t)}function ka(t){var e=Da();ra(e,new xa(e,t))}function Ra(t,e){Ls.call(this,Ca.STAT_EVENT,t),this.stat=e}function Oa(t){var e=Da();ra(e,new Ra(e,t))}function La(t,e){Ls.call(this,Ca.Na,t),this.size=e}function Pa(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qo.setTimeout((function(){t()}),e)}Ca.Ma="serverreachability",Xo(xa,Ls),Ca.STAT_EVENT="statevent",Xo(Ra,Ls),Ca.Na="timingevent",Xo(La,Ls);var Fa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ma={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Va(){}function Ua(t){return t.h||(t.h=t.i())}function ja(){}Va.prototype.h=null;var qa,Ba={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ka(){Ls.call(this,"d")}function za(){Ls.call(this,"c")}function Ga(){}function Ha(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new _a(this),this.P=Wa,t=_s?125:void 0,this.W=new ya(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Qa}function Qa(){this.i=null,this.g="",this.h=!1}Xo(Ka,Ls),Xo(za,Ls),Xo(Ga,Va),Ga.prototype.g=function(){return new XMLHttpRequest},Ga.prototype.i=function(){return{}},qa=new Ga;var Wa=45e3,$a={},Ya={};function Xa(t,e,n){t.K=1,t.v=wu(du(e)),t.s=n,t.U=!0,Ja(t,null)}function Ja(t,e){t.F=Date.now(),nu(t),t.A=du(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ou(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Qa,t.g=Lc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new wa($o(t.Ia,t,t.g),t.O)),Ia(t.V,t.g,"readystatechange",t.gb),e=t.H?fs(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ka(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Za(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function tu(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=eu(t,n))==Ya){4==e&&(t.o=4,Oa(14),i=!1),Aa(t.j,t.m,null,"[Incomplete Response]");break}if(r==$a){t.o=4,Oa(15),Aa(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Aa(t.j,t.m,r,null),au(t,r)}Za(t)&&r!=Ya&&r!=$a&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Oa(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ac(e),e.L=!0,Oa(11))):(Aa(t.j,t.m,n,"[Invalid Chunked Response]"),su(t),ou(t))}function eu(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ya:(n=Number(e.substring(n,r)),isNaN(n)?$a:(r+=1)+n>e.length?Ya:(e=e.substr(r,n),t.C=r+n,e))}function nu(t){t.Y=Date.now()+t.P,ru(t,t.P)}function ru(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Pa($o(t.eb,t),e)}function iu(t){t.B&&(qo.clearTimeout(t.B),t.B=null)}function ou(t){0==t.l.G||t.I||Dc(t.l,t)}function su(t){iu(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ga(t.W),Ta(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function au(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ju(n.i,t)))if(n.I=t.N,!t.J&&ju(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Nc(n),gc(n)}Sc(n),Oa(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Pa($o(n.ab,n),6e3));if(1>=Uu(n.i)&&n.ka){try{n.ka()}catch(y){}n.ka=void 0}}else kc(n,11)}else if((t.J||n.g==t)&&Nc(n),!is(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(as(l,"spdy")||as(l,"quic")||as(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(qu(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,bu(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Oc(r,r.H?r.la:null,r.W),p.J){Bu(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(iu(d),nu(d)),r.g=p}else Tc(r);0<n.l.length&&wc(n)}else"stop"!=o[0]&&"close"!=o[0]||kc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?kc(n,7):yc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ka(4)}catch(y){}}function uu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ko(t)||"string"==typeof t)es(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Ko(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Ko(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function cu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function lu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];hu(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)hu(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function hu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vo=Ha.prototype).setTimeout=function(t){this.P=t},Vo.gb=function(t){t=t.target;var e=this.L;e&&3==hc(t)?e.l():this.Ia(t)},Vo.Ia=function(t){try{if(t==this.g)t:{var e=hc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||_s||this.g&&(this.h.h||this.g.ga()||fc(this.g)))){this.I||4!=e||7==n||ka(8==n||0>=r?3:2),iu(this);var i=this.g.ba();this.N=i;e:if(Za(this)){var o=fc(this.g);t="";var s=o.length,a=4==hc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){su(this),ou(this);var u="";break e}this.h.i=new qo.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!is(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Oa(12),su(this),ou(this);break t}Aa(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,au(this,i)}this.U?(tu(this,e,u),_s&&this.i&&3==e&&(Ia(this.V,this.W,"tick",this.fb),this.W.start())):(Aa(this.j,this.m,u,null),au(this,u)),4==e&&su(this),this.i&&!this.I&&(4==e?Dc(this.l,this):(this.i=!1,nu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Oa(12)):(this.o=0,Oa(13)),su(this),ou(this)}}}catch(f){}},Vo.fb=function(){if(this.g){var t=hc(this.g),e=this.g.ga();this.C<e.length&&(iu(this),tu(this,t,e),this.i&&4!=t&&nu(this))}},Vo.cancel=function(){this.I=!0,su(this)},Vo.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ka(3),Oa(17)),su(this),this.o=2,ou(this)):ru(this,this.Y-t)},(Vo=cu.prototype).R=function(){lu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Vo.T=function(){return lu(this),this.g.concat()},Vo.get=function(t,e){return hu(this.h,t)?this.h[t]:e},Vo.set=function(t,e){hu(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Vo.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var fu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pu(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof pu){this.g=void 0!==e?e:t.g,vu(this,t.j),this.s=t.s,yu(this,t.i),gu(this,t.m),this.l=t.l,e=t.h;var n=new Du;n.i=e.i,e.g&&(n.g=new cu(e.g),n.h=e.h),mu(this,n),this.o=t.o}else t&&(n=String(t).match(fu))?(this.g=!!e,vu(this,n[1]||"",!0),this.s=_u(n[2]||""),yu(this,n[3]||"",!0),gu(this,n[4]),this.l=_u(n[5]||"",!0),mu(this,n[6]||"",!0),this.o=_u(n[7]||"")):(this.g=!!e,this.h=new Du(null,this.g))}function du(t){return new pu(t)}function vu(t,e,n){t.j=n?_u(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yu(t,e,n){t.i=n?_u(e,!0):e}function gu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function mu(t,e,n){e instanceof Du?(t.h=e,function(t,e){e&&!t.j&&(xu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ku(this,e),Ou(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Eu(e,Cu)),t.h=new Du(e,t.g))}function bu(t,e,n){t.h.set(e,n)}function wu(t){return bu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function _u(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Eu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Iu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Iu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}pu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Eu(e,Tu,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Eu(e,Tu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Eu(n,"/"==n.charAt(0)?Au:Su,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Eu(n,Nu)),t.join("")};var Tu=/[#\/\?@]/g,Su=/[#\?:]/g,Au=/[#\?]/g,Cu=/[#\?@]/g,Nu=/#/g;function Du(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xu(t){t.g||(t.g=new cu,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ku(t,e){xu(t),e=Lu(t,e),hu(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,hu((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&lu(t)))}function Ru(t,e){return xu(t),e=Lu(t,e),hu(t.g.h,e)}function Ou(t,e,n){ku(t,e),0<n.length&&(t.i=null,t.g.set(Lu(t,e),rs(n)),t.h+=n.length)}function Lu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Vo=Du.prototype).add=function(t,e){xu(this),this.i=null,t=Lu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Vo.forEach=function(t,e){xu(this),this.g.forEach((function(n,r){es(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Vo.T=function(){xu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vo.R=function(t){xu(this);var e=[];if("string"==typeof t)Ru(this,t)&&(e=ns(e,this.g.get(Lu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ns(e,t[n])}return e},Vo.set=function(t,e){return xu(this),this.i=null,Ru(this,t=Lu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Vo.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Vo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Pu=function(t,e){this.h=t,this.g=e};function Fu(t){this.l=t||Mu,qo.PerformanceNavigationTiming?t=0<(t=qo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(qo.g&&qo.g.Ea&&qo.g.Ea()&&qo.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Mu=10;function Vu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Uu(t){return t.h?1:t.g?t.g.size:0}function ju(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function qu(t,e){t.g?t.g.add(e):t.h=e}function Bu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ku(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Mo(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return rs(t.i)}function zu(){}function Gu(){this.g=new zu}function Hu(t,e,n){var r=n||"";try{uu(t,(function(t,n){var i=t;zo(t)&&(i=oa(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Wb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Wb}}function Qu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Wu(t){this.l=t.$b||null,this.j=t.ib||!1}function $u(t,e){na.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Yu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fu.prototype.cancel=function(){var t,e;if(this.i=Ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Mo(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},zu.prototype.stringify=function(t){return qo.JSON.stringify(t,void 0)},zu.prototype.parse=function(t){return qo.JSON.parse(t,void 0)},Xo(Wu,Va),Wu.prototype.g=function(){return new $u(this.l,this.j)},Wu.prototype.i=function(t){return function(){return t}}({}),Xo($u,na);var Yu=0;function Xu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ju(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zu(t)}function Zu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Vo=$u.prototype).open=function(t,e){if(this.readyState!=Yu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zu(this)},Vo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||qo).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Vo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ju(this)),this.readyState=Yu},Vo.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zu(this)),this.g&&(this.readyState=3,Zu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qo.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Vo.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ju(this):Zu(this),3==this.readyState&&Xu(this)}},Vo.Ua=function(t){this.g&&(this.response=this.responseText=t,Ju(this))},Vo.Ta=function(t){this.g&&(this.response=t,Ju(this))},Vo.ha=function(){this.g&&Ju(this)},Vo.setRequestHeader=function(t,e){this.v.append(t,e)},Vo.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Vo.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty($u.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var tc=qo.JSON.parse;function ec(t){na.call(this),this.headers=new cu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nc,this.K=this.L=!1}Xo(ec,na);var nc="",rc=/^https?$/i,ic=["POST","PUT"];function oc(t){return"content-type"==t.toLowerCase()}function sc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ac(t),cc(t)}function ac(t){t.D||(t.D=!0,ra(t,"complete"),ra(t,"error"))}function uc(t){if(t.h&&void 0!==jo&&(!t.C[1]||4!=hc(t)||2!=t.ba()))if(t.v&&4==hc(t))ma(t.Fa,0,t);else if(ra(t,"readystatechange"),4==hc(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(fu)[1]||null;if(!o&&qo.self&&qo.self.location){var s=qo.self.location.protocol;o=s.substr(0,s.length-1)}i=!rc.test(o?o.toLowerCase():"")}e=i}if(e)ra(t,"complete"),ra(t,"success");else{t.m=6;try{var a=2<hc(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",ac(t)}}finally{cc(t)}}}function cc(t,e){if(t.g){lc(t);var n=t.g,r=t.C[0]?Bo:null;t.g=null,t.C=null,e||ra(t,"ready");try{n.onreadystatechange=r}catch(Wb){}}}function lc(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(qo.clearTimeout(t.A),t.A=null)}function hc(t){return t.g?t.g.readyState:0}function fc(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case nc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function pc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return hs(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):bu(t,e,n))}function dc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function vc(t){this.za=0,this.l=[],this.h=new Sa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=dc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=dc("baseRetryDelayMs",5e3,t),this.$a=dc("retryDelaySeedMs",1e4,t),this.Ya=dc("forwardChannelMaxRetries",2,t),this.ra=dc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Fu(t&&t.concurrentRequestLimit),this.Ca=new Gu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function yc(t){if(mc(t),3==t.G){var e=t.V++,n=du(t.F);bu(n,"SID",t.J),bu(n,"RID",e),bu(n,"TYPE","terminate"),Ec(t,n),(e=new Ha(t,t.h,e,void 0)).K=2,e.v=wu(du(n)),n=!1,qo.navigator&&qo.navigator.sendBeacon&&(n=qo.navigator.sendBeacon(e.v.toString(),"")),!n&&qo.Image&&((new Image).src=e.v,n=!0),n||(e.g=Lc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),nu(e)}Rc(t)}function gc(t){t.g&&(Ac(t),t.g.cancel(),t.g=null)}function mc(t){gc(t),t.u&&(qo.clearTimeout(t.u),t.u=null),Nc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&qo.clearTimeout(t.m),t.m=null)}function bc(t,e){t.l.push(new Pu(t.Za++,e)),3==t.G&&wc(t)}function wc(t){Vu(t.i)||t.m||(t.m=!0,fa(t.Ha,t),t.C=0)}function _c(t,e){var n;n=e?e.m:t.V++;var r=du(t.F);bu(r,"SID",t.J),bu(r,"RID",n),bu(r,"AID",t.U),Ec(t,r),t.o&&t.s&&pc(r,t.o,t.s),n=new Ha(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ic(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),qu(t.i,n),Xa(n,r,e)}function Ec(t,e){t.j&&uu({},(function(t,n){bu(e,n,t)}))}function Ic(t,e,n){n=Math.min(t.l.length,n);var r=t.j?$o(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Hu(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Tc(t){t.g||t.u||(t.Y=1,fa(t.Ga,t),t.A=0)}function Sc(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Pa($o(t.Ga,t),xc(t,t.A)),t.A++,!0)}function Ac(t){null!=t.B&&(qo.clearTimeout(t.B),t.B=null)}function Cc(t){t.g=new Ha(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=du(t.oa);bu(e,"RID","rpc"),bu(e,"SID",t.J),bu(e,"CI",t.N?"0":"1"),bu(e,"AID",t.U),Ec(t,e),bu(e,"TYPE","xmlhttp"),t.o&&t.s&&pc(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=wu(du(e)),n.s=null,n.U=!0,Ja(n,t)}function Nc(t){null!=t.v&&(qo.clearTimeout(t.v),t.v=null)}function Dc(t,e){var n=null;if(t.g==e){Nc(t),Ac(t),t.g=null;var r=2}else{if(!ju(t.i,e))return;n=e.D,Bu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;ra(r=Da(),new La(r,n,e,i)),wc(t)}else Tc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Uu(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Pa($o(t.Ha,t,e),xc(t,t.C)),t.C++,0)))}(t,e)||2==r&&Sc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:kc(t,5);break;case 4:kc(t,10);break;case 3:kc(t,6);break;default:kc(t,2)}}function xc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function kc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=$o(t.jb,t);n||(n=new pu("//www.google.com/images/cleardot.gif"),qo.location&&"http"==qo.location.protocol||vu(n,"https"),wu(n)),function(t,e){var n=new Sa;if(qo.Image){var r=new Image;r.onload=Yo(Qu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Yo(Qu,n,r,"TestLoadImage: error",!1,e),r.onabort=Yo(Qu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yo(Qu,n,r,"TestLoadImage: timeout",!1,e),qo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Oa(2);t.G=0,t.j&&t.j.va(e),Rc(t),mc(t)}function Rc(t){t.G=0,t.I=-1,t.j&&(0==Ku(t.i).length&&0==t.l.length||(t.i.i.length=0,rs(t.l),t.l.length=0),t.j.ua())}function Oc(t,e,n){var r=function(t){return t instanceof pu?du(t):new pu(t,void 0)}(n);if(""!=r.i)e&&yu(r,e+"."+r.i),gu(r,r.m);else{var i=qo.location;r=function(t,e,n,r){var i=new pu(null,void 0);return t&&vu(i,t),e&&yu(i,e),n&&gu(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&hs(t.aa,(function(t,e){bu(r,e,t)})),e=t.D,n=t.sa,e&&n&&bu(r,e,n),bu(r,"VER",t.ma),Ec(t,r),r}function Lc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new ec(new Wu({ib:!0})):new ec(t.qa)).L=t.H,e}function Pc(){}function Fc(){if(bs&&!(10<=Number(Rs)))throw Error("Environmental error: no available transport.")}function Mc(t,e){na.call(this),this.g=new vc(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!is(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!is(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new jc(this)}function Vc(t){Ka.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Uc(){za.call(this),this.status=1}function jc(t){this.g=t}(Vo=ec.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qa.g(),this.C=this.u?Ua(this.u):Ua(qa),this.g.onreadystatechange=$o(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void sc(this,o)}t=n||"";var i=new cu(this.headers);r&&uu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=oc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=qo.FormData&&t instanceof qo.FormData,!(0<=ts(ic,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lc(this),0<this.B&&((this.K=function(t){return bs&&xs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$o(this.pa,this)):this.A=ma(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){sc(this,o)}},Vo.pa=function(){void 0!==jo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ra(this,"timeout"),this.abort(8))},Vo.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ra(this,"complete"),ra(this,"abort"),cc(this))},Vo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cc(this,!0)),ec.Z.M.call(this)},Vo.Fa=function(){this.s||(this.F||this.v||this.l?uc(this):this.cb())},Vo.cb=function(){uc(this)},Vo.ba=function(){try{return 2<hc(this)?this.g.status:-1}catch(gs){return-1}},Vo.ga=function(){try{return this.g?this.g.responseText:""}catch(gs){return""}},Vo.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),tc(e)}},Vo.Da=function(){return this.m},Vo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Vo=vc.prototype).ma=8,Vo.G=1,Vo.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Vo.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Ha(this,this.h,t,void 0),n=this.s;if(this.P&&(n?ds(n=fs(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ic(this,e,r),bu(i=du(this.F),"RID",t),bu(i,"CVER",22),this.D&&bu(i,"X-HTTP-Session-Id",this.D),Ec(this,i),this.o&&n&&pc(i,this.o,n),qu(this.i,e),this.Ra&&bu(i,"TYPE","init"),this.ja?(bu(i,"$req",r),bu(i,"SID","null"),e.$=!0,Xa(e,i,null)):Xa(e,i,r),this.G=2}}else 3==this.G&&(t?_c(this,t):0==this.l.length||Vu(this.i)||_c(this))},Vo.Ga=function(){if(this.u=null,Cc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Pa($o(this.bb,this),t)}},Vo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oa(10),gc(this),Cc(this))},Vo.ab=function(){null!=this.v&&(this.v=null,gc(this),Sc(this),Oa(19))},Vo.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Oa(2)):(this.h.info("Failed to ping google.com"),Oa(1))},(Vo=Pc.prototype).xa=function(){},Vo.wa=function(){},Vo.va=function(){},Vo.ua=function(){},Vo.Oa=function(){},Fc.prototype.g=function(t,e){return new Mc(t,e)},Xo(Mc,na),Mc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),fa($o(t.hb,t,e))),Oa(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Oc(t,null,t.W),wc(t)},Mc.prototype.close=function(){yc(this.g)},Mc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,bc(this.g,e)}else this.v?((e={}).__data__=oa(t),bc(this.g,e)):bc(this.g,t)},Mc.prototype.M=function(){this.g.j=null,delete this.j,yc(this.g),delete this.g,Mc.Z.M.call(this)},Xo(Vc,Ka),Xo(Uc,za),Xo(jc,Pc),jc.prototype.xa=function(){ra(this.g,"a")},jc.prototype.wa=function(t){ra(this.g,new Vc(t))},jc.prototype.va=function(t){ra(this.g,new Uc(t))},jc.prototype.ua=function(){ra(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,Mc.prototype.send=Mc.prototype.u,Mc.prototype.open=Mc.prototype.m,Mc.prototype.close=Mc.prototype.close,Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,Ma.COMPLETE="complete",ja.EventType=Ba,Ba.OPEN="a",Ba.CLOSE="b",Ba.ERROR="c",Ba.MESSAGE="d",na.prototype.listen=na.prototype.N,ec.prototype.listenOnce=ec.prototype.O,ec.prototype.getLastError=ec.prototype.La,ec.prototype.getLastErrorCode=ec.prototype.Da,ec.prototype.getStatus=ec.prototype.ba,ec.prototype.getResponseJson=ec.prototype.Qa,ec.prototype.getResponseText=ec.prototype.ga,ec.prototype.send=ec.prototype.ea;var qc=Fa,Bc=Ma,Kc=Ca,zc=10,Gc=11,Hc=Wu,Qc=ja,Wc=ec,$c=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();$c.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Ui(e,t),e}(Error),Jc=new wo("@firebase/firestore");function Zc(){return Jc.logLevel}function tl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jc.logLevel<=ho.DEBUG){var r=e.map(rl);Jc.debug.apply(Jc,Gi(["Firestore (8.8.1): "+t],r))}}function el(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jc.logLevel<=ho.ERROR){var r=e.map(rl);Jc.error.apply(Jc,Gi(["Firestore (8.8.1): "+t],r))}}function nl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jc.logLevel<=ho.WARN){var r=e.map(rl);Jc.warn.apply(Jc,Gi(["Firestore (8.8.1): "+t],r))}}function rl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw el(e),new Error(e)}function ol(t,e){t||il()}function sl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ul=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=al(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function cl(t,e){return t<e?-1:t>e?1:0}function ll(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function hl(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?cl(this.nanoseconds,t.nanoseconds):cl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),pl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new fl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&il(),void 0===n?n=t.length-e:n>t.length-e&&il(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(gl),bl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return bl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Xc(Yc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Xc(Yc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Xc(Yc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(gl),_l=function(){function t(t){this.fields=t,t.sort(wl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ll(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),El=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return cl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();El.EMPTY_BYTE_STRING=new El("");var Il=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(t){if(ol(!!t),"string"==typeof t){var e=0,n=Il.exec(t);if(ol(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Sl(t.seconds),nanos:Sl(t.nanos)}}function Sl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Al(t){return"string"==typeof t?El.fromBase64String(t):El.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nl(t){var e=t.mapValue.fields.__previous_value__;return Cl(e)?Nl(e):e}function Dl(t){var e=Tl(t.mapValue.fields.__local_write_time__.timestampValue);return new fl(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){return null==t}function kl(t){return 0===t&&1/t==-1/0}function Rl(t){return"number"==typeof t&&Number.isInteger(t)&&!kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ol=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ml.fromString(e))},t.fromName=function(e){return new t(ml.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ml.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ml.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ml(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cl(t)?4:10:il()}function Pl(t,e){var n,r=Ll(t);if(r!==Ll(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dl(t).isEqual(Dl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Tl(t.timestampValue),r=Tl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Al(t.bytesValue).isEqual(Al(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Sl(t.geoPointValue.latitude)===Sl(e.geoPointValue.latitude)&&Sl(t.geoPointValue.longitude)===Sl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Sl(t.integerValue)===Sl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Sl(t.doubleValue),r=Sl(e.doubleValue);return n===r?kl(n)===kl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ll(t.arrayValue.values||[],e.arrayValue.values||[],Pl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(dl(n)!==dl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pl(n[i],r[i])))return!1;return!0}(t,e);default:return il()}}function Fl(t,e){return void 0!==(t.values||[]).find((function(t){return Pl(t,e)}))}function Ml(t,e){var n,r,i,o,s=Ll(t),a=Ll(e);if(s!==a)return cl(s,a);switch(s){case 0:return 0;case 1:return cl(t.booleanValue,e.booleanValue);case 2:return r=e,i=Sl((n=t).integerValue||n.doubleValue),o=Sl(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Vl(t.timestampValue,e.timestampValue);case 4:return Vl(Dl(t),Dl(e));case 5:return cl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Al(t),r=Al(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=cl(n[i],r[i]);if(0!==o)return o}return cl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=cl(Sl(t.latitude),Sl(e.latitude));return 0!==n?n:cl(Sl(t.longitude),Sl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ml(n[i],r[i]);if(o)return o}return cl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=cl(r[s],o[s]);if(0!==a)return a;var u=Ml(n[r[s]],i[o[s]]);if(0!==u)return u}return cl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw il()}}function Vl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return cl(t,e);var n=Tl(t),r=Tl(e),i=cl(n.seconds,r.seconds);return 0!==i?i:cl(n.nanos,r.nanos)}function Ul(t){return jl(t)}function jl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Tl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Al(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Ol.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=jl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+jl(t.fields[o])}return e+"}"}(t.mapValue):il();var e,n,r,i}function ql(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Bl(t){return!!t&&"integerValue"in t}function Kl(t){return!!t&&"arrayValue"in t}function zl(t){return!!t&&"nullValue"in t}function Gl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hl(t){return!!t&&"mapValue"in t}function Ql(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return vl(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ql(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ql(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Hl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ql(e)},t.prototype.setAll=function(t){var e=this,n=wl.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ql(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Hl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Pl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Hl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){vl(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ql(this.value))},t}();function $l(t){var e=[];return vl(t.fields,(function(t,n){var r=new wl([t]);if(Hl(n)){var i=$l(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new _l(e)}var Yl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,pl.min(),Wl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Wl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Wl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Wl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Wl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Xl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Xl(t,e,n,r,i,o,s)}function Zl(t){var e=sl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Ul(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fh(e.startAt)),e.endAt&&(n+="|ub:",n+=fh(e.endAt)),e.h=n}return e.h}function th(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!dh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Pl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yh(t.startAt,e.startAt)&&yh(t.endAt,e.endAt)}function eh(t){return Ol.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var nh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Ui(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new rh(t,n,r):"array-contains"===n?new ah(t,r):"in"===n?new uh(t,r):"not-in"===n?new ch(t,r):"array-contains-any"===n?new lh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ih(t,n):new oh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ml(e,this.value)):null!==e&&Ll(this.value)===Ll(e)&&this.m(Ml(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return il()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),rh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ol.fromName(r.referenceValue),i}return Ui(e,t),e.prototype.matches=function(t){var e=Ol.comparator(t.key,this.key);return this.m(e)},e}(nh),ih=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=sh("in",n),r}return Ui(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nh),oh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=sh("not-in",n),r}return Ui(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nh);function sh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ol.fromName(t.referenceValue)}))}var ah=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Ui(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Kl(e)&&Fl(e.arrayValue,this.value)},e}(nh),uh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Ui(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Fl(this.value.arrayValue,e)},e}(nh),ch=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Ui(e,t),e.prototype.matches=function(t){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Fl(this.value.arrayValue,e)},e}(nh),lh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Ui(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Kl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Fl(e.value.arrayValue,t)}))},e}(nh),hh=function(t,e){this.position=t,this.before=e};function fh(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ul(t)})).join(",")}var ph=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function dh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function vh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ol.comparator(Ol.fromName(s.referenceValue),n.key):Ml(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function yh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function mh(t,e,n,r,i,o,s,a){return new gh(t,e,n,r,i,o,s,a)}function bh(t){return new gh(t)}function wh(t){return!xl(t.limit)&&"F"===t.limitType}function _h(t){return!xl(t.limit)&&"L"===t.limitType}function Eh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ih(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Th(t){return null!==t.collectionGroup}function Sh(t){var e=sl(t);if(null===e.p){e.p=[];var n=Ih(e),r=Eh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ph(n)),e.p.push(new ph(wl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ph(wl.keyField(),u))}}}return e.p}function Ah(t){var e=sl(t);if(!e.T)if("F"===e.limitType)e.T=Jl(e.path,e.collectionGroup,Sh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Sh(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ph(o.field,s))}var a=e.endAt?new hh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new hh(e.startAt.position,!e.startAt.before):null;e.T=Jl(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Ch(t,e,n){return new gh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nh(t,e){return th(Ah(t),Ah(e))&&t.limitType===e.limitType}function Dh(t){return Zl(Ah(t))+"|lt:"+t.limitType}function xh(t){return"Query(target="+(e=Ah(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ul(e.value);var e})).join(", ")+"]"),xl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+fh(e.startAt)),e.endAt&&(n+=", endAt: "+fh(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function kh(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ol.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!vh(t.startAt,Sh(t),e)||t.endAt&&vh(t.endAt,Sh(t),e))}(t,e);var n,r,i}function Rh(t){return function(e,n){for(var r=!1,i=0,o=Sh(t);i<o.length;i++){var s=o[i],a=Oh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Oh(t,e,n){var r,i,o,s,a=t.field.isKeyField()?Ol.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?Ml(o,s):il());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return il()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(e)?"-0":e}}function Ph(t){return{integerValue:""+t}}function Fh(t,e){return Rl(e)?Ph(e):Lh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mh=function(){this._=void 0};function Vh(t,e,n){return t instanceof qh?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Bh?Kh(t,e):t instanceof zh?Gh(t,e):function(t,e){var n=jh(t,e),r=Qh(n)+Qh(t.A);return Bl(n)&&Bl(t.A)?Ph(r):Lh(t.R,r)}(t,e);var r,i,o}function Uh(t,e,n){return t instanceof Bh?Kh(t,e):t instanceof zh?Gh(t,e):n}function jh(t,e){return t instanceof Hh?Bl(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e}(Mh),Bh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ui(e,t),e}(Mh);function Kh(t,e){for(var n=Wh(e),r=function(t){n.some((function(e){return Pl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ui(e,t),e}(Mh);function Gh(t,e){for(var n=Wh(e),r=function(t){n=n.filter((function(e){return!Pl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Hh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Ui(e,t),e}(Mh);function Qh(t){return Sl(t.integerValue||t.doubleValue)}function Wh(t){return Kl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $h=function(t,e){this.field=t,this.transform=e},Yh=function(t,e){this.version=t,this.transformResults=e},Xh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Jh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Zh=function(){};function tf(t,e,n){var r,i,o,s,a;t instanceof sf?(i=e,o=n,s=(r=t).value.clone(),a=cf(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof af?function(t,e,n){if(Jh(t.precondition,e)){var r=cf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(uf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ef(t,e,n){var r;t instanceof sf?function(t,e,n){if(Jh(t.precondition,e)){var r=t.value.clone(),i=lf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(of(e),r).setHasLocalMutations()}}(t,e,n):t instanceof af?function(t,e,n){if(Jh(t.precondition,e)){var r=lf(t.fieldTransforms,n,e),i=e.data;i.setAll(uf(t)),i.setAll(r),e.convertToFoundDocument(of(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Jh(t.precondition,r)&&r.convertToNoDocument(pl.min()))}function nf(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=jh(o.transform,s||null);null!=a&&(null==n&&(n=Wl.empty()),n.set(o.field,a))}return n||null}function rf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&ll(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Bh&&o instanceof Bh||i instanceof zh&&o instanceof zh?ll(i.elements,o.elements,Pl):i instanceof Hh&&o instanceof Hh?Pl(i.A,o.A):i instanceof qh&&o instanceof qh);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function of(t){return t.isFoundDocument()?t.version:pl.min()}var sf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Ui(e,t),e}(Zh),af=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Ui(e,t),e}(Zh);function uf(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function cf(t,e,n){var r=new Map;ol(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Uh(s,a,n[i]))}return r}function lf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Vh(a,u,e))}return r}var hf,ff,pf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Ui(e,t),e}(Zh),df=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Ui(e,t),e}(Zh),vf=function(t){this.count=t};function yf(t){switch(t){case Yc.OK:return il();case Yc.CANCELLED:case Yc.UNKNOWN:case Yc.DEADLINE_EXCEEDED:case Yc.RESOURCE_EXHAUSTED:case Yc.INTERNAL:case Yc.UNAVAILABLE:case Yc.UNAUTHENTICATED:return!1;case Yc.INVALID_ARGUMENT:case Yc.NOT_FOUND:case Yc.ALREADY_EXISTS:case Yc.PERMISSION_DENIED:case Yc.FAILED_PRECONDITION:case Yc.ABORTED:case Yc.OUT_OF_RANGE:case Yc.UNIMPLEMENTED:case Yc.DATA_LOSS:return!0;default:return il()}}function gf(t){if(void 0===t)return el("GRPC error has no .code"),Yc.UNKNOWN;switch(t){case hf.OK:return Yc.OK;case hf.CANCELLED:return Yc.CANCELLED;case hf.UNKNOWN:return Yc.UNKNOWN;case hf.DEADLINE_EXCEEDED:return Yc.DEADLINE_EXCEEDED;case hf.RESOURCE_EXHAUSTED:return Yc.RESOURCE_EXHAUSTED;case hf.INTERNAL:return Yc.INTERNAL;case hf.UNAVAILABLE:return Yc.UNAVAILABLE;case hf.UNAUTHENTICATED:return Yc.UNAUTHENTICATED;case hf.INVALID_ARGUMENT:return Yc.INVALID_ARGUMENT;case hf.NOT_FOUND:return Yc.NOT_FOUND;case hf.ALREADY_EXISTS:return Yc.ALREADY_EXISTS;case hf.PERMISSION_DENIED:return Yc.PERMISSION_DENIED;case hf.FAILED_PRECONDITION:return Yc.FAILED_PRECONDITION;case hf.ABORTED:return Yc.ABORTED;case hf.OUT_OF_RANGE:return Yc.OUT_OF_RANGE;case hf.UNIMPLEMENTED:return Yc.UNIMPLEMENTED;case hf.DATA_LOSS:return Yc.DATA_LOSS;default:return il()}}(ff=hf||(hf={}))[ff.OK=0]="OK",ff[ff.CANCELLED=1]="CANCELLED",ff[ff.UNKNOWN=2]="UNKNOWN",ff[ff.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ff[ff.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ff[ff.NOT_FOUND=5]="NOT_FOUND",ff[ff.ALREADY_EXISTS=6]="ALREADY_EXISTS",ff[ff.PERMISSION_DENIED=7]="PERMISSION_DENIED",ff[ff.UNAUTHENTICATED=16]="UNAUTHENTICATED",ff[ff.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ff[ff.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ff[ff.ABORTED=10]="ABORTED",ff[ff.OUT_OF_RANGE=11]="OUT_OF_RANGE",ff[ff.UNIMPLEMENTED=12]="UNIMPLEMENTED",ff[ff.INTERNAL=13]="INTERNAL",ff[ff.UNAVAILABLE=14]="UNAVAILABLE",ff[ff.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mf=function(){function t(t,e){this.comparator=t,this.root=e||wf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new bf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new bf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new bf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new bf(this.root,t,this.comparator,!0)},t}(),bf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),wf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw il();if(this.right.isRed())throw il();var t=this.left.check();if(t!==this.right.check())throw il();return t+(this.isRed()?0:1)},t}();wf.EMPTY=null,wf.RED=!0,wf.BLACK=!1,wf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw il()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw il()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw il()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw il()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw il()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new wf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _f=function(){function t(t){this.comparator=t,this.data=new mf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ef(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ef(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ef=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),If=new mf(Ol.comparator);function Tf(){return If}var Sf=new mf(Ol.comparator);function Af(){return Sf}var Cf=new mf(Ol.comparator);var Nf=new _f(Ol.comparator);function Df(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Nf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var xf=new _f(cl);function kf(){return xf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Of.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(pl.min(),r,kf(),Tf(),Df())},t}(),Of=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(El.EMPTY_BYTE_STRING,n,Df(),Df(),Df())},t}(),Lf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Pf=function(t,e){this.targetId=t,this.V=e},Ff=function(t,e,n,r){void 0===n&&(n=El.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Mf=function(){function t(){this.S=0,this.D=jf(),this.C=El.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Df(),e=Df(),n=Df();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:il()}})),new Of(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=jf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Vf=function(){function t(t){this.W=t,this.G=new Map,this.H=Tf(),this.J=Uf(),this.Y=new _f(cl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:il()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(eh(i))if(0===n){var o=new Ol(i.path);this.tt(e,o,Yl.newNoDocument(o,pl.min()))}else ol(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&eh(o.target)){var s=new Ol(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Yl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Df();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Rf(t,n,this.Y,this.H,r);return this.H=Tf(),this.J=Uf(),this.Y=new _f(cl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Mf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new _f(cl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||tl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Mf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Uf(){return new mf(Ol.comparator)}function jf(){return new mf(Ol.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qf={asc:"ASCENDING",desc:"DESCENDING"},Bf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kf=function(t,e){this.databaseId=t,this.I=e};function zf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Hf(t,e){return zf(t,e.toTimestamp())}function Qf(t){return ol(!!t),pl.fromTimestamp((e=Tl(t),new fl(e.seconds,e.nanos)));var e}function Wf(t,e){return(n=t,new ml(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function $f(t){var e=ml.fromString(t);return ol(mp(e)),e}function Yf(t,e){return Wf(t.databaseId,e.path)}function Xf(t,e){var n=$f(e);if(n.get(1)!==t.databaseId.projectId)throw new Xc(Yc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xc(Yc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ol(ep(n))}function Jf(t,e){return Wf(t.databaseId,e)}function Zf(t){var e=$f(t);return 4===e.length?ml.emptyPath():ep(e)}function tp(t){return new ml(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ep(t){return ol(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function np(t,e,n){return{name:Yf(t,e),fields:n.value.mapValue.fields}}function rp(t,e){var n,r,i;if(e instanceof sf)n={update:np(t,e.key,e.value)};else if(e instanceof pf)n={delete:Yf(t,e.key)};else if(e instanceof af)n={update:np(t,e.key,e.data),updateMask:gp(e.fieldMask)};else{if(!(e instanceof df))return il();n={verify:Yf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof qh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw il()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:Hf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:il())),n}function ip(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Xh.updateTime(Qf(n.updateTime)):void 0!==n.exists?Xh.exists(n.exists):Xh.none():Xh.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ol("REQUEST_TIME"===e.setToServerValue),n=new qh;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Bh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new zh(i)}else"increment"in e?n=new Hh(t,e.increment):il();var o=wl.fromServerFormat(e.fieldPath);return new $h(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Xf(t,e.update.name),s=new Wl({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new _l(e.map((function(t){return wl.fromServerFormat(t)})))}(e.updateMask);return new af(o,s,a,r,i)}return new sf(o,s,r,i)}if(e.delete){var u=Xf(t,e.delete);return new pf(u,r)}if(e.verify){var c=Xf(t,e.verify);return new df(c,r)}return il()}function op(t,e){return{documents:[Jf(t,e.path)]}}function sp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Jf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Jf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Gl(t.value))return{unaryFilter:{field:pp(t.field),op:"IS_NAN"}};if(zl(t.value))return{unaryFilter:{field:pp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Gl(t.value))return{unaryFilter:{field:pp(t.field),op:"IS_NOT_NAN"}};if(zl(t.value))return{unaryFilter:{field:pp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pp(t.field),op:fp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:pp((e=t).field),direction:hp(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||xl(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=cp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=cp(e.endAt)),n}function ap(t){var e=Zf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ol(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=up(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new ph(dp((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=xl(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=lp(n.startAt));var f=null;return n.endAt&&(f=lp(n.endAt)),mh(e,i,a,s,l,"F",h,f)}function up(t){return t?void 0!==t.unaryFilter?[yp(t)]:void 0!==t.fieldFilter?[vp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return up(t)})).reduce((function(t,e){return t.concat(e)})):il():[]}function cp(t){return{before:t.before,values:t.position}}function lp(t){var e=!!t.before,n=t.values||[];return new hh(n,e)}function hp(t){return qf[t]}function fp(t){return Bf[t]}function pp(t){return{fieldPath:t.canonicalString()}}function dp(t){return wl.fromServerFormat(t.fieldPath)}function vp(t){return nh.create(dp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return il()}}(t.fieldFilter.op),t.fieldFilter.value)}function yp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=dp(t.unaryFilter.field);return nh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=dp(t.unaryFilter.field);return nh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=dp(t.unaryFilter.field);return nh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=dp(t.unaryFilter.field);return nh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return il()}}function gp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function mp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=_p(e)),e=wp(t.get(n),e);return _p(e)}function wp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function _p(t){return t+""}function Ep(t){var e=t.length;if(ol(e>=2),2===e)return ol(""===t.charAt(0)&&""===t.charAt(1)),ml.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&il(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:il()}o=s+2}return new ml(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ip=function(t,e){this.seconds=t,this.nanoseconds=e},Tp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Tp.store="owner",Tp.key="owner";var Sp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Sp.store="mutationQueues",Sp.keyPath="userId";var Ap=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ap.store="mutations",Ap.keyPath="batchId",Ap.userMutationsIndex="userMutationsIndex",Ap.userMutationsKeyPath=["userId","batchId"];var Cp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,bp(e)]},t.key=function(t,e,n){return[t,bp(e),n]},t}();Cp.store="documentMutations",Cp.PLACEHOLDER=new Cp;var Np=function(t,e){this.path=t,this.readTime=e},Dp=function(t,e){this.path=t,this.version=e},xp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};xp.store="remoteDocuments",xp.readTimeIndex="readTimeIndex",xp.readTimeIndexPath="readTime",xp.collectionReadTimeIndex="collectionReadTimeIndex",xp.collectionReadTimeIndexPath=["parentPath","readTime"];var kp=function(t){this.byteSize=t};kp.store="remoteDocumentGlobal",kp.key="remoteDocumentGlobalKey";var Rp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Rp.store="targets",Rp.keyPath="targetId",Rp.queryTargetsIndexName="queryTargetsIndex",Rp.queryTargetsKeyPath=["canonicalId","targetId"];var Op=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Op.store="targetDocuments",Op.keyPath=["targetId","path"],Op.documentTargetsIndex="documentTargetsIndex",Op.documentTargetsKeyPath=["path","targetId"];var Lp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Lp.key="targetGlobalKey",Lp.store="targetGlobal";var Pp=function(t,e){this.collectionId=t,this.parent=e};Pp.store="collectionParents",Pp.keyPath=["collectionId","parent"];var Fp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Fp.store="clientMetadata",Fp.keyPath="clientId";var Mp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Mp.store="bundles",Mp.keyPath="bundleId";var Vp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Vp.store="namedQueries",Vp.keyPath="name";var Up=Gi(Gi([],Gi(Gi([],Gi(Gi([],Gi(Gi([],[Sp.store,Ap.store,Cp.store,xp.store,Rp.store,Tp.store,Lp.store,Op.store]),[Fp.store])),[kp.store])),[Pp.store])),[Mp.store,Vp.store]),jp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Bp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Kp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&il(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),zp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Bp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Qp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Jp(e.target.error);n.ft.reject(new Qp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Qp(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(tl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new $p(e)},t}(),Gp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t($i())&&el("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return tl("SimpleDb","Removing database:",t),Yp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=$i(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return qi(this,void 0,void 0,(function(){var e,n=this;return Bi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(tl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Qp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Xc(Yc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Qp(t,n))},i.onupgradeneeded=function(t){tl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){tl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return qi(this,void 0,void 0,(function(){var i,o,s,a,u;return Bi(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Bi(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=zp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Kp.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,tl("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Hp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Yp(this.Pt.delete())},t}(),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,Yc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Ui(e,t),e}(Xc);function Wp(t){return"IndexedDbTransactionError"===t.name}var $p=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(tl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(tl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Yp(n)},t.prototype.add=function(t){return tl("SimpleDb","ADD",this.store.name,t,t),Yp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Yp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),tl("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return tl("SimpleDb","DELETE",this.store.name,t),Yp(this.store.delete(t))},t.prototype.count=function(){return tl("SimpleDb","COUNT",this.store.name),Yp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){tl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Kp((function(n,r){e.onerror=function(t){var e=Jp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Kp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Hp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Kp){var a=s.catch((function(t){return o.done(),Kp.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Kp.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Yp(t){return new Kp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Jp(t.target.error);n(e)}}))}var Xp=!1;function Jp(t){var e=Gp._t($i());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Xc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xp||(Xp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Ui(e,t),e}(qp);function td(t,e){var n=sl(t);return Gp.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ed=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&tf(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ef(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ef(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(pl.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Df())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ll(this.mutations,t.mutations,(function(t,e){return rf(t,e)}))&&ll(this.baseMutations,t.baseMutations,(function(t,e){return rf(t,e)}))},t}(),nd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ol(e.mutations.length===r.length);for(var i=Cf,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),rd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=pl.min()),void 0===o&&(o=pl.min()),void 0===s&&(s=El.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),id=function(t){this.Lt=t};function od(t,e){if(e.document)return function(t,e,n){var r=Xf(t,e.name),i=Qf(e.updateTime),o=new Wl({mapValue:{fields:e.fields}}),s=Yl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ol.fromSegments(e.noDocument.path),r=ld(e.noDocument.readTime),i=Yl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ol.fromSegments(e.unknownDocument.path);return r=ld(e.unknownDocument.version),Yl.newUnknownDocument(o,r)}return il()}function sd(t,e,n){var r,i,o=ad(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:Yf(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:zf(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new xp(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=cd(e.version);return u=e.hasCommittedMutations,new xp(null,new Np(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=cd(e.version);return new xp(new Dp(h,f),null,null,!0,o,s)}return il()}function ad(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ud(t){var e=new fl(t[0],t[1]);return pl.fromTimestamp(e)}function cd(t){var e=t.toTimestamp();return new Ip(e.seconds,e.nanoseconds)}function ld(t){var e=new fl(t.seconds,t.nanoseconds);return pl.fromTimestamp(e)}function hd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ip(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return ip(t.Lt,e)})),a=fl.fromMillis(e.localWriteTimeMs);return new ed(e.batchId,a,n,s)}function fd(t){var e,n,r=ld(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ld(t.lastLimboFreeSnapshotVersion):pl.min();return void 0!==t.query.documents?(ol(1===(n=t.query).documents.length),e=Ah(bh(Zf(n.documents[0])))):e=Ah(ap(t.query)),new rd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,El.fromBase64String(t.resumeToken))}function pd(t,e){var n,r=cd(e.snapshotVersion),i=cd(e.lastLimboFreeSnapshotVersion);n=eh(e.target)?op(t.Lt,e.target):sp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Rp(e.targetId,Zl(e.target),r,o,e.sequenceNumber,i,n)}function dd(t){var e=ap({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ch(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return yd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ld(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return yd(t).put({bundleId:(n=e).id,createTime:cd(Qf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return gd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:dd(e.bundledQuery),readTime:ld(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return gd(t).put({name:(n=e).name,readTime:cd(Qf(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function yd(t){return td(t,Mp.store)}function gd(t){return td(t,Vp.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md=function(){function t(){this.Bt=new bd}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Kp.resolve()},t.prototype.getCollectionParents=function(t,e){return Kp.resolve(this.Bt.getEntries(e))},t}(),bd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new _f(ml.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new _f(ml.comparator)).toArray()},t}(),wd=function(){function t(){this.qt=new bd}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:bp(i)};return _d(t).put(o)}return Kp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[hl(e),""],!1,!0);return _d(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ep(o.parent))}return n}))},t}();function _d(t){return td(t,Pp.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ed={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Id=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t,e,n){var r=t.store(Ap.store),i=t.store(Cp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ol(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Cp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Kp.waitFor(o).next((function(){return c}))}function Sd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw il();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Id.DEFAULT_COLLECTION_PERCENTILE=10,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Id.DEFAULT=new Id(41943040,Id.DEFAULT_COLLECTION_PERCENTILE,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Id.DISABLED=new Id(-1,0,0);var Ad=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ol(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nd(t).$t({index:Ap.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Dd(t),s=Nd(t);return s.add({}).next((function(a){ol("number"==typeof a);for(var u=new ed(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return rp(t.Lt,e)})),i=n.mutations.map((function(e){return rp(t.Lt,e)}));return new Ap(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new _f((function(t,e){return cl(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Cp.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,Cp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Kp.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Nd(t).get(e).next((function(t){return t?(ol(t.userId===n.userId),hd(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Kp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Nd(t).$t({index:Ap.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ol(e.batchId>=r),o=hd(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Nd(t).$t({index:Ap.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nd(t).Nt(Ap.userMutationsIndex,n).next((function(t){return t.map((function(t){return hd(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Cp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Dd(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Ep(u);if(a===n.userId&&e.path.isEqual(l))return Nd(t).get(c).next((function(t){if(!t)throw il();ol(t.userId===n.userId),o.push(hd(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new _f(cl),i=[];return e.forEach((function(e){var o=Cp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Dd(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Ep(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Kp.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new _f(cl);return Dd(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Ep(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Nd(t).get(e).next((function(t){if(null===t)throw il();ol(t.userId===n.userId),r.push(hd(n.R,t))})))})),Kp.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Td(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Kp.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Kp.resolve();var r=IDBKeyRange.lowerBound(Cp.prefixForUser(e.userId)),i=[];return Dd(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ep(t[1]);i.push(o)}else r.done()})).next((function(){ol(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Cd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return xd(t).get(this.userId).next((function(t){return t||new Sp(e.userId,-1,"")}))},t}();function Cd(t,e,n){var r=Cp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Dd(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Nd(t){return td(t,Ap.store)}function Dd(t){return td(t,Cp.store)}function xd(t){return td(t,Sp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Rd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new kd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return pl.fromTimestamp(new fl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Od(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ol(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Od(t).$t((function(s,a){var u=fd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Kp.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Od(t).$t((function(t,n){var r=fd(n);e(r)}))},t.prototype.Xt=function(t){return Ld(t).get(Lp.key).next((function(t){return ol(null!==t),t}))},t.prototype.Zt=function(t,e){return Ld(t).put(Lp.key,e)},t.prototype.te=function(t,e){return Od(t).put(pd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Zl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Od(t).$t({range:r,index:Rp.queryTargetsIndexName},(function(t,n,r){var o=fd(n);th(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Pd(t);return e.forEach((function(e){var s=bp(e.path);i.push(o.put(new Op(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Kp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Pd(t);return Kp.forEach(e,(function(e){var o=bp(e.path);return Kp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Pd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Pd(t),i=Df();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Ep(t[1]),o=new Ol(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=bp(e.path),r=IDBKeyRange.bound([n],[hl(n)],!1,!0),i=0;return Pd(t).$t({index:Op.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Od(t).get(e).next((function(t){return t?fd(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return td(t,Rp.store)}function Ld(t){return td(t,Lp.store)}function Pd(t){return td(t,Op.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){if(t.code!==Yc.FAILED_PRECONDITION||t.message!==jp)throw t;return tl("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=cl(n,i);return 0===s?cl(r,o):s}var Vd=function(){function t(t){this.ne=t,this.buffer=new _f(Md),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Md(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ud=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;tl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return qi(e,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Wp(e=n.sent())?(tl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Fd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),jd=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Kp.resolve($c.o);var r=new Vd(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(tl("LruGarbageCollector","Garbage collection skipped; disabled"),Kp.resolve(Ed)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(tl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ed):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(tl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Zc()<=ho.DEBUG&&tl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Kp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),qd=function(){function t(t,e){this.db=t,this.garbageCollector=new jd(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Bd(t,n)},t.prototype.removeReference=function(t,e,n){return Bd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Bd(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,xd(n=t).Ot((function(t){return Cd(n,t,r).next((function(t){return t&&(i=!0),Kp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Pd(t).delete([0,bp(s.path)])}))}));i.push(u)}})).next((function(){return Kp.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Bd(t,e)},t.prototype.we=function(t,e){var n,r=Pd(t),i=$c.o;return r.$t({index:Op.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==$c.o&&e(new Ol(Ep(n)),i),i=a,n=s):i=$c.o})).next((function(){i!==$c.o&&e(new Ol(Ep(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Bd(t,e){return Pd(t).put((n=e,r=t.currentSequenceNumber,new Op(0,bp(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){vl(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return yl(this.inner)},t}(),zd=function(){function t(){this.changes=new Kd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:pl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Yl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Kp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Gd=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Wd(t).put($d(e),n)},t.prototype.removeEntry=function(t,e){var n=Wd(t),r=$d(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Wd(t).get($d(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Wd(t).get($d(e)).next((function(t){return{document:n.ye(e,t),size:Sd(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Tf();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Tf(),i=new mf(Ol.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Sd(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Kp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wd(t).$t({range:r},(function(t,e,r){for(var s=Ol.fromSegments(t);o&&Ol.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Tf(),o=e.path.length+1,s={};if(n.isEqual(pl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ad(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=xp.collectionReadTimeIndex}return Wd(t).$t(s,(function(t,n,s){if(t.length===o){var a=od(r.R,n);e.path.isPrefixOf(a.key.path)?kh(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Hd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Qd(t).get(kp.key).next((function(t){return ol(!!t),t}))},t.prototype.me=function(t,e){return Qd(t).put(kp.key,e)},t.prototype.ye=function(t,e){if(e){var n=od(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(pl.min()))return n}return Yl.newInvalidDocument(t)},t}(),Hd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Kd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Ui(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new _f((function(t,e){return cl(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=sd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Sd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=sd(e.Ie.R,Yl.newNoDocument(o,pl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Kp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(zd);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return td(t,kp.store)}function Wd(t){return td(t,xp.store)}function $d(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yd=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ol(n<r&&n>=0&&r<=11);var o=new zp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Tp.store),function(t){t.createObjectStore(Sp.store,{keyPath:Sp.keyPath}),t.createObjectStore(Ap.store,{keyPath:Ap.keyPath,autoIncrement:!0}).createIndex(Ap.userMutationsIndex,Ap.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cp.store)}(t),Xd(t),function(t){t.createObjectStore(xp.store)}(t));var s=Kp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Op.store),t.deleteObjectStore(Rp.store),t.deleteObjectStore(Lp.store)}(t),Xd(t)),s=s.next((function(){return function(t){var e=t.store(Lp.store),n=new Lp(0,0,pl.min().toTimestamp(),0);return e.put(Lp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Ap.store).Nt().next((function(n){t.deleteObjectStore(Ap.store),t.createObjectStore(Ap.store,{keyPath:Ap.keyPath,autoIncrement:!0}).createIndex(Ap.userMutationsIndex,Ap.userMutationsKeyPath,{unique:!0});var r=e.store(Ap.store),i=n.map((function(t){return r.put(t)}));return Kp.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Fp.store,{keyPath:Fp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(kp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(xp.store);e.createIndex(xp.readTimeIndex,xp.readTimeIndexPath,{unique:!1}),e.createIndex(xp.collectionReadTimeIndex,xp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Mp.store,{keyPath:Mp.keyPath})}(t),function(t){t.createObjectStore(Vp.store,{keyPath:Vp.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(xp.store).$t((function(t,n){e+=Sd(n)})).next((function(){var n=new kp(e);return t.store(kp.store).put(kp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Sp.store),r=t.store(Ap.store);return n.Nt().next((function(n){return Kp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ap.userMutationsIndex,i).next((function(r){return Kp.forEach(r,(function(r){ol(r.userId===n.userId);var i=hd(e.R,r);return Td(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Op.store),n=t.store(xp.store);return t.store(Lp.store).get(Lp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ml(n),s=[0,bp(o)];r.push(e.get(s).next((function(n){return n?Kp.resolve():(r=o,e.put(new Op(0,bp(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Kp.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Pp.store,{keyPath:Pp.keyPath});var n=e.store(Pp.store),r=new bd,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:bp(i)})}};return e.store(xp.store).$t({kt:!0},(function(t,e){var n=new ml(t);return i(n.popLast())})).next((function(){return e.store(Cp.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Ep(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Rp.store);return n.$t((function(t,r){var i=fd(r),o=pd(e.R,i);return n.put(o)}))},t}();function Xd(t){t.createObjectStore(Op.store,{keyPath:Op.keyPath}).createIndex(Op.documentTargetsIndex,Op.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Rp.store,{keyPath:Rp.keyPath}).createIndex(Rp.queryTargetsIndexName,Rp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Lp.store)}var Jd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Xc(Yc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new qd(this,i),this.Le=n+"main",this.R=new id(u),this.Be=new Gp(this.Le,11,new Yd(this.R)),this.qe=new Rd(this.referenceDelegate,this.R),this.Ut=new wd,this.Ue=(h=this.R,f=this.Ut,new Gd(h,f)),this.Ke=new vd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&el("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Xc(Yc.FAILED_PRECONDITION,Jd);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new $c(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return qi(e,void 0,void 0,(function(){return Bi(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return qi(e,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return qi(e,void 0,void 0,(function(){return Bi(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ev(e).put(new Fp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Wp(e))return tl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return tl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return tv(t).get(Tp.key).next((function(t){return Kp.resolve(e.tn(t))}))},t.prototype.en=function(t){return ev(t).delete(this.clientId)},t.prototype.nn=function(){return qi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Bi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=td(t,Fp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Kp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Kp.resolve(!0):tv(t).get(Tp.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Xc(Yc.FAILED_PRECONDITION,Jd);return!1}}return!(!e.networkEnabled||!e.inForeground)||ev(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&tl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return qi(this,void 0,void 0,(function(){var t=this;return Bi(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Tp.store,Fp.store],(function(e){var n=new Zp(e,$c.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ev(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ad.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;tl("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Up,(function(o){return i=new Zp(o,r.Ne?r.Ne.next():$c.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw el("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Xc(Yc.FAILED_PRECONDITION,jp);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return tv(t).get(Tp.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Xc(Yc.FAILED_PRECONDITION,Jd)}))},t.prototype.Ze=function(t){var e=new Tp(this.clientId,this.allowTabSynchronization,Date.now());return tv(t).put(Tp.key,e)},t.yt=function(){return Gp.yt()},t.prototype.Xe=function(t){var e=this,n=tv(t);return n.get(Tp.key).next((function(t){return e.tn(t)?(tl("IndexedDbPersistence","Releasing primary lease."),n.delete(Tp.key)):Kp.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(el("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!Yi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return tl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return el("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){el("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function tv(t){return td(t,Tp.store)}function ev(t){return td(t,Fp.store)}function nv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var rv=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Ol.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Th(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Ol(e)).next((function(t){var e=Af();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Af();return this.Ut.getCollectionParents(t,i).next((function(s){return Kp.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new gh(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Yl.newInvalidDocument(c),r=r.insert(c,l)),ef(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){kh(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Df(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof af&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),iv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Df(),i=Df(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ov=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(pl.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(wh(e)||_h(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(Zc()<=ho.DEBUG&&tl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),xh(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new _f(Rh(t));return e.forEach((function(e,r){kh(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Zc()<=ho.DEBUG&&tl("QueryEngine","Using full collection scan to execute query:",xh(e)),this.Sn.getDocumentsMatchingQuery(t,e,pl.min())},t}(),sv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new mf(cl),this.kn=new Kd((function(t){return Zl(t)}),th),this.$n=pl.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new rv(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e,n,r){return new sv(t,e,n,r)}function uv(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o;return Bi(this,(function(s){switch(s.label){case 0:return n=sl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new rv(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Df(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function cv(t,e){var n=sl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=Kp.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);ol(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function lv(t){var e=sl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function hv(t,e){var n=sl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,ol((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=Tf();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Df();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Tf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(pl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):tl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(pl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Kp.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function fv(t,e){var n=sl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function pv(t,e){var n=sl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Kp.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new rd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function dv(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s;return Bi(this,(function(a){switch(a.label){case 0:r=sl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Wp(s=a.sent()))throw s;return tl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function vv(t,e,n){var r=sl(t),i=pl.min(),o=Df();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=Ah(e),c=sl(s),l=c.kn.get(u),void 0!==l?Kp.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:pl.min(),n?o:Df())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function yv(t,e){var n=sl(t),r=sl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function gv(t){var e=sl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=sl(n),s=Tf(),a=ad(i),u=Wd(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:xp.readTimeIndex,range:c},(function(t,e){var n=od(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:ud(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function mv(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){return[2,(e=sl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Wd(t),n=pl.min(),e.$t({index:xp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ud(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Kp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Qf(n.createTime)}),Kp.resolve()},t.prototype.getNamedQuery=function(t,e){return Kp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:dd(n.bundledQuery),readTime:Qf(n.readTime)}),Kp.resolve();var n},t}(),wv=function(){function t(){this.Wn=new _f(_v.Gn),this.zn=new _f(_v.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new _v(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new _v(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ol(new ml([])),r=new _v(n,t),i=new _v(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ol(new ml([])),n=new _v(e,t),r=new _v(e,t+1),i=Df();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new _v(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),_v=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ol.comparator(t.key,e.key)||cl(t.ns,e.ns)},t.Hn=function(t,e){return cl(t.ns,e.ns)||Ol.comparator(t.key,e.key)},t}(),Ev=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new _f(_v.Gn)}return t.prototype.checkEmpty=function(t){return Kp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new ed(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new _v(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Kp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Kp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Kp.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Kp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Kp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new _v(e,0),i=new _v(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Kp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new _f(cl);return e.forEach((function(t){var e=new _v(t,0),i=new _v(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Kp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ol.isDocumentKey(i)||(i=i.child(""));var o=new _v(new Ol(i),0),s=new _f(cl);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Kp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ol(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Kp.forEach(e.mutations,(function(i){var o=new _v(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new _v(e,0),r=this.rs.firstAfterOrEqual(n);return Kp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Kp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Iv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new mf(Ol.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Kp.resolve(n?n.document.clone():Yl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Tf();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Yl.newInvalidDocument(t))})),Kp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Tf(),i=new Ol(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||kh(e,c)&&(r=r.insert(c.key,c.clone()))}return Kp.resolve(r)},t.prototype.fs=function(t,e){return Kp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Tv(this)},t.prototype.getSize=function(t){return Kp.resolve(this.size)},t}(),Tv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Ui(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Kp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(zd),Sv=function(){function t(t){this.persistence=t,this.ds=new Kd((function(t){return Zl(t)}),th),this.lastRemoteSnapshotVersion=pl.min(),this.highestTargetId=0,this.ws=0,this._s=new wv,this.targetCount=0,this.ys=kd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Kp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Kp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Kp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Kp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Kp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new kd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Kp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Kp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Kp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Kp.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Kp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Kp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Kp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Kp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Kp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Kp.resolve(n)},t.prototype.containsKey=function(t,e){return Kp.resolve(this._s.containsKey(e))},t}(),Av=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new $c(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Sv(this),this.Ut=new md,this.Ue=(n=this.Ut,new Iv(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new id(e),this.Ke=new bv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ev(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;tl("MemoryPersistence","Starting transaction:",t);var i=new Cv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Kp.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Cv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Ui(e,t),e}(qp),Nv=function(){function t(t){this.persistence=t,this.As=new wv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw il()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Kp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Kp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Kp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Kp.forEach(this.vs,(function(r){var i=Ol.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Kp.or([function(){return Kp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Dv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t,e){return"firestore_clients_"+t+"_"+e}function kv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Rv(t,e){return"firestore_targets_"+t+"_"+e}Dv.UNAUTHENTICATED=new Dv(null),Dv.GOOGLE_CREDENTIALS=new Dv("google-credentials-uid"),Dv.FIRST_PARTY=new Dv("first-party-uid");var Ov=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Xc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(el("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xc(i.error.code,i.error.message)),o?new t(e,i.state,r):(el("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Pv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=kf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Rl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(el("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Fv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(el("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mv=function(){function t(){this.activeTargetIds=kf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new mf(cl),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=xv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Mv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return qi(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Bi(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(xv(this.persistenceKey,r)))&&(o=Pv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Rv(this.persistenceKey,t));if(n){var r=Lv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Rv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return tl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){tl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){tl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(tl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void el("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return qi(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Bi(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=$c.o;if(null!=t)try{var n=JSON.parse(t);ol("number"==typeof n),e=n}catch(r){el("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==$c.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ov(this.currentUser,t,e,n),i=kv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=kv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Rv(this.persistenceKey,t),i=new Lv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Pv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ov.Vs(new Dv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Lv.Vs(r,e)},t.prototype.js=function(t){return Fv.Vs(t)},t.prototype.ii=function(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(tl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=kf();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Uv=function(){function t(){this.li=new Mv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Mv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),jv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),qv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){tl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){tl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Bv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),zv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Ui(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Wc;s.listenOnce(Bc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case qc.NO_ERROR:var e=s.getResponseJson();tl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case qc.TIMEOUT:tl("Connection",'RPC "'+t+'" timed out'),o(new Xc(Yc.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:var n=s.getStatus();if(tl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Yc).indexOf(c)>=0?c:Yc.UNKNOWN);o(new Xc(a,r.message))}else o(new Xc(Yc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Xc(Yc.UNAVAILABLE,"Connection failed."));break;default:il()}}finally{tl("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Fc,s=Da(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Hc({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($i())||"object"==typeof navigator&&"ReactNative"===navigator.product||$i().indexOf("Electron/")>=0||((r=$i()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||$i().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");tl("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new Kv({Ei:function(t){h?tl("Connection","Not sending because WebChannel is closed:",t):(l||(tl("Connection","Opening WebChannel transport."),c.open(),l=!0),tl("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,Qc.EventType.OPEN,(function(){h||tl("Connection","WebChannel transport opened.")})),p(c,Qc.EventType.CLOSE,(function(){h||(h=!0,tl("Connection","WebChannel transport closed"),f.Vi())})),p(c,Qc.EventType.ERROR,(function(t){h||(h=!0,nl("Connection","WebChannel transport errored:",t),f.Vi(new Xc(Yc.UNAVAILABLE,"The operation could not be completed")))})),p(c,Qc.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];ol(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){tl("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=hf[t];if(void 0!==e)return gf(e)}(o),a=i.message;void 0===s&&(s=Yc.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new Xc(s,a)),c.close()}else tl("Connection","WebChannel received:",n),f.Si(n)}})),p(s,Kc.STAT_EVENT,(function(t){t.stat===zc?tl("Connection","Detected buffering proxy"):t.stat===Gc&&tl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);tl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return tl("RestConnection","Received: ",t),t}),(function(e){throw nl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Bv[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(){return"undefined"!=typeof window?window:null}function Hv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){return new Kf(t,!0)}var Wv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&tl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),$v=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Wv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return qi(this,void 0,void 0,(function(){return Bi(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return qi(this,void 0,void 0,(function(){return Bi(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return qi(this,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Yc.RESOURCE_EXHAUSTED?(el(e.toString()),el("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Yc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Xc(Yc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return qi(t,void 0,void 0,(function(){return Bi(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return tl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(tl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Yv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Ui(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:il(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(ol(void 0===e||"string"==typeof e),El.fromBase64String(e||"")):(ol(void 0===e||e instanceof Uint8Array),El.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Yc.UNKNOWN:gf(t.code);return new Xc(e,t.message||"")}(u);n=new Ff(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Xf(t,i.document.name),s=Qf(i.document.updateTime);var u=new Wl({mapValue:{fields:i.document.fields}}),c=(a=Yl.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Lf(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Xf(t,i.document),s=i.readTime?Qf(i.readTime):pl.min(),u=Yl.newNoDocument(o,s),a=i.removedTargetIds||[],n=new Lf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Xf(t,i.document),s=i.removedTargetIds||[],n=new Lf([],s,o,null);else{if(!("filter"in e))return il();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new vf(i),s=h.targetId,n=new Pf(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return pl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?pl.min():e.readTime?Qf(e.readTime):pl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=tp(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=eh(i)?{documents:op(e,i)}:{query:sp(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Gf(e,n.resumeToken):n.snapshotVersion.compareTo(pl.min())>0&&(r.readTime=zf(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return il()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=tp(this.R),e.removeTarget=t,this.cr(e)},e}($v),Xv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Ui(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ol(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(ol(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Qf(e.updateTime):Qf(n)).isEqual(pl.min())&&(r=Qf(n)),new Yh(r,e.transformResults||[]);var e,n,r}))):[]),n=Qf(t.commitTime);return this.listener.Tr(n,e)}var r,i;return ol(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=tp(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return rp(e.R,t)}))};this.cr(n)},e}($v),Jv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Ui(e,t),e.prototype.br=function(){if(this.Rr)throw new Xc(Yc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Yc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xc(Yc.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Yc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xc(Yc.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Zv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(el(e),this.Vr=!1):tl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ty=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return qi(o,void 0,void 0,(function(){return Bi(this,(function(t){switch(t.label){case 0:return cy(this)?(tl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return(e=sl(t)).Or.add(4),[4,ny(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,ey(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Zv(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){return qi(this,void 0,void 0,(function(){var e,n;return Bi(this,(function(r){switch(r.label){case 0:if(!cy(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ny(t){return qi(this,void 0,void 0,(function(){var e,n;return Bi(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ry(t,e){var n=sl(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),uy(n)?ay(n):Ty(n).er()&&oy(n,e))}function iy(t,e){var n=sl(t),r=Ty(n);n.$r.delete(e),r.er()&&sy(n,e),0===n.$r.size&&(r.er()?r.ir():cy(n)&&n.Br.set("Unknown"))}function oy(t,e){t.qr.U(e.targetId),Ty(t).mr(e)}function sy(t,e){t.qr.U(e),Ty(t).yr(e)}function ay(t){t.qr=new Vf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Ty(t).start(),t.Br.Sr()}function uy(t){return cy(t)&&!Ty(t).tr()&&t.$r.size>0}function cy(t){return 0===sl(t).Or.size}function ly(t){t.qr=void 0}function hy(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){return t.$r.forEach((function(e,n){oy(t,e)})),[2]}))}))}function fy(t,e){return qi(this,void 0,void 0,(function(){return Bi(this,(function(n){return ly(t),uy(t)?(t.Br.Nr(e),ay(t)):t.Br.set("Unknown"),[2]}))}))}function py(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o;return Bi(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Ff&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o;return Bi(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),tl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,dy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Lf?t.qr.X(e):e instanceof Pf?t.qr.rt(e):t.qr.et(e),n.isEqual(pl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,lv(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(El.EMPTY_BYTE_STRING,e.snapshotVersion)),sy(a,t);var n=new rd(e.target,t,1,e.sequenceNumber);oy(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return tl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,dy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function dy(t,e,n){return qi(this,void 0,void 0,(function(){var r=this;return Bi(this,(function(i){switch(i.label){case 0:if(!Wp(e))throw e;return t.Or.add(1),[4,ny(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return lv(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return qi(r,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return tl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,ey(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function vy(t,e){return e().catch((function(n){return dy(t,n,e)}))}function yy(t){return qi(this,void 0,void 0,(function(){var e,n,r,i,o;return Bi(this,(function(s){switch(s.label){case 0:e=sl(t),n=Sy(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(cy(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,fv(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Sy(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,dy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return gy(e)&&my(e),[2]}var a}))}))}function gy(t){return cy(t)&&!Sy(t).tr()&&t.kr.length>0}function my(t){Sy(t).start()}function by(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){return Sy(t).Ar(),[2]}))}))}function wy(t){return qi(this,void 0,void 0,(function(){var e,n,r,i;return Bi(this,(function(o){for(e=Sy(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function _y(t,e,n){return qi(this,void 0,void 0,(function(){var r,i;return Bi(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=nd.from(r,e,n),[4,vy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,yy(t)];case 2:return o.sent(),[2]}}))}))}function Ey(t,e){return qi(this,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return e&&Sy(t).pr?[4,function(t,e){return qi(this,void 0,void 0,(function(){var n,r;return Bi(this,(function(i){switch(i.label){case 0:return yf(r=e.code)&&r!==Yc.ABORTED?(n=t.kr.shift(),Sy(t).sr(),[4,vy(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,yy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return gy(t)&&my(t),[2]}}))}))}function Iy(t,e){return qi(this,void 0,void 0,(function(){var n;return Bi(this,(function(r){switch(r.label){case 0:return n=sl(t),e?(n.Or.delete(2),[4,ey(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,ny(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ty(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:hy.bind(null,t),Ri:fy.bind(null,t),_r:py.bind(null,t)},(i=sl(e)).br(),new Yv(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return qi(o,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),uy(t)?ay(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),ly(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Sy(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:by.bind(null,t),Ri:Ey.bind(null,t),Ir:wy.bind(null,t),Tr:_y.bind(null,t)},(i=sl(e)).br(),new Xv(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return qi(o,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,yy(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(tl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var Ay=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Bp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xc(Yc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Cy(t,e){if(el("AsyncQueue",e+": "+t),Wp(t))return new Xc(Yc.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ny=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ol.comparator(e.key,n.key)}:function(t,e){return Ol.comparator(t.key,e.key)},this.keyedMap=Af(),this.sortedSet=new mf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Dy=function(){function t(){this.Qr=new mf(Ol.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):il():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),xy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ny.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ky=function(){this.Wr=void 0,this.listeners=[]},Ry=function(){this.queries=new Kd((function(t){return Dh(t)}),Nh),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Bi(this,(function(c){switch(c.label){case 0:if(n=sl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ky),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Cy(a,"Initialization of query '"+xh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&My(n),[2]}}))}))}function Ly(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s;return Bi(this,(function(a){return n=sl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Py(t,e){for(var n=sl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&My(n)}function Fy(t,e,n){var r=sl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function My(t){t.Gr.forEach((function(t){t.next()}))}var Vy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new xy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=xy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Uy=function(t){this.key=t},jy=function(t){this.key=t},qy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Df(),this.mutatedKeys=Df(),this.lo=Rh(t),this.fo=new Ny(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Dy,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=wh(this.query)&&i.size===this.query.limit?i.last():null,c=_h(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=kh(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),wh(this.query)||_h(this.query))for(;s.size>this.query.limit;){var l=wh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return il()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new xy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Dy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Df(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new jy(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Uy(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Df();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return xy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),By=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ky=function(t){this.key=t,this.bo=!1},zy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Kd((function(t){return Dh(t)}),Nh),this.Vo=new Map,this.So=new Set,this.Do=new mf(Ol.comparator),this.Co=new Map,this.No=new wv,this.xo={},this.Fo=new Map,this.ko=kd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Bi(this,(function(u){switch(u.label){case 0:return n=wg(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,pv(n.localStore,Ah(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Hy(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&ry(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Hy(t,e,n,r){return qi(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Bi(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return qi(this,void 0,void 0,(function(){var i,o,s;return Bi(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,vv(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(og(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,vv(t.localStore,e,!0)];case 1:return i=l.sent(),o=new qy(e,i.Bn),s=o._o(i.documents),a=Of.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),og(t,n,u.To),c=new By(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Qy(t,e){return qi(this,void 0,void 0,(function(){var n,r,i;return Bi(this,(function(o){switch(o.label){case 0:return n=sl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Nh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,dv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),iy(n.remoteStore,r.targetId),rg(n,r.targetId)})).catch(Fd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rg(n,r.targetId),[4,dv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Wy(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s;return Bi(this,(function(a){switch(a.label){case 0:r=_g(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=sl(u),f=fl.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Df()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=nf(o,l.get(o.key));null!=s&&n.push(new af(o.key,s,$l(s.value.mapValue),Xh.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new mf(cl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ug(r,i.changes)];case 3:return a.sent(),[4,yy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Cy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function $y(t,e){return qi(this,void 0,void 0,(function(){var n,r;return Bi(this,(function(i){switch(i.label){case 0:n=sl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,hv(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ol(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ol(r.bo):t.removedDocuments.size>0&&(ol(r.bo),r.bo=!1))})),[4,ug(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Fd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Yy(t,e,n){var r=sl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=sl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&My(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xy(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Bi(this,(function(c){switch(c.label){case 0:return(r=sl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new mf(Ol.comparator)).insert(o,Yl.newNoDocument(o,pl.min())),a=Df().add(o),u=new Rf(pl.min(),new Map,new _f(cl),s,a),[4,$y(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ag(r),[3,4];case 2:return[4,dv(r.localStore,e,!1).then((function(){return rg(r,e,n)})).catch(Fd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Jy(t,e){return qi(this,void 0,void 0,(function(){var n,r,i;return Bi(this,(function(o){switch(o.label){case 0:n=sl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,cv(n.localStore,e)];case 2:return i=o.sent(),ng(n,r,null),eg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ug(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Fd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zy(t,e,n){return qi(this,void 0,void 0,(function(){var r,i;return Bi(this,(function(o){switch(o.label){case 0:r=sl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=sl(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return ol(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),ng(r,e,n),eg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ug(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Fd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function tg(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s;return Bi(this,(function(a){switch(a.label){case 0:cy((n=sl(t)).remoteStore)||tl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=sl(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Cy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function eg(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function ng(t,e,n){var r=sl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function rg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||ig(t,e)}))}function ig(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(iy(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ag(t))}function og(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Uy?(t.No.addReference(o.key,e),sg(t,o)):o instanceof jy?(tl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||ig(t,o.key)):il()}}function sg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(tl("SyncEngine","New document in limbo: "+n),t.So.add(r),ag(t))}function ag(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ol(ml.fromString(e)),r=t.ko.next();t.Co.set(r,new Ky(n)),t.Do=t.Do.insert(n,r),ry(t.remoteStore,new rd(Ah(bh(n.path)),r,2,$c.o))}}function ug(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s;return Bi(this,(function(a){switch(a.label){case 0:return r=sl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=iv.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Bi(this,(function(h){switch(h.label){case 0:n=sl(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Kp.forEach(e,(function(e){return Kp.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Kp.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Wp(r=h.sent()))throw r;return tl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function cg(t,e){return qi(this,void 0,void 0,(function(){var n,r;return Bi(this,(function(i){switch(i.label){case 0:return(n=sl(t)).currentUser.isEqual(e)?[3,3]:(tl("SyncEngine","User change. New user:",e.toKey()),[4,uv(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Xc(Yc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ug(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function lg(t,e){var n=sl(t),r=n.Co.get(e);if(r&&r.bo)return Df().add(r.key);var i=Df(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function hg(t,e){return qi(this,void 0,void 0,(function(){var n,r,i;return Bi(this,(function(o){switch(o.label){case 0:return[4,vv((n=sl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&og(n,e.targetId,i.To),i)]}}))}))}function fg(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){return[2,gv((e=sl(t)).localStore).then((function(t){return ug(e,t)}))]}))}))}function pg(t,e,n,r){return qi(this,void 0,void 0,(function(){var i,o;return Bi(this,(function(s){switch(s.label){case 0:return[4,(a=(i=sl(t)).localStore,u=e,c=sl(a),l=sl(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):Kp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,yy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ng(i,e,r||null),eg(i,e),function(t,e){sl(sl(t)._n).Gt(e)}(i.localStore,e)):il(),s.label=4;case 4:return[4,ug(i,o)];case 5:return s.sent(),[3,7];case 6:tl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function dg(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Bi(this,(function(l){switch(l.label){case 0:return wg(n=sl(t)),_g(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,vg(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Iy(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],ry(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return rg(n,e),dv(n.localStore,e,!0)})),iy(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,vg(n,u)];case 5:return l.sent(),(h=sl(n)).Co.forEach((function(t,e){iy(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new mf(Ol.comparator),n.$o=!1,[4,Iy(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function vg(t,e,n){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Bi(this,(function(y){switch(y.label){case 0:n=sl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,pv(n.localStore,Ah(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,hg(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,yv(n.localStore,a)];case 8:return v=y.sent(),[4,pv(n.localStore,v)];case 9:return u=y.sent(),[4,Hy(n,yg(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function yg(t){return mh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gg(t){var e=sl(t);return sl(sl(e.localStore).persistence).fn()}function mg(t,e,n,r){return qi(this,void 0,void 0,(function(){var i,o,s;return Bi(this,(function(a){switch(a.label){case 0:return(i=sl(t)).$o?(tl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gv(i.localStore)];case 3:return o=a.sent(),s=Rf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ug(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,dv(i.localStore,e,!0)];case 6:return a.sent(),rg(i,e,r),[3,8];case 7:il(),a.label=8;case 8:return[2]}}))}))}function bg(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Bi(this,(function(p){switch(p.label){case 0:if(!(r=wg(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(tl("SyncEngine","Adding an already active target "+s),[3,5]):[4,yv(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,pv(r.localStore,a)];case 3:return u=p.sent(),[4,Hy(r,yg(a),u.targetId,!1)];case 4:p.sent(),ry(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Bi(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,dv(r.localStore,t,!1).then((function(){iy(r.remoteStore,t),rg(r,t)})).catch(Fd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function wg(t){var e=sl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$y.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xy.bind(null,e),e.vo._r=Py.bind(null,e.eventManager),e.vo.Mo=Fy.bind(null,e.eventManager),e}function _g(t){var e=sl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zy.bind(null,e),e}var Eg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return this.R=Qv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return av(this.persistence,new ov,t.initialUser,this.R)},t.prototype.qo=function(t){return new Av(Nv.bs,this.R)},t.prototype.Bo=function(t){return new Uv},t.prototype.terminate=function(){return qi(this,void 0,void 0,(function(){return Bi(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ig=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Ui(e,t),e.prototype.initialize=function(e){return qi(this,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,mv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,_g(this.Qo.syncEngine)];case 4:return n.sent(),[4,yy(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return av(this.persistence,new ov,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Ud(e,t.asyncQueue)},e.prototype.qo=function(t){var e=nv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Id.withCacheSize(this.cacheSizeBytes):Id.DEFAULT;return new Zd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Gv(),Hv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Uv},e}(Eg),Tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Ui(e,t),e.prototype.initialize=function(e){return qi(this,void 0,void 0,(function(){var n,r=this;return Bi(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Vv?(this.sharedClientState.syncEngine={ui:pg.bind(null,n),ai:mg.bind(null,n),hi:bg.bind(null,n),fn:gg.bind(null,n),ci:fg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return qi(r,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return[4,dg(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Gv();if(!Vv.yt(e))throw new Xc(Yc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=nv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Vv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ig),Sg=function(){function t(){}return t.prototype.initialize=function(t,e){return qi(this,void 0,void 0,(function(){var n=this;return Bi(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Yy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cg.bind(null,this.syncEngine),[4,Iy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Ry},t.prototype.createDatastore=function(t){var e,n,r=Qv(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new zv(e));return n=t.credentials,new Jv(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Yy(s.syncEngine,t,0)},o=qv.yt()?new qv:new jv,new ty(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new zy(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return e=sl(t),tl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,ny(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Ag=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Cg=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return qi(this,void 0,void 0,(function(){var e,n=this;return Bi(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Xc(Yc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return qi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Bi(this,(function(u){switch(u.label){case 0:return n=sl(t),r=tp(n.R)+"/documents",i={documents:e.map((function(t){return Yf(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){ol(!!e.found),e.found.name,e.found.updateTime;var n=Xf(t,e.found.name),r=Qf(e.found.updateTime),i=new Wl({mapValue:{fields:e.found.fields}});return Yl.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){ol(!!e.missing),ol(!!e.readTime);var n=Xf(t,e.missing),r=Qf(e.readTime);return Yl.newNoDocument(n,r)}(e,r):il());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ol(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new pf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return qi(this,void 0,void 0,(function(){var t,e=this;return Bi(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ol.fromPath(n);e.mutations.push(new df(r,e.precondition(r)))})),[4,function(t,e){return qi(this,void 0,void 0,(function(){var n,r,i;return Bi(this,(function(o){switch(o.label){case 0:return n=sl(t),r=tp(n.R)+"/documents",i={writes:e.map((function(t){return rp(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw il();e=pl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Xc(Yc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Xh.updateTime(e):Xh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(pl.min()))throw new Xc(Yc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xh.updateTime(e)}return Xh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Ng=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Wv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return qi(t,void 0,void 0,(function(){var t,e,n=this;return Bi(this,(function(r){return t=new Cg(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!xl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!yf(e)}return!1},t}(),Dg=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Dv.UNAUTHENTICATED,this.clientId=ul.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return qi(r,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return tl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return qi(this,void 0,void 0,(function(){return Bi(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Xc(Yc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Bp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return qi(t,void 0,void 0,(function(){var t,n;return Bi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Cy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xg(t,e){return qi(this,void 0,void 0,(function(){var n,r,i=this;return Bi(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),tl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return qi(i,void 0,void 0,(function(){return Bi(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,uv(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function kg(t,e){return qi(this,void 0,void 0,(function(){var n,r;return Bi(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Rg(t)];case 1:return n=i.sent(),tl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return qi(this,void 0,void 0,(function(){var n,r;return Bi(this,(function(i){switch(i.label){case 0:return(n=sl(t)).asyncQueue.verifyOperationInProgress(),tl("RemoteStore","RemoteStore received new credentials"),r=cy(n),n.Or.add(3),[4,ny(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,ey(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Rg(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(tl("FirestoreClient","Using default OfflineComponentProvider"),[4,xg(t,new Eg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Og(t){return qi(this,void 0,void 0,(function(){return Bi(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(tl("FirestoreClient","Using default OnlineComponentProvider"),[4,kg(t,new Sg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Lg(t){return Rg(t).then((function(t){return t.persistence}))}function Pg(t){return Rg(t).then((function(t){return t.localStore}))}function Fg(t){return Og(t).then((function(t){return t.remoteStore}))}function Mg(t){return Og(t).then((function(t){return t.syncEngine}))}function Vg(t){return qi(this,void 0,void 0,(function(){var e,n;return Bi(this,(function(r){switch(r.label){case 0:return[4,Og(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Gy.bind(null,e.syncEngine),n.onUnlisten=Qy.bind(null,e.syncEngine),n)]}}))}))}function Ug(t,e,n){var r=this;void 0===n&&(n={});var i=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(r,void 0,void 0,(function(){var r;return Bi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ag({next:function(o){e.enqueueAndForget((function(){return Ly(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Xc(Yc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Xc(Yc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vy(bh(n.path),o,{includeMetadataChanges:!0,so:!0});return Oy(t,s)},[4,Vg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function jg(t,e,n){var r=this;void 0===n&&(n={});var i=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(r,void 0,void 0,(function(){var r;return Bi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ag({next:function(n){e.enqueueAndForget((function(){return Ly(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Xc(Yc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vy(n,o,{includeMetadataChanges:!0,so:!0});return Oy(t,s)},[4,Vg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var qg=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Bg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Kg=new Map,zg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Gg=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Dv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Hg=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Qg=function(){function t(t){var e=this;this.currentUser=Dv.UNAUTHENTICATED,this.oc=new Bp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){tl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(tl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(tl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ol("string"==typeof n.accessToken),new zg(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return qi(n,void 0,void 0,(function(){return Bi(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ol(null===t||"string"==typeof t),new Dv(t)},t}(),Wg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Dv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),$g=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Wg(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Dv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t,e,n){if(!n)throw new Xc(Yc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Xg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jg(t,e,n,r){if(!0===e&&!0===r)throw new Xc(Yc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Zg(t){if(!Ol.isDocumentKey(t))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tm(t){if(Ol.isDocumentKey(t))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function em(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":il()}function nm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xc(Yc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=em(t);throw new Xc(Yc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function rm(t,e){if(e<=0)throw new Xc(Yc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var im=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Xc(Yc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xc(Yc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Jg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),om=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new im({}),this._settingsFrozen=!1,t instanceof Bg?(this._databaseId=t,this._credentials=new Gg):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xc(Yc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bg(t.options.projectId)}(t),this._credentials=new Qg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new im(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Gg;switch(t.type){case"gapi":var e=t.client;return ol(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new $g(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Xc(Yc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Kg.get(this))&&(tl("ComponentProvider","Removing Datastore"),Kg.delete(this),t.terminate()),Promise.resolve();var t},t}(),sm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new um(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),am=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),um=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,bh(r))||this)._path=r,i.type="collection",i}return Ui(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sm(this.firestore,null,new Ol(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(am);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=oo(t),Yg("collection","path",e),t instanceof om)return tm(n=ml.fromString.apply(ml,Gi([e],r))),new um(t,null,n);if(!(t instanceof sm||t instanceof um))throw new Xc(Yc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tm(n=ml.fromString.apply(ml,Gi([t.path],r)).child(ml.fromString(e))),new um(t.firestore,null,n)}function lm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=oo(t),1===arguments.length&&(e=ul.u()),Yg("doc","path",e),t instanceof om)return Zg(n=ml.fromString.apply(ml,Gi([e],r))),new sm(t,null,new Ol(n));if(!(t instanceof sm||t instanceof um))throw new Xc(Yc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zg(n=t._path.child(ml.fromString.apply(ml,Gi([e],r)))),new sm(t.firestore,t instanceof um?t.converter:null,new Ol(n))}function hm(t,e){return t=oo(t),e=oo(e),(t instanceof sm||t instanceof um)&&(e instanceof sm||e instanceof um)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fm(t,e){return t=oo(t),e=oo(e),t instanceof am&&e instanceof am&&t.firestore===e.firestore&&Nh(t._query,e._query)&&t.converter===e.converter}var pm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Wv(this,"async_queue_retry"),this.Ic=function(){var e=Hv();e&&tl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Hv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Hv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Bp;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return qi(this,void 0,void 0,(function(){var t,e=this;return Bi(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Wp(t=n.sent()))throw t;return tl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,el("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Ay.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&il()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return qi(this,void 0,void 0,(function(){var t;return Bi(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function dm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var vm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new pm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Ui(e,t),e.prototype._terminate=function(){return this._firestoreClient||gm(this),this._firestoreClient.terminate()},e}(om);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){return t._firestoreClient||gm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gm(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new qg(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new Dg(t._credentials,t._queue,a)}function mm(t,e,n){var r=this,i=new Bp;return t.asyncQueue.enqueue((function(){return qi(r,void 0,void 0,(function(){var r;return Bi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,xg(t,n)];case 1:return o.sent(),[4,kg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===Yc.FAILED_PRECONDITION||s.code===Yc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function bm(t){if(t._initialized||t._terminated)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),_m=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(El.fromBase64String(e))}catch(n){throw new Xc(Yc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(El.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Em=function(t){this._methodName=t},Im=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xc(Yc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xc(Yc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return cl(this._lat,t._lat)||cl(this._long,t._long)},t}(),Tm=/^__.*__$/,Sm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new af(t,this.data,this.fieldMask,e,this.fieldTransforms):new sf(t,this.data,e,this.fieldTransforms)},t}(),Am=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new af(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw il()}}var Nm=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Wm(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Cm(this.Nc)&&Tm.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Dm=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Qv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Nm({Nc:t,methodName:e,qc:n,path:wl.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function xm(t){var e=t._freezeSettings(),n=Qv(t._databaseId);return new Dm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function km(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);zm("Data must be an object, but it was:",s,r);var a,u,c=Bm(r,s);if(o.merge)a=new _l(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=Gm(e,f[h],n);if(!s.contains(p))throw new Xc(Yc.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");$m(l,p)||l.push(p)}a=new _l(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Sm(new Wl(c),a,u)}var Rm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Em);function Om(t,e,n){return new Nm({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Lm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype._toFieldTransform=function(t){return new $h(t.path,new qh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Em),Pm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Ui(e,t),e.prototype._toFieldTransform=function(t){var e=Om(this,t,!0),n=this.Kc.map((function(t){return qm(t,e)})),r=new Bh(n);return new $h(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Em),Fm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Ui(e,t),e.prototype._toFieldTransform=function(t){var e=Om(this,t,!0),n=this.Kc.map((function(t){return qm(t,e)})),r=new zh(n);return new $h(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Em),Mm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Ui(e,t),e.prototype._toFieldTransform=function(t){var e=new Hh(t.R,Fh(t.R,this.Qc));return new $h(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Em);function Vm(t,e,n,r){var i=t.Uc(1,e,n);zm("Data must be an object, but it was:",i,r);var o=[],s=Wl.empty();vl(r,(function(t,r){var a=Qm(e,t,n);r=oo(r);var u=i.Oc(a);if(r instanceof Rm)o.push(a);else{var c=qm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new _l(o);return new Am(s,a,i.fieldTransforms)}function Um(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Gm(e,r,n)],u=[i];if(o.length%2!=0)throw new Xc(Yc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Gm(e,o[c])),u.push(o[c+1]);for(var l=[],h=Wl.empty(),f=a.length-1;f>=0;--f)if(!$m(l,a[f])){var p=a[f],d=u[f];d=oo(d);var v=s.Oc(p);if(d instanceof Rm)l.push(p);else{var y=qm(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new _l(l);return new Am(h,g,s.fieldTransforms)}function jm(t,e,n,r){return void 0===r&&(r=!1),qm(n,t.Uc(r?4:3,e))}function qm(t,e){if(Km(t=oo(t)))return zm("Unsupported field value:",e,t),Bm(t,e);if(t instanceof Em)return function(t,e){if(!Cm(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=qm(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=oo(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=fl.fromDate(t);return{timestampValue:zf(e.R,n)}}if(t instanceof fl)return n=new fl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:zf(e.R,n)};if(t instanceof Im)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _m)return{bytesValue:Gf(e.R,t._byteString)};if(t instanceof sm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+em(t))}(t,e)}function Bm(t,e){var n={};return yl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vl(t,(function(t,r){var i=qm(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Km(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof fl||t instanceof Im||t instanceof _m||t instanceof sm||t instanceof Em)}function zm(t,e,n){if(!Km(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=em(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function Gm(t,e,n){if((e=oo(e))instanceof wm)return e._internalPath;if("string"==typeof e)return Qm(t,e);throw Wm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Hm=new RegExp("[~\\*/\\[\\]]");function Qm(t,e,n){if(e.search(Hm)>=0)throw Wm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wm.bind.apply(wm,Gi([void 0],e.split(".")))))._internalPath}catch(Wb){throw Wm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Wm(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Xc(Yc.INVALID_ARGUMENT,(a+=". ")+t+u)}function $m(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ym=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Xm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Jm("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Xm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ym);function Jm(t,e){return"string"==typeof e?Qm(t,e):e instanceof wm?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Ui(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Jm("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ym),eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(tb),nb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Zm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new eb(n._firestore,n._userDataWriter,r.key,r,new Zm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xc(Yc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:rb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function rb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return il()}}function ib(t,e){return t instanceof tb&&e instanceof tb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nb&&e instanceof nb&&t._firestore===e._firestore&&fm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){if(_h(t)&&0===t.explicitOrderBy.length)throw new Xc(Yc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sb=function(){};function ab(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ub=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Ui(e,t),e.prototype._apply=function(t){var e,n,r,i=xm(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){vb(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(db(r,t,h))}a={arrayValue:{values:u}}}else a=db(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vb(s,o),a=jm(n,"where",s,"in"===o||"not-in"===o);var f=nh.create(i,o,a);return function(t,e){if(e.g()){var n=Ih(t);if(null!==n&&!n.isEqual(e.field))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Eh(t);null!==r&&yb(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new am(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new gh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(sb),cb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Ui(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ph(e,n);return function(t,e){if(null===Eh(t)){var n=Ih(t);null!==n&&yb(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new am(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new gh(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(sb),lb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Ui(e,t),e.prototype._apply=function(t){return new am(t.firestore,t.converter,Ch(t._query,this.Hc,this.Jc))},e}(sb),hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Ui(e,t),e.prototype._apply=function(t){var e,n,r=pb(t,this.type,this.Yc,this.Xc);return new am(t.firestore,t.converter,(e=t._query,n=r,new gh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(sb),fb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Ui(e,t),e.prototype._apply=function(t){var e,n,r=pb(t,this.type,this.Yc,this.Xc);return new am(t.firestore,t.converter,(e=t._query,n=r,new gh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(sb);function pb(t,e,n,r){if(n[0]=oo(n[0]),n[0]instanceof Ym)return function(t,e,n,r,i){if(!r)throw new Xc(Yc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Sh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(ql(e,r.key));else{var c=r.data.field(u.field);if(Cl(c))throw new Xc(Yc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new hh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=xm(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Xc(Yc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Th(t)&&-1!==c.indexOf("/"))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ml.fromString(c));if(!Ol.isDocumentKey(l))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ol(l);a.push(ql(e,h))}else{var f=jm(n,r,c);a.push(f)}}return new hh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function db(t,e,n){if("string"==typeof(n=oo(n))){if(""===n)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Th(e)&&-1!==n.indexOf("/"))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ml.fromString(n));if(!Ol.isDocumentKey(r))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ql(t,new Ol(r))}if(n instanceof sm)return ql(t,n._key);throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+em(n)+".")}function vb(t,e){if(!Array.isArray(t)||0===t.length)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yb(t,e,n){if(!n.isEqual(e))throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ll(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Al(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw il()}},t.prototype.convertObject=function(t,e){var n=this,r={};return vl(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Im(Sl(t.latitude),Sl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Nl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Dl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Tl(t);return new fl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ml.fromString(t);ol(mp(n));var r=new Bg(n.get(1),n.get(3)),i=new Ol(n.popFirst(5));return r.isEqual(e)||el("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Ui(e,t),e.prototype.convertBytes=function(t){return new _m(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sm(this.firestore,null,e)},e}(gb),wb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=xm(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=_b(t,this._firestore),i=mb(r.converter,e,n),o=km(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=_b(t,this._firestore);return o="string"==typeof(e=oo(e))||e instanceof wm?Um(this._dataReader,"WriteBatch.update",s._key,e,n,r):Vm(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Xh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=_b(t,this._firestore);return this._mutations=this._mutations.concat(new pf(e._key,Xh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Xc(Yc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e){if((t=oo(t)).firestore!==e)throw new Xc(Yc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Ui(e,t),e.prototype.convertBytes=function(t){return new _m(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sm(this.firestore,null,e)},e}(gb);function Ib(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nm(t,sm);var o=nm(t.firestore,vm),s=xm(o);return Sb(o,[("string"==typeof(e=oo(e))||e instanceof wm?Um(s,"updateDoc",t._key,e,n,r):Vm(s,"updateDoc",t._key,e)).toMutation(t._key,Xh.exists(!0))])}function Tb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=oo(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||dm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(dm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof sm)c=nm(t.firestore,vm),l=bh(t._key.path),u={next:function(e){i[a]&&i[a](Ab(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=nm(t,am);c=nm(p.firestore,vm),l=p._query;var d=new Eb(c);u={next:function(t){i[a]&&i[a](new nb(c,d,p,t))},error:i[a+1],complete:i[a+2]},ob(t._query)}return function(t,e,n,r){var i=this,o=new Ag(r),s=new Vy(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return qi(i,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return e=Oy,[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return qi(i,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return e=Ly,[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(ym(c),l,h,u)}function Sb(t,e){return function(t,e){var n=this,r=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var n;return Bi(this,(function(i){switch(i.label){case 0:return n=Wy,[4,Mg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(ym(t),e)}function Ab(t,e,n){var r=n.docs.get(e._key),i=new Eb(t);return new tb(t,i,e._key,r,new Zm(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Ui(e,t),e.prototype.get=function(e){var n=this,r=_b(e,this._firestore),i=new Eb(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new tb(n._firestore,i,r._key,t._document,new Zm(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=xm(t)}return t.prototype.get=function(t){var e=this,n=_b(t,this._firestore),r=new bb(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return il();var i=t[0];if(i.isFoundDocument())return new Ym(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ym(e._firestore,r,n._key,null,n.converter);throw il()}))},t.prototype.set=function(t,e,n){var r=_b(t,this._firestore),i=mb(r.converter,e,n),o=km(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=_b(t,this._firestore);return o="string"==typeof(e=oo(e))||e instanceof wm?Um(this._dataReader,"Transaction.update",s._key,e,n,r):Vm(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=_b(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(){if("undefined"==typeof Uint8Array)throw new Xc(Yc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Db(){if("undefined"==typeof atob)throw new Xc(Yc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var xb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Db(),new t(_m.fromBase64String(e))},t.fromUint8Array=function(e){return Nb(),new t(_m.fromUint8Array(e))},t.prototype.toBase64=function(){return Db(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Nb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),kb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){bm(t=nm(t,vm));var n=ym(t),r=t._freezeSettings(),i=new Sg;return mm(n,i,new Ig(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){bm(t=nm(t,vm));var e=ym(t),n=t._freezeSettings(),r=new Sg;return mm(e,r,new Tg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Xc(Yc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Bp;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return qi(e,void 0,void 0,(function(){var e;return Bi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return Gp.yt()?(e=t+"main",[4,Gp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(nv(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Rb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Bg||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||nl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=nm(t,om))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&nl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=ji({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hi.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),Hi.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xc(Yc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Hg(new zg(o,new Dv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return qi(e,void 0,void 0,(function(){var e,n;return Bi(this,(function(r){switch(r.label){case 0:return[4,Lg(t)];case 1:return e=r.sent(),[4,Fg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=sl(i),o.Or.delete(0),ey(o))]}var i,o}))}))}))}(ym(nm(this._delegate,vm)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return qi(e,void 0,void 0,(function(){var e,n;return Bi(this,(function(r){switch(r.label){case 0:return[4,Lg(t)];case 1:return e=r.sent(),[4,Fg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return qi(this,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return(e=sl(t)).Or.add(0),[4,ny(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ym(nm(this._delegate,vm)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(e,void 0,void 0,(function(){var e;return Bi(this,(function(r){switch(r.label){case 0:return e=tg,[4,Mg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ym(nm(this._delegate,vm)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new Ag(e);return t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return e=function(t,e){sl(t).Gr.add(e),e.next()},[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var e;return Bi(this,(function(n){switch(n.label){case 0:return e=function(t,e){sl(t).Gr.delete(e)},[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(ym(e=nm(e,vm)),dm(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Hb(this,cm(this._delegate,t))}catch(e){throw Vb(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Mb(this,lm(this._delegate,t))}catch(e){throw Vb(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Kb(this,function(t,e){if(t=nm(t,om),Yg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new am(t,null,(n=e,new gh(ml.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw Vb(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var n;return Bi(this,(function(i){switch(i.label){case 0:return[4,(o=t,Og(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Ng(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(ym(e=this._delegate),(function(r){return function(e){return t(new Lb(n,e))}(new Cb(e,r))}))},t.prototype.batch=function(){var t=this;return ym(this._delegate),new Pb(new wb(this._delegate,(function(e){return Sb(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Xc(Yc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Xc(Yc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Ob=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Ui(e,t),e.prototype.convertBytes=function(t){return new xb(new _m(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Mb.eu(e,this.firestore,null)},e}(gb);var Lb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Ob(t)}return t.prototype.get=function(t){var e=this,n=Qb(t);return this._delegate.get(n).then((function(t){return new qb(e._firestore,new tb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Qb(t);return n?(Xg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Gi([s,e,n],i)),this},t.prototype.delete=function(t){var e=Qb(t);return this._delegate.delete(e),this},t}(),Pb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Qb(t);return n?(Xg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Gi([s,e,n],i)),this},t.prototype.delete=function(t){var e=Qb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Fb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new eb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Bb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Ob(e),n),i.set(n,o)),o},t}();Fb.su=new WeakMap;var Mb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ob(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new sm(n._delegate,r,new Ol(e)))},t.eu=function(e,n,r){return new t(n,new sm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Hb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Hb(this.firestore,cm(this._delegate,t))}catch(e){throw Vb(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=oo(t))instanceof sm&&hm(this._delegate,t)},t.prototype.set=function(t,e){e=Xg("DocumentReference.set",e);try{return function(t,e,n){t=nm(t,sm);var r=nm(t.firestore,vm),i=mb(t.converter,e,n);return Sb(r,[km(xm(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Xh.none())])}(this._delegate,t,e)}catch(n){throw Vb(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ib(this._delegate,t):Ib.apply(void 0,Gi([this._delegate,t,e],n))}catch(i){throw Vb(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Sb(nm((t=this._delegate).firestore,vm),[new pf(t._key,Xh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ub(e),i=jb(e,(function(e){return new qb(t.firestore,new tb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Tb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nm(t,sm);var e=nm(t.firestore,vm),n=ym(e),r=new Eb(e);return function(t,e){var n=this,r=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var n;return Bi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return qi(this,void 0,void 0,(function(){var r,i;return Bi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=sl(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Xc(Yc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Cy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,Pg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new tb(e,r,t._key,n,new Zm(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nm(t,sm);var e=nm(t.firestore,vm);return Ug(ym(e),t._key,{source:"server"}).then((function(n){return Ab(e,t,n)}))}(this._delegate):function(t){t=nm(t,sm);var e=nm(t.firestore,vm);return Ug(ym(e),t._key).then((function(n){return Ab(e,t,n)}))}(this._delegate)).then((function(t){return new qb(e.firestore,new tb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Fb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Vb(t,e,n){return t.message=t.message.replace(e,n),t}function Ub(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!dm(r))return r}return{}}function jb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=dm(t[0])?t[0]:dm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Mb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return ib(this._delegate,t._delegate)},t}(),Bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(qb),Kb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ob(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ab(this._delegate,(o=r,s=i=n,a=Jm("where",e),new ub(a,s,o))))}catch(i){throw Vb(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ab(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Jm("orderBy",t);return new cb(r,n)}(e,n)))}catch(r){throw Vb(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ab(this._delegate,(rm("limit",n=e),new lb("limit",n,"F"))))}catch(r){throw Vb(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ab(this._delegate,(rm("limitToLast",n=e),new lb("limitToLast",n,"L"))))}catch(r){throw Vb(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw Vb(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw Vb(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fb("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw Vb(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fb("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw Vb(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return fm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nm(t,am);var e=nm(t.firestore,vm),n=ym(e),r=new Eb(e);return function(t,e){var n=this,r=new Bp;return t.asyncQueue.enqueueAndForget((function(){return qi(n,void 0,void 0,(function(){var n;return Bi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return qi(this,void 0,void 0,(function(){var r,i,o,s,a;return Bi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,vv(t,e,!0)];case 1:return a=u.sent(),r=new qy(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Cy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Pg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new nb(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nm(t,am);var e=nm(t.firestore,vm),n=ym(e),r=new Eb(e);return jg(n,t._query,{source:"server"}).then((function(n){return new nb(e,r,t,n)}))}(this._delegate):function(t){t=nm(t,am);var e=nm(t.firestore,vm),n=ym(e),r=new Eb(e);return ob(t._query),jg(n,t._query).then((function(n){return new nb(e,r,t,n)}))}(this._delegate)).then((function(t){return new Gb(e.firestore,new nb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ub(e),i=jb(e,(function(e){return new Gb(t.firestore,new nb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Tb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Fb.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),zb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Bb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Gb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Kb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Bb(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new zb(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Bb(n._firestore,r))}))},t.prototype.isEqual=function(t){return ib(this._delegate,t._delegate)},t}(),Hb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Ui(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Mb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Mb(this.firestore,void 0===t?lm(this._delegate):lm(this._delegate,t))}catch(e){throw Vb(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=nm(e.firestore,vm),i=lm(e),o=mb(e.converter,n),Sb(r,[km(xm(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Xh.exists(!1))]).then((function(){return i}))).then((function(t){return new Mb(s.firestore,t)}))},e.prototype.isEqual=function(t){return hm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Fb.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Kb);function Qb(t){return nm(t,sm)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wb,$b=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(wm.bind.apply(wm,Gi([void 0],t)))}return t.documentId=function(){return new t(wl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=oo(t))instanceof wm&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Yb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Lm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Rm("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pm("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fm("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new Mm("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Xb={Firestore:Rb,GeoPoint:Im,Timestamp:fl,Blob:xb,Transaction:Lb,WriteBatch:Pb,DocumentReference:Mb,DocumentSnapshot:qb,Query:Kb,QueryDocumentSnapshot:Bb,QuerySnapshot:Gb,CollectionReference:Hb,FieldPath:$b,FieldValue:Yb,setLogLevel:function(t){var e;e=t,Jc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(Wb=Po).INTERNAL.registerComponent(new so("firestore",(function(t){return function(t,e){return new Rb(t,new vm(t,e),new kb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Xb))),Wb.registerVersion("@firebase/firestore","2.3.10");export{Pn as F,di as T,Xn as a,Jn as b,Gn as c,_e as d,ir as e,tr as f,Ri as g,Di as h,Po as i,Mi as j,qn as o,ee as r,u as t,le as u,Oi as v,Tn as w};
